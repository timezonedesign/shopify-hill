// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Logger","../../core/typedArrayUtil","./checkWebGLError","./enums"],function(v,y,x,u,r){const m=y.getLogger("esri.views.webgl.BufferObject");return function(){function n(g,c,h,f,l){this._context=g;this.bufferType=c;this.usage=h;this._glName=null;this._size=-1;this._indexType=void 0;g.instanceCounter.increment(r.ResourceType.Buffer,this);this._glName=this._context.gl.createBuffer();
u.checkWebGLError(this._context.gl);f&&this.setData(f,l)}n.createIndex=function(g,c,h,f){return new n(g,34963,c,h,f)};n.createVertex=function(g,c,h){return new n(g,34962,c,h)};var q=n.prototype;q.dispose=function(){var g;null!=(g=this._context)&&g.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(r.ResourceType.Buffer,this),this._context=null):this._glName&&m.warn("Leaked WebGL buffer object")};q.setData=function(g,c){if(g){if("number"===
typeof g){if(0>g&&m.error("Buffer size cannot be negative!"),this._size=g,34963===this.bufferType&&c)switch(this._indexType=c,this._size=g,c){case 5123:g*=2;break;case 5125:g*=4}}else c=g.byteLength,x.isUint16Array(g)&&(c/=2,this._indexType=5123),x.isUint32Array(g)&&(c/=4,this._indexType=5125),this._size=c;c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);var h=this._context.gl;h.bufferData(this.bufferType,g,this.usage);u.checkWebGLError(h);this._context.bindVAO(c)}};
q.setSubData=function(g,c=0,h=0,f=g.byteLength){if(g){(0>c||c>=this._size)&&m.error("offset is out of range!");var l=c,a=h,b=f,d=g.byteLength;x.isUint16Array(g)?(d/=2,l*=2,a*=2,b*=2):x.isUint32Array(g)&&(d/=4,l*=4,a*=4,b*=4);void 0===f&&(f=d-1);h>=f&&m.error("end must be bigger than start!");c+h-f>this._size&&m.error("An attempt to write beyond the end of the buffer!");c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);h=this._context.gl;f=ArrayBuffer.isView(g)?
g.buffer:g;g=0===a&&b===g.byteLength?f:f.slice(a,b);h.bufferSubData(this.bufferType,l,g);u.checkWebGLError(h);this._context.bindVAO(c)}};q.setSubDataFromView=function(g,c,h,f){if(g){(0>c||c>=this._size)&&m.error("offset is out of range!");h>=f&&m.error("end must be bigger than start!");c+h-f>this._size&&m.error("An attempt to write beyond the end of the buffer!");var l=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);var a=this._context.gl;h=0===h&&f===g.length?
g:g.subarray(h,f);a.bufferSubData(this.bufferType,c*g.BYTES_PER_ELEMENT,h);u.checkWebGLError(a);this._context.bindVAO(l)}};v._createClass(n,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return n}()})},"esri/views/webgl/checkWebGLError":function(){define(["exports",
"../../core/Error","../../core/has","../../core/Logger"],function(v,y,x,u){function r(q,g){switch(g){case q.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case q.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case q.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case q.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";
case q.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case q.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const m=u.getLogger("esri/views/webgl"),n=!!x("enable-feature:webgl-debug");v.checkWebGLError=function(q){if(n){const g=q.getError();g&&(q=r(q,g),m.error(new y("webgl-error","WebGL error occured",{message:q,stack:Error().stack})))}};v.hasFeatureFlagWebGLDebug=n;v.webglDebugEnabled=function(){return n};v.webglValidateShadersEnabled=
function(){return n};Object.defineProperty(v,"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],function(v){v.ResourceType=void 0;var y=v.ResourceType||(v.ResourceType={});y[y.Texture=0]="Texture";y[y.Buffer=1]="Buffer";y[y.VAO=2]="VAO";y[y.VertexShader=3]="VertexShader";y[y.FragmentShader=4]="FragmentShader";y[y.Program=5]="Program";y[y.Framebuffer=6]="Framebuffer";y[y.Renderbuffer=7]="Renderbuffer";y[y.COUNT=8]="COUNT";v.BASE_TEXTURE_UNIT=33984;v.DepthStencilAttachment=
33306;Object.defineProperty(v,"__esModule",{value:!0})})},"esri/views/webgl/FramebufferObject":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/maybe ./checkWebGLError ./enums ./Renderbuffer ./Texture ./Util".split(" "),function(v,y,x,u,r,m,n,q){function g(f){return"type"in f&&"texture"===f.type}function c(f,l){void 0!==l.width&&0<=l.width&&void 0!==l.height&&0<=l.height?l.width===f.width&&l.height===f.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):
(l.width=f.width,l.height=f.height)}const h=y.getLogger("esri.views.webgl.FrameBufferObject");y=function(){function f(a,b,d=null,e=null){this._context=a;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;this._initialized=!1;this._desc={...b};a.instanceCounter.increment(r.ResourceType.Framebuffer,this);if(x.isSome(d))for(Array.isArray(d)||(d=[d]),b=0;b<d.length;++b){var k,p;const D=d[b];let E;g(D)?(E=D.descriptor,this._colorAttachments.set(36064+b,D)):(E=
D,this._colorAttachments.set(36064+b,new n(a,D)));0!==(null==(k=this._desc)?void 0:k.colorTarget)&&2!==(null==(p=this._desc)?void 0:p.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");this._validateColorAttachmentPoint(36064+b);this._validateTextureDimensions(E,this._desc)}if(e instanceof m){var A;a=null!=(A=this._desc.depthStencilTarget)?A:3;2===a?this._stencilAttachment=e:1===a||3===a?this._depthAttachment=
e:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');c(e.descriptor,this._desc)}else if(x.isSome(e)){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");let D;g(e)?(this._depthStencilTexture=e,D=e.descriptor):this._depthStencilTexture=new n(this._context,e);this._validateTextureDimensions(D,
this._desc)}}var l=f.prototype;l.dispose=function(){if(this._desc){var a=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(a);this._context.instanceCounter.decrement(r.ResourceType.Framebuffer,this);this._desc=null}};l.getColorTexture=function(a){return(a=this._colorAttachments.get(a))&&g(a)?a:null};l.framebufferTexture2D=function(a,
b,d=36064,e=3553,k=0){b.framebufferTexture2D(b.FRAMEBUFFER,d,e,a,k)};l.attachColorTexture=function(a,b=36064){a&&(this._validateColorAttachmentPoint(b),this._validateTextureDimensions(a.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(a.glName,this._context.gl,b)),this._colorAttachments.set(b,a))};l.detachColorTexture=function(a=36064){const b=this._colorAttachments.get(a);if(g(b))return this._initialized&&(this._context.bindFramebuffer(this),
this.framebufferTexture2D(null,this._context.gl,a)),this._colorAttachments.delete(a),b};l.attachDepthStencilTexture=function(a){if(!x.isNone(a)){var b=a.descriptor;34041!==b.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==b.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");
this._validateTextureDimensions(b,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(a.glName,this._context.gl,r.DepthStencilAttachment));this._depthStencilTexture=a}};l.detachDepthStencilTexture=function(){const a=this._depthStencilTexture;a&&this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,
this._context.gl,r.DepthStencilAttachment));this._depthStencilTexture=null;return a};l.attachDepthStencilBuffer=function(a){if(!x.isNone(a)){var b=a.descriptor;34041!==b.internalFormat&&33189!==b.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");c(b,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===b.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,
1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,a.glName));this._depthAttachment=a}};l.detachDepthStencilBuffer=function(){const a=this._context.gl,b=this._depthAttachment;b&&this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,null));this._depthAttachment=null;return b};l.detachAll=function(){this.detachColorTexture();
this.detachDepthStencilBuffer();this.detachDepthStencilTexture()};l.copyToTexture=function(a,b,d,e,k,p,A){(0>a||0>b||0>k||0>p)&&console.error("Offsets cannot be negative!");(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");var D=this._desc;const E=A.descriptor;3553!==A.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+d>D.width||b+e>D.height||k+d>E.width||p+e>E.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
D=this._context;A=D.bindTexture(A,n.TEXTURE_UNIT_FOR_UPDATES);D.bindFramebuffer(this);D.gl.copyTexSubImage2D(3553,0,k,p,a,b,d,e);D.bindTexture(A,n.TEXTURE_UNIT_FOR_UPDATES)};l.readPixels=function(a,b,d,e,k,p,A){(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");A||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,d,e,k,p,A)};l.resize=function(a,b){const d=this._desc;if(d.width!==a||d.height!==b)if(this._initialized){d.width=
a;d.height=b;this._colorAttachments.forEach(e=>{e&&e.resize(a,b)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(a,b);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(a,b),this._stencilAttachment&&this._stencilAttachment.resize(a,b);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else d.width=a,d.height=b,this._colorAttachments.forEach(e=>{e&&e.resize(a,b)}),this._depthStencilTexture&&
this._depthStencilTexture.resize(a,b)};l.initializeAndBind=function(a=3553){var b,d,e,k;const p=this._context.gl;if(this._initialized)p.bindFramebuffer(p.FRAMEBUFFER,this.glName);else{this._glName&&p.deleteFramebuffer(this._glName);var A=this._context,D=p.createFramebuffer(),E=this._desc,w=null!=(b=E.colorTarget)?b:1;b=null!=(d=E.width)?d:1;d=null!=(e=E.height)?e:1;p.bindFramebuffer(p.FRAMEBUFFER,D);0===this._colorAttachments.size&&(0===w?this._colorAttachments.set(36064,new n(A,{target:2===this.descriptor.colorTarget?
34067:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:E.width,height:E.height})):(e=new m(A,{internalFormat:32854,width:b,height:d}),this._colorAttachments.set(36064,e)));this._colorAttachments.forEach((F,C)=>{F&&(g(F)?this.framebufferTexture2D(F.glName,p,C,a):p.framebufferRenderbuffer(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.RENDERBUFFER,F.glName))});e=null!=(k=E.depthStencilTarget)?k:0;switch(e){case 1:case 3:this._depthAttachment||(this._depthAttachment=new m(A,{internalFormat:1===
E.depthStencilTarget?33189:34041,width:b,height:d}));p.framebufferRenderbuffer(p.FRAMEBUFFER,1===e?p.DEPTH_ATTACHMENT:p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new m(A,{internalFormat:36168,width:b,height:d}));p.framebufferRenderbuffer(p.FRAMEBUFFER,p.STENCIL_ATTACHMENT,p.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(A.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new n(A,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:b,height:d})),this.framebufferTexture2D(this._depthStencilTexture.glName,p,p.DEPTH_STENCIL_ATTACHMENT,a)}u.webglValidateShadersEnabled()&&p.checkFramebufferStatus(p.FRAMEBUFFER)!==p.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=D;this._initialized=!0}};l._disposeColorAttachments=function(){this._colorAttachments.forEach((a,b)=>{if(g(a))this._initialized&&
(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,b)),a.dispose();else if(a instanceof WebGLRenderbuffer){const d=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,b,d.RENDERBUFFER,null));this._context.gl.deleteRenderbuffer(a)}});this._colorAttachments.clear()};l._disposeDepthStencilAttachments=function(){const a=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),
a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),
this.framebufferTexture2D(null,a,a.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};l._validateTextureDimensions=function(a,b){3553!==a.target&&34067!==a.target&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!");void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height?b.width===a.width&&b.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):(b.width=a.width,b.height=a.height)};l._validateColorAttachmentPoint=
function(a){if(-1===f._MAX_COLOR_ATTACHMENTS){const b=this._context.capabilities.drawBuffers;f._MAX_COLOR_ATTACHMENTS=b?this._context.gl.getParameter(b.MAX_COLOR_ATTACHMENTS):1}a-=36064;a+1>f._MAX_COLOR_ATTACHMENTS&&h.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${a+1}. Implementation supports up to ${f._MAX_COLOR_ATTACHMENTS} color attachments`)};v._createClass(f,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},
{key:"colorTexture",get:function(){const a=this._colorAttachments.get(36064);return a&&g(a)?a:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}},{key:"gpuMemoryUsage",
get:function(){return q.getGpuMemoryUsage(this.colorAttachment)+q.getGpuMemoryUsage(this.depthStencilAttachment)}}]);return f}();y._MAX_COLOR_ATTACHMENTS=-1;return y})},"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers","./enums"],function(v,y){return function(){function x(r,m){this._context=r;this._desc=m;this._context.instanceCounter.increment(y.ResourceType.Renderbuffer,this);r=this._context.gl;this.glName=r.createRenderbuffer();this._context.bindRenderbuffer(this);
r.renderbufferStorage(r.RENDERBUFFER,m.internalFormat,m.width,m.height)}var u=x.prototype;u.resize=function(r,m){const n=this._desc;if(n.width!==r||n.height!==m)n.width=r,n.height=m,r=this._context.gl,this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)};u.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(y.ResourceType.Renderbuffer,this),this._context=null)};v._createClass(x,
[{key:"descriptor",get:function(){return this._desc}}]);return x}()})},"esri/views/webgl/Texture":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/mathUtils ../../core/maybe ./checkWebGLError ./enums ./capabilities/isWebGL2Context".split(" "),function(v,y,x,u,r,m){let n=function(){function q(c,h,f=null){this._context=c;this.type="texture";this._glName=null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;c.instanceCounter.increment(r.ResourceType.Texture,
this);this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...h};34067===this._descriptor.target?this.setDataCubeMap(f):this.setData(f)}var g=q.prototype;g.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(r.ResourceType.Texture,this))};g.release=function(){this.dispose()};
g.resize=function(c,h){const f=this._descriptor;if(f.width!==c||f.height!==h)f.width=c,f.height=h,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null)};g.setDataCubeMap=function(c=null){for(let h=34069;34074>=h;h++)this.setData(c,h)};g.setData=function(c,h=3553){if(this._context&&this._context.gl){var f=this._context.gl;this._glName||(this._glName=f.createTexture());void 0===c&&(c=null);null===c&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||
4);var l=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES),a=this._descriptor;q._validateTexture(this._context,a);f.pixelStorei(f.UNPACK_ALIGNMENT,a.unpackAlignment);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);var b=a.pixelFormat,d=a.internalFormat?a.internalFormat:this._deriveInternalFormat(b,a.dataType);if(c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement){var e=
c.width,k=c.height;c instanceof HTMLVideoElement&&(e=c.videoWidth,k=c.videoHeight);f.texImage2D(h,0,d,b,a.dataType,c);u.checkWebGLError(f);a.hasMipmap&&this.generateMipmap();void 0===a.width&&(a.width=e);void 0===a.height&&(a.height=k)}else{null!=a.width&&null!=a.height||console.error("Width and height must be specified!");f.DEPTH24_STENCIL8&&d===f.DEPTH_STENCIL&&(d=f.DEPTH24_STENCIL8);e=a.width;k=a.height;var p=c;if(x.isSome(p)&&"type"in p&&"compressed"===p.type)for(b=Math.round(Math.log(Math.max(e,
k))/Math.LN2)+1,a.hasMipmap=a.hasMipmap&&b===c.levels.length,b=0;;++b){f.compressedTexImage2D(h,b,d,e,k,0,c.levels[Math.min(b,c.levels.length-1)]);if(1===e&&1===k||!a.hasMipmap)break;e=Math.max(1,e>>1);k=Math.max(1,k>>1)}else if(x.isSome(c))f.texImage2D(h,0,d,e,k,0,b,a.dataType,c),u.checkWebGLError(f),a.hasMipmap&&this.generateMipmap();else for(c=0;;++c){f.texImage2D(h,c,d,e,k,0,b,a.dataType,null);u.checkWebGLError(f);if(1===e&&1===k||!a.hasMipmap)break;e=Math.max(1,e>>1);k=Math.max(1,k>>1)}}q._applySamplingMode(f,
this._descriptor);q._applyWrapMode(f,this._descriptor);q._applyAnisotropicFilteringParameters(this._context,this._descriptor);u.checkWebGLError(f);this._context.bindTexture(l,q.TEXTURE_UNIT_FOR_UPDATES)}};g.updateData=function(c,h,f,l,a,b,d=3553){b||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const e=this._context.gl,k=this._descriptor,p=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);(0>h||0>f||l>k.width||
a>k.height||h+l>k.width||f+a>k.height)&&console.error("An attempt to update out of bounds of the texture!");e.pixelStorei(e.UNPACK_ALIGNMENT,k.unpackAlignment);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,k.flipped?1:0);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.preMultiplyAlpha?1:0);b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement?e.texSubImage2D(d,c,h,f,k.pixelFormat,k.dataType,b):e.texSubImage2D(d,c,h,f,l,a,k.pixelFormat,k.dataType,
b);this._context.bindTexture(p,q.TEXTURE_UNIT_FOR_UPDATES)};g.generateMipmap=function(){const c=this._descriptor;c.hasMipmap||(this._samplingModeDirty=c.hasMipmap=!0,q._validateTexture(this._context,c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);const h=this._context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(c.target);this._context.bindTexture(h,q.TEXTURE_UNIT_FOR_UPDATES)};
g.setSamplingMode=function(c){c!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=c,this._samplingModeDirty=!0)};g.setWrapMode=function(c){c!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=c,q._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};g.applyChanges=function(){const c=this._context.gl,h=this._descriptor;this._samplingModeDirty&&(q._applySamplingMode(c,h),this._samplingModeDirty=!1);this._wrapModeDirty&&(q._applyWrapMode(c,h),this._wrapModeDirty=
!1)};g._deriveInternalFormat=function(c,h){if("webgl"===this._context.webglVersion)return c;switch(h){case 5126:switch(c){case 6408:return 34836;case 6407:return 34837;default:throw Error("Unable to derive format");}default:return c}};q._validateTexture=function(c,h){(0>h.width||0>h.height)&&console.error("Negative dimension parameters are not allowed!");const f=y.isPowerOfTwo(h.width)&&y.isPowerOfTwo(h.height);m(c.gl)||f||("number"===typeof h.wrapMode?33071!==h.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):
(33071!==h.wrapMode.s||33071!==h.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),h.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};q._applySamplingMode=function(c,h){let f=h.samplingMode,l=h.samplingMode;if(9985===f||9987===f)f=9729,h.hasMipmap||(l=9729);else if(9984===f||9986===f)f=9728,h.hasMipmap||(l=9728);c.texParameteri(h.target,c.TEXTURE_MAG_FILTER,f);c.texParameteri(h.target,c.TEXTURE_MIN_FILTER,l)};q._applyWrapMode=function(c,
h){"number"===typeof h.wrapMode?(c.texParameteri(h.target,c.TEXTURE_WRAP_S,h.wrapMode),c.texParameteri(h.target,c.TEXTURE_WRAP_T,h.wrapMode)):(c.texParameteri(h.target,c.TEXTURE_WRAP_S,h.wrapMode.s),c.texParameteri(h.target,c.TEXTURE_WRAP_T,h.wrapMode.t))};q._applyAnisotropicFilteringParameters=function(c,h){var f;const l=c.capabilities.textureFilterAnisotropic;l&&c.gl.texParameterf(h.target,l.TEXTURE_MAX_ANISOTROPY,null!=(f=h.maxAnisotropy)?f:1)};v._createClass(q,[{key:"glName",get:function(){return this._glName}},
{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}}]);return q}();n.TEXTURE_UNIT_FOR_UPDATES=0;return n})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(v){return window.WebGL2RenderingContext&&v instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],function(v,y,x){function u(n){return n[0].stride}
function r(n){switch(n){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34837:return 12;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}
function m(n){if(x.isNone(n))return 0;if("descriptor"in n)return n.glName?m(n.descriptor):0;const q=n.internalFormat||"pixelFormat"in n&&n.pixelFormat;if(!q)return 0;const g="hasMipmap"in n&&n.hasMipmap?1.3:1;n=n.width*n.height;return r(q)*n*g}v.bindVertexBufferLayout=function(n,q,g,c,h){const f=n.gl,l=n.capabilities.instancing;n.bindBuffer(g);for(const a of c)if(n=q.get(a.name),void 0===n&&console.error(`There is no location for vertex attribute '${a.name}' defined.`),a.baseInstance&&!a.divisor&&
console.error(`Vertex attribute '${a.name}' uses baseInstanceOffset without divisor.`),g=(h?h:0+a.baseInstance?a.baseInstance:0)*a.stride,4>=a.count)f.vertexAttribPointer(n,a.count,a.type,a.normalized,a.stride,a.offset+g),f.enableVertexAttribArray(n),0<a.divisor&&l&&l.vertexAttribDivisor(n,a.divisor);else if(9===a.count)for(c=0;3>c;c++)f.vertexAttribPointer(n+c,3,a.type,a.normalized,a.stride,a.offset+12*c+g),f.enableVertexAttribArray(n+c),0<a.divisor&&l&&l.vertexAttribDivisor(n+c,a.divisor);else if(16===
a.count)for(c=0;4>c;c++)f.vertexAttribPointer(n+c,4,a.type,a.normalized,a.stride,a.offset+16*c+g),f.enableVertexAttribArray(n+c),0<a.divisor&&l&&l.vertexAttribDivisor(n+c,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count)};v.getBytesPerElementFormat=r;v.getGpuMemoryUsage=m;v.getStride=u;v.unbindVertexBufferLayout=function(n,q,g,c){const h=n.gl,f=n.capabilities.instancing;n.bindBuffer(g);for(const l of c)if(g=q.get(l.name),4>=l.count)h.disableVertexAttribArray(g),
l.divisor&&0<l.divisor&&f&&f.vertexAttribDivisor(g,0);else if(9===l.count)for(c=0;3>c;c++)h.disableVertexAttribArray(g+c),l.divisor&&0<l.divisor&&f&&f.vertexAttribDivisor(g+c,0);else if(16===l.count)for(c=0;4>c;c++)h.disableVertexAttribArray(g+c),l.divisor&&0<l.divisor&&f&&f.vertexAttribDivisor(g+c,0);else console.error("Unsupported vertex attribute element count: "+l.count);n.unbindBuffer(34962)};v.vertexCount=function(n,q){return n.vertexBuffers[q].size/u(n.layout[q])};Object.defineProperty(v,"__esModule",
{value:!0})})},"esri/views/webgl/Program":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./checkWebGLError ./enums ./ShaderTranspiler".split(" "),function(v,y,x,u,r,m,n){function q(f,l){if(u.isNone(f)||f.length!==l.length)return!0;for(let a=0;a<f.length;++a)if(f[a]!==l[a])return!0;return!1}function g(f,l,a){const b="webgl2"===f.webglVersion?n.transpileShader(a,l):a,d=f.gl,e=d.createShader(l);d.shaderSource(e,b);d.compileShader(e);r.webglValidateShadersEnabled()&&
!d.getShaderParameter(e,d.COMPILE_STATUS)&&(console.error("Compile error in ".concat(35633===l?"vertex":"fragment"," shader")),console.error(d.getShaderInfoLog(e)),console.error(c(b)),"webgl2"===f.webglVersion&&(console.log("Shader source before transpilation:"),console.log(a)));return e}function c(f){let l=2;return f.replace(/\n/g,()=>{var a=l++;a=1E3<=a?a.toString():("  "+a).slice(-3);return"\n"+a+":"})}function h(f,l){for(let a=0;a<f.length;++a)l[a]=f[a]}x=function(){function f(a,b,d,e){this._context=
a;this._locations=e;this._nameToUniformLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};a||console.error("RenderingContext isn't initialized!");0===b.length&&console.error("Shaders source should not be empty!");this._vShader=g(this._context,35633,b);this._fShader=g(this._context,35632,d);this._vShader&&this._fShader||console.error("Error loading shaders!");
this._context.instanceCounter.increment(m.ResourceType.VertexShader,this);this._context.instanceCounter.increment(m.ResourceType.FragmentShader,this)}var l=f.prototype;l.dispose=function(){const a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null,this._context.instanceCounter.decrement(m.ResourceType.VertexShader,this));this._fShader&&(a.deleteShader(this._fShader),this._fShader=null,this._context.instanceCounter.decrement(m.ResourceType.FragmentShader,this));this._glName&&
(a.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(m.ResourceType.Program,this))};l._getUniformLocation=function(a){void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this.glName,a));return this._nameToUniformLocation[a]};l.hasUniform=function(a){return null!==this._getUniformLocation(a)};l.setUniform1i=function(a,b){const d=this._nameToUniform1[a];if(void 0===d||b!==d)this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(a),
b),this._nameToUniform1[a]=b};l.setUniform1iv=function(a,b){const d=this._nameToUniform1v[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform1v[a]=Array.from(b):h(b,d))};l.setUniform2iv=function(a,b){const d=this._nameToUniform2[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform2[a]=Array.from(b):h(b,d))};l.setUniform3iv=function(a,b){const d=
this._nameToUniform3[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform3[a]=Array.from(b):h(b,d))};l.setUniform4iv=function(a,b){const d=this._nameToUniform4[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform4iv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform4[a]=Array.from(b):h(b,d))};l.setUniform1f=function(a,b){const d=this._nameToUniform1[a];if(void 0===d||b!==d)this._context.useProgram(this),
this._context.gl.uniform1f(this._getUniformLocation(a),b),this._nameToUniform1[a]=b};l.setUniform1fv=function(a,b){const d=this._nameToUniform1v[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform1v[a]=Array.from(b):h(b,d))};l.setUniform2f=function(a,b,d){const e=this._nameToUniform2[a];if(void 0===e||b!==e[0]||d!==e[1])this._context.useProgram(this),this._context.gl.uniform2f(this._getUniformLocation(a),b,d),void 0===
e?this._nameToUniform2[a]=[b,d]:(e[0]=b,e[1]=d)};l.setUniform2fv=function(a,b){const d=this._nameToUniform2[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform2[a]=Array.from(b):h(b,d))};l.setUniform3f=function(a,b,d,e){const k=this._nameToUniform3[a];if(void 0===k||b!==k[0]||d!==k[1]||e!==k[2])this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(a),b,d,e),void 0===k?this._nameToUniform3[a]=
[b,d,e]:(k[0]=b,k[1]=d,k[2]=e)};l.setUniform3fv=function(a,b){const d=this._nameToUniform3[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform3[a]=Array.from(b):h(b,d))};l.setUniform4f=function(a,b,d,e,k){const p=this._nameToUniform4[a];if(void 0===p||b!==p[0]||d!==p[1]||e!==p[2]||k!==p[3])this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(a),b,d,e,k),void 0===p?this._nameToUniform4[a]=
[b,d,e,k]:(p[0]=b,p[1]=d,p[2]=e,p[3]=k)};l.setUniform4fv=function(a,b){const d=this._nameToUniform4[a];q(d,b)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(a),b),void 0===d?this._nameToUniform4[a]=Array.from(b):h(b,d))};l.setUniformMatrix3fv=function(a,b,d=!1,e=!1){const k=this._nameToUniformMatrix3[a];e=e?k!==b:u.isNone(k)?!0:9!==k.length?q(k,b):9!==k.length||k[0]!==b[0]||k[1]!==b[1]||k[2]!==b[2]||k[3]!==b[3]||k[4]!==b[4]||k[5]!==b[5]||k[6]!==b[6]||k[7]!==
b[7]||k[8]!==b[8];e&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(a),d,b),void 0===k?this._nameToUniformMatrix3[a]=Array.from(b):h(b,k))};l.setUniformMatrix4fv=function(a,b,d=!1){const e=this._nameToUniformMatrix4[a];var k=u.isNone(e)?!0:16!==e.length?q(e,b):16!==e.length||e[0]!==b[0]||e[1]!==b[1]||e[2]!==b[2]||e[3]!==b[3]||e[4]!==b[4]||e[5]!==b[5]||e[6]!==b[6]||e[7]!==b[7]||e[8]!==b[8]||e[9]!==b[9]||e[10]!==b[10]||e[11]!==b[11]||e[12]!==b[12]||e[13]!==
b[13]||e[14]!==b[14]||e[15]!==b[15];k&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(a),d,b),void 0===e?this._nameToUniformMatrix4[a]=Array.from(b):h(b,e))};l.assertCompatibleVertexAttributeLocations=function(a){a.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")};l.stop=function(){};y._createClass(f,[{key:"glName",get:function(){if(u.isSome(this._glName))return this._glName;if(u.isNone(this._vShader))return null;const a=
this._context.gl,b=a.createProgram();a.attachShader(b,this._vShader);a.attachShader(b,this._fShader);this._locations.forEach((d,e)=>a.bindAttribLocation(b,d,e));a.linkProgram(b);r.webglValidateShadersEnabled()&&!a.getProgramParameter(b,a.LINK_STATUS)&&console.error("Could not link shader\n"+`validated: ${a.getProgramParameter(b,a.VALIDATE_STATUS)}`+`, gl error ${a.getError()}`+`, vertex: ${a.getShaderParameter(this._vShader,a.COMPILE_STATUS)}`+`, fragment: ${a.getShaderParameter(this._fShader,a.COMPILE_STATUS)}`+
`, info log: ${a.getProgramInfoLog(b)}`);this._glName=b;this._context.instanceCounter.increment(m.ResourceType.Program,this);return b}}]);return f}();v.Program=x;Object.defineProperty(v,"__esModule",{value:!0})})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../core/maybe","./reservedWordsGLSL3","../../chunks/builtins"],function(v,y,x,u){function r(){function d(G){G.length&&I.push({type:f[C],data:G,position:J,line:H,column:N})}function e(){B=B.length?[]:B;if("/"===z&&"*"===
t)return J=F+w-1,C=0,z=t,w+1;if("/"===z&&"/"===t)return J=F+w-1,C=1,z=t,w+1;if("#"===t)return C=2,J=F+w,w;if(/\s/.test(t))return C=9,J=F+w,w;O=/\d/.test(t);P=/[^\w_]/.test(t);J=F+w;C=O?4:P?3:9999;return w}function k(){if(("\r"===t||"\n"===t)&&"\\"!==z)return d(B.join("")),C=999,w;B.push(t);z=t;return w+1}function p(){if("."===z&&/\d/.test(t))return C=5,w;if("/"===z&&"*"===t)return C=0,w;if("/"===z&&"/"===t)return C=1,w;if("."===t&&B.length){for(;A(B););C=5;return w}if(";"===t||")"===t||"("===t){if(B.length)for(;A(B););
d(t);C=999;return w+1}var G=2===B.length&&"\x3d"!==t;if(/[\w_\d\s]/.test(t)||G){for(;A(B););C=999;return w}B.push(t);z=t;return w+1}function A(G){var L=0;do{var Q=u.operators.indexOf(G.slice(0,G.length+L).join(""));var M=u.operators[Q];if(-1===Q){if(0<L--+G.length)continue;M=G.slice(0,1).join("")}d(M);J+=M.length;B=B.slice(M.length);return B.length}while(1)}function D(){if("."===t||/[eE]/.test(t))return B.push(t),C=5,z=t,w+1;if("x"===t&&1===B.length&&"0"===B[0])return C=11,B.push(t),z=t,w+1;if(/[^\d]/.test(t))return d(B.join("")),
C=999,w;B.push(t);z=t;return w+1}function E(){"f"===t&&(B.push(t),z=t,w+=1);if(/[eE]/.test(t)||"-"===t&&/[eE]/.test(z))return B.push(t),z=t,w+1;if(/[^\d]/.test(t))return d(B.join("")),C=999,w;B.push(t);z=t;return w+1}var w=0,F=0,C=999,t,z,B=[],I=[],H=1,N=0,J=0,O=!1,P=!1,K="",R;return function(G){I=[];if(null!==G){G=G.replace?G.replace(/\r\n/g,"\n"):G;w=0;K+=G;for(R=K.length;t=K[w],w<R;){G=w;switch(C){case 0:"/"===t&&"*"===z?(B.push(t),d(B.join("")),C=999):(B.push(t),z=t);w+=1;break;case 1:w=k();break;
case 2:w=k();break;case 3:w=p();break;case 4:w=D();break;case 11:/[^a-fA-F0-9]/.test(t)?(d(B.join("")),C=999):(B.push(t),z=t,w+=1);break;case 5:w=E();break;case 9999:if(/[^\d\w_]/.test(t)){var L=B.join("");C=-1<u.literals.indexOf(L)?8:-1<u.builtins.indexOf(L)?7:6;d(B.join(""));C=999}else B.push(t),z=t,w+=1;break;case 9:/[^\s]/g.test(t)?(d(B.join("")),C=999):(B.push(t),z=t,w+=1);break;case 999:w=e()}if(G!==w)switch(K[G]){case "\n":N=0;++H;break;default:++N}}F+=w;K=K.slice(w);return I}B.length&&d(B.join(""));
C=10;d("(eof)");return I}}function m(d){return d.map(e=>"eof"!==e.type?e.data:"").join("")}function n(d,e="100",k="300 es"){const p=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const A of d)if("preprocessor"===A.type){const D=p.exec(A.data);if(D){d=D[1].replace(/\s\s+/g," ");if(d===k)return d;if(d===e)return A.data="#version "+k,e;throw Error("unknown glsl version: "+d);}}d.splice(0,0,{type:"preprocessor",data:"#version "+k},{type:"whitespace",data:"\n"});return null}function q(d,e,k,p){p=p||k;
for(const A of d)if("ident"===A.type&&A.data===k)return p in e?e[p]++:e[p]=0,q(d,e,p+"_"+e[p],p);return k}function g(d,e,k="afterVersion"){const p={data:"\n",type:"whitespace"},A=E=>E<d.length?/[^\r\n]$/.test(d[E].data):!1;let D=function(E){let w=-1,F=0,C=-1;for(let z=0;z<E.length;z++){var t=E[z];"preprocessor"===t.type&&(t.data.match(/#(if|ifdef|ifndef)\s+.+/)?++F:t.data.match(/#endif\s*.*/)&&--F);("afterVersion"===k||"afterPrecision"===k)&&"preprocessor"===t.type&&/^#version/.test(t.data)&&(C=Math.max(C,
z));if("afterPrecision"===k&&"keyword"===t.type&&"precision"===t.data){a:{for(t=z;t<E.length;t++){const B=E[t];if("operator"===B.type&&";"===B.data)break a}t=null}if(null===t)throw Error("precision statement not followed by any semicolons!");C=Math.max(C,t)}w<C&&0===F&&(w=z)}return w+1}(d);A(D-1)&&d.splice(D++,0,p);for(const E of e)d.splice(D++,0,E);A(D-1)&&A(D)&&d.splice(D,0,p)}function c(d,e,k,p="lowp"){g(d,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:p},{type:"whitespace",
data:" "},{type:"keyword",data:k},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function h(d,e,k,p,A="lowp"){g(d,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:p.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",
data:A},{type:"whitespace",data:" "},{type:"keyword",data:k},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}var f="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const l=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"],a={enableCache:!1},b=new Map;v.test=a;v.transpileShader=function(d,e){var k=a.enableCache?b.get(d):null;if(y.isSome(k))return k;
k=r();var p=[];p=p.concat(k(d));k=p=p.concat(k(null));if("300 es"===n(k,"100","300 es"))throw Error("shader is already glsl 300 es");var A=p=null;const D={},E={};for(let t=0;t<k.length;++t){const z=k[t];switch(z.type){case "keyword":35633===e&&"attribute"===z.data?z.data="in":"varying"===z.data&&(z.data=35633===e?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(z.data.trim())&&(z.data=z.data.replace(/(2D|Cube|EXT)/g,""));35632===e&&"gl_FragColor"===z.data&&(p||(p=
q(k,D,"fragColor"),c(k,p,"vec4")),z.data=p);if(35632===e&&"gl_FragData"===z.data){{var w=void 0;let B=void 0;var F=k;var C=t+1;let I=-1;for(;C<F.length;C++){const H=F[C];if("operator"===H.type&&("["===H.data&&(B=C),"]"===H.data)){w=C;break}"integer"===H.type&&(I=parseInt(H.data,10))}B&&w&&F.splice(B,w-B+1);F=I}w=q(k,D,"fragData");h(k,w,"vec4",F,"mediump");z.data=w}else 35632===e&&"gl_FragDepthEXT"===z.data&&(A||(A=q(k,D,"gl_FragDepth")),z.data=A);break;case "ident":if(0<=x.indexOf(z.data)){if(F=35633===
e)a:{for(F=t-1;0<=F;F--)if(w=k[F],"whitespace"!==w.type&&"block-comment"!==w.type)if("keyword"===w.type){if("attribute"===w.data||"in"===w.data){F=!0;break a}}else break;F=!1}if(F)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");z.data in E||(E[z.data]=q(k,D,z.data));z.data=E[z.data]}}}for(e=k.length-1;0<=e;--e)p=k[e],"preprocessor"===p.type&&((A=p.data.match(/#extension\s+(.*):/))&&A[1]&&0<=l.indexOf(A[1].trim())&&(A=k[e+1],k.splice(e,A&&"whitespace"===
A.type?2:1)),(A=p.data.match(/#ifdef\s+(.*)/))&&A[1]&&0<=l.indexOf(A[1].trim())&&(p.data="#if 1"),(A=p.data.match(/#ifndef\s+(.*)/))&&A[1]&&0<=l.indexOf(A[1].trim())&&(p.data="#if 0"));k=m(k);a.enableCache&&b.set(d,k);return k};Object.defineProperty(v,"__esModule",{value:!0})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/chunks/builtins":function(){define(["exports"],function(v){var y={exports:{}};(function(r){(function(m){m=m();void 0!==m&&(r.exports=m)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})})(y);
y=y.exports;var x={exports:{}};(function(r){(function(m){m=m();void 0!==m&&(r.exports=m)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})})(x);x=x.exports;var u={exports:{}};(function(r){(function(m){m=m();void 0!==m&&(r.exports=m)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})})(u);
v.builtins=u.exports;v.literals=y;v.operators=x})},"esri/views/webgl/ProgramCache":function(){define(["./programUtils"],function(v){return function(){function y(u){this._programCacheByTemplate=new Map;this._rctx=u}var x=y.prototype;x.dispose=function(){this._programCacheByTemplate.forEach(u=>u.programs.forEach(r=>r.dispose()));this._programCacheByTemplate=null};x.getProgram=function(u,r){this._programCacheByTemplate.has(u)||this.addProgramTemplate(u,m=>v.createProgram(this._rctx,u,m));return this.getProgramTemplateInstance(u,
r)};x.addProgramTemplate=function(u,r){this._programCacheByTemplate.set(u,{constructor:r,programs:new Map})};x.getProgramTemplateInstance=function(u,r){if(u=this._programCacheByTemplate.get(u)){const m=r?JSON.stringify(r):"default";u.programs.has(m)||(r=u.constructor(r),u.programs.set(m,r));return u.programs.get(m)}return null};return y}()})},"esri/views/webgl/programUtils":function(){define(["exports","./Program"],function(v,y){v.createProgram=function(x,u,r,m){r=r||{};m=m||"";r="function"===typeof u.shaders?
u.shaders(r):u.shaders;return new y.Program(x,m+r.vertexShader,m+r.fragmentShader,u.attributes)};v.glslifyDefineMap=function(x){let u="";for(const r in x){const m=x[r];if("boolean"===typeof m)m&&(u+=`#define ${r}\n`);else if("number"===typeof m)u+=`#define ${r} ${m.toFixed()}\n`;else if("object"===typeof m){const n=m.options;let q=0;for(const g in n)u+=`#define ${n[g]} ${(q++).toFixed()}\n`;u+=`#define ${r} ${n[m.value]}\n`}}return u};Object.defineProperty(v,"__esModule",{value:!0})})},"esri/views/webgl/ShaderCompiler":function(){define(function(){return function(){function v(x){this.readFile=
x}var y=v.prototype;y.resolveIncludes=function(x){return this.resolve(x)};y.resolve=function(x,u=new Map){if(u.has(x))return u.get(x);const r=this.read(x);if(!r)throw Error(`cannot find shader file ${x}`);const m=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let n=m.exec(r);const q=[];for(;null!=n;)q.push({path:n[1],start:n.index,length:n[0].length}),n=m.exec(r);let g=0,c="";q.forEach(h=>{c+=r.slice(g,h.start);c+=u.has(h.path)?"":this.resolve(h.path,u);g=h.start+h.length});c+=r.slice(g);u.set(x,c);return c};
y.read=function(x){return this.readFile(x)};return v}()})},"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Logger","../../core/maybe","./enums","./Util"],function(v,y,x,u,r){const m=y.getLogger("esri.views.webgl.VertexArrayObject");return function(){function n(g,c,h,f,l=null){this._context=g;this._locations=c;this._layout=h;this._buffers=f;this._indexBuffer=l;this._glName=null;this._initialized=!1;g.instanceCounter.increment(u.ResourceType.VAO,
this)}var q=n.prototype;q.dispose=function(g=!0){if(this._context){if(this._glName){var c,h;const f=null==(c=this._context)?void 0:null==(h=c.capabilities)?void 0:h.vao;f?(f.deleteVertexArray(this._glName),this._glName=null):m.warn("Leaked WebGL VAO")}this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(g){for(const f in this._buffers)this._buffers[f].dispose(),delete this._buffers[f];this._indexBuffer=x.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(u.ResourceType.VAO,
this);this._context=null}else(this._glName||g&&0<Object.getOwnPropertyNames(this._buffers).length)&&m.warn("Leaked WebGL VAO")};q.initialize=function(){if(!this._initialized){var g=this._context.capabilities.vao;if(g){const c=g.createVertexArray();g.bindVertexArray(c);this._bindLayout();g.bindVertexArray(null);this._glName=c}this._initialized=!0}};q.bind=function(){this.initialize();const g=this._context.capabilities.vao;g?g.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};
q._bindLayout=function(){const {_buffers:g,_layout:c,_indexBuffer:h}=this;g||m.error("Vertex buffer dictionary is empty!");const f=this._context.gl;for(const l in g){const a=g[l];a||m.error("Vertex buffer is uninitialized!");const b=c[l];b||m.error("Vertex element descriptor is empty!");r.bindVertexBufferLayout(this._context,this._locations,a,b)}x.isSome(h)&&(this._context.capabilities.vao?f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,h.glName):this._context.bindBuffer(h))};q.unbind=function(){this.initialize();
const g=this._context.capabilities.vao;g?g.bindVertexArray(null):this._unbindLayout()};q._unbindLayout=function(){const {_buffers:g,_layout:c}=this;g||m.error("Vertex buffer dictionary is empty!");for(const h in g){const f=g[h];f||m.error("Vertex buffer is uninitialized!");r.unbindVertexBufferLayout(this._context,this._locations,f,c[h])}x.isSome(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)};v._createClass(n,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",
get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((g,c)=>g+this._buffers[c].size,x.isSome(this._indexBuffer)?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return n}()})},"esri/views/webgl/context-util":function(){define(["exports","../../core/maybe"],function(v,y){function x(r,m,n={}){m=1===
m?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let q=null;for(const g of m){try{q=r.getContext(g,n)}catch(c){}if(q)break}return q}function u(r,m){(r=r.parentNode)&&(r.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+m+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}v.createContext=x;v.createContextOrErrorHTML=
function(r,m,n={}){if(!window.WebGLRenderingContext)return u(r,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;m=x(r,m,n);y.isNone(m)&&u(r,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return m};Object.defineProperty(v,"__esModule",{value:!0})})},"*noref":1}});
define("exports ./webgl/BufferObject ./webgl/FramebufferObject ./webgl/Program ./webgl/ProgramCache ./webgl/Renderbuffer ./webgl/ShaderCompiler ./webgl/Texture ./webgl/VertexArrayObject ./webgl/programUtils ./webgl/context-util".split(" "),function(v,y,x,u,r,m,n,q,g,c,h){v.BufferObject=y;v.FramebufferObject=x;v.Program=u.Program;v.ProgramCache=r;v.Renderbuffer=m;v.ShaderCompiler=n;v.Texture=q;v.VertexArrayObject=g;v.createProgram=c.createProgram;v.glslifyDefineMap=c.glslifyDefineMap;v.createContextOrErrorHTML=
h.createContextOrErrorHTML;Object.defineProperty(v,"__esModule",{value:!0})});