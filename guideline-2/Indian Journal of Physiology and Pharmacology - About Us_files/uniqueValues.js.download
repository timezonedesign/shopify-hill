// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ./support/utils ../support/utils ../support/adapters/support/layerUtils".split(" "),function(h,d,k,l,m,e){function n(a){return f.apply(this,arguments)}function f(){f=h._asyncToGenerator(function*(a){if(!a||!a.layer||!a.field&&!a.valueExpression)throw new d("unique-values:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");var b=a.valueExpression||a.sqlExpression,c=b&&!a.sqlExpression;
if(b)if(c){if(!a.view)throw new d("unique-values:missing-parameters","View is required when 'valueExpression' is specified");}else if(!a.valueExpression)throw new d("unique-values:missing-parameters","'valueExpression' parameters are required");const {layer:p,...q}=a;b=e.createLayerAdapter(p,e.defaultSupportedLayerTypes);a={layerAdapter:b,...q};if(!b)throw new d("unique-values:invalid-parameters","'layer' must be one of these types: "+e.getLayerTypeLabels(e.defaultSupportedLayerTypes).join(", "));
c=k.isSome(a.signal)?{signal:a.signal}:null;yield b.load(c);c=yield m.getFieldsList({field:a.field,valueExpression:a.valueExpression});if(b=l.verifyBasicFieldValidity(b,c,"unique-values:invalid-parameters"))throw b;return a});return f.apply(this,arguments)}function g(){g=h._asyncToGenerator(function*(a){const {layerAdapter:b,...c}=yield n(a);return b.uniqueValues(c)});return g.apply(this,arguments)}return function(a){return g.apply(this,arguments)}});