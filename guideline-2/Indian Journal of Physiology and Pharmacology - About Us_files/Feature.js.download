// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w){E=function(M){function H(K,J){K=M.call(this,K,J)||this;K._featureElementInfo=null;K.attachmentsWidget=new T;K.description=null;K.displayType=null;K.graphic=null;K.headingLevel=2;K.title=null;K.viewModel=new q;return K}m._inheritsLoose(H,M);var Q=H.prototype;Q.initialize=function(){this._featureElementInfo=new f;y.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());y.init(this,"viewModel.graphic",K=>this.attachmentsWidget.graphic=
K)};Q.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};Q.render=function(){var K;const {attachmentsWidget:J}=this;return w.tsx("div",{class:"esri-feature-attachments"},null==(K=this._featureElementInfo)?void 0:K.render(),null==J?void 0:J.render())};Q._setupFeatureElementInfo=function(){const {description:K,title:J,headingLevel:B}=this;this._featureElementInfo.set({description:K,title:J,headingLevel:B})};return H}(P);p.__decorate([W.property({readOnly:!0})],E.prototype,
"attachmentsWidget",void 0);p.__decorate([x.aliasOf("viewModel.description")],E.prototype,"description",void 0);p.__decorate([x.aliasOf("attachmentsWidget.displayType")],E.prototype,"displayType",void 0);p.__decorate([x.aliasOf("viewModel.graphic")],E.prototype,"graphic",void 0);p.__decorate([W.property()],E.prototype,"headingLevel",void 0);p.__decorate([x.aliasOf("viewModel.title")],E.prototype,"title",void 0);p.__decorate([W.property({type:q})],E.prototype,"viewModel",void 0);return E=p.__decorate([R.subclass("esri.widgets.Feature.FeatureAttachments")],
E)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M,H){const Q={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},K=window.CSS;L=function(J){function B(e,v){e=J.call(this,e,v)||this;e.abilities=null;e.displayType="auto";e.graphic=null;e.label=void 0;e.messages=null;e.messagesUnits=null;e.selectedFile=null;e.submitting=!1;e.viewModel=new f;e.visibleElements={...Q};e._supportsImageOrientation=K&&K.supports&&K.supports("image-orientation",
"from-image");e._addAttachmentForm=null;e._updateAttachmentForm=null;return e}m._inheritsLoose(B,J);var g=B.prototype;g.initialize=function(){this.own(E.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),E.init(this,"viewModel.mode",()=>this._modeChanged()))};g.castVisibleElements=function(e){return{...Q,...e}};g.addAttachment=function(){const {_addAttachmentForm:e,viewModel:v}=this;this._set("submitting",!0);this._set("error",null);return v.addAttachment(e).then(z=>{this._set("submitting",
!1);this._set("error",null);v.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new y("attachments:add-attachment",this.messages.addErrorMessage,z));throw z;})};g.deleteAttachment=function(e){const {viewModel:v}=this;this._set("submitting",!0);this._set("error",null);return v.deleteAttachment(e).then(z=>{this._set("submitting",!1);this._set("error",null);v.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new y("attachments:delete-attachment",
this.messages.deleteErrorMessage,z));throw z;})};g.updateAttachment=function(){const {viewModel:e}=this,{_updateAttachmentForm:v}=this;this._set("submitting",!0);this._set("error",null);return e.updateAttachment(v).then(z=>{this._set("submitting",!1);this._set("error",null);e.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new y("attachments:update-attachment",this.messages.updateErrorMessage,z));throw z;})};g.render=function(){const {submitting:e,viewModel:v}=this,{state:z}=
v;return H.tsx("div",{class:this.classes("esri-attachments","esri-widget")},e?this.renderProgressBar():null,"loading"===z?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};g.renderErrorMessage=function(){const {error:e,visibleElements:v}=this;return e&&v.errorMessage?H.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},e.message):null};g.renderAttachments=function(){const {mode:e,activeAttachmentInfo:v}=this.viewModel;return"add"===e?this.renderAddForm():
"edit"===e?this.renderDetailsForm(v):this.renderAttachmentContainer()};g.renderLoading=function(){return H.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},H.tsx("div",{class:"esri-attachments__loader"}))};g.renderProgressBar=function(){return this.visibleElements.progressBar?H.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};g.renderAddForm=function(){const {submitting:e,selectedFile:v}=this;var z=e||!v,C=this.visibleElements.cancelAddButton?H.tsx("button",
{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",e&&"esri-button--disabled")},this.messages.cancel):null;z=this.visibleElements.addSubmitButton?H.tsx("button",{type:"submit",disabled:z,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:z})},this.messages.add):null;const S=v?H.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
v.name):null;C=H.tsx("form",{bind:this,afterCreate:F.storeNode,afterRemoved:F.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},H.tsx("fieldset",{class:"esri-attachments__file-fieldset"},S,H.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},v?this.messages.changeFile:this.messages.selectFile,H.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
z,C);return H.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},C)};g.renderDetailsForm=function(e){const {visibleElements:v,viewModel:z,selectedFile:C,submitting:S}=this,{contentType:A,size:r,url:O}=e;var {abilities:u}=z,G=S||!C,X=u.editing&&u.operations.delete&&v.deleteButton?H.tsx("button",{key:"delete-button",type:"button",disabled:S,bind:this,onclick:ma=>this._submitDeleteAttachment(ma,e),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:S})},this.messages.delete):null;G=u.editing&&u.operations.update&&v.updateButton?H.tsx("button",{disabled:G,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:G})},this.messages.update):null;const aa=this.visibleElements.cancelUpdateButton?H.tsx("button",{disabled:S,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:S})},this.messages.cancel):null;var ha=C?H.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},C.name):null;u=u.editing&&u.operations.update?H.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},ha,H.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,H.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;ha=H.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},H.tsx("label",null,x.formatFileSize(this.messagesUnits,r)));const ba=H.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},H.tsx("label",null,A));X=H.tsx("form",{bind:this,afterCreate:F.storeNode,afterRemoved:F.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},H.tsx("div",{class:"esri-attachments__metadata"},
ha,ba),u,H.tsx("div",{class:"esri-attachments__actions"},X,aa,G));return H.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},H.tsx("a",{class:"esri-attachments__item-link",href:O,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),H.tsx("div",{class:"esri-attachments__item-link-overlay"},H.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},H.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},
H.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),H.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),X)};g.renderImageMask=function({attachmentInfo:e,size:v}){var {supportsResizeAttachments:z}=this.viewModel;const {contentType:C,name:S,url:A}=e,r=z&&n.isSupportedImage(C);e=(e=this._getCSSTransform(e,r))?{transform:e,"image-orientation":"none"}:{};const O=-1===A.indexOf("?")?"?":"\x26";v=r?`${A}${O}w=${v}`:n.getIconPath(C);z={["esri-attachments__image--resizable"]:z};
return H.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!r},"esri-attachments__item-mask")},H.tsx("img",{styles:e,alt:S,src:v,class:this.classes(z,"esri-attachments__image")}))};g.renderAttachmentInfo=function({attachmentInfo:e,displayType:v}){var {viewModel:z}=this;({abilities:z}=z);const {name:C,url:S}=e;v=this.renderImageMask({attachmentInfo:e,size:"list"===v?48:400});var A=z.editing?H.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
F.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;A=H.tsx("label",{class:"esri-attachments__label"},H.tsx("span",{class:"esri-attachments__filename"},C||this.messages.noTitle),A);v=[v,A];z=z.editing?H.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},v):H.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:S,target:"_blank"},v);return H.tsx("li",{class:"esri-attachments__item",key:e},z)};g.renderAttachmentContainer=function(){const {effectiveDisplayType:e,viewModel:v,visibleElements:z}=this,{attachmentInfos:C,abilities:S}=v;var A=C&&C.length;const r={["esri-attachments__container--list"]:"preview"!==e,["esri-attachments__container--preview"]:"preview"===e},O=S.editing&&S.operations.add&&z.addButton?H.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},H.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;A=A?H.tsx("ul",{class:"esri-attachments__items"},C.toArray().map(u=>this.renderAttachmentInfo({attachmentInfo:u,displayType:e}))):H.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return H.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",r)},A,O)};g._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};g._handleFileInputChange=function(e){e=(e=e.target)&&e.files&&e.files.item(0);this._set("selectedFile",e)};g._submitDeleteAttachment=function(e,v){e.preventDefault();this.deleteAttachment(v)};g._submitAddAttachment=function(e){e.preventDefault();this.addAttachment()};g._submitUpdateAttachment=function(e){e.preventDefault();this.updateAttachment()};g._startEditAttachment=
function(e){const {viewModel:v}=this;v.activeAttachmentInfo=e;v.mode="edit"};g._startAddAttachment=function(){this.viewModel.mode="add"};g._cancelForm=function(e){e.preventDefault();this.viewModel.mode="view"};g._getCSSTransform=function(e,v){({orientationInfo:e}=e);return!this._supportsImageOrientation&&v&&e?[e.rotation?`rotate(${e.rotation}deg)`:"",e.mirrored?"scaleX(-1)":""].join(" "):""};m._createClass(B,[{key:"effectiveDisplayType",get:function(){return"auto"===this.displayType?this.viewModel.supportsResizeAttachments?
"preview":"list":this.displayType}}]);return B}(q);p.__decorate([Y.aliasOf("viewModel.abilities")],L.prototype,"abilities",void 0);p.__decorate([T.property()],L.prototype,"displayType",void 0);p.__decorate([T.property({readOnly:!0})],L.prototype,"effectiveDisplayType",null);p.__decorate([Y.aliasOf("viewModel.graphic")],L.prototype,"graphic",void 0);p.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],L.prototype,"label",void 0);p.__decorate([T.property(),w.messageBundle("esri/widgets/Attachments/t9n/Attachments")],
L.prototype,"messages",void 0);p.__decorate([T.property(),w.messageBundle("esri/core/t9n/Units")],L.prototype,"messagesUnits",void 0);p.__decorate([T.property({readOnly:!0})],L.prototype,"selectedFile",void 0);p.__decorate([T.property({readOnly:!0})],L.prototype,"submitting",void 0);p.__decorate([T.property({readOnly:!0})],L.prototype,"error",void 0);p.__decorate([T.property({type:f})],L.prototype,"viewModel",void 0);p.__decorate([T.property()],L.prototype,"visibleElements",void 0);p.__decorate([R.cast("visibleElements")],
L.prototype,"castVisibleElements",null);return L=p.__decorate([P.subclass("esri.widgets.Attachments")],L)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(m,p,y,x,E){function Y(R,T,P){return R.units[T][P]}function L(R,T,P,q=2,f="abbr"){return`${E.formatNumber(T,{minimumFractionDigits:q,maximumFractionDigits:q})} ${Y(R,P,f)}`}const W=["B","kB","MB","GB","TB"];m.formatAngleDegrees=function(R,T,P=2){R=x.convertUnit(R,T,"degrees");
return E.formatNumber(R,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:P,minimumFractionDigits:P})};m.formatDMS=function(R,T,P=2){R=x.convertUnit(R,T,"degrees");T=R-Math.floor(R);R-=T;T*=60;let q=T-Math.floor(T);T-=q;q*=60;return`${R.toFixed()}\u00b0 ${T.toFixed()}' ${q.toFixed(P)}"`};m.formatDecimal=L;m.formatFileSize=function(R,T){let P=0===T?0:Math.floor(Math.log(T)/Math.log(1024));P=p.clamp(P,0,W.length-1);T=E.formatNumber(T/1024**P,{maximumFractionDigits:2});return y.replace(R.units.bytes[W[P]],
{fileSize:T})};m.formatImperialArea=function(R,T,P,q=2,f="abbr"){const n=x.preferredImperialAreaUnit(T,P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.formatImperialLength=function(R,T,P,q=2,f="abbr"){const n=x.preferredImperialLengthUnit(T,P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.formatImperialVerticalLength=function(R,T,P,q=2,f="abbr"){const n=x.preferredImperialVerticalLengthUnit(T,P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.formatMetricArea=function(R,T,P,q=2,f="abbr"){const n=x.preferredMetricAreaUnit(T,
P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.formatMetricLength=function(R,T,P,q=2,f="abbr"){const n=x.preferredMetricLengthUnit(T,P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.formatMetricVerticalLength=function(R,T,P,q=2,f="abbr"){const n=x.preferredMetricVerticalLengthUnit(T,P);return L(R,x.convertUnit(T,P,n),n,q,f)};m.unitName=Y;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w){const M={editing:!1,operations:{add:!0,update:!0,delete:!0}},H=x.ofType(n);x=function(Q){function K(B){var g=Q.call(this,B)||this;g._getAttachmentsPromise=null;g._attachmentLayer=null;g.abilities={...M};g.activeAttachmentInfo=null;g.attachmentInfos=new H;g.graphic=null;g.mode="view";g.handles.add([W.init(m._assertThisInitialized(g),"graphic",()=>g._graphicChanged())]);return g}m._inheritsLoose(K,Q);var J=K.prototype;J.destroy=function(){this.graphic=this._attachmentLayer=
null};J.castAbilities=function(B){return{...M,...B}};J.getAttachments=function(){var B=m._asyncToGenerator(function*(){const {_attachmentLayer:g,attachmentInfos:e}=this;if(!g||"function"!==typeof g.queryAttachments)throw new E("invalid-layer","getAttachments(): A valid layer is required.");const v=this._getFeatureId();var z=new F({objectIds:[v],returnMetadata:!0});const C=[];this._getAttachmentsPromise=z=g.queryAttachments(z).then(S=>S[v]||C).catch(()=>C);this.notifyChange("state");z=yield z;e.removeAll();
z.length&&e.addMany(z);this._getAttachmentsPromise=null;this.notifyChange("state");return z});return function(){return B.apply(this,arguments)}}();J.addAttachment=function(){var B=m._asyncToGenerator(function*(g){const {_attachmentLayer:e,attachmentInfos:v,graphic:z,abilities:C}=this;if(!g)throw new E("invalid-attachment","addAttachment(): An attachment is required.",{attachment:g});if(!C.operations.add)throw new E("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!==
typeof e.addAttachment)throw new E("invalid-layer","addAttachment(): A valid layer is required.");g=yield e.addAttachment(z,g).then(S=>this._queryAttachment(S.objectId));v.add(g);return g});return function(g){return B.apply(this,arguments)}}();J.deleteAttachment=function(){var B=m._asyncToGenerator(function*(g){const {_attachmentLayer:e,attachmentInfos:v,graphic:z,abilities:C}=this;if(!g)throw new E("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:g});
if(!C.operations.delete)throw new E("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!==typeof e.deleteAttachments)throw new E("invalid-layer","deleteAttachment(): A valid layer is required.");const S=yield e.deleteAttachments(z,[g.id]).then(()=>g);v.remove(S);return S});return function(g){return B.apply(this,arguments)}}();J.updateAttachment=function(){var B=m._asyncToGenerator(function*(g,e=this.activeAttachmentInfo){const {_attachmentLayer:v,attachmentInfos:z,
graphic:C,abilities:S}=this;if(!g)throw new E("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:g});if(!e)throw new E("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!S.operations.update)throw new E("invalid-abilities","updateAttachment(): Update abilities are required.");const A=z.findIndex(r=>r===e);if(!v||"function"!==typeof v.updateAttachment)throw new E("invalid-layer","updateAttachment(): A valid layer is required.");
g=yield v.updateAttachment(C,e.id,g).then(r=>this._queryAttachment(r.objectId));z.splice(A,1,g);return g});return function(g){return B.apply(this,arguments)}}();J._queryAttachment=function(){var B=m._asyncToGenerator(function*(g){if(!g)throw new E("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:e}=this,v=this._getFeatureId();g=new F({objectIds:[v],attachmentsWhere:`AttachmentId=${g}`,returnMetadata:!0});return e.queryAttachments(g).then(z=>z[v][0])});return function(g){return B.apply(this,
arguments)}}();J._getFeatureId=function(){const {_attachmentLayer:B,graphic:g}=this;if(!B||!g)return null;const {objectIdField:e}=B,{attributes:v}=g;return v&&v[e]};J._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};J._setAttachmentLayer=function(){var {graphic:B}=this;this._attachmentLayer=(B=w.getSourceLayer(B))?"scene"===B.type&&L.isSome(B.associatedLayer)?B.associatedLayer:B:null};m._createClass(K,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return K}(Y.HandleOwner);p.__decorate([R.property()],x.prototype,"abilities",void 0);p.__decorate([q.cast("abilities")],x.prototype,"castAbilities",null);p.__decorate([R.property()],x.prototype,"activeAttachmentInfo",void 0);p.__decorate([R.property({readOnly:!0,type:H})],x.prototype,"attachmentInfos",void 0);p.__decorate([R.property({type:y})],
x.prototype,"graphic",void 0);p.__decorate([R.property()],x.prototype,"mode",void 0);p.__decorate([R.property({readOnly:!0})],x.prototype,"state",null);p.__decorate([R.property({readOnly:!0})],x.prototype,"supportsResizeAttachments",null);return x=p.__decorate([f.subclass("esri.widgets.Attachments.AttachmentsViewModel")],x)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P){function q(){q=p._asyncToGenerator(function*(D,N){return"function"===typeof D?D.call(null,N):D});return q.apply(this,arguments)}function f(D){return D?na.test(D):!1}function n(D,N){if(!f(N)||!D)return null;const V=N.replace(na,"").toLowerCase();let ia;D.some(ca=>ca.name.toLowerCase()===V?(ia=ca,!0):!1);return ia}function F(D,N){return(N=w(N,D))?N.name:D}function w(D,N){return D&&"function"===typeof D.getField?D.getField(N):null}function M({formattedAttributes:D,template:N,
fieldInfoMap:V}){return`${Y.replace(Y.replace(N,ia=>{{const ca=V.get(ia.toLowerCase());ia=`{${ca&&ca.fieldName||ia}}`}return ia}),D).replace(ba,"")}`.trim()}function H(D,N,V=!1){const ia=N[D];"string"===typeof ia&&(V=(V?encodeURIComponent(ia):ia).replace(oa,"%27"),N[D]=V)}function Q(D,N=!1){const V={...D};Object.keys(V).forEach(ia=>H(ia,V,N));return V}function K(D,N){return D.replace(ma,(V,ia,ca)=>(V=w(N,ca))?`{${V.name}}`:ia)}function J(D,N,V){return(D=K(D,V))?D.replace(Fa,(ia,ca,ka)=>{ca=`${ca||
ka}`.trim();return Y.replace(ia,Q(N,ca&&"{"!==ca[0]))}):D}function B(D,N){var V=N.fieldName,ia=g(N.fieldInfos,V),ca=null==ia?void 0:ia.clone();ia=N.preventPlacesFormatting;N=N.layer;V=w(N,V);if(ca&&"date"===(null==V?void 0:V.type)){V=ca.format||new T;V.dateFormat=V.dateFormat||"short-date-short-time";var ka;if(!(ka="feature"===(null==N?void 0:N.type)&&N.datesInUnknownTimezone)){if(ka=!(null==N||!N.layer))ka=N.layer,ka="map-image"===(null==ka?void 0:ka.type);ka=ka&&N.layer.datesInUnknownTimezone}V.dateTimeFormatOptions=
ka?{timeZone:"UTC"}:null;ca.format=V}ca=ca&&ca.format;"string"!==typeof D||!ca||null!=ca.dateFormat||null==ca.places&&null==ca.digitSeparator||(N=Number(D),isNaN(N)||(D=N));return"string"===typeof D||null==D||null==ca?z(D):ia?W.formatNumber(D,{...W.convertNumberFormatToIntlOptions(ca),minimumFractionDigits:0,maximumFractionDigits:20}):ca.format(D)}function g(D,N){if(D&&D.length&&N){var V=N.toLowerCase(),ia=void 0;D.some(ca=>ca.fieldName&&ca.fieldName.toLowerCase()===V?(ia=ca,!0):!1);return ia}}function e({fieldName:D,
graphic:N,layer:V}){if(G(D)||!V||"function"!==typeof V.getFeatureType)return null;const {typeIdField:ia}=V;return ia&&D===ia?(D=V.getFeatureType(N))?D.name:null:null}function v({fieldName:D,value:N,graphic:V,layer:ia}){return G(D)||!ia||"function"!==typeof ia.getFieldDomain?null:(D=ia.getFieldDomain(D,{feature:V}))&&"coded-value"===D.type?D.getName(N):null}function z(D){return"string"===typeof D?D.replace(Ea,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):D}function C(D){const {value:N,fieldName:V,
fieldInfos:ia,fieldInfoMap:ca,layer:ka,graphic:ya}=D;return null==N?"":(D=v({fieldName:V,value:N,graphic:ya,layer:ka}))||(D=e({fieldName:V,graphic:ya,layer:ka}))?D:ca.get(V.toLowerCase())?B(N,{fieldInfos:ia,fieldName:V,layer:ka}):(D=ka&&ka.fieldsIndex)&&D.isDateField(V)?L.formatDate(N,Ma):z(N)}function S(D,N){return A.apply(this,arguments)}function A(){A=p._asyncToGenerator(function*(D,N){var V,ia;const {layer:ca,graphic:ka,outFields:ya,objectIds:Ca,returnGeometry:Ta,spatialReference:Ra}=D;D=Ca[0];
if("number"!==typeof D&&"string"!==typeof D)return ha.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ca,graphic:ka,objectId:D,requiredFields:ya}),null;if(null==(V=ca.capabilities)||null==(ia=V.operations)||!ia.supportsQuery)return ha.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:ca,graphic:ka,requiredFields:ya,returnGeometry:Ta}),null;V=ca.createQuery();V.objectIds=Ca;V.outFields=null!=ya&&ya.length?
ya:[ca.objectIdField];V.returnGeometry=!!Ta;V.returnZ=!!Ta;V.returnM=!!Ta;V.outSpatialReference=Ra;return(yield ca.queryFeatures(V,N)).features[0]});return A.apply(this,arguments)}function r(D){return O.apply(this,arguments)}function O(){O=p._asyncToGenerator(function*(D){var N;if(null==(N=D.expressionInfos)||!N.length)return!1;N=yield P.loadArcade();({arcadeUtils:{hasGeometryFunctions:N}}=N);return N(D)});return O.apply(this,arguments)}function u(){u=p._asyncToGenerator(function*({graphic:D,popupTemplate:N,
layer:V,spatialReference:ia},ca){if(V&&N&&("function"===typeof V.load&&(yield V.load(ca)),D.attributes)){var ka=D.attributes[V.objectIdField];if(null!=ka){ka=[ka];var ya=yield N.getRequiredFields(V.fieldsIndex),Ca=R.featureHasFields(ya,D);ya=Ca?[]:ya;N=N.returnGeometry||(yield r(N));if(!Ca||N)if(V=yield S({layer:V,graphic:D,outFields:ya,objectIds:ka,returnGeometry:N,spatialReference:ia},ca))V.geometry&&(D.geometry=V.geometry),V.attributes&&(D.attributes={...D.attributes,...V.attributes})}}});return u.apply(this,
arguments)}function G(D=""){return D?-1!==D.indexOf("relationships/"):!1}function X({attributes:D,graphic:N,relatedInfo:V}){D&&N&&V&&Object.keys(N.attributes).forEach(ia=>{var ca={layerId:V.relation.id.toString(),fieldName:ia};D[ca?`${"relationships/"}${ca.layerId}/${ca.fieldName}`:""]=N.attributes[ia]})}function aa(D,N){D&&N&&(N.relatedFeatures&&N.relatedFeatures&&N.relatedFeatures.forEach(V=>X({attributes:D,graphic:V,relatedInfo:N})),N.relatedStatsFeatures&&N.relatedStatsFeatures&&N.relatedStatsFeatures.forEach(V=>
X({attributes:D,graphic:V,relatedInfo:N})))}const ha=x.getLogger("esri.widgets.Feature.support.featureUtils"),ba=/href=(""|'')/gi,ma=/(\{([^\{\r\n]+)\})/g,oa=/'/g,na=/^\s*expression\//i,Ea=/(\n)/gi,ua=/[\u00A0-\u9999<>&]/gim,Fa=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,pa=/^(?:mailto:|tel:)/,Ma=L.convertDateFormatToIntlOptions("short-date-short-time"),Va=D=>{if(!D)return!1;D=D.toUpperCase();return-1<D.indexOf("CURRENT_TIMESTAMP")||-1<D.indexOf("CURRENT_DATE")||-1<D.indexOf("CURRENT_TIME")},Za=({layer:D,
method:N,query:V,definitionExpression:ia})=>{var ca,ka;null!=(ca=D.capabilities)&&null!=(ka=ca.query)&&ka.supportsCacheHint&&"attachments"!==N&&(D=E.isSome(V.where)&&V.where,N=E.isSome(V.geometry)&&V.geometry,Va(ia)||Va(D)||"extent"===(null==N?void 0:N.type)||"tile"===V.resultType||(V.cacheHint=!0))};m.applyTextFormattingHTML=z;m.createfieldInfoMap=function(D,N){const V=new Map;D&&D.forEach(ia=>{const ca=F(ia.fieldName,N);ia.fieldName=ca;V.set(ca.toLowerCase(),ia)});return V};m.fixTokens=K;m.formatAttributes=
function({fieldInfos:D,attributes:N,layer:V,graphic:ia,fieldInfoMap:ca,relatedInfos:ka}){const ya={};null==ka?void 0:ka.forEach(Ca=>aa(ya,Ca));Object.keys(N).forEach(Ca=>{ya[Ca]=C({fieldName:Ca,fieldInfos:D,fieldInfoMap:ca,layer:V,value:N[Ca],graphic:ia})});return ya};m.formatEditInfo=function(D,N){const {creatorField:V,creationDateField:ia,editorField:ca,editDateField:ka}=D;if(N){D=N[ka];if("number"===typeof D)return N=N[ca],{type:"edit",date:L.formatDate(D,Ma),user:N};D=N[ia];return"number"===typeof D?
(N=N[V],{type:"create",date:L.formatDate(D,Ma),user:N}):null}};m.formatValueToFieldInfo=B;m.getAllFieldInfos=function(D){const N=[];if(!D)return N;const {fieldInfos:V,content:ia}=D;V&&N.push(...V);if(!ia||!Array.isArray(ia))return N;ia.forEach(ca=>{"fields"===ca.type&&(ca=ca&&ca.fieldInfos)&&N.push(...ca)});return N};m.getFieldInfo=g;m.getFieldInfoLabel=function(D,N){return(N=n(N,null==D?void 0:D.fieldName))?N.title||null:D?D.label||D.fieldName:null};m.getFixedFieldName=F;m.getFixedFieldNames=function(D,
N){return D&&D.map(V=>F(V,N))};m.getSourceLayer=function(D){if(!E.isNone(D))return D.get("sourceLayer")||D.get("layer")};m.graphicCallback=function(D,N){return q.apply(this,arguments)};m.htmlEntities=function(D){return D.replace(ua,N=>`&#${N.charCodeAt(0)};`)};m.isExpressionField=f;m.isRelatedField=G;m.preLayerQueryCallback=({query:D,layer:N,method:V})=>{Za({layer:N,method:V,query:D,definitionExpression:`${N.definitionExpression} ${N.serviceDefinitionExpression}`})};m.preRequestCallback=({queryPayload:D,
layer:N,method:V})=>{Za({layer:N,method:V,query:D,definitionExpression:`${N.definitionExpression} ${N.serviceDefinitionExpression}`})};m.queryUpdatedFeature=function(D,N){return u.apply(this,arguments)};m.shouldOpenInNewTab=function(D=""){if(D)return!pa.test(D.trim().toLowerCase())};m.substituteAttributes=M;m.substituteFieldsInLinksAndAttributes=function({attributes:D,globalAttributes:N,layer:V,text:ia,expressionAttributes:ca,fieldInfoMap:ka}){return ia?M({formattedAttributes:N,template:J(ia,{...N,
...ca,...D},V),fieldInfoMap:ka}):""};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(m,p){m.getIconPath=function(y){const x=p.getAssetUrl("esri/themes/base/images/files/");return y?"text/plain"===y?`${x}text-32.svg`:"application/pdf"===y?`${x}pdf-32.svg`:"text/csv"===y?`${x}csv-32.svg`:"application/gpx+xml"===y?`${x}gpx-32.svg`:"application/x-dwf"===y?`${x}cad-32.svg`:"application/postscript"===
y||"application/json"===y||"text/xml"===y||"model/vrml"===y?`${x}code-32.svg`:"application/x-zip-compressed"===y||"application/x-7z-compressed"===y||"application/x-gzip"===y||"application/x-tar"===y||"application/x-gtar"===y||"application/x-bzip2"===y||"application/gzip"===y||"application/x-compress"===y||"application/x-apple-diskimage"===y||"application/x-rar-compressed"===y||"application/zip"===y?`${x}zip-32.svg`:-1!==y.indexOf("image/")?`${x}image-32.svg`:-1!==y.indexOf("audio/")?`${x}sound-32.svg`:
-1!==y.indexOf("video/")?`${x}video-32.svg`:-1!==y.indexOf("msexcel")||-1!==y.indexOf("ms-excel")||-1!==y.indexOf("spreadsheetml")?`${x}excel-32.svg`:-1!==y.indexOf("msword")||-1!==y.indexOf("ms-word")||-1!==y.indexOf("wordprocessingml")?`${x}word-32.svg`:-1!==y.indexOf("powerpoint")||-1!==y.indexOf("presentationml")?`${x}report-32.svg`:`${x}generic-32.svg`:`${x}generic-32.svg`};m.isSupportedImage=function(y){y=y.toLowerCase();return"image/bmp"===y||"image/emf"===y||"image/exif"===y||"image/gif"===
y||"image/x-icon"===y||"image/jpeg"===y||"image/png"===y||"image/tiff"===y||"image/x-wmf"===y};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(m,p,y,x,E,Y,L,W){x=function(R){function T(P){P=R.call(this,P)||this;P.description=null;P.title=null;return P}m._inheritsLoose(T,R);return T}(W);p.__decorate([y.property()],x.prototype,"description",void 0);p.__decorate([y.property()],x.prototype,"title",void 0);return x=p.__decorate([L.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],x)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q){x=function(f){function n(w,M){w=f.call(this,w,M)||this;w.description=null;w.headingLevel=2;w.title=null;return w}m._inheritsLoose(n,f);var F=n.prototype;F.render=function(){return q.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};F.renderTitle=function(){const {title:w}=this;return w?q.tsx(R.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},w):null};F.renderDescription=function(){const {description:w}=
this;return w?q.tsx("div",{key:"description",class:"esri-feature-element-info__description"},w):null};return n}(W);p.__decorate([y.property()],x.prototype,"description",void 0);p.__decorate([y.property()],x.prototype,"headingLevel",void 0);p.__decorate([y.property()],x.prototype,"title",void 0);return x=p.__decorate([L.subclass("esri.widgets.Feature.support.FeatureElementInfo")],x)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(m,p,y,x,E,Y){const L={heading:"esri-widget__heading"};m.CSS=L;m.Heading=function(W,R){const T=`h${p.clamp(Math.ceil(W.level),1,6)}`;delete W.level;return Y.tsx(T,{...W,class:y.classes(L.heading,W.class)},R)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f){x=function(n){function F(M,H){M=n.call(this,M,H)||this;M.creator=null;M.graphic=null;M.viewModel=null;M._addTargetToAnchors=Q=>{Array.from(Q.querySelectorAll("a")).forEach(K=>{P.shouldOpenInNewTab(K.href)&&!K.hasAttribute("target")&&K.setAttribute("target","_blank")})};return M}m._inheritsLoose(F,n);var w=F.prototype;w.renderLoading=function(){return f.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},f.tsx("div",{class:"esri-feature-content__loader"}))};
w.renderCreated=function(){var M;const H=null==(M=this.viewModel)?void 0:M.created;return H?H instanceof HTMLElement?f.tsx("div",{key:H,bind:H,afterCreate:this._attachToNode}):q.isWidget(H)?f.tsx("div",{key:H},!H.destroyed&&H.render()):f.tsx("div",{key:H,innerHTML:H,afterCreate:this._addTargetToAnchors}):null};w.render=function(){var M;const H=null==(M=this.viewModel)?void 0:M.state;return f.tsx("div",{class:"esri-feature-content"},"loading"===H?this.renderLoading():this.renderCreated())};w._attachToNode=
function(M){M.appendChild(this)};return F}(R);p.__decorate([y.aliasOf("viewModel.creator")],x.prototype,"creator",void 0);p.__decorate([y.aliasOf("viewModel.graphic")],x.prototype,"graphic",void 0);p.__decorate([L.property({type:T})],x.prototype,"viewModel",void 0);return x=p.__decorate([W.subclass("esri.widgets.Feature.FeatureContent")],x)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q){x=function(f){function n(w){var M=f.call(this,w)||this;M._loadingPromise=null;M.created=null;M.creator=null;M.destroyer=null;M.graphic=null;M.handles.add(Y.init(m._assertThisInitialized(M),"creator",H=>{M._destroyContent();M._createContent(H)}));return M}m._inheritsLoose(n,f);var F=n.prototype;F.destroy=function(){this._destroyContent()};F._destroyContent=function(){const {created:w,graphic:M,destroyer:H}=this;w&&(q.graphicCallback(H,{graphic:M}).catch(()=>null),
this._set("created",null))};F._createContent=function(){var w=m._asyncToGenerator(function*(M){var {graphic:H}=this;this._loadingPromise=M=q.graphicCallback(M,{graphic:H}).catch(()=>null);this.notifyChange("state");H=yield M;M===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",H))});return function(M){return w.apply(this,arguments)}}();m._createClass(n,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return n}(E.HandleOwnerMixin(x));
p.__decorate([L.property({readOnly:!0})],x.prototype,"created",void 0);p.__decorate([L.property()],x.prototype,"creator",void 0);p.__decorate([L.property()],x.prototype,"destroyer",void 0);p.__decorate([L.property({type:y})],x.prototype,"graphic",void 0);p.__decorate([L.property({readOnly:!0})],x.prototype,"state",null);return x=p.__decorate([P.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],x)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w){E=function(M){function H(K,J){K=M.call(this,K,J)||this;K.viewModel=new f;return K}m._inheritsLoose(H,M);var Q=H.prototype;Q.initialize=function(){y.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};Q.destroy=function(){var K;null==(K=this._contentWidget)?void 0:K.destroy();this._contentWidget=null};Q.renderLoading=function(){return w.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},w.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};Q.render=function(){var K;const {state:J}=this.viewModel;return w.tsx("div",{class:"esri-feature-expression"},"loading"===J?this.renderLoading():"disabled"===J?null:null==(K=this._contentWidget)?void 0:K.render())};Q._setupExpressionWidget=function(){var K;const {contentElementViewModel:J,contentElement:B}=this.viewModel,g=null==B?void 0:B.type;null==(K=this._contentWidget)?void 0:K.destroy();this._contentWidget=null;this._contentWidget=J?"fields"===g?new P({viewModel:J}):
"media"===g?new q({viewModel:J}):"text"===g?new T({viewModel:J}):null:null;this.scheduleRender()};return H}(R);p.__decorate([x.property({type:f})],E.prototype,"viewModel",void 0);return E=p.__decorate([W.subclass("esri.widgets.Feature.FeatureExpression")],E)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M){E=function(H){function Q(J,B){J=H.call(this,J,B)||this;J._featureElementInfo=null;J.attributes=null;J.description=null;J.expressionInfos=null;J.fieldInfos=null;J.title=null;J.viewModel=new P;J.messages=null;J.messagesURIUtils=null;return J}m._inheritsLoose(Q,H);var K=Q.prototype;K.initialize=function(){this._featureElementInfo=new q;y.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};K.destroy=function(){this._featureElementInfo.destroy()};
K.renderFieldInfo=function(J,B){var {attributes:g}=this.viewModel;const e=J.fieldName,v=J.label||e;g=g?null==g[e]?"":g[e]:"";J=!(!J.format||!J.format.dateFormat);g="number"!==typeof g||J?f.autoLink(this.messagesURIUtils,g):this._forceLTR(g);J={["esri-feature-fields__field-data--date"]:J};return M.tsx("tr",{key:`fields-element-info-row-${e}-${B}`},M.tsx("th",{key:`fields-element-info-row-header-${e}-${B}`,class:"esri-feature-fields__field-header",innerHTML:v}),M.tsx("td",{key:`fields-element-info-row-data-${e}-${B}`,
class:this.classes("esri-feature-fields__field-data",J),innerHTML:g}))};K.renderFields=function(){const {formattedFieldInfos:J}=this.viewModel;return null!=J&&J.length?M.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},M.tsx("tbody",null,J.map((B,g)=>this.renderFieldInfo(B,g)))):null};K.render=function(){var J;return M.tsx("div",{class:"esri-feature-fields"},null==(J=this._featureElementInfo)?void 0:J.render(),this.renderFields())};K._setupFeatureElementInfo=function(){const {description:J,
title:B}=this;this._featureElementInfo.set({description:J,title:B})};K._forceLTR=function(J){return`&lrm;${J}`};return Q}(T);p.__decorate([x.aliasOf("viewModel.attributes")],E.prototype,"attributes",void 0);p.__decorate([x.aliasOf("viewModel.description")],E.prototype,"description",void 0);p.__decorate([x.aliasOf("viewModel.expressionInfos")],E.prototype,"expressionInfos",void 0);p.__decorate([x.aliasOf("viewModel.fieldInfos")],E.prototype,"fieldInfos",void 0);p.__decorate([x.aliasOf("viewModel.title")],
E.prototype,"title",void 0);p.__decorate([W.property({type:P})],E.prototype,"viewModel",void 0);p.__decorate([W.property(),F.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,"messages",void 0);p.__decorate([W.property(),F.messageBundle("esri/widgets/support/t9n/uriUtils")],E.prototype,"messagesURIUtils",void 0);return E=p.__decorate([R.subclass("esri.widgets.Feature.FeatureFields")],E)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P){y=function(q){function f(n){n=q.call(this,n)||this;n.attributes=null;n.expressionInfos=null;n.description=null;n.fieldInfos=null;n.title=null;return n}m._inheritsLoose(f,q);m._createClass(f,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:n,fieldInfos:F}=this,w=[];null==F?void 0:F.forEach(M=>{if(!M.hasOwnProperty("visible")||M.visible)M=M.clone(),M.label=P.getFieldInfoLabel(M,n),w.push(M)});return w}}]);return f}(y);p.__decorate([x.property()],y.prototype,
"attributes",void 0);p.__decorate([x.property({type:[R]})],y.prototype,"expressionInfos",void 0);p.__decorate([x.property()],y.prototype,"description",void 0);p.__decorate([x.property({type:[T]})],y.prototype,"fieldInfos",void 0);p.__decorate([x.property({readOnly:!0})],y.prototype,"formattedFieldInfos",null);p.__decorate([x.property()],y.prototype,"title",void 0);return y=p.__decorate([W.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],y)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(m,p){function y(E){let Y=null;x.some(L=>{L.pattern.test(E)&&(Y=L);return!!Y});return Y}const x=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];m.autoLink=function(E,Y){if("string"!==typeof Y||!Y)return Y;const L=y(Y);if(!L)return Y;const W=Y.match(L.pattern);
E=p.replace(p.replace(L.label,{messages:E,hierPart:W&&W[2]}),{appName:L.appName});return Y.replace(L.pattern,`<a${L.target?` target="${L.target}"`:""} href="$1"${"_blank"===L.target?' rel\x3d"noreferrer"':""}>${E}</a>`)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M,H,Q){Y=function(K){function J(g,e){var v=K.call(this,g,e)||this;v._refreshTimer=null;v._refreshIntervalInfo=null;v._featureElementInfo=null;v.attributes=null;v.activeMediaInfoIndex=null;v.description=null;v.fieldInfoMap=null;v.layer=null;v.mediaInfos=null;v.popupTemplate=null;v.relatedInfos=null;v.title=null;v.viewModel=new q;v.messages=null;v._getChartDependencies=function(){var z=m._asyncToGenerator(function*(C){const S=yield F.loadChartsModule();var {viewModel:A}=
m._assertThisInitialized(v);A&&({activeMediaInfo:A}=A,v._renderChart({chartDiv:C,mediaInfo:A,chartsModule:S}))});return function(C){return z.apply(this,arguments)}}();return v}m._inheritsLoose(J,K);var B=J.prototype;B.initialize=function(){this._featureElementInfo=new f;this.own(x.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),x.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};B.destroy=function(){this._clearMediaRefreshTimer();
this._featureElementInfo.destroy()};B.render=function(){var g;return Q.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(g=this._featureElementInfo)?void 0:g.render(),this.renderMedia())};B.renderMedia=function(){const {formattedMediaInfoCount:g}=this.viewModel;return g?Q.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};B.renderImageMediaInfo=
function(g){var {_refreshIntervalInfo:e}=this;const {activeMediaInfoIndex:v,formattedMediaInfoCount:z}=this.viewModel,{value:C,refreshInterval:S,altText:A,title:r,type:O}=g,{sourceURL:u,linkURL:G}=C;g=n.shouldOpenInNewTab(G)?"_blank":"_self";const X="_blank"===g?"noreferrer":"";e=S?e:null;e=Q.tsx("img",{alt:A||r,key:`media-${O}-${v}-${z}-${e?e.timestamp:0}`,src:e?e.sourceURL:u});return(g=G?Q.tsx("a",{title:r,href:G,rel:X,target:g},e):null)?g:e};B.renderChartMediaInfo=function(g){const {activeMediaInfoIndex:e,
formattedMediaInfoCount:v}=this.viewModel;return Q.tsx("div",{key:`media-${g.type}-${e}-${v}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};B.renderMediaInfoType=function(){const {activeMediaInfo:g}=this.viewModel;return g?"image"===g.type?this.renderImageMediaInfo(g):-1!==g.type.indexOf("chart")?this.renderChartMediaInfo(g):null:null};B.renderMediaInfo=function(){var {activeMediaInfo:g}=this.viewModel;if(!g)return null;const e=g.title?Q.tsx("div",{key:"media-title",
class:"esri-feature-media__item-title",innerHTML:g.title}):null;g=g.caption?Q.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:g.caption}):null;return Q.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},Q.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),e,g)};B.renderMediaPageButton=function(g){if(2>this.viewModel.formattedMediaInfoCount)return null;const e=(g="previous"===g)?this.messages.previous:
this.messages.next,v=g?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),z=g?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),C=g?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return Q.tsx("button",{type:"button",key:g?"media-previous":"media-next",title:e,"aria-label":e,tabIndex:0,class:v,bind:this,onclick:g?this._previous:this._next},Q.tsx("span",{"aria-hidden":"true",class:z}),Q.tsx("span",{"aria-hidden":"true",class:C}))};B._setupFeatureElementInfo=function(){const {description:g,title:e}=this;this._featureElementInfo.set({description:g,title:e})};B._next=function(){this.viewModel.next()};
B._previous=function(){this.viewModel.previous()};B._handleMediaKeyup=function(g){const e=y.eventKey(g);"ArrowLeft"===e&&(g.stopPropagation(),this.viewModel.previous());"ArrowRight"===e&&(g.stopPropagation(),this.viewModel.next())};B._renderChart=function(g){const {chartsModule:e,chartDiv:v,mediaInfo:z}=g,{value:C,type:S}=z,{am4core:A}=e,r=F.getColorSet(A);w.isDarkTheme()&&A.useTheme(e.am4themes_dark);A.useTheme(e.am4themes_animated);A.useTheme(function(O){O instanceof A.ColorSet&&r&&(O.list=r)});
g="pie-chart"===S?this._createPieChart(g):this._createXYChart(g);v.setAttribute("aria-label",z.altText||z.title);g.data=C.series.map(O=>({tooltip:O.tooltip,value:O.value})).filter(O=>"pie-chart"===S?0<O.value:!0)};B._customizeChartTooltip=function(g,e){g.label.wrap=!0;g.label.maxWidth=200;g.autoTextColor=!1;g.getFillFromObject=!1;g.label.fill=e.color("#ffffff");g.background.fill=e.color({r:0,g:0,b:0,a:.7})};B._createPieChart=function(g){const {chartDiv:e,chartsModule:v}=g,{am4core:z,am4charts:C}=
v;g=z.create(e,C.PieChart);g.rtl=w.isRTL(this.container);const S=g.series.push(new C.PieSeries);S.labels.template.disabled=!0;S.ticks.template.disabled=!0;S.dataFields.value="value";S.dataFields.category="tooltip";this._customizeChartTooltip(S.tooltip,z);return g};B._getMinSeriesValue=function(g){let e=0;g.forEach(v=>e=Math.min(v.value,e));return e};B._createColumnChart=function(g,e){const {chartsModule:v,mediaInfo:z}=e;({value:e}=z);const {am4core:C,am4charts:S}=v,A=g.xAxes.push(new S.CategoryAxis);
A.dataFields.category="tooltip";A.renderer.labels.template.disabled=!0;this._customizeChartTooltip(A.tooltip,C);A.tooltip.events.on("sizechanged",()=>{A.tooltip.dy=-A.tooltip.contentHeight});var r=g.yAxes.push(new S.ValueAxis);const O=r.renderer.labels.template;r.renderer.minLabelPosition=.05;r.renderer.maxLabelPosition=.95;r.min=this._getMinSeriesValue(e.series);this._customizeChartTooltip(r.tooltip,C);O.wrap=!0;r=g.series.push(new S.ColumnSeries);r.dataFields.valueY="value";r.dataFields.categoryX=
"tooltip";g.cursor=new S.XYCursor;15<e.series.length&&(g.scrollbarX=new C.Scrollbar)};B._createBarChart=function(g,e){const {chartsModule:v,mediaInfo:z}=e;({value:e}=z);const {am4core:C,am4charts:S}=v,A=g.yAxes.push(new S.CategoryAxis);A.dataFields.category="tooltip";A.renderer.inversed=!0;A.renderer.labels.template.disabled=!0;this._customizeChartTooltip(A.tooltip,C);A.tooltip.events.on("sizechanged",()=>{A.tooltip.dx=A.tooltip.contentWidth});var r=g.xAxes.push(new S.ValueAxis);const O=r.renderer.labels.template;
r.renderer.minLabelPosition=.05;r.renderer.maxLabelPosition=.95;r.min=this._getMinSeriesValue(e.series);this._customizeChartTooltip(r.tooltip,C);O.wrap=!0;r=g.series.push(new S.ColumnSeries);r.dataFields.valueX="value";r.dataFields.categoryY="tooltip";g.cursor=new S.XYCursor;15<e.series.length&&(g.scrollbarY=new C.Scrollbar)};B._createLineChart=function(g,e){const {chartsModule:v,mediaInfo:z}=e;({value:e}=z);const {am4core:C,am4charts:S}=v,A=g.xAxes.push(new S.CategoryAxis);A.dataFields.category=
"tooltip";A.renderer.labels.template.disabled=!0;this._customizeChartTooltip(A.tooltip,C);A.tooltip.events.on("sizechanged",()=>{A.tooltip.dy=-A.tooltip.contentHeight});var r=g.yAxes.push(new S.ValueAxis);const O=r.renderer.labels.template;r.renderer.minLabelPosition=.05;r.renderer.maxLabelPosition=.95;r.min=this._getMinSeriesValue(e.series);this._customizeChartTooltip(r.tooltip,C);O.wrap=!0;r=g.series.push(new S.LineSeries);r.dataFields.categoryX="tooltip";r.dataFields.valueY="value";g.cursor=new S.XYCursor;
15<e.series.length&&(g.scrollbarX=new C.Scrollbar)};B._createXYChart=function(g){const {chartDiv:e,chartsModule:v,mediaInfo:z}=g,{type:C}=z,{am4core:S,am4charts:A}=v,r=S.create(e,A.XYChart);r.rtl=w.isRTL(this.container);"column-chart"===C&&this._createColumnChart(r,g);"bar-chart"===C&&this._createBarChart(r,g);"line-chart"===C&&this._createLineChart(r,g);return r};B._clearMediaRefreshTimer=function(){const {_refreshTimer:g}=this;g&&(clearTimeout(g),this._refreshTimer=null)};B._updateMediaInfoTimestamp=
function(g){const e=Date.now();this._refreshIntervalInfo={timestamp:e,sourceURL:this._getImageSource(g,e)};this.scheduleRender()};B._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:g}=this.viewModel;g&&"image"===g.type&&g.refreshInterval&&this._setRefreshTimeout(g)};B._setRefreshTimeout=function(g){const {refreshInterval:e,value:v}=g;e&&(g=6E4*e,this._updateMediaInfoTimestamp(v.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(v.sourceURL)},
g))};B._getImageSource=function(g,e){const v=-1!==g.indexOf("?")?"\x26":"?",[z,C=""]=g.split("#");return`${z}${v}timestamp=${e}${C?"#":""}${C}`};return J}(P);p.__decorate([E.aliasOf("viewModel.attributes")],Y.prototype,"attributes",void 0);p.__decorate([E.aliasOf("viewModel.activeMediaInfoIndex")],Y.prototype,"activeMediaInfoIndex",void 0);p.__decorate([E.aliasOf("viewModel.description")],Y.prototype,"description",void 0);p.__decorate([E.aliasOf("viewModel.fieldInfoMap")],Y.prototype,"fieldInfoMap",
void 0);p.__decorate([E.aliasOf("viewModel.layer")],Y.prototype,"layer",void 0);p.__decorate([E.aliasOf("viewModel.mediaInfos")],Y.prototype,"mediaInfos",void 0);p.__decorate([E.aliasOf("viewModel.popupTemplate")],Y.prototype,"popupTemplate",void 0);p.__decorate([E.aliasOf("viewModel.relatedInfos")],Y.prototype,"relatedInfos",void 0);p.__decorate([E.aliasOf("viewModel.title")],Y.prototype,"title",void 0);p.__decorate([R.property({type:q})],Y.prototype,"viewModel",void 0);p.__decorate([R.property(),
M.messageBundle("esri/widgets/Feature/t9n/Feature")],Y.prototype,"messages",void 0);return Y=p.__decorate([T.subclass("esri.widgets.Feature.FeatureMedia")],Y)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q){y=function(f){function n(w){w=f.call(this,w)||this;w.activeMediaInfoIndex=0;w.attributes=null;w.description=null;w.fieldInfoMap=null;w.formattedAttributes=null;w.expressionAttributes=null;w.layer=null;w.mediaInfos=null;w.popupTemplate=null;w.relatedInfos=null;w.title=null;return w}m._inheritsLoose(n,f);var F=n.prototype;F.setActiveMedia=function(w){this._setContentElementMedia(w)};F.next=function(){this._pageContentElementMedia(1)};F.previous=function(){this._pageContentElementMedia(-1)};
F._setContentElementMedia=function(w){const {formattedMediaInfoCount:M}=this;this.activeMediaInfoIndex=(w+M)%M};F._pageContentElementMedia=function(w){const {activeMediaInfoIndex:M}=this;this._setContentElementMedia(M+w)};F._formatMediaInfos=function(){const {attributes:w,mediaInfos:M,formattedAttributes:H,expressionAttributes:Q,fieldInfoMap:K,layer:J}=this;return null==M?void 0:M.map(B=>{B=null==B?void 0:B.clone();if(!B)return null;B.title=P.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:K,
globalAttributes:H,expressionAttributes:Q,layer:J,text:B.title});B.caption=P.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:K,globalAttributes:H,expressionAttributes:Q,layer:J,text:B.caption});B.altText=P.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:K,globalAttributes:H,expressionAttributes:Q,layer:J,text:B.altText});if("image"===B.type){var {value:g}=B;this._setImageValue({value:g,formattedAttributes:H,layer:J});return B.value.sourceURL?B:void 0}return"pie-chart"===
B.type||"line-chart"===B.type||"column-chart"===B.type||"bar-chart"===B.type?({value:g}=B,this._setChartValue({value:g,chartType:B.type,attributes:w,formattedAttributes:H,layer:J}),B):null}).filter(Boolean)};F._setImageValue=function(w){const {fieldInfoMap:M}=this,{value:H,formattedAttributes:Q,layer:K}=w,{linkURL:J,sourceURL:B}=H;B&&(w=P.fixTokens(B,K),H.sourceURL=P.substituteAttributes({formattedAttributes:Q,template:w,fieldInfoMap:M}));J&&(w=P.fixTokens(J,K),H.linkURL=P.substituteAttributes({formattedAttributes:Q,
template:w,fieldInfoMap:M}))};F._setChartValue=function(w){const {value:M,attributes:H,formattedAttributes:Q,chartType:K,layer:J}=w,{popupTemplate:B,relatedInfos:g}=this,{fields:e,normalizeField:v}=M;M.fields=P.getFixedFieldNames(e,J);v&&(M.normalizeField=P.getFixedFieldName(v,J));if(e.some(C=>!!(null!=Q[C]||P.isRelatedField(C)&&g.size))){var z=null==B?void 0:B.fieldInfos;e.forEach(C=>{P.isRelatedField(C)?M.series=[...M.series,...this._getRelatedChartInfos({fieldInfos:z,fieldName:C,formattedAttributes:Q,
chartType:K,value:M})]:(C=this._getChartOption({value:M,attributes:H,chartType:K,formattedAttributes:Q,fieldName:C,fieldInfos:z}),M.series.push(C))})}};F._getRelatedChartInfos=function(w){var M;const {fieldInfos:H,fieldName:Q,formattedAttributes:K,chartType:J,value:B}=w,g=[];w=q.getRelatedFieldInfo(Q);const {layerId:e,fieldName:v}=w;w=null==(M=this.relatedInfos)?void 0:M.get(e.toString());if(!w)return g;const {relatedFeatures:z,relation:C}=w;if(!C||!z)return g;({cardinality:M}=C);z.forEach(S=>{const {attributes:A}=
S;A&&Object.keys(A).forEach(r=>{r===v&&g.push(this._getChartOption({value:B,attributes:A,formattedAttributes:K,fieldName:Q,chartType:J,relatedFieldName:r,fieldInfos:H}))})});return"one-to-many"===M||"many-to-many"===M?g:[g[0]]};F._getTooltip=function({label:w,value:M,chartType:H}){return"pie-chart"===H?w:`${w}: ${M}`};F._getChartOption=function(w){const {value:M,attributes:H,formattedAttributes:Q,fieldName:K,relatedFieldName:J,fieldInfos:B,chartType:g}=w;var {layer:e}=this;const {normalizeField:v,
tooltipField:z}=M;var C=v?P.isRelatedField(v)?H[q.getRelatedFieldInfo(v).fieldName]:H[v]:null;w=J&&void 0!==H[J]?H[J]:void 0!==H[K]?H[K]:Q[K];const S=void 0===w?null:w&&C?w/C:w;w=new T({value:S});if(P.isRelatedField(K)){var A=q.getRelatedFieldInfo(K);var r=q.getRelatedFieldInfo(z);r=r?r.fieldName:null;e=P.formatValueToFieldInfo(S,{fieldInfos:B,fieldName:J,layer:e,preventPlacesFormatting:!!C});A=A?A.label||A.fieldName:J;w.tooltip=this._getTooltip({label:r&&void 0!==H[r]?H[r]:A,value:e,chartType:g});
return w}C=P.getFieldInfo(B,K);e=P.getFixedFieldName(K,e);C=z&&void 0!==Q[z]?Q[z]:P.getFieldInfoLabel(C||new R({fieldName:e}),null==(A=this.popupTemplate)?void 0:A.expressionInfos);w.tooltip=this._getTooltip({label:C,value:Q[e],chartType:g});return w};m._createClass(n,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return n}(y);p.__decorate([x.property()],y.prototype,"activeMediaInfoIndex",void 0);p.__decorate([x.property({readOnly:!0})],y.prototype,"activeMediaInfo",null);p.__decorate([x.property()],y.prototype,"attributes",void 0);p.__decorate([x.property()],y.prototype,"description",void 0);p.__decorate([x.property()],y.prototype,"fieldInfoMap",void 0);p.__decorate([x.property()],y.prototype,"formattedAttributes",void 0);p.__decorate([x.property()],y.prototype,"expressionAttributes",void 0);p.__decorate([x.property({readOnly:!0})],
y.prototype,"formattedMediaInfos",null);p.__decorate([x.property()],y.prototype,"layer",void 0);p.__decorate([x.property({readOnly:!0})],y.prototype,"formattedMediaInfoCount",null);p.__decorate([x.property()],y.prototype,"mediaInfos",void 0);p.__decorate([x.property()],y.prototype,"popupTemplate",void 0);p.__decorate([x.property()],y.prototype,"relatedInfos",void 0);p.__decorate([x.property()],y.prototype,"title",void 0);return y=p.__decorate([W.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
y)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(m,p,y,x,E,Y,L,W,R,T,P,q){function f(g,e){if(!e.relationships)return null;let v=null;
({relationships:e}=e);e.some(z=>z.id===parseInt(g,10)?(v=z,!0):!1);return v}function n({originRelationship:g,relationships:e,layerId:v}){let z;e&&e.some(C=>{`${C.relatedTableId}`===v&&C.id===g.id&&(z=C);return!!z});return z}function F(g,e){e=e.toLowerCase();for(const v in g)if(v.toLowerCase()===e)return g[v];return null}function w(g,e,v,z){const C=new R;C.outFields=["*"];C.relationshipId="number"===typeof e.id?e.id:parseInt(e.id,10);C.objectIds=[g.attributes[v.objectIdField]];return v.queryRelatedFeatures(C,
z)}function M(g,e,v){let z=0;const C=[];for(;z<e.length;)C.push(`${g} IN (${e.slice(z,v+z)})`),z+=v;return C.join(" OR ")}function H(g,e,v,z){return Q.apply(this,arguments)}function Q(){Q=p._asyncToGenerator(function*(g,e,v,z){var C=v.layerId.toString();const {layerInfo:S,queryTask:A,relation:r,relatedFields:O,outStatistics:u}=e;C=n({originRelationship:r,relationships:S.relationships,layerId:C});if(C.relationshipTableId&&C.keyFieldInRelationshipTable){v=(yield w(g,C,v,z))[g.attributes[v.objectIdField]];
if(!v)return null;const G=v.features.map(X=>X.attributes[S.objectIdField]);if(0<(null==u?void 0:u.length)&&S.supportsStatistics)return e=new W,e.where=M(S.objectIdField,G,1E3),e.outFields=O,e.outStatistics=u,e={features:Promise.resolve(v),statsFeatures:A.execute(e)},Y.eachAlways(e)}return(C=null==C?void 0:C.keyField)?(v=L.isNumericField(K(S.fields,C)),g=F(g.attributes,r.keyField),C=v?`${C}=${g}`:`${C}='${g}'`,g=A.execute(new W({where:C,outFields:e.relatedFields}),z),e=e.outStatistics&&0<e.outStatistics.length&&
S.supportsStatistics?A.execute(new W({where:C,outFields:e.relatedFields,outStatistics:e.outStatistics}),z):null,z={features:g},e&&(z.statsFeatures=e),Y.eachAlways(z)):null});return Q.apply(this,arguments)}function K(g,e){if(null!=g){e=e.toLowerCase();for(const v of g)if(v&&v.name.toLowerCase()===e)return v}return null}const J=E.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),B=new Map;m.createRelatedInfo=function(g,e){if(g=f(g,e)){var v=`${e.url}/${g.relatedTableId}`;e=new P({url:v,
sourceSpatialReference:e.spatialReference});return{url:v,queryTask:e,relation:g,relatedFields:[],outStatistics:[]}}};m.getDestinationRelation=n;m.getRelatedFieldInfo=function(g){if(!q.isRelatedField(g))return null;const [e,v]=g.split("/").slice(1);return{layerId:e,fieldName:v}};m.queryLayerInfos=function({relatedInfos:g,layer:e},v){const z={};g.forEach((C,S)=>{({relation:C}=C);if(!C)throw S=new x("relation-required","A relation is required on a layer to retrieve related records."),J.error(S),S;({relatedTableId:C}=
C);if("number"!==typeof C)throw S=new x("A related table ID is required on a layer to retrieve related records."),J.error(S),S;C=`${e.url}/${C}`;const A=B.get(C),r=A?A:y(C,{query:{f:"json"},signal:v&&v.signal});A||B.set(C,r);z[S]=r});return Y.eachAlways(z)};m.queryRelatedFeatures=function({graphic:g,relatedInfos:e,layer:v},z){const C={};e.forEach((S,A)=>{S.layerInfo&&(C[A]=H(g,S,v,z))});return Y.eachAlways(C)};m.setRelatedFeatures=function(g,e){if(e&&g){var {features:v,statsFeatures:z}=g;g=v&&v.value;
e.relatedFeatures=g?g.features:[];g=z&&z.value;e.relatedStatsFeatures=g?g.features:[]}};m.updateRelatedInfo=function({relatedInfo:g,fieldName:e,fieldInfo:v}){g.relatedFields.push(e);v.statisticType&&(e=new T({statisticType:v.statisticType,onStatisticField:e,outStatisticFieldName:e}),g.outStatistics.push(e))};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(m,p,y,x,E,Y){function L(f){if(!f)return"en-us";if(T.has(f.toLowerCase()))return f.toLowerCase();{f=f.split("-")[0].toLowerCase();let F=null;for(n of T.keys())if(n.startsWith(f)){F=n;break}var n=F}return n||"en-us"}function W(){W=y._asyncToGenerator(function*(f=Y.getLocale()){f=L(f);if(P&&f===q)return P;P=(new Promise((n,F)=>m(["../../chunks/index"],n,F))).then(n=>n.index);q=f;try{const [n,F]=yield Promise.all([P,T.get(q)()]);q===f&&(n.am4core.options.defaultLocale=F.default);n.am4core.options.suppressWarnings=
!0;n.am4core.options.autoDispose=!0}catch{return q=P=null}return P});return W.apply(this,arguments)}x="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var R=[{name:"default",colors:[].concat(x.slice(30,39),x.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const T=new Map([["ar",()=>(new Promise((f,n)=>m(["../../chunks/ar2"],f,n))).then(f=>f.ar)],["bg-bg",()=>(new Promise((f,
n)=>m(["../../chunks/bg_BG"],f,n))).then(f=>f.bg_BG)],["bs-ba",()=>(new Promise((f,n)=>m(["../../chunks/bs_BA"],f,n))).then(f=>f.bs_BA)],["ca-es",()=>(new Promise((f,n)=>m(["../../chunks/ca_ES"],f,n))).then(f=>f.ca_ES)],["cs-cz",()=>(new Promise((f,n)=>m(["../../chunks/cs_CZ"],f,n))).then(f=>f.cs_CZ)],["da-dk",()=>(new Promise((f,n)=>m(["../../chunks/da_DK"],f,n))).then(f=>f.da_DK)],["de-de",()=>(new Promise((f,n)=>m(["../../chunks/de_DE"],f,n))).then(f=>f.de_DE)],["de-ch",()=>(new Promise((f,n)=>
m(["../../chunks/de_CH"],f,n))).then(f=>f.de_CH)],["el-gr",()=>(new Promise((f,n)=>m(["../../chunks/el_GR"],f,n))).then(f=>f.el_GR)],["en-us",()=>(new Promise((f,n)=>m(["../../chunks/en_US"],f,n))).then(f=>f.en_US)],["en-ca",()=>(new Promise((f,n)=>m(["../../chunks/en_CA"],f,n))).then(f=>f.en_CA)],["es-es",()=>(new Promise((f,n)=>m(["../../chunks/es_ES"],f,n))).then(f=>f.es_ES)],["et-ee",()=>(new Promise((f,n)=>m(["../../chunks/et_EE"],f,n))).then(f=>f.et_EE)],["fi-fi",()=>(new Promise((f,n)=>m(["../../chunks/fi_FI"],
f,n))).then(f=>f.fi_FI)],["fr-fr",()=>(new Promise((f,n)=>m(["../../chunks/fr_FR"],f,n))).then(f=>f.fr_FR)],["he-il",()=>(new Promise((f,n)=>m(["../../chunks/he_IL"],f,n))).then(f=>f.he_IL)],["hr-hr",()=>(new Promise((f,n)=>m(["../../chunks/hr_HR"],f,n))).then(f=>f.hr_HR)],["hu-hu",()=>(new Promise((f,n)=>m(["../../chunks/hu_HU"],f,n))).then(f=>f.hu_HU)],["id-id",()=>(new Promise((f,n)=>m(["../../chunks/id_ID"],f,n))).then(f=>f.id_ID)],["it-it",()=>(new Promise((f,n)=>m(["../../chunks/it_IT"],f,n))).then(f=>
f.it_IT)],["ja-jp",()=>(new Promise((f,n)=>m(["../../chunks/ja_JP"],f,n))).then(f=>f.ja_JP)],["ko-kr",()=>(new Promise((f,n)=>m(["../../chunks/ko_KR"],f,n))).then(f=>f.ko_KR)],["lt-lt",()=>(new Promise((f,n)=>m(["../../chunks/lt_LT"],f,n))).then(f=>f.lt_LT)],["lv-lv",()=>(new Promise((f,n)=>m(["../../chunks/lv_LV"],f,n))).then(f=>f.lv_LV)],["nb-no",()=>(new Promise((f,n)=>m(["../../chunks/nb_NO"],f,n))).then(f=>f.nb_NO)],["nl-nl",()=>(new Promise((f,n)=>m(["../../chunks/nl_NL"],f,n))).then(f=>f.nl_NL)],
["pl-pl",()=>(new Promise((f,n)=>m(["../../chunks/pl_PL"],f,n))).then(f=>f.pl_PL)],["pt-br",()=>(new Promise((f,n)=>m(["../../chunks/pt_BR"],f,n))).then(f=>f.pt_BR)],["pt-pt",()=>(new Promise((f,n)=>m(["../../chunks/pt_PT"],f,n))).then(f=>f.pt_PT)],["ro-ro",()=>(new Promise((f,n)=>m(["../../chunks/ro_RO"],f,n))).then(f=>f.ro_RO)],["ru-ru",()=>(new Promise((f,n)=>m(["../../chunks/ru_RU"],f,n))).then(f=>f.ru_RU)],["sk-sk",()=>(new Promise((f,n)=>m(["../../chunks/sk_SK"],f,n))).then(f=>f.sk_SK)],["sl-sl",
()=>(new Promise((f,n)=>m(["../../chunks/sl_SL"],f,n))).then(f=>f.sl_SL)],["sr-rs",()=>(new Promise((f,n)=>m(["../../chunks/sr_RS"],f,n))).then(f=>f.sr_RS)],["sv-se",()=>(new Promise((f,n)=>m(["../../chunks/sv_SE"],f,n))).then(f=>f.sv_SE)],["th-th",()=>(new Promise((f,n)=>m(["../../chunks/th_TH"],f,n))).then(f=>f.th_TH)],["tr-tr",()=>(new Promise((f,n)=>m(["../../chunks/tr_TR"],f,n))).then(f=>f.tr_TR)],["uk-ua",()=>(new Promise((f,n)=>m(["../../chunks/uk_UA"],f,n))).then(f=>f.uk_UA)],["vi-vn",()=>
(new Promise((f,n)=>m(["../../chunks/vi_VN"],f,n))).then(f=>f.vi_VN)],["zh-cn",()=>(new Promise((f,n)=>m(["../../chunks/zh_Hans"],f,n))).then(f=>f.zh_Hans)],["zh-hk",()=>(new Promise((f,n)=>m(["../../chunks/zh_Hant"],f,n))).then(f=>f.zh_Hant)],["zh-tw",()=>(new Promise((f,n)=>m(["../../chunks/zh_Hant"],f,n))).then(f=>f.zh_Hant)]]);let P,q;p.getChartLocale=L;p.getColorSet=function(f,n="default"){const F=R.find(w=>w.name===n);return F?F.colors.map(w=>f.color(w)):null};p.loadChartsModule=function(){return W.apply(this,
arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M,H,Q,K,J,B,g,e,v){E=function(z){function C(S){var A=z.call(this,S)||this;A._abortController=null;A.expressionInfo=null;A.graphic=null;A.contentElement=null;A.contentElementViewModel=null;A.interceptor=null;A.view=null;A._cancelQuery=()=>{const {_abortController:r}=m._assertThisInitialized(A);r&&r.abort();A._abortController=null};A._createVM=()=>{var r,O;const u=null==(r=A.contentElement)?void 0:r.type;null==(O=A.contentElementViewModel)?void 0:O.destroy();
r="fields"===u?new g:"media"===u?new e:"text"===u?new B:null;A._set("contentElementViewModel",r)};A._compile=m._asyncToGenerator(function*(){A._cancelQuery();const r=new AbortController;A._abortController=r;yield A._compileExpression();A._abortController===r&&(A._abortController=null)});A._compileThrottled=L.throttle(A._compile,1,m._assertThisInitialized(A));A._compileExpression=m._asyncToGenerator(function*(){const {expressionInfo:r,graphic:O,interceptor:u,spatialReference:G,map:X,view:aa,_abortController:ha}=
m._assertThisInitialized(A);if(r&&O&&G&&X&&aa){var ba=yield v.loadArcadeUtils();if(ha===A._abortController)if((ba=yield v.createCompiledExpression({arcadeUtils:ba,expressionInfo:r,graphic:O,interceptor:u,map:X,spatialReference:G,view:aa}))&&"esri.arcade.Dictionary"===ba.declaredClass){ba=yield x.castAsJsonAsync(ba,ha.signal);var ma=null==ba?void 0:ba.type;ba="media"===ma?Q.fromJSON(ba):"text"===ma?K.fromJSON(ba):"fields"===ma?H.fromJSON(ba):null;A._set("contentElement",ba)}else A._set("contentElement",
null)}else A._set("contentElement",null)});A.handles.add([W.init(m._assertThisInitialized(A),["expressionInfo","graphic","map","spatialReference","view"],A._compileThrottled),W.init(m._assertThisInitialized(A),"contentElement",A._createVM)]);return A}m._inheritsLoose(C,z);C.prototype.destroy=function(){var S;this._cancelQuery();null==(S=this.contentElementViewModel)?void 0:S.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};m._createClass(C,[{key:"spatialReference",
get:function(){var S;return(null==(S=this.view)?void 0:S.spatialReference)||null},set:function(S){void 0===S?this._clearOverride("spatialReference"):this._override("spatialReference",S)}},{key:"state",get:function(){const {_abortController:S,contentElement:A,contentElementViewModel:r}=this;return S?"loading":A||r?"ready":"disabled"}},{key:"map",get:function(){var S;return(null==(S=this.view)?void 0:S.map)||null},set:function(S){void 0===S?this._clearOverride("map"):this._override("map",S)}}]);return C}(Y.HandleOwnerMixin(E));
p.__decorate([R.property()],E.prototype,"_abortController",void 0);p.__decorate([R.property({type:J})],E.prototype,"expressionInfo",void 0);p.__decorate([R.property({type:y})],E.prototype,"graphic",void 0);p.__decorate([R.property({readOnly:!0})],E.prototype,"contentElement",void 0);p.__decorate([R.property({readOnly:!0})],E.prototype,"contentElementViewModel",void 0);p.__decorate([R.property()],E.prototype,"interceptor",void 0);p.__decorate([R.property()],E.prototype,"spatialReference",null);p.__decorate([R.property({readOnly:!0})],
E.prototype,"state",null);p.__decorate([R.property()],E.prototype,"map",null);p.__decorate([R.property()],E.prototype,"view",void 0);return E=p.__decorate([f.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],E)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M){function H(c,k,I){return""===k||null===k||void 0===k||k===I||k===I?c:c=c.split(k).join(I)}function Q(c){return c instanceof bb||c instanceof p||c instanceof cb}function K(c){return B(c)||e(c)||r(c)||g(c)||null===c||c===Ga||"number"===typeof c?!0:!1}function J(c,k){return void 0===c?k:c}function B(c){return"string"===typeof c||c instanceof String}function g(c){return"boolean"===typeof c}function e(c){return"number"===typeof c}function v(c){return"number"===
typeof c&&isFinite(c)&&Math.floor(c)===c}function z(c){return c instanceof Array}function C(c){return!0===(c&&c.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===c.declaredRootClass)}function S(c){return!0===(c&&c.declaredRootClass&&"esri.arcade.featureSetCollection"===c.declaredRootClass)}function A(c){return c instanceof y}function r(c){return c instanceof Date}function O(c,k,I){if(c.length<k||c.length>I)throw Error("Function called with wrong number of Parameters");}function u(c){return 0>
c?-Math.round(-c):Math.round(c)}function G(){let c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){const I=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===k?I:I&3|8).toString(16)})}function X(c,k){if(!1===isNaN(c)){if(void 0===k||null===k||""===k)return c.toString();k=H(k,"\u2030","");k=H(k,"\u00a4","");return F.format(c,{pattern:k})}return c.toString()}function aa(c,k){c=f.DateTime.fromJSDate(c);return void 0===k||null===k||""===k?c.toISO({suppressMilliseconds:!0}):
c.toFormat(ha(k),{locale:M.getLocale(),numberingSystem:"latn"})}function ha(c){c=c.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let k="";const I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const fa of c.match(I))switch(fa){case "D":k+="d";break;case "DD":k+="dd";break;case "DDD":k+="o";break;case "d":k+="c";break;case "ddd":k+="ccc";break;
case "dddd":k+="cccc";break;case "M":k+="L";break;case "MM":k+="LL";break;case "MMM":k+="LLL";break;case "MMMM":k+="LLLL";break;case "YY":k+="yy";break;case "Y":case "YYYY":k+="yyyy";break;case "Q":k+="q";break;case "Z":k+="ZZ";break;case "ZZ":k+="ZZZ";break;case "S":k+="'S'";break;case "SS":k+="'SS'";break;case "SSS":k+="u";break;case "A":case "a":k+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":k+=fa;break;default:k=2<=fa.length&&"["===fa.slice(0,
1)&&"]"===fa.slice(-1)?k+`'${fa.slice(1,-1)}'`:k+`'${fa}'`}return k}function ba(c,k,I){switch(I){case "\x3e":return c>k;case "\x3c":return c<k;case "\x3e\x3d":return c>=k;case "\x3c\x3d":return c<=k}return!1}function ma(c,k,I){if(null===c){if(null===k||k===Ga)return ba(null,null,I);if(e(k))return ba(0,k,I);if(B(k)||g(k))return ba(0,pa(k),I);if(r(k))return ba(0,k.getTime(),I)}if(c===Ga){if(null===k||k===Ga)return ba(null,null,I);if(e(k))return ba(0,k,I);if(B(k)||g(k))return ba(0,pa(k),I);if(r(k))return ba(0,
k.getTime(),I)}else if(e(c)){if(e(k))return ba(c,k,I);if(g(k))return ba(c,pa(k),I);if(null===k||k===Ga)return ba(c,0,I);if(B(k))return ba(c,pa(k),I);if(r(k))return ba(c,k.getTime(),I)}else if(B(c)){if(B(k))return ba(na(c),na(k),I);if(r(k))return ba(pa(c),k.getTime(),I);if(e(k))return ba(pa(c),k,I);if(null===k||k===Ga)return ba(pa(c),0,I);if(g(k))return ba(pa(c),pa(k),I)}else if(r(c)){if(r(k))return ba(c,k,I);if(null===k||k===Ga)return ba(c.getTime(),0,I);if(e(k))return ba(c.getTime(),k,I);if(g(k)||
B(k))return ba(c.getTime(),pa(k),I)}else if(g(c)){if(g(k))return ba(c,k,I);if(e(k))return ba(pa(c),pa(k),I);if(r(k))return ba(pa(c),k.getTime(),I);if(null===k||k===Ga)return ba(pa(c),0,I);if(B(k))return ba(pa(c),pa(k),I)}return!oa(c,k)||"\x3c\x3d"!==I&&"\x3e\x3d"!==I?!1:!0}function oa(c,k){if(c===k||null===c&&k===Ga||null===k&&c===Ga)return!0;if(r(c)&&r(k))return c.getTime()===k.getTime();if(c instanceof x||c instanceof E)return c.equalityTest(k);if(c instanceof T&&k instanceof T){const I=c.cache._arcadeCacheId,
fa=k.cache._arcadeCacheId;if(void 0!==I&&null!==I)return I===fa}return void 0!==c&&void 0!==k&&null!==c&&null!==k&&"object"===typeof c&&"object"===typeof k&&(c._arcadeCacheId===k._arcadeCacheId&&void 0!==c._arcadeCacheId&&null!==c._arcadeCacheId||c._underlyingGraphic===k._underlyingGraphic&&void 0!==c._underlyingGraphic&&null!==c._underlyingGraphic)?!0:!1}function na(c,k){if(B(c))return c;if(null===c)return"";if(e(c))return X(c,k);if(g(c))return c.toString();if(r(c))return aa(c,k);if(c instanceof
W)return JSON.stringify(c.toJSON());if(z(c)){k=[];for(var I=0;I<c.length;I++)k[I]=Fa(c[I]);return"["+k.join(",")+"]"}if(c instanceof y){k=[];for(I=0;I<c.length();I++)k[I]=Fa(c.get(I));return"["+k.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():Q(c)?"object, Function":""}function Ea(c){const k=[];if(!1===z(c))return null;if(c instanceof y){for(var I=0;I<c.length();I++)k[I]=pa(c.get(I));return k}for(I=0;I<c.length;I++)k[I]=pa(c[I]);return k}function ua(c,k){if(B(c))return c;
if(null===c)return"";if(e(c))return X(c,k);if(g(c))return c.toString();if(r(c))return aa(c,k);if(c instanceof W)return c instanceof L?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+Ca(c.spatialReference)+"}":Ca(c.toJSON(),(fa,ea)=>
fa.key===ea.key?0:"spatialReference"===fa.key?1:"spatialReference"===ea.key||fa.key<ea.key?-1:fa.key>ea.key?1:0);if(z(c)){k=[];for(var I=0;I<c.length;I++)k[I]=Fa(c[I]);return"["+k.join(",")+"]"}if(c instanceof y){k=[];for(I=0;I<c.length();I++)k[I]=Fa(c.get(I));return"["+k.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():Q(c)?"object, Function":""}function Fa(c){return null===c?"null":g(c)||e(c)||B(c)?JSON.stringify(c):c instanceof W||c instanceof y||c instanceof
Array?ua(c):c instanceof Date?JSON.stringify(aa(c,"")):null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():"null"}function pa(c,k){return e(c)?c:null===c||""===c?0:r(c)?NaN:g(c)?c?1:0:z(c)||""===c||void 0===c?NaN:void 0!==k&&B(c)?(k=H(k,"\u2030",""),k=H(k,"\u00a4",""),F.parse(c,{pattern:k})):c===Ga?0:Number(c)}function Ma(c){return r(c)?c:B(c)&&(c=Za(c))?c.toJSDate():null}function Va(c){return r(c)?f.DateTime.fromJSDate(c):B(c)?Za(c):null}function Za(c){const k=/ (\d\d)/;let I=f.DateTime.fromISO(c);
return I.isValid||k.test(c)&&(c=c.replace(k,"T$1"),I=f.DateTime.fromISO(c),I.isValid)?I:null}function D(c){return g(c)?c:B(c)?(c=c.toLowerCase(),"true"===c?!0:!1):e(c)?0===c||isNaN(c)?!1:!0:!1}function N(c,k){if(n.isNone(c))return null;if(null===c.spatialReference||void 0===c.spatialReference)c.spatialReference=k;return c}function V(c){if(null===c)return null;if(c instanceof T)return"NaN"===c.x||null===c.x||isNaN(c.x)?null:c;if(c instanceof P){if(0===c.rings.length)return null;for(const k of c.rings)if(0<
k.length)return c;return null}if(c instanceof q){if(0===c.paths.length)return null;for(const k of c.paths)if(0<k.length)return c;return null}return c instanceof R?0===c.points.length?null:c:c instanceof L?"NaN"===c.xmin||null===c.xmin||isNaN(c.xmin)?null:c:null}function ia(c,k){if(!c||!c.domain)return k;let I=null;if("string"===c.field.type||"esriFieldTypeString"===c.field.type)k=na(k);else{if(null===k||void 0===k)return null;if(""===k)return k;k=pa(k)}for(let fa=0;fa<c.domain.codedValues.length;fa++){const ea=
c.domain.codedValues[fa];ea.code===k&&(I=ea)}return null===I?k:I.name}function ca(c,k){if(!c||!c.domain)return k;let I=null;k=na(k);for(let fa=0;fa<c.domain.codedValues.length;fa++){const ea=c.domain.codedValues[fa];ea.name===k&&(I=ea)}return null===I?k:I.code}function ka(c,k,I=null,fa){if(!k||!k.fields)return null;let ea=null;for(let Ha=0;Ha<k.fields.length;Ha++){const Ba=k.fields[Ha];Ba.name.toLowerCase()===c.toString().toLowerCase()&&(ea=Ba)}if(null===ea)throw Error("Field not found");let qa,wa;
fa||(fa=I&&k.typeIdField&&I._field(k.typeIdField));null!=fa&&k.types.some(function(Ha){return Ha.id===fa?((qa=Ha.domains&&Ha.domains[ea.name])&&"inherited"===qa.type&&(qa=ya(ea.name,k),wa=!0),!0):!1});wa||qa||(qa=ya(c,k));return{field:ea,domain:qa}}function ya(c,k){let I;k.fields.some(function(fa){fa.name.toLowerCase()===c.toLowerCase()&&(I=fa.domain);return!!I});return I}function Ca(c,k){k||(k={});"function"===typeof k&&(k={cmp:k});const I="boolean"===typeof k.cycles?k.cycles:!1,fa=k.cmp&&function(qa){return function(wa){return function(Ha,
Ba){return qa({key:Ha,value:wa[Ha]},{key:Ba,value:wa[Ba]})}}}(k.cmp),ea=[];return function Ha(wa){wa&&wa.toJSON&&"function"===typeof wa.toJSON&&(wa=wa.toJSON());if(void 0!==wa){if("number"===typeof wa)return isFinite(wa)?""+wa:"null";if("object"!==typeof wa)return JSON.stringify(wa);var Ba;if(Array.isArray(wa)){var Pa="[";for(Ba=0;Ba<wa.length;Ba++)Ba&&(Pa+=","),Pa+=Ha(wa[Ba])||"null";return Pa+"]"}if(null===wa)return"null";if(-1!==ea.indexOf(wa)){if(I)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var $a=ea.push(wa)-1,Ua=Object.keys(wa).sort(fa&&fa(wa));Pa="";for(Ba=0;Ba<Ua.length;Ba++){const kb=Ua[Ba],lb=Ha(wa[kb]);lb&&(Pa&&(Pa+=","),Pa+=JSON.stringify(kb)+":"+lb)}ea.splice($a,1);return"{"+Pa+"}"}}(c)}function Ta(c){if(null===c)return null;const k=[];for(const I of c)I&&(I.declaredClass&&"esri.arcade.Feature"===I.declaredClass||"FeatureSetReader"===I.type)?k.push(I.geometry()):k.push(I);return k}function Ra(c,k){if(k instanceof T)c.push(k.hasZ?k.hasM?[k.x,k.y,k.z,k.m]:[k.x,k.y,k.z]:[k.x,
k.y]);else throw Error("Invalid Argument");}function Ja(c,k){if(z(c)||A(c)){let I=!1,fa=!1,ea=[];if(z(c)){for(const qa of c)Ra(ea,qa);0<ea.length&&(k=c[0].spatialReference,I=c[0].hasZ,fa=c[0].hasM)}else if(c instanceof E)ea=c._elements,0<ea.length&&(I=c._hasZ,fa=c._hasM,k=c.get(0).spatialReference);else if(A(c)){for(const qa of c.toArray())Ra(ea,qa);0<ea.length&&(k=c.get(0).spatialReference,I=!0===c.get(0).hasZ,fa=!0===c.get(0).hasM)}else throw Error("Invalid Argument");if(0===ea.length)return null;
!1===w.isClockwise(ea,fa,I)&&(ea=ea.slice(0).reverse());return new P({rings:[ea],spatialReference:k,hasZ:I,hasM:fa})}return c}function ra(c,k){if(z(c)||A(c)){let I=!1,fa=!1,ea=[];if(z(c)){for(const qa of c)Ra(ea,qa);0<ea.length&&(k=c[0].spatialReference,I=!0===c[0].hasZ,fa=!0===c[0].hasM)}else if(c instanceof E)ea=c._elements,0<ea.length&&(I=c._hasZ,fa=c._hasM,k=c.get(0).spatialReference);else if(A(c)){for(const qa of c.toArray())Ra(ea,qa);0<ea.length&&(k=c.get(0).spatialReference,I=!0===c.get(0).hasZ,
fa=!0===c.get(0).hasM)}return 0===ea.length?null:new q({paths:[ea],spatialReference:k,hasZ:I,hasM:fa})}return c}function vb(c,k){if(z(c)||A(c)){let I=!1,fa=!1,ea=[];if(z(c)){for(const qa of c)Ra(ea,qa);0<ea.length&&(k=c[0].spatialReference,I=!0===c[0].hasZ,fa=!0===c[0].hasM)}else if(c instanceof E)ea=c._elements,0<ea.length&&(I=c._hasZ,fa=c._hasM,k=c.get(0).spatialReference);else if(A(c)){for(const qa of c.toArray())Ra(ea,qa);0<ea.length&&(k=c.get(0).spatialReference,I=!0===c.get(0).hasZ,fa=!0===
c.get(0).hasM)}return 0===ea.length?null:new R({points:ea,spatialReference:k,hasZ:I,hasM:fa})}return c}function Ka(c,k=!1){const I=[];if(null===c)return I;if(!0===z(c)){for(var fa=0;fa<c.length;fa++){var ea=na(c[fa]);""===ea&&!0!==k||I.push(ea)}return I}if(c instanceof y){for(fa=0;fa<c.length();fa++)ea=na(c.get(fa)),""===ea&&!0!==k||I.push(ea);return I}return K(c)?(c=na(c),""===c&&!0!==k||I.push(c),I):[]}function mb(c){db++;return 0===db%100?(db=0,Y.create(k=>{setTimeout(()=>{k(c)},0)})):c}function eb(c,
k,I){switch(I){case "\x26":return c&k;case "|":return c|k;case "^":return c^k;case "\x3c\x3c":return c<<k;case "\x3e\x3e":return c>>k;case "\x3e\x3e\x3e":return c>>>k}}function Wa(c,k=null){if(null!=c){if(g(c)||e(c)||B(c))return c;if(c instanceof W)return!0===(null==k?void 0:k.keepGeometryType)?c:c.toJSON();if(c instanceof y)return c.toArray().map(I=>Wa(I,k));if(c instanceof Array)return c.map(I=>Wa(I,k));if(c instanceof Date)return c;if(null!==c&&"object"===typeof c&&void 0!==c.castAsJson)return c.castAsJson(k)}return null}
function Ab(c,k,I,fa,ea){return nb(c,k,I).then(qa=>{ea[fa]=qa})}function nb(c,k=null,I=null){c instanceof y&&(c=c.toArray());if(null!=c){if(K(c)||c instanceof W||c instanceof Date)return Y.resolve(Wa(c,I));if(c instanceof Array){const fa=[],ea=[];for(const qa of c)null===qa||K(qa)||qa instanceof W||qa instanceof Date?ea.push(Wa(qa,I)):(ea.push(null),fa.push(Ab(qa,k,I,ea.length-1,ea)));return 0<fa.length?Y.all(fa).then(()=>ea):Y.resolve(ea)}if(null!==c&&"object"===typeof c&&void 0!==c.castAsJsonAsync)return c.castAsJsonAsync(k,
I)}return Y.resolve(null)}let fb=function(c){this.value=c},gb=function(c){this.value=c},bb=function(c){this.fn=c},cb=function(c,k){this.paramCount=k;this.fn=c};const ob=bb,Ia=cb,Ga={type:"VOID"},pb={type:"BREAK"},hb={type:"CONTINUE"};let db=0;const qb=Object.freeze({__proto__:null,ReturnResultE:fb,ImplicitResultE:gb,NativeFunctionE:bb,SizzleFunctionE:cb,NativeFunction:ob,ImplicitResult:gb,ReturnResult:fb,SizzleFunction:Ia,voidOperation:Ga,breakResult:pb,continueResult:hb,multiReplace:H,isFunctionParameter:Q,
isSimpleType:K,defaultUndefined:J,isString:B,isBoolean:g,isNumber:e,isInteger:v,isArray:z,isFeatureSet:C,isFeatureSetCollection:S,isImmutableArray:A,isDate:r,pcCheck:O,absRound:u,generateUUID:G,formatNumber:X,formatDate:aa,standardiseDateFormat:ha,greaterThanLessThan:ma,equalityTest:oa,toString:na,toNumberArray:Ea,toStringExplicit:ua,toNumber:pa,toDate:Ma,toDateTime:Va,toBoolean:D,fixSpatialReference:N,fixNullGeometry:V,getDomainValue:ia,getDomainCode:ca,getDomain:ka,stableStringify:Ca,autoCastFeatureToGeometry:Ta,
autoCastArrayOfPointsToPolygon:Ja,autoCastArrayOfPointsToPolyline:ra,autoCastArrayOfPointsToMultiPoint:vb,toStringArray:Ka,tick:mb,binaryOperator:eb,castAsJson:Wa,castAsJsonAsync:nb});m.ImplicitResult=gb;m.ImplicitResultE=gb;m.NativeFunction=ob;m.NativeFunctionE=bb;m.ReturnResult=fb;m.ReturnResultE=fb;m.SizzleFunction=Ia;m.SizzleFunctionE=cb;m.absRound=u;m.autoCastArrayOfPointsToMultiPoint=vb;m.autoCastArrayOfPointsToPolygon=Ja;m.autoCastArrayOfPointsToPolyline=ra;m.autoCastFeatureToGeometry=Ta;m.binaryOperator=
eb;m.breakResult=pb;m.castAsJson=Wa;m.castAsJsonAsync=nb;m.continueResult=hb;m.defaultUndefined=J;m.equalityTest=oa;m.fixNullGeometry=V;m.fixSpatialReference=N;m.formatDate=aa;m.formatNumber=X;m.generateUUID=G;m.getDomain=ka;m.getDomainCode=ca;m.getDomainValue=ia;m.greaterThanLessThan=ma;m.isArray=z;m.isBoolean=g;m.isDate=r;m.isFeatureSet=C;m.isFeatureSetCollection=S;m.isFunctionParameter=Q;m.isImmutableArray=A;m.isInteger=v;m.isNumber=e;m.isSimpleType=K;m.isString=B;m.lc=qb;m.multiReplace=H;m.pcCheck=
O;m.stableStringify=Ca;m.standardiseDateFormat=ha;m.tick=mb;m.toBoolean=D;m.toDate=Ma;m.toDateTime=Va;m.toNumber=pa;m.toNumberArray=Ea;m.toString=na;m.toStringArray=Ka;m.toStringExplicit=ua;m.voidOperation=Ga})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(m,p){this.context=this.definition=null;this.definition=m;this.context=p}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function m(y=[]){this._elements=y}var p=m.prototype;p.length=function(){return this._elements.length};
p.get=function(y){return this._elements[y]};p.toArray=function(){const y=[];for(let x=0;x<this.length();x++)y.push(this.get(x));return y};return m}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(m,p,y){return function(x){function E(L,W,R,T,P){L=x.call(this,L)||this;L._lazyPath=[];L._hasZ=!1;L._hasM=!1;L._hasZ=R;L._hasM=T;L._spRef=W;L._cacheId=P;return L}m._inheritsLoose(E,x);var Y=E.prototype;Y.get=
function(L){if(void 0===this._lazyPath[L]){const W=this._elements[L];if(void 0===W)return;this._lazyPath[L]=new y(W,this._spRef,this._hasZ,this._hasM,this._cacheId,L)}return this._lazyPath[L]};Y.equalityTest=function(L){return L===this?!0:null===L||!1===L instanceof E?!1:L.getUniqueHash()===this.getUniqueHash()};Y.getUniqueHash=function(){return this._cacheId.toString()};return E}(p)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],
function(m,p,y){return function(x){function E(L,W,R,T,P,q){L=x.call(this,L)||this;L._lazyPt=[];L._hasZ=!1;L._hasM=!1;L._spRef=W;L._hasZ=R;L._hasM=T;L._cacheId=P;L._partId=q;return L}m._inheritsLoose(E,x);var Y=E.prototype;Y.get=function(L){if(void 0===this._lazyPt[L]){const W=this._elements[L];if(void 0===W)return;const R=this._hasZ,T=this._hasM;let P=null;P=R&&!T?new y(W[0],W[1],W[2],void 0,this._spRef):T&&!R?new y(W[0],W[1],void 0,W[2],this._spRef):R&&T?new y(W[0],W[1],W[2],W[3],this._spRef):new y(W[0],
W[1],this._spRef);P.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+L.toString();this._lazyPt[L]=P}return this._lazyPt[L]};Y.equalityTest=function(L){return L===this?!0:null===L||!1===L instanceof E?!1:L.getUniqueHash()===this.getUniqueHash()};Y.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return E}(p)})},"esri/chunks/datetime":function(){define(["exports"],function(m){function p(a){return"undefined"===typeof a}function y(a){return"number"===
typeof a}function x(a){return"number"===typeof a&&0===a%1}function E(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function Y(a,b,d){if(0!==a.length)return a.reduce((h,l)=>{l=[b(l),l];return h?d(h[0],l[0])===h[0]?h:l:l},null)[1]}function L(a,b){return b.reduce((d,h)=>{d[h]=a[h];return d},{})}function W(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function R(a,b,d){return x(a)&&a>=b&&a<=d}function T(a,b=2){const d=0>a?"-":"";a=d?-1*a:a;b=a.toString().length<
b?("0".repeat(b)+a).slice(-b):a.toString();return`${d}${b}`}function P(a){if(!p(a)&&null!==a&&""!==a)return parseInt(a,10)}function q(a){if(!p(a)&&null!==a&&""!==a)return parseFloat(a)}function f(a){if(!p(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function n(a,b,d=!1){b=10**b;return(d?Math.trunc:Math.round)(a*b)/b}function F(a){return 0===a%4&&(0!==a%100||0===a%400)}function w(a,b){var d=b-1;d=d-12*Math.floor(d/12)+1;return 2===d?F(a+(b-d)/12)?29:28:[31,null,31,30,31,30,31,
31,30,31,30,31][d-1]}function M(a){let b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(b=new Date(b),b.setUTCFullYear(b.getUTCFullYear()-1900));return+b}function H(a){var b=a-1;b=(b+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===b?53:52}function Q(a){return 99<a?a:60<a?1900+a:2E3+a}function K(a,b,d,h=null){a=new Date(a);const l={hourCycle:"h23",year:"numeric",month:"2-digit",
day:"2-digit",hour:"2-digit",minute:"2-digit"};h&&(l.timeZone=h);return(b=(new Intl.DateTimeFormat(d,{timeZoneName:b,...l})).formatToParts(a).find(t=>"timezonename"===t.type.toLowerCase()))?b.value:null}function J(a,b){a=parseInt(a,10);Number.isNaN(a)&&(a=0);b=parseInt(b,10)||0;b=0>a||Object.is(a,-0)?-b:b;return 60*a+b}function B(a){const b=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(b))throw new Oa(`Invalid unit value ${a}`);return b}function g(a,b){const d={};for(const h in a)if(W(a,
h)){const l=a[h];void 0!==l&&null!==l&&(d[b(h)]=B(l))}return d}function e(a,b){const d=Math.trunc(Math.abs(a/60)),h=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(b){case "short":return`${a}${T(d,2)}:${T(h,2)}`;case "narrow":return`${a}${d}${0<h?`:${h}`:""}`;case "techie":return`${a}${T(d,2)}${T(h,2)}`;default:throw new RangeError(`Value format ${b} is out of range for property format`);}}function v(a){return L(a,["hour","minute","second","millisecond"])}function z(a){switch(a){case "narrow":return[...Fc];
case "short":return[...Ob];case "long":return[...Gc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function C(a){switch(a){case "narrow":return[...Hc];case "short":return[...Pb];case "long":return[...Qb];case "numeric":return"1234567".split("");default:return null}}function S(a){switch(a){case "narrow":return[...Ic];case "short":return[...Jc];case "long":return[...Kc];default:return null}}function A(a,
b,d="always",h=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var t=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===d&&t)switch(d="days"===a,b){case 1:return d?"tomorrow":`next ${l[a][0]}`;case -1:return d?"yesterday":`last ${l[a][0]}`;case 0:return d?"today":`this ${l[a][0]}`}d=Object.is(b,-0)||0>b;b=Math.abs(b);t=1===b;const U=l[a];
a=h?t?U[1]:U[2]||U[1]:t?l[a][0]:a;return d?`${b} ${a} ago`:`in ${b} ${a}`}function r(a,b){let d="";for(const h of a)d=h.literal?d+h.val:d+b(h.val);return d}function O(a,b){if(p(a)||null===a)return b;if(a instanceof rb)return a;if("string"===typeof a){const d=a.toLowerCase();return"local"===d||"system"===d?b:"utc"===d||"gmt"===d?La.utcInstance:Sa.isValidSpecifier(d)?Sa.create(a):La.parseSpecifier(d)||new Rb(a)}return y(a)?La.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Rb(a)}
function u(a,b={}){const d=JSON.stringify([a,b]);let h=Bb[d];h||(h=new Intl.DateTimeFormat(a,b),Bb[d]=h);return h}function G(a,b={}){const d=JSON.stringify([a,b]);let h=Cb[d];h||(h=new Intl.NumberFormat(a,b),Cb[d]=h);return h}function X(a,b={}){const {base:d,...h}=b,l=JSON.stringify([a,h]);let t=Db[l];t||(t=new Intl.RelativeTimeFormat(a,b),Db[l]=t);return t}function aa(a){const b=[];for(let d=1;12>=d;d++){const h=la.utc(2016,d,1);b.push(a(h))}return b}function ha(a){const b=[];for(let d=1;7>=d;d++){const h=
la.utc(2016,11,13+d);b.push(a(h))}return b}function ba(a,b,d,h,l){a=a.listingMode(d);return"error"===a?null:"en"===a?h(b):l(b)}function ma(...a){a=a.reduce((b,d)=>b+d.source,"");return RegExp(`^${a}$`)}function oa(...a){return b=>a.reduce(([d,h,l],t)=>{const [U,Z,da]=t(b,l);return[{...d,...U},h||Z,da]},[{},null,1]).slice(0,2)}function na(a,...b){if(null==a)return[null,null];for(const [d,h]of b)if(b=d.exec(a))return h(b);return[null,null]}function Ea(...a){return(b,d)=>{const h={};let l;for(l=0;l<
a.length;l++)h[a[l]]=P(b[d+l]);return[h,null,d+l]}}function ua(a,b,d){a=a[b];return p(a)?d:P(a)}function Fa(a,b){return[{year:ua(a,b),month:ua(a,b+1,1),day:ua(a,b+2,1)},null,b+3]}function pa(a,b){return[{hours:ua(a,b,0),minutes:ua(a,b+1,0),seconds:ua(a,b+2,0),milliseconds:f(a[b+3])},null,b+4]}function Ma(a,b){const d=!a[b]&&!a[b+1];a=J(a[b+1],a[b+2]);return[{},d?null:La.instance(a),b+3]}function Va(a,b){return[{},a[b]?Sa.create(a[b]):null,b+1]}function Za(a){const [b,d,h,l,t,U,Z,da,va]=a,ja="-"===
b[0];a=da&&"-"===da[0];const sa=(xa,Xa=!1)=>void 0!==xa&&(Xa||xa&&ja)?-xa:xa;return[{years:sa(q(d)),months:sa(q(h)),weeks:sa(q(l)),days:sa(q(t)),hours:sa(q(U)),minutes:sa(q(Z)),seconds:sa(q(da),"-0"===da),milliseconds:sa(f(va),a)}]}function D(a,b,d,h,l,t,U){b={year:2===b.length?Q(P(b)):P(b),month:Ob.indexOf(d)+1,day:P(h),hour:P(l),minute:P(t)};U&&(b.second=P(U));a&&(b.weekday=3<a.length?Qb.indexOf(a)+1:Pb.indexOf(a)+1);return b}function N(a){const [,b,d,h,l,t,U,Z,da,va,ja,sa]=a;a=D(b,l,h,d,t,U,Z);
let xa;xa=da?Lc[da]:va?0:J(ja,sa);return[a,new La(xa)]}function V(a){const [,b,d,h,l,t,U,Z]=a;return[D(b,l,h,d,t,U,Z),La.utcInstance]}function ia(a){const [,b,d,h,l,t,U,Z]=a;return[D(b,Z,d,h,l,t,U),La.utcInstance]}function ca(a,b,d=!1){a={values:d?b.values:{...a.values,...b.values||{}},loc:a.loc.clone(b.loc),conversionAccuracy:b.conversionAccuracy||a.conversionAccuracy};return new ta(a)}function ka(a,b,d,h,l){a=a[l][d];var t=b[d]/a;t=Math.sign(t)!==Math.sign(h[l])&&0!==h[l]&&1>=Math.abs(t)?0>t?Math.floor(t):
Math.ceil(t):Math.trunc(t);h[l]+=t;b[d]-=t*a}function ya(a,b){Mc.reduce((d,h)=>{if(p(b[h]))return d;d&&ka(a,b,d,b,h);return h},null)}function Ca(a,b){a=b.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(ta.fromMillis(a).as("days"))}function Ta(a,b,d){var h=[["years",(Z,da)=>da.year-Z.year],["quarters",(Z,da)=>da.quarter-Z.quarter],["months",(Z,da)=>da.month-Z.month+12*(da.year-Z.year)],["weeks",(Z,da)=>{Z=Ca(Z,da);return(Z-
Z%7)/7}],["days",Ca]];const l={};let t,U;for(const [Z,da]of h)0<=d.indexOf(Z)&&(t=Z,h=da(a,b),U=a.plus({[Z]:h}),U>b?(a=a.plus({[Z]:h-1}),--h):a=U,l[Z]=h);return[a,l,U,t]}function Ra(a,b,d,h){let [l,t,U,Z]=Ta(a,b,d);a=b-l;d=d.filter(da=>0<=["hours","minutes","seconds","milliseconds"].indexOf(da));0===d.length&&(U<b&&(U=l.plus({[Z]:1})),U!==l&&(t[Z]=(t[Z]||0)+a/(U-l)));b=ta.fromObject(t,h);return 0<d.length?ta.fromMillis(a,h).shiftTo(...d).plus(b):b}function Ja({numberingSystem:a},b=""){return new RegExp(`${Eb[a||
"latn"]}${b}`)}function ra(a,b=d=>d){return{regex:a,deser:([d])=>{{let h=parseInt(d,10);if(isNaN(h)){h="";for(let l=0;l<d.length;l++){const t=d.charCodeAt(l);if(-1!==d[l].search(Eb.hanidec))h+=Nc.indexOf(d[l]);else for(const U in Sb){const [Z,da]=Sb[U];t>=Z&&t<=da&&(h+=t-Z)}}d=parseInt(h,10)}else d=h}return b(d)}}}function vb(a){return a.replace(/\./g,"\\.?").replace(Fb,Tb)}function Ka(a,b){return null===a?null:{regex:RegExp(a.map(vb).join("|")),deser:([d])=>a.findIndex(h=>d.replace(/\./g,"").replace(Fb,
" ").toLowerCase()===h.replace(/\./g,"").replace(Fb," ").toLowerCase())+b}}function mb(a,b){return{regex:a,deser:([,d,h])=>J(d,h),groups:b}}function eb(a){return{regex:a,deser:([b])=>b}}function Wa(a,b){const d=Ja(b),h=Ja(b,"{2}"),l=Ja(b,"{3}"),t=Ja(b,"{4}"),U=Ja(b,"{6}"),Z=Ja(b,"{1,2}"),da=Ja(b,"{1,3}"),va=Ja(b,"{1,6}"),ja=Ja(b,"{1,9}"),sa=Ja(b,"{2,4}"),xa=Ja(b,"{4,6}"),Xa=sb=>({regex:RegExp(sb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Oc])=>Oc,literal:!0}),ib=(sb=>{if(a.literal)return Xa(sb);
switch(sb.val){case "G":return Ka(b.eras("short",!1),0);case "GG":return Ka(b.eras("long",!1),0);case "y":return ra(va);case "yy":return ra(sa,Q);case "yyyy":return ra(t);case "yyyyy":return ra(xa);case "yyyyyy":return ra(U);case "M":return ra(Z);case "MM":return ra(h);case "MMM":return Ka(b.months("short",!0,!1),1);case "MMMM":return Ka(b.months("long",!0,!1),1);case "L":return ra(Z);case "LL":return ra(h);case "LLL":return Ka(b.months("short",!1,!1),1);case "LLLL":return Ka(b.months("long",!1,!1),
1);case "d":return ra(Z);case "dd":return ra(h);case "o":return ra(da);case "ooo":return ra(l);case "HH":return ra(h);case "H":return ra(Z);case "hh":return ra(h);case "h":return ra(Z);case "mm":return ra(h);case "m":return ra(Z);case "q":return ra(Z);case "qq":return ra(h);case "s":return ra(Z);case "ss":return ra(h);case "S":return ra(da);case "SSS":return ra(l);case "u":return eb(ja);case "uu":return eb(Z);case "uuu":return ra(d);case "a":return Ka(b.meridiems(),0);case "kkkk":return ra(t);case "kk":return ra(sa,
Q);case "W":return ra(Z);case "WW":return ra(h);case "E":case "c":return ra(d);case "EEE":return Ka(b.weekdays("short",!1,!1),1);case "EEEE":return Ka(b.weekdays("long",!1,!1),1);case "ccc":return Ka(b.weekdays("short",!0,!1),1);case "cccc":return Ka(b.weekdays("long",!0,!1),1);case "Z":case "ZZ":return mb(new RegExp(`([+-]${Z.source})(?::(${h.source}))?`),2);case "ZZZ":return mb(new RegExp(`([+-]${Z.source})(${h.source})?`),2);case "z":return eb(/[a-z_+-/]{1,256}?/i);default:return Xa(sb)}})(a)||
{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ib.token=a;return ib}function Ab(a){return[`^${a.map(b=>b.regex).reduce((b,d)=>`${b}(${d.source})`,"")}$`,a]}function nb(a,b,d){if(a=a.match(b)){b={};let h=1;for(const l in d)if(W(d,l)){const t=d[l],U=t.groups?t.groups+1:1;!t.literal&&t.token&&(b[t.token.val[0]]=t.deser(a.slice(h,h+U)));h+=U}return[a,b]}return[a,{}]}function fb(a){const b=h=>{switch(h){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";
case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let d;d=p(a.Z)?p(a.z)?null:Sa.create(a.z):new La(a.Z);p(a.q)||(a.M=3*(a.q-1)+1);p(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);p(a.u)||(a.S=f(a.u));return[Object.keys(a).reduce((h,l)=>{const t=b(l);t&&(h[t]=a[l]);return h},{}),
d]}function gb(){Gb||(Gb=la.fromMillis(1555555555555));return Gb}function bb(a,b){if(a.literal)return a;const d=Na.macroTokenToFormatOpts(a.val);if(!d)return a;b=Na.create(b,d).formatDateTimeParts(gb()).map(h=>{{const {type:t,value:U}=h;if("literal"===t)h={literal:!0,val:U};else{h=d[t];var l=Pc[t];"object"===typeof l&&(l=l[h]);h=l?{literal:!1,val:l}:void 0}}return h});return b.includes(void 0)?a:b}function cb(a,b){return Array.prototype.concat(...a.map(d=>bb(d,b)))}function ob(a,b,d){d=cb(Na.parseFormat(d),
a);var h=d.map(t=>Wa(t,a));const l=h.find(t=>t.invalidReason);if(l)return{input:b,tokens:d,invalidReason:l.invalidReason};{const [t,U]=Ab(h);h=RegExp(t,"i");const [Z,da]=nb(b,h,U),[va,ja]=da?fb(da):[null,null];if(W(da,"a")&&W(da,"H"))throw new tb("Can't include meridiem when specifying 24-hour format");return{input:b,tokens:d,regex:h,rawMatches:Z,matches:da,result:va,zone:ja}}}function Ia(a,b){return new Qa("unit out of range",`you specified ${b} (of type ${typeof b}) as a ${a}, which is invalid`)}
function Ga(a,b,d){a=(new Date(Date.UTC(a,b-1,d))).getUTCDay();return 0===a?7:a}function pb(a,b){a=F(a)?Hb:Ib;const d=a.findIndex(h=>h<b);return{month:d+1,day:b-a[d]}}function hb(a){const {year:b,month:d,day:h}=a;var l=h+(F(b)?Hb:Ib)[d-1];const t=Ga(b,d,h);l=Math.floor((l-t+10)/7);let U;1>l?(U=b-1,l=H(U)):l>H(b)?(U=b+1,l=1):U=b;return{weekYear:U,weekNumber:l,weekday:t,...v(a)}}function db(a){const {weekYear:b,weekNumber:d,weekday:h}=a;var l=Ga(b,1,4),t=F(b)?366:365;l=7*d+h-l-3;1>l?(t=b-1,l+=F(t)?
366:365):l>t?(t=b+1,l-=F(b)?366:365):t=b;const {month:U,day:Z}=pb(t,l);return{year:t,month:U,day:Z,...v(a)}}function qb(a){const {year:b,month:d,day:h}=a;var l=h+(F(b)?Hb:Ib)[d-1];return{year:b,ordinal:l,...v(a)}}function c(a){const {year:b,ordinal:d}=a,{month:h,day:l}=pb(b,d);return{year:b,month:h,day:l,...v(a)}}function k(a){const b=x(a.year),d=R(a.month,1,12),h=R(a.day,1,w(a.year,a.month));return b?d?h?!1:Ia("day",a.day):Ia("month",a.month):Ia("year",a.year)}function I(a){const {hour:b,minute:d,
second:h,millisecond:l}=a;a=R(b,0,23)||24===b&&0===d&&0===h&&0===l;const t=R(d,0,59),U=R(h,0,59),Z=R(l,0,999);return a?t?U?Z?!1:Ia("millisecond",l):Ia("second",h):Ia("minute",d):Ia("hour",b)}function fa(a){return new Qa("unsupported zone",`the zone "${a.name}" is not supported`)}function ea(a){null===a.weekData&&(a.weekData=hb(a.c));return a.weekData}function qa(a,b){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new la({...a,...b,old:a})}function wa(a,b,d){let h=a-6E4*b;const l=
d.offset(h);if(b===l)return[h,b];h-=6E4*(l-b);b=d.offset(h);return l===b?[h,l]:[a-6E4*Math.min(l,b),Math.max(l,b)]}function Ha(a,b){a=new Date(a+6E4*b);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Ba(a,b,d){return wa(M(a),b,d)}function Pa(a,b){const d=a.o;var h=a.c.year+Math.trunc(b.years);const l=a.c.month+Math.trunc(b.months)+3*Math.trunc(b.quarters);h=
{...a.c,year:h,month:l,day:Math.min(a.c.day,w(h,l))+Math.trunc(b.days)+7*Math.trunc(b.weeks)};b=ta.fromObject({years:b.years-Math.trunc(b.years),quarters:b.quarters-Math.trunc(b.quarters),months:b.months-Math.trunc(b.months),weeks:b.weeks-Math.trunc(b.weeks),days:b.days-Math.trunc(b.days),hours:b.hours,minutes:b.minutes,seconds:b.seconds,milliseconds:b.milliseconds}).as("milliseconds");h=M(h);let [t,U]=wa(h,d,a.zone);0!==b&&(t+=b,U=a.zone.offset(t));return{ts:t,o:U}}function $a(a,b,d,h,l){const {setZone:t,
zone:U}=d;return a&&0!==Object.keys(a).length?(a=la.fromObject(a,{...d,zone:b||U}),t?a:a.setZone(U)):la.invalid(new Qa("unparsable",`the input "${l}" can't be parsed as ${h}`))}function Ua(a,b,d=!0){return a.isValid?Na.create(za.create("en-US"),{allowZ:d,forceSimple:!0}).formatDateTimeFromString(a,b):null}function kb(a,{suppressSeconds:b=!1,suppressMilliseconds:d=!1,includeOffset:h,includePrefix:l=!1,includeZone:t=!1,spaceZone:U=!1,format:Z="extended"}){let da="basic"===Z?"HHmm":"HH:mm";b&&0===a.second&&
0===a.millisecond||(da+="basic"===Z?"ss":":ss",d&&0===a.millisecond||(da+=".SSS"));(t||h)&&U&&(da+=" ");t?da+="z":h&&(da+="basic"===Z?"ZZZ":"ZZ");a=Ua(a,da);l&&(a="T"+a);return a}function lb(a){const b={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",
weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!b)throw new Ub(a);return b}function Vb(a,b){const d=O(b.zone,Da.defaultZone);b=za.fromObject(b);const h=Da.now();var l;if(p(a.year))a=h;else{for(const t of Wb)p(a[t])&&(a[t]=Xb[t]);if(l=k(a)||I(a))return la.invalid(l);l=d.offset(h);[a,l]=Ba(a,l,d)}return new la({ts:a,zone:d,loc:b,o:l})}function Yb(a,b,d){const h=p(d.round)?!0:d.round,l=(U,Z)=>{U=n(U,h||d.calendary?0:2,
!0);return b.loc.clone(d).relFormatter(d).format(U,Z)},t=U=>d.calendary?b.hasSame(a,U)?0:b.startOf(U).diff(a.startOf(U),U).get(U):b.diff(a,U).get(U);if(d.unit)return l(t(d.unit),d.unit);for(const U of d.units){const Z=t(U);if(1<=Math.abs(Z))return l(Z,U)}return l(a>b?-0:0,d.units[d.units.length-1])}function Zb(a){let b={};0<a.length&&"object"===typeof a[a.length-1]?(b=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[b,a]}function ub(a){if(la.isDateTime(a))return a;if(a&&a.valueOf&&
y(a.valueOf()))return la.fromJSDate(a);if(a&&"object"===typeof a)return la.fromObject(a);throw new Oa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class ab extends Error{}class Qc extends ab{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Rc extends ab{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Sc extends ab{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class tb extends ab{}class Ub extends ab{constructor(a){super(`Invalid unit ${a}`)}}
class Oa extends ab{}class Ya extends ab{constructor(){super("Zone is an abstract class")}}const Jb={year:"numeric",month:"numeric",day:"numeric"},$b={year:"numeric",month:"short",day:"numeric"},Tc={year:"numeric",month:"short",day:"numeric",weekday:"short"},ac={year:"numeric",month:"long",day:"numeric"},bc={year:"numeric",month:"long",day:"numeric",weekday:"long"},cc={hour:"numeric",minute:"numeric"},dc={hour:"numeric",minute:"numeric",second:"numeric"},ec={hour:"numeric",minute:"numeric",second:"numeric",
timeZoneName:"short"},fc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},gc={hour:"numeric",minute:"numeric",hourCycle:"h23"},hc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ic={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},kc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},lc={year:"numeric",
month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Uc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},oc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},pc={year:"numeric",month:"long",day:"numeric",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"short"},qc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},rc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Gc="January February March April May June July August September October November December".split(" "),Ob="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
Fc="JFMAMJJASOND".split(""),Qb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Pb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Hc="MTWTFSS".split(""),tc=["AM","PM"],Kc=["Before Christ","Anno Domini"],Jc=["BC","AD"],Ic=["B","A"],Vc={D:Jb,DD:$b,DDD:ac,DDDD:bc,t:cc,tt:dc,ttt:ec,tttt:fc,T:gc,TT:hc,TTT:ic,TTTT:jc,f:kc,ff:mc,fff:oc,ffff:qc,F:lc,FF:nc,FFF:pc,FFFF:rc};class Na{static create(a,b={}){return new Na(a,b)}static parseFormat(a){let b=null,d="",h=!1;const l=[];for(let t=0;t<a.length;t++){const U=
a.charAt(t);"'"===U?(0<d.length&&l.push({literal:h,val:d}),b=null,d="",h=!h):h?d+=U:U===b?d+=U:(0<d.length&&l.push({literal:!1,val:d}),b=d=U)}0<d.length&&l.push({literal:h,val:d});return l}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,b){this.opts=b;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,b){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...b}).format()}formatDateTime(a,b={}){return this.loc.dtFormatter(a,
{...this.opts,...b}).format()}formatDateTimeParts(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).formatToParts()}resolvedOptions(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).resolvedOptions()}num(a,b=0){if(this.opts.forceSimple)return T(a,b);const d={...this.opts};0<b&&(d.padTo=b);return this.loc.numberFormatter(d).format(a)}formatDateTimeFromString(a,b){const d="en"===this.loc.listingMode(),h=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,l=(ja,sa)=>this.loc.extract(a,
ja,sa),t=ja=>a.isOffsetFixed&&0===a.offset&&ja.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,ja.format):"",U=(ja,sa)=>d?z(ja)[a.month-1]:l(sa?{month:ja}:{month:ja,day:"numeric"},"month"),Z=(ja,sa)=>d?C(ja)[a.weekday-1]:l(sa?{weekday:ja}:{weekday:ja,month:"long",day:"numeric"},"weekday"),da=ja=>{const sa=Na.macroTokenToFormatOpts(ja);return sa?this.formatWithSystemDefault(a,sa):ja},va=ja=>d?S(ja)[0>a.year?0:1]:l({era:ja},"era");return r(Na.parseFormat(b),ja=>{switch(ja){case "S":return this.num(a.millisecond);
case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return t({format:"narrow",
allowZ:this.opts.allowZ});case "ZZ":return t({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return t({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return d?tc[12>a.hour?0:1]:l({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return h?l({day:"numeric"},"day"):this.num(a.day);case "dd":return h?
l({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Z("short",!0);case "cccc":return Z("long",!0);case "ccccc":return Z("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Z("short",!1);case "EEEE":return Z("long",!1);case "EEEEE":return Z("narrow",!1);case "L":return h?l({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return h?l({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return U("short",
!0);case "LLLL":return U("long",!0);case "LLLLL":return U("narrow",!0);case "M":return h?l({month:"numeric"},"month"):this.num(a.month);case "MM":return h?l({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return U("short",!1);case "MMMM":return U("long",!1);case "MMMMM":return U("narrow",!1);case "y":return h?l({year:"numeric"},"year"):this.num(a.year);case "yy":return h?l({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return h?l({year:"numeric"},"year"):this.num(a.year,
4);case "yyyyyy":return h?l({year:"numeric"},"year"):this.num(a.year,6);case "G":return va("short");case "GG":return va("long");case "GGGGG":return va("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/
1E3));case "x":return this.num(a.ts);default:return da(ja)}})}formatDurationFromString(a,b){const d=l=>{switch(l[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};b=Na.parseFormat(b);const h=b.reduce((l,{literal:t,val:U})=>t?l:l.concat(U),[]);a=a.shiftTo(...h.map(d).filter(l=>l));return r(b,(l=>t=>{const U=d(t);return U?this.num(l.get(U),t.length):t})(a))}}class Qa{constructor(a,
b){this.reason=a;this.explanation=b}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class rb{get type(){throw new Ya;}get name(){throw new Ya;}get isUniversal(){throw new Ya;}offsetName(a,b){throw new Ya;}formatOffset(a,b){throw new Ya;}offset(a){throw new Ya;}equals(a){throw new Ya;}get isValid(){throw new Ya;}}let Kb=null;class uc extends rb{static get instance(){null===Kb&&(Kb=new uc);return Kb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:b,locale:d}){return K(a,b,d)}formatOffset(a,b){return e(this.offset(a),b)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}const Wc=RegExp(`^${sc.source}$`);let wb={};const Xc={year:0,month:1,day:2,hour:3,minute:4,second:5};let xb={};class Sa extends rb{static create(a){xb[a]||(xb[a]=new Sa(a));return xb[a]}static resetCache(){xb={};wb={}}static isValidSpecifier(a){return!(!a||!a.match(Wc))}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(b){return!1}}constructor(a){super();this.zoneName=a;this.valid=Sa.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:b,locale:d}){return K(a,b,d,this.name)}formatOffset(a,b){return e(this.offset(a),b)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var b=this.name;wb[b]||(wb[b]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit"}));b=wb[b];if(b.formatToParts){b=b.formatToParts(a);var d=[];for(let va=0;va<b.length;va++){const {type:ja,value:sa}=b[va],xa=Xc[ja];p(xa)||(d[xa]=parseInt(sa,10))}b=d}else{{b=b.format(a).replace(/\u200E/g,"");b=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(b);const [,va,ja,sa,xa,Xa,ib]=b;b=[sa,va,ja,xa,Xa,ib]}}const [h,l,t,U,Z,da]=b;b=M({year:h,month:l,day:t,hour:24===U?0:U,minute:Z,second:da,millisecond:0});a=+a;d=a%1E3;return(b-(a-(0<=d?d:1E3+d)))/6E4}equals(a){return"iana"===
a.type&&a.name===this.name}get isValid(){return this.valid}}let Lb=null;class La extends rb{static get utcInstance(){null===Lb&&(Lb=new La(0));return Lb}static instance(a){return 0===a?La.utcInstance:new La(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new La(J(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${e(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,b){return e(this.fixed,
b)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Rb extends rb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let vc=()=>Date.now(),wc="system",xc=null,yc=null,zc=null,Ac;class Da{static get now(){return vc}static set now(a){vc=
a}static set defaultZone(a){wc=a}static get defaultZone(){return O(wc,uc.instance)}static get defaultLocale(){return xc}static set defaultLocale(a){xc=a}static get defaultNumberingSystem(){return yc}static set defaultNumberingSystem(a){yc=a}static get defaultOutputCalendar(){return zc}static set defaultOutputCalendar(a){zc=a}static get throwOnInvalid(){return Ac}static set throwOnInvalid(a){Ac=a}static resetCaches(){za.resetCache();Sa.resetCache()}}let Bb={},Cb={},Db={},yb=null;class Yc{constructor(a,
b,d){this.padTo=d.padTo||0;this.floor=d.floor||!1;b||(b={useGrouping:!1},0<d.padTo&&(b.minimumIntegerDigits=d.padTo),this.inf=G(a,b))}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):n(a,3);return T(a,this.padTo)}}class Zc{constructor(a,b,d){this.opts=d;if(a.zone.isUniversal){var h=a.offset/60*-1;h=0<=h?`Etc/GMT+${h}`:`Etc/GMT${h}`;0!==a.offset&&Sa.create(h).valid?this.dt=a:(h="UTC",this.dt=d.timeZoneName?a:0===a.offset?a:la.fromMillis(a.ts+6E4*a.offset))}else"system"===
a.zone.type?this.dt=a:(this.dt=a,h=a.zone.name);a={...this.opts};h&&(a.timeZone=h);this.dtf=u(b,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $c{constructor(a,b,d){this.opts={style:"long",...d};!b&&E()&&(this.rtf=X(a,d))}format(a,b){return this.rtf?this.rtf.format(a,b):A(b,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,b){return this.rtf?this.rtf.formatToParts(a,
b):[]}}class za{static fromOpts(a){return za.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,b,d,h=!1){a=a||Da.defaultLocale;var l;(l=a)||(h?h="en-US":(yb||(yb=(new Intl.DateTimeFormat).resolvedOptions().locale),h=yb),l=h);return new za(l,b||Da.defaultNumberingSystem,d||Da.defaultOutputCalendar,a)}static resetCache(){yb=null;Bb={};Cb={};Db={}}static fromObject({locale:a,numberingSystem:b,outputCalendar:d}={}){return za.create(a,b,d)}constructor(a,b,d,h){var l=a.indexOf("-u-");
if(-1===l)a=[a];else{let da;l=a.substring(0,l);try{da=u(a).resolvedOptions()}catch(sa){da=u(l).resolvedOptions()}const {numberingSystem:va,calendar:ja}=da;a=[l,va,ja]}const [t,U,Z]=a;this.locale=t;this.numberingSystem=b||U||null;this.outputCalendar=d||Z||null;b=this.locale;d=this.numberingSystem;if((a=this.outputCalendar)||d)b+="-u",a&&(b+=`-ca-${a}`),d&&(b+=`-nu-${d}`);this.intl=b;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache=
{};this.specifiedLocale=h;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(a){a=this.isEnglish();const b=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||
"gregory"===this.outputCalendar);return a&&b?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?za.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,b=!1,d=!0){return ba(this,a,d,z,()=>{const h=b?{month:a,day:"numeric"}:{month:a},l=b?"format":"standalone";
this.monthsCache[l][a]||(this.monthsCache[l][a]=aa(t=>this.extract(t,h,"month")));return this.monthsCache[l][a]})}weekdays(a,b=!1,d=!0){return ba(this,a,d,C,()=>{const h=b?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},l=b?"format":"standalone";this.weekdaysCache[l][a]||(this.weekdaysCache[l][a]=ha(t=>this.extract(t,h,"weekday")));return this.weekdaysCache[l][a]})}meridiems(a=!0){return ba(this,void 0,a,()=>tc,()=>{if(!this.meridiemCache){const b={hour:"numeric",hourCycle:"h12"};
this.meridiemCache=[la.utc(2016,11,13,9),la.utc(2016,11,13,19)].map(d=>this.extract(d,b,"dayperiod"))}return this.meridiemCache})}eras(a,b=!0){return ba(this,a,b,S,()=>{const d={era:a};this.eraCache[a]||(this.eraCache[a]=[la.utc(-40,1,1),la.utc(2017,1,1)].map(h=>this.extract(h,d,"era")));return this.eraCache[a]})}extract(a,b,d){return(a=this.dtFormatter(a,b).formatToParts().find(h=>h.type.toLowerCase()===d))?a.value:null}numberFormatter(a={}){return new Yc(this.intl,a.forceSimple||this.fastNumbers,
a)}dtFormatter(a,b={}){return new Zc(a,this.intl,b)}relFormatter(a={}){return new $c(this.intl,this.isEnglish(),a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const Bc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Mb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Cc=RegExp(`${Mb.source}${Bc.source}?`),
Nb=RegExp(`(?:T${Cc.source})?`),ad=Ea("weekYear","weekNumber","weekDay"),bd=Ea("year","ordinal"),Dc=RegExp(`${Mb.source} ?(?:${Bc.source}|(${sc.source}))?`),cd=RegExp(`(?: ${Dc.source})?`),dd=RegExp(`^T?${Mb.source}$`),ed=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Lc={GMT:0,EDT:-240,EST:-300,CDT:-300,
CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,gd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,jd=ma(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Nb),kd=ma(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nb),ld=ma(/(\d{4})-?(\d{3})/,Nb),md=ma(Cc),nd=oa(Fa,pa,Ma),od=oa(ad,pa,Ma),pd=oa(bd,pa,Ma),qd=oa(pa,Ma),rd=oa(pa),sd=ma(/(\d{4})-(\d\d)-(\d\d)/,cd),td=ma(Dc),ud=oa(Fa,pa,Ma,Va),vd=oa(pa,Ma,Va),Ec={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,
minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Ec},xd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Ec},jb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Mc=jb.slice(0).reverse();class ta{constructor(a){const b="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||za.create();this.conversionAccuracy=b?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=b?xd:wd;this.isLuxonDuration=!0}static fromMillis(a,b){return ta.fromObject({milliseconds:a},b)}static fromObject(a,b={}){if(null==a||"object"!==typeof a)throw new Oa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new ta({values:g(a,ta.normalizeUnit),loc:za.fromObject(b),conversionAccuracy:b.conversionAccuracy})}static fromDurationLike(a){if(y(a))return ta.fromMillis(a);
if(ta.isDuration(a))return a;if("object"===typeof a)return ta.fromObject(a);throw new Oa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,b){const [d]=na(a,[ed,Za]);return d?ta.fromObject(d,b):ta.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,b){const [d]=na(a,[dd,rd]);return d?ta.fromObject(d,b):ta.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,b=null){if(!a)throw new Oa("need to specify a reason the Duration is invalid");
a=a instanceof Qa?a:new Qa(a,b);if(Da.throwOnInvalid)throw new Sc(a);return new ta({invalid:a})}static normalizeUnit(a){const b={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!b)throw new Ub(a);return b}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,b={}){b={...b,floor:!1!==b.round&&!1!==b.floor};return this.isValid?Na.create(this.loc,b).formatDurationFromString(this,a):"Invalid Duration"}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+
"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=n(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var b=this.toMillis();if(0>b||864E5<=b)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,
format:"extended",...a};b=this.shiftTo("hours","minutes","seconds","milliseconds");let d="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===b.seconds&&0===b.milliseconds||(d+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===b.milliseconds||(d+=".SSS"));b=b.toFormat(d);a.includePrefix&&(b="T"+b);return b}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);
const b={};for(const d of jb)if(W(a.values,d)||W(this.values,d))b[d]=a.get(d)+this.get(d);return ca(this,{values:b},!0)}minus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const b={};for(const d of Object.keys(this.values))b[d]=B(a(this.values[d],d));return ca(this,{values:b},!0)}get(a){return this[ta.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...g(a,ta.normalizeUnit)};return ca(this,{values:a})}reconfigure({locale:a,
numberingSystem:b,conversionAccuracy:d}={}){a={loc:this.loc.clone({locale:a,numberingSystem:b})};d&&(a.conversionAccuracy=d);return ca(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ya(this.matrix,a);return ca(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(t=>ta.normalizeUnit(t));const b={},d={},h=this.toObject();let l;for(const t of jb)if(0<=a.indexOf(t)){l=t;let U=0;for(const da in d)U+=
this.matrix[da][t]*d[da],d[da]=0;y(h[t])&&(U+=h[t]);const Z=Math.trunc(U);b[t]=Z;d[t]=U-Z;for(const da in h)jb.indexOf(da)>jb.indexOf(t)&&ka(this.matrix,h,da,b,t)}else y(h[t])&&(d[t]=h[t]);for(const t in d)0!==d[t]&&(b[l]+=t===l?d[t]:d[t]/this.matrix[l][t]);return ca(this,{values:b},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const b of Object.keys(this.values))a[b]=-this.values[b];return ca(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?
this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?
this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const h of jb){var b=this.values[h];var d=a.values[h];b=void 0===b||0===b?void 0===d||0===d:b===d;if(!b)return!1}return!0}}class Aa{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,b=null){if(!a)throw new Oa("need to specify a reason the Interval is invalid");
a=a instanceof Qa?a:new Qa(a,b);if(Da.throwOnInvalid)throw new Rc(a);return new Aa({invalid:a})}static fromDateTimes(a,b){a=ub(a);b=ub(b);var d=a&&a.isValid?b&&b.isValid?b<a?Aa.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${b.toISO()}`):null:Aa.invalid("missing or invalid end"):Aa.invalid("missing or invalid start");return null==d?new Aa({start:a,end:b}):d}static after(a,b){b=ta.fromDurationLike(b);a=ub(a);return Aa.fromDateTimes(a,
a.plus(b))}static before(a,b){b=ta.fromDurationLike(b);a=ub(a);return Aa.fromDateTimes(a.minus(b),a)}static fromISO(a,b){const [d,h]=(a||"").split("/",2);if(d&&h){let U;try{var l=la.fromISO(d,b);U=l.isValid}catch(da){U=!1}let Z;try{var t=la.fromISO(h,b);Z=t.isValid}catch(da){Z=!1}if(U&&Z)return Aa.fromDateTimes(l,t);if(U){if(t=ta.fromISO(h,b),t.isValid)return Aa.after(l,t)}else if(Z&&(l=ta.fromISO(d,b),l.isValid))return Aa.before(t,l)}return Aa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&
a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const b=this.start.startOf(a),d=this.end.startOf(a);return Math.floor(d.diff(b,
a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:b}={}){return this.isValid?Aa.fromDateTimes(a||this.s,b||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(ub).filter(t=>this.contains(t)).sort();const b=[];let {s:d}=this,h=0;for(;d<
this.e;){var l=a[h]||this.e;l=+l>+this.e?this.e:l;b.push(Aa.fromDateTimes(d,l));d=l;h+=1}return b}splitBy(a){a=ta.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:b}=this,d=1;const h=[];for(;b<this.e;){var l=this.start.plus(a.mapUnits(t=>t*d));l=+l>+this.e?this.e:l;h.push(Aa.fromDateTimes(b,l));b=l;d+=1}return h}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?
+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const b=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return b>=a?null:Aa.fromDateTimes(b,a)}union(a){return this.isValid?Aa.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [b,d]=a.sort((h,l)=>h.s-l.s).reduce(([h,
l],t)=>l?l.overlaps(t)||l.abutsStart(t)?[h,l.union(t)]:[h.concat([l]),t]:[h,t],[[],null]);d&&b.push(d);return b}static xor(a){let b=null,d=0;const h=[];a=a.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]);a=Array.prototype.concat(...a).sort((l,t)=>l.time-t.time);for(const l of a)d+="s"===l.type?1:-1,1===d?b=l.time:(b&&+b!==+l.time&&h.push(Aa.fromDateTimes(b,l.time)),b=null);return Aa.merge(h)}difference(...a){return Aa.xor([this].concat(a)).map(b=>this.intersection(b)).filter(b=>b&&!b.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:b=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${b}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,b){return this.isValid?
this.e.diff(this.s,a,b):ta.invalid(this.invalidReason)}mapEndpoints(a){return Aa.fromDateTimes(a(this.s),a(this.e))}}class zb{static hasDST(a=Da.defaultZone){const b=la.now().setZone(a).set({month:12});return!a.isUniversal&&b.offset!==b.set({month:6}).offset}static isValidIANAZone(a){return Sa.isValidSpecifier(a)&&Sa.isValidZone(a)}static normalizeZone(a){return O(a,Da.defaultZone)}static months(a="long",{locale:b=null,numberingSystem:d=null,locObj:h=null,outputCalendar:l="gregory"}={}){return(h||
za.create(b,d,l)).months(a)}static monthsFormat(a="long",{locale:b=null,numberingSystem:d=null,locObj:h=null,outputCalendar:l="gregory"}={}){return(h||za.create(b,d,l)).months(a,!0)}static weekdays(a="long",{locale:b=null,numberingSystem:d=null,locObj:h=null}={}){return(h||za.create(b,d,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:b=null,numberingSystem:d=null,locObj:h=null}={}){return(h||za.create(b,d,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return za.create(a).meridiems()}static eras(a=
"short",{locale:b=null}={}){return za.create(b,null,"gregory").eras(a)}static features(){return{relative:E()}}}const Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",
mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Sb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Nc=Eb.hanidec.replace(/[\[|\]]/g,
"").split(""),Tb=`( |${String.fromCharCode(160)})`,Fb=new RegExp(Tb,"g"),Pc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Gb=null;const Ib=[0,31,59,90,120,151,181,212,243,273,304,334],Hb=[0,31,60,91,121,152,182,213,244,274,305,335],Xb={month:1,
day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wb="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class la{constructor(a){const b=a.zone||Da.defaultZone;let d=a.invalid||(Number.isNaN(a.ts)?new Qa("invalid input"):null)||(b.isValid?null:
fa(b));this.ts=p(a.ts)?Da.now():a.ts;let h=null;var l=null;d||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(b)?[h,l]=[a.old.c,a.old.o]:(l=b.offset(this.ts),h=Ha(this.ts,l),h=(d=Number.isNaN(h.year)?new Qa("invalid input"):null)?null:h,l=d?null:l));this._zone=b;this.loc=a.loc||za.create();this.invalid=d;this.weekData=null;this.c=h;this.o=l;this.isLuxonDateTime=!0}static now(){return new la({})}static local(){const [a,b]=Zb(arguments),[d,h,l,t,U,Z,da]=b;return Vb({year:d,month:h,day:l,hour:t,minute:U,
second:Z,millisecond:da},a)}static utc(){const [a,b]=Zb(arguments),[d,h,l,t,U,Z,da]=b;a.zone=La.utcInstance;return Vb({year:d,month:h,day:l,hour:t,minute:U,second:Z,millisecond:da},a)}static fromJSDate(a,b={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return la.invalid("invalid input");const d=O(b.zone,Da.defaultZone);return d.isValid?new la({ts:a,zone:d,loc:za.fromObject(b)}):la.invalid(fa(d))}static fromMillis(a,b={}){if(y(a))return-864E13>a||864E13<
a?la.invalid("Timestamp out of range"):new la({ts:a,zone:O(b.zone,Da.defaultZone),loc:za.fromObject(b)});throw new Oa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,b={}){if(y(a))return new la({ts:1E3*a,zone:O(b.zone,Da.defaultZone),loc:za.fromObject(b)});throw new Oa("fromSeconds requires a numerical input");}static fromObject(a,b={}){a=a||{};var d=O(b.zone,Da.defaultZone);if(!d.isValid)return la.invalid(fa(d));var h=Da.now();const l=d.offset(h),
t=g(a,lb);var U=!p(t.ordinal),Z=!p(t.year),da=!p(t.month)||!p(t.day);Z=Z||da;var va=t.weekYear||t.weekNumber;b=za.fromObject(b);if((Z||U)&&va)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(da&&U)throw new tb("Can't mix ordinal dates with month/day");da=va||t.weekday&&!Z;let ja=Ha(h,l);da?(h=Ad,va=yd,ja=hb(ja)):U?(h=Bd,va=zd,ja=qb(ja)):(h=Wb,va=Xb);let sa=!1;for(var xa of h)p(t[xa])?t[xa]=sa?va[xa]:ja[xa]:sa=!0;da?(xa=x(t.weekYear),h=R(t.weekNumber,1,H(t.weekYear)),
va=R(t.weekday,1,7),xa=xa?h?va?!1:Ia("weekday",t.weekday):Ia("week",t.week):Ia("weekYear",t.weekYear)):U?(xa=x(t.year),h=R(t.ordinal,1,F(t.year)?366:365),xa=xa?h?!1:Ia("ordinal",t.ordinal):Ia("year",t.year)):xa=k(t);if(xa=xa||I(t))return la.invalid(xa);U=da?db(t):U?c(t):t;const [Xa,ib]=Ba(U,l,d);d=new la({ts:Xa,zone:d,o:ib,loc:b});return t.weekday&&Z&&a.weekday!==d.weekday?la.invalid("mismatched weekday",`you can't specify both a weekday of ${t.weekday} and a date of ${d.toISO()}`):d}static fromISO(a,
b={}){const [d,h]=na(a,[jd,nd],[kd,od],[ld,pd],[md,qd]);return $a(d,h,b,"ISO 8601",a)}static fromRFC2822(a,b={}){const [d,h]=na(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fd,N]);return $a(d,h,b,"RFC 2822",a)}static fromHTTP(a,b={}){const [d,h]=na(a,[gd,V],[hd,V],[id,ia]);return $a(d,h,b,"HTTP",b)}static fromFormat(a,b,d={}){if(p(a)||p(b))throw new Oa("fromFormat requires an input string and a format");const {locale:h=null,numberingSystem:l=null}=d;var t=za.fromOpts({locale:h,
numberingSystem:l,defaultToEN:!0});{const {result:va,zone:ja,invalidReason:sa}=ob(t,a,b);t=[va,ja,sa]}const [U,Z,da]=t;return da?la.invalid(da):$a(U,Z,d,`format ${b}`,a)}static fromString(a,b,d={}){return la.fromFormat(a,b,d)}static fromSQL(a,b={}){const [d,h]=na(a,[sd,ud],[td,vd]);return $a(d,h,b,"SQL",a)}static invalid(a,b=null){if(!a)throw new Oa("need to specify a reason the DateTime is invalid");a=a instanceof Qa?a:new Qa(a,b);if(Da.throwOnInvalid)throw new Qc(a);return new la({invalid:a})}static isDateTime(a){return a&&
a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?ea(this).weekYear:NaN}get weekNumber(){return this.isValid?ea(this).weekNumber:NaN}get weekday(){return this.isValid?
ea(this).weekday:NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?zb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?zb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?zb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?zb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return F(this.year)}get daysInMonth(){return w(this.year,this.month)}get daysInYear(){return this.isValid?F(this.year)?
366:365:NaN}get weeksInWeekYear(){return this.isValid?H(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:b,numberingSystem:d,calendar:h}=Na.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:b,numberingSystem:d,outputCalendar:h}}toUTC(a=0,b={}){return this.setZone(La.instance(a),b)}toLocal(){return this.setZone(Da.defaultZone)}setZone(a,{keepLocalTime:b=!1,keepCalendarTime:d=!1}={}){a=O(a,Da.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let h=this.ts;if(b||
d)b=a.offset(this.ts),d=this.toObject(),[h]=Ba(d,b,a);return qa(this,{ts:h,zone:a})}return la.invalid(fa(a))}reconfigure({locale:a,numberingSystem:b,outputCalendar:d}={}){a=this.loc.clone({locale:a,numberingSystem:b,outputCalendar:d});return qa(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=g(a,lb);var b=!p(a.weekYear)||!p(a.weekNumber)||!p(a.weekday);const d=!p(a.ordinal),h=!p(a.year),l=!p(a.month)||!p(a.day),t=a.weekYear||a.weekNumber;if((h||
l||d)&&t)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&d)throw new tb("Can't mix ordinal dates with month/day");b?b=db({...hb(this.c),...a}):p(a.ordinal)?(b={...this.toObject(),...a},p(a.day)&&(b.day=Math.min(w(b.year,b.month),b.day))):b=c({...qb(this.c),...a});const [U,Z]=Ba(b,this.o,this.zone);return qa(this,{ts:U,o:Z})}plus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);return qa(this,Pa(this,a))}minus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a).negate();
return qa(this,Pa(this,a))}startOf(a){if(!this.isValid)return this;const b={};a=ta.normalizeUnit(a);switch(a){case "years":b.month=1;case "quarters":case "months":b.day=1;case "weeks":case "days":b.hour=0;case "hours":b.minute=0;case "minutes":b.second=0;case "seconds":b.millisecond=0}"weeks"===a&&(b.weekday=1);"quarters"===a&&(b.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(b)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,b={}){return this.isValid?Na.create(this.loc.redefaultToEN(b)).formatDateTimeFromString(this,
a):"Invalid DateTime"}toLocaleString(a=Jb,b={}){return this.isValid?Na.create(this.loc.clone(b),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Na.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO(a={}){return this.isValid?`${this.toISODate(a)}T${this.toISOTime(a)}`:null}toISODate({format:a="extended"}={}){a="basic"===a?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(a="+"+a);return Ua(this,a)}toISOWeekDate(){return Ua(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=
!1,suppressSeconds:b=!1,includeOffset:d=!0,includePrefix:h=!1,format:l="extended"}={}){return kb(this,{suppressSeconds:b,suppressMilliseconds:a,includeOffset:d,includePrefix:h,format:l})}toRFC2822(){return Ua(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ua(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return Ua(this,"yyyy-MM-dd")}toSQLTime({includeOffset:a=!0,includeZone:b=!1}={}){return kb(this,{includeOffset:a,includeZone:b,spaceZone:!0})}toSQL(a={}){return this.isValid?
`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const b={...this.c};a.includeConfig&&(b.outputCalendar=this.outputCalendar,b.numberingSystem=this.loc.numberingSystem,b.locale=this.loc.locale);return b}toJSDate(){return new Date(this.isValid?
this.ts:NaN)}diff(a,b="milliseconds",d={}){if(!this.isValid||!a.isValid)return ta.invalid("created by diffing an invalid DateTime");d={locale:this.locale,numberingSystem:this.numberingSystem,...d};const h=(Array.isArray(b)?b:[b]).map(ta.normalizeUnit);b=a.valueOf()>this.valueOf();a=Ra(b?this:a,b?a:this,h,d);return b?a.negate():a}diffNow(a="milliseconds",b={}){return this.diff(la.now(),a,b)}until(a){return this.isValid?Aa.fromDateTimes(this,a):this}hasSame(a,b){if(!this.isValid)return!1;const d=a.valueOf();
a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(b)<=d&&d<=a.endOf(b)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const b=a.base||la.fromObject({},{zone:this.zone}),d=a.padding?this<b?-a.padding:a.padding:0;let h="years months days hours minutes seconds".split(" "),l=a.unit;Array.isArray(a.unit)&&(h=a.unit,l=void 0);return Yb(b,this.plus(d),{...a,numeric:"always",units:h,
unit:l})}toRelativeCalendar(a={}){return this.isValid?Yb(a.base||la.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(la.isDateTime))throw new Oa("min requires all arguments be DateTimes");return Y(a,b=>b.valueOf(),Math.min)}static max(...a){if(!a.every(la.isDateTime))throw new Oa("max requires all arguments be DateTimes");return Y(a,b=>b.valueOf(),Math.max)}static fromFormatExplain(a,b,d={}){const {locale:h=
null,numberingSystem:l=null}=d;d=za.fromOpts({locale:h,numberingSystem:l,defaultToEN:!0});return ob(d,a,b)}static fromStringExplain(a,b,d={}){return la.fromFormatExplain(a,b,d)}static get DATE_SHORT(){return Jb}static get DATE_MED(){return $b}static get DATE_MED_WITH_WEEKDAY(){return Tc}static get DATE_FULL(){return ac}static get DATE_HUGE(){return bc}static get TIME_SIMPLE(){return cc}static get TIME_WITH_SECONDS(){return dc}static get TIME_WITH_SHORT_OFFSET(){return ec}static get TIME_WITH_LONG_OFFSET(){return fc}static get TIME_24_SIMPLE(){return gc}static get TIME_24_WITH_SECONDS(){return hc}static get TIME_24_WITH_SHORT_OFFSET(){return ic}static get TIME_24_WITH_LONG_OFFSET(){return jc}static get DATETIME_SHORT(){return kc}static get DATETIME_SHORT_WITH_SECONDS(){return lc}static get DATETIME_MED(){return mc}static get DATETIME_MED_WITH_SECONDS(){return nc}static get DATETIME_MED_WITH_WEEKDAY(){return Uc}static get DATETIME_FULL(){return oc}static get DATETIME_FULL_WITH_SECONDS(){return pc}static get DATETIME_HUGE(){return qc}static get DATETIME_HUGE_WITH_SECONDS(){return rc}}
m.DateTime=la})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(m,p,y){function x(q){q||(q=y.getLocale());let f=q in R;if(!f){const M=q.split("-");1<M.length&&M[0]in R&&(q=M[0],f=!0);f||(q="en")}const [n,F,w="#,##0.###"]=R[q];return{decimal:n,group:F,pattern:w}}function E(q,f,n){n=n||{};!0===n.places&&(n.places=0);Infinity===n.places&&(n.places=6);f=f.split(".");var F="string"===typeof n.places&&n.places.indexOf(","),w=n.places;F?w=n.places.substring(F+1):0<=
w||(w=(f[1]||[]).length);0>n.round||(q=Number(q.toFixed(Number(w))));q=String(Math.abs(q)).split(".");const M=q[1]||"";f[1]||n.places?(F&&(n.places=n.places.substring(0,F)),F=void 0!==n.places?n.places:f[1]&&f[1].lastIndexOf("0")+1,F>M.length&&(q[1]=M.padEnd(Number(F),"0")),w<M.length&&(q[1]=M.substr(0,Number(w)))):q[1]&&q.pop();w=f[0].replace(",","");F=w.indexOf("0");-1!==F&&(F=w.length-F,F>q[0].length&&(q[0]=q[0].padStart(F,"0")),-1===w.indexOf("#")&&(q[0]=q[0].substr(q[0].length-F)));w=f[0].lastIndexOf(",");
let H,Q;-1!==w&&(H=f[0].length-w-1,f=f[0].substr(0,w),w=f.lastIndexOf(","),-1!==w&&(Q=f.length-w-1));f=[];for(w=q[0];w;)F=w.length-H,f.push(0<F?w.substr(F):w),w=0<F?w.slice(0,F):"",Q&&(H=Q,Q=void 0);q[0]=f.reverse().join(n.group||",");return q.join(n.decimal||".")}function Y(q){q=q||{};var f=x(q.locale);const n=q.pattern||f.pattern,F=f.group,w=f.decimal;let M=1;if(-1!==n.indexOf("%"))M/=100;else if(-1!==n.indexOf("\u2030"))M/=1E3;else if(-1!==n.indexOf("\u00a4"))throw Error("currency notation not supported");
f=n.split(";");1===f.length&&f.push("-"+f[0]);return{regexp:P(f,function(H){H="(?:"+p.escapeRegExpString(H,".")+")";return H.replace(T,function(Q){const K={signed:!1,separator:q.strict?F:[F,""],fractional:q.fractional,decimal:w,exponent:!1};Q=Q.split(".");let J=q.places;1===Q.length&&1!==M&&(Q[1]="###");1===Q.length||0===J?K.fractional=!1:(void 0===J&&(J=q.pattern?Q[1].lastIndexOf("0")+1:Infinity),J&&null==q.fractional&&(K.fractional=!0),!q.places&&J<Q[1].length&&(J+=","+Q[1].length),K.places=J);
Q=Q[0].split(",");1<Q.length&&(K.groupSize=Q.pop().length,1<Q.length&&(K.groupSize2=Q.pop().length));return"("+L(K)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:F,decimal:w,factor:M}}function L(q){q=q||{};"places"in q||(q.places=Infinity);"string"!==typeof q.decimal&&(q.decimal=".");"fractional"in q&&!/^0/.test(String(q.places))||(q.fractional=[!0,!1]);"exponent"in q||(q.exponent=[!0,!1]);"eSigned"in q||(q.eSigned=[!0,!1]);var f=W(q);const n=P(q.fractional,function(w){let M="";w&&0!==q.places&&
(M="\\"+q.decimal,M=Infinity===q.places?"(?:"+M+"\\d+)?":M+("\\d{"+q.places+"}"));return M},!0),F=P(q.exponent,function(w){return w?"([eE]"+W({signed:q.eSigned})+")":""});f+=n;n&&(f="(?:(?:"+f+")|(?:"+n+"))");return f+F}function W(q){q=q||{};"signed"in q||(q.signed=[!0,!1]);"separator"in q?"groupSize"in q||(q.groupSize=3):q.separator="";const f=P(q.signed,function(F){return F?"[-+]":""},!0),n=P(q.separator,function(F){if(!F)return"(?:\\d+)";F=p.escapeRegExpString(F);" "===F?F="\\s":"\u00a0"===F&&
(F="\\s\\xa0");const w=q.groupSize,M=q.groupSize2;return M?(F="(?:0|[1-9]\\d{0,"+(M-1)+"}(?:["+F+"]\\d{"+M+"})*["+F+"]\\d{"+w+"})",0<w-M?"(?:"+F+"|(?:0|[1-9]\\d{0,"+(w-1)+"}))":F):"(?:0|[1-9]\\d{0,"+(w-1)+"}(?:["+F+"]\\d{"+w+"})*)"},!0);return f+n}const R={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},T=/[#0,]*[#0](?:\.0*#*)?/,P=function(q,
f,n){if(!(q instanceof Array))return f(q);const F=[];for(let w=0;w<q.length;w++)F.push(f(q[w]));q=F.join("|");return"("+(n?"?:":"")+q+")"};m._parseInfo=Y;m.format=function(q,f){f={...f};var n=x(f.locale);f.customs=n;var F=f.pattern||n.pattern;if(isNaN(q)||Infinity===Math.abs(q))return null;{f=f||{};n=f.customs.group;const M=f.customs.decimal;F=F.split(";");var w=F[0];F=F[0>q?1:0]||"-"+w;if(-1!==F.indexOf("%"))q*=100;else if(-1!==F.indexOf("\u2030"))q*=1E3;else{if(-1!==F.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==F.indexOf("E"))throw Error("exponential notation not supported");}const H=T;w=w.match(H);if(!w)throw Error("unable to find a number expression in pattern: "+F);!1===f.fractional&&(f.places=0);q=F.replace(H,E(q,w[0],{decimal:M,group:n,places:f.places,round:f.round}))}return q};m.getCustoms=x;m.parse=function(q,f){f=Y(f);q=(new RegExp("^"+f.regexp+"$")).exec(q);if(!q)return NaN;let n=q[1];if(!q[1]){if(!q[2])return NaN;n=q[2];f.factor*=-1}n=n.replace(new RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,
".");return Number(n)*f.factor};m.regexp=function(q){return Y(q).regexp};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/core/throttle":function(){define(["exports"],function(m){function p(y,x,E,Y){let L=null,W=1E3;"number"===typeof x?(W=x,Y=E):(L=null!=x?x:null,W=E);let R=0,T;const P=()=>{R=0;y.apply(Y,T)};x=(...q)=>{L&&L.apply(Y,q);T=q;W?R||(R=setTimeout(P,W)):P()};x.remove=()=>{R&&(clearTimeout(R),R=0)};x.forceUpdate=()=>{R&&(clearTimeout(R),P())};x.hasPendingUpdates=()=>!!R;return x}
m.default=p;m.throttle=p;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(m,p,y,x,E,Y,L){function W(Q){return`<ul class="esri-widget__list">${Q.map(K=>`<li>${"string"===typeof K?L.applyTextFormattingHTML(L.htmlEntities(K)):K}</li>`).join("")}</ul>`}function R(Q){return`<table class="esri-widget__table">${Q.keys().map(K=>
{var J=Q.field(K);J="string"===typeof J?L.applyTextFormattingHTML(L.htmlEntities(J)):J;return`<tr><th>${K}</th><td>${J}</td></tr>`}).join("")}</table>`}function T({aggregatedFeatures:Q,arcadeUtils:K,featureSetVars:J,context:B,viewInfo:g,map:e,graphic:v,interceptor:z}){J.forEach(C=>{C=C.toLowerCase();var S={map:e,spatialReference:g.sr,interceptor:z};"$map"===C&&(B.vars[C]=K.convertMapToFeatureSetCollection(S));"$layer"===C&&(B.vars[C]=K.convertFeatureLayerToFeatureSet({layer:v.sourceLayer,spatialReference:g.sr,
interceptor:z}));"$datastore"===C&&(B.vars[C]=K.convertServiceUrlToWorkspace({url:v.sourceLayer.url,spatialReference:g.sr,interceptor:z}));if("$aggregatedfeatures"===C){S=v.layer;const {fields:A,objectIdField:r,geometryType:O,spatialReference:u,displayField:G}=S;S=new Y({fields:A,objectIdField:r,geometryType:O,spatialReference:u,displayField:G,..."feature"===S.type?{templates:S.templates,typeIdField:S.typeIdField,types:S.types}:null,source:Q});B.vars[C]=K.convertFeatureLayerToFeatureSet({layer:S,
spatialReference:g.sr,interceptor:z})}})}function P(){return new Promise((Q,K)=>m(["../../../support/arcadeUtils"],Q,K))}function q(Q){return f.apply(this,arguments)}function f(){f=y._asyncToGenerator(function*({graphic:Q,view:K}){const {isAggregate:J,layer:B}=Q;if(!J||!B||"2d"!==(null==K?void 0:K.type))return[];K=yield K.whenLayerView(B);if(!K.createQuery||!K.queryFeatures)return[];const g=K.createQuery();g.aggregateIds=[Q.getObjectId()];({features:Q}=yield K.queryFeatures(g));return Q});return f.apply(this,
arguments)}function n(Q){return F.apply(this,arguments)}function F(){F=y._asyncToGenerator(function*({expressionInfo:Q,arcadeUtils:K,interceptor:J,spatialReference:B,map:g,graphic:e,view:v}){if(!Q||!Q.expression)return null;const z=K.createSyntaxTree(Q.expression),C=M.filter(A=>K.hasVariable(z,A));[v]=yield E.all([q({graphic:e,view:v}),K.loadScriptDependencies(z,!0,C)]);const S=K.getViewInfo({spatialReference:B});B=K.createExecContext(e,S);B.interceptor=J;B.useAsync=!0;T({aggregatedFeatures:v,arcadeUtils:K,
featureSetVars:C,context:B,viewInfo:S,map:g,graphic:e,interceptor:J});J=K.createFunction(z,B);return K.executeAsyncFunction(J,B).catch(A=>H.error("arcade-execution-error",{error:A,graphic:e,expressionInfo:Q}))});return F.apply(this,arguments)}function w(){w=y._asyncToGenerator(function*({expressionInfos:Q,spatialReference:K,graphic:J,interceptor:B,map:g,view:e}){if(!Q||!Q.length)return{};const v=yield P(),z={};for(const C of Q)z[`expression/${C.name}`]=n({expressionInfo:C,arcadeUtils:v,interceptor:B,
spatialReference:K,map:g,graphic:J,view:e});Q=yield E.eachAlways(z);K={};for(const C in Q)J=Q[C].value,J="string"===typeof J?L.applyTextFormattingHTML(L.htmlEntities(J)):Array.isArray(J)?W(J):"esri.arcade.Dictionary"===(null==J?void 0:J.declaredClass)?R(J):J,K[C]=J;return K});return w.apply(this,arguments)}const M=["$datastore","$map","$layer","$aggregatedfeatures"],H=x.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");p.createCompiledExpression=n;p.createCompiledExpressions=function(Q){return w.apply(this,
arguments)};p.loadArcadeUtils=P;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(m,p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M,H,Q,K,J,B,g,e,v){var z;const C=L.getLogger("esri.widgets.FeatureViewModel"),S={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};E=z=function(A){function r(u){var G=A.call(this,u)||this;G._handles=new Y;G._error=null;G._featureAbortController=null;G.graphicChangedThrottled=T.throttle(G.graphicChanged,1,m._assertThisInitialized(G));G._expressionAttributes=null;G._graphicExpressionAttributes=null;G.abilities=
{...S};G.content=null;G.contentViewModels=[];G.defaultPopupTemplateEnabled=!1;G.formattedAttributes=null;G.lastEditInfo=null;G.relatedInfos=new Map;G.title="";G.view=null;G._isAllowedContentType=X=>{const {abilities:aa}=m._assertThisInitialized(G);return"attachments"===X.type&&aa.attachmentsContent||"custom"===X.type&&aa.customContent||"fields"===X.type&&aa.fieldsContent||"media"===X.type&&aa.mediaContent||"text"===X.type&&aa.textContent||"expression"===X.type&&aa.expressionContent};G._handles.add(P.init(m._assertThisInitialized(G),
["graphic","_effectivePopupTemplate","abilities"],()=>G.graphicChangedThrottled()));return G}m._inheritsLoose(r,A);var O=r.prototype;O.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};O.castAbilities=function(u){return{...S,...u}};O.setActiveMedia=function(u,G){u=this.contentViewModels[u];u instanceof B&&u.setActiveMedia(G)};O.nextMedia=function(u){u=this.contentViewModels[u];
u instanceof B&&u.next()};O.previousMedia=function(u){u=this.contentViewModels[u];u instanceof B&&u.previous()};O._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};O.graphicChanged=function(){var u=m._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:G}=this;if(G){var X=new AbortController;this._featureAbortController=X;try{yield this._queryFeature({signal:X.signal})}catch(aa){R.isAbortError(aa)||
(this._error=aa,C.error("error","The popupTemplate could not be displayed for this feature.",{error:aa,graphic:G,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===X&&(this._featureAbortController=null)}});return function(){return u.apply(this,arguments)}}();O._cancelFeatureQuery=function(){const {_featureAbortController:u}=this;u&&u.abort();this._featureAbortController=null};O._compileContentElement=function(u,G){if("attachments"===u.type)return this._compileAttachments(u,
G);if("custom"===u.type)return this._compileCustom(u,G);if("fields"===u.type)return this._compileFields(u,G);if("media"===u.type)return this._compileMedia(u,G);if("text"===u.type)return this._compileText(u,G);if("expression"===u.type)return this._compileExpression(u,G)};O._compileContent=function(u){this._destroyContentViewModels();if(this.graphic)return Array.isArray(u)?u.filter(this._isAllowedContentType).map((G,X)=>this._compileContentElement(G,X)):"string"===typeof u?this._compileText(new M({text:u}),
0).text:u};O._destroyContentViewModels=function(){var u;null==(u=this._handles)?void 0:u.remove("content-view-models");this.contentViewModels.forEach(G=>G&&!G.destroyed&&G.destroy());this._set("contentViewModels",[])};O._setExpressionContentVM=function(u,G){const {formattedAttributes:X}=this,{contentElement:aa,contentElementViewModel:ha}=u;u=null==aa?void 0:aa.type;ha&&u&&("fields"===u&&(this._createFieldsFormattedAttributes({contentElement:aa,contentElementIndex:G,formattedAttributes:X}),ha.set(this._createFieldsVMParams(aa,
G))),"media"===u&&(this._createMediaFormattedAttributes({contentElement:aa,contentElementIndex:G,formattedAttributes:X}),ha.set(this._createMediaVMParams(aa,G))),"text"===u&&ha.set(this._createTextVMParams(aa)))};O._compileExpression=function(u,G){const {expressionInfo:X}=u,{graphic:aa,map:ha,spatialReference:ba,view:ma}=this,oa=new K({expressionInfo:X,graphic:aa,interceptor:z.interceptor,map:ha,spatialReference:ba,view:ma});this.contentViewModels[G]=oa;this._handles.add(P.init(oa,"contentElementViewModel",
()=>this._setExpressionContentVM(oa,G)),"content-view-models");return u};O._compileAttachments=function(u,G){const {graphic:X}=this,{description:aa,title:ha}=u;this.contentViewModels[G]=new H({graphic:X,...this._compileTitleAndDesc({title:ha,description:aa})});return u};O._compileCustom=function(u,G){const {graphic:X}=this,{creator:aa,destroyer:ha}=u;this.contentViewModels[G]=new Q({graphic:X,creator:aa,destroyer:ha});return u};O._compileTitleAndDesc=function({title:u,description:G}){const {_fieldInfoMap:X,
_sourceLayer:aa,graphic:ha,formattedAttributes:ba,_expressionAttributes:ma}=this,{attributes:oa}=ha,na=ba.global;return{title:e.substituteFieldsInLinksAndAttributes({attributes:oa,fieldInfoMap:X,globalAttributes:na,expressionAttributes:ma,layer:aa,text:u}),description:e.substituteFieldsInLinksAndAttributes({attributes:oa,fieldInfoMap:X,globalAttributes:na,expressionAttributes:ma,layer:aa,text:G})}};O._createFieldsVMParams=function(u,G){const {_effectivePopupTemplate:X,formattedAttributes:aa}=this,
ha={...aa.global,...aa.content[G]};G=(null==u?void 0:u.fieldInfos)||(null==X?void 0:X.fieldInfos);G=null==G?void 0:G.filter(({fieldName:na})=>e.isExpressionField(na)||e.isRelatedField(na)||ha.hasOwnProperty(na));const ba=null==X?void 0:X.expressionInfos,{description:ma,title:oa}=u;return{attributes:ha,expressionInfos:ba,fieldInfos:G,...this._compileTitleAndDesc({title:oa,description:ma})}};O._compileFields=function(u,G){const X=u.clone();u=new J(this._createFieldsVMParams(u,G));this.contentViewModels[G]=
u;X.fieldInfos=u.formattedFieldInfos.slice(0);return X};O._createMediaVMParams=function(u,G){const {graphic:X,_fieldInfoMap:aa,formattedAttributes:ha,_effectivePopupTemplate:ba,relatedInfos:ma,_sourceLayer:oa,_expressionAttributes:na}=this,{attributes:Ea}=X,{description:ua,mediaInfos:Fa,title:pa}=u;return{activeMediaInfoIndex:u.activeMediaInfoIndex||0,attributes:Ea,layer:oa,fieldInfoMap:aa,formattedAttributes:{...ha.global,...ha.content[G]},expressionAttributes:na,mediaInfos:Fa,popupTemplate:ba,relatedInfos:ma,
...this._compileTitleAndDesc({title:pa,description:ua})}};O._compileMedia=function(u,G){const X=u.clone();u=new B(this._createMediaVMParams(u,G));X.mediaInfos=u.formattedMediaInfos.slice(0);this.contentViewModels[G]=u;return X};O._createTextVMParams=function(u){const {graphic:G,_fieldInfoMap:X,_sourceLayer:aa,_expressionAttributes:ha}=this;if(u&&u.text){const {attributes:ba}=G;u.text=e.substituteFieldsInLinksAndAttributes({attributes:ba,fieldInfoMap:X,globalAttributes:this.formattedAttributes.global,
expressionAttributes:ha,layer:aa,text:u.text})}return{graphic:G,creator:u.text}};O._compileText=function(u,G){u=u.clone();this.contentViewModels[G]=new Q(this._createTextVMParams(u));return u};O._compileLastEditInfo=function(){const {_effectivePopupTemplate:u,_sourceLayer:G,graphic:X}=this;if(u){var {lastEditInfoEnabled:aa}=u,ha=null==G?void 0:G.editFieldsInfo;if(aa&&ha)return e.formatEditInfo(ha,X.attributes)}};O._compileTitle=function(u){const {_fieldInfoMap:G,_sourceLayer:X,graphic:aa,_expressionAttributes:ha}=
this,{attributes:ba}=aa;return e.substituteFieldsInLinksAndAttributes({attributes:ba,fieldInfoMap:G,globalAttributes:this.formattedAttributes.global,expressionAttributes:ha,layer:X,text:u})};O._getTitle=function(){var u=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:G,graphic:X}=this;return e.graphicCallback(null==G?void 0:G.title,{graphic:X})});return function(){return u.apply(this,arguments)}}();O._getContent=function(){var u=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:G,
graphic:X}=this;return e.graphicCallback(null==G?void 0:G.content,{graphic:X})});return function(){return u.apply(this,arguments)}}();O._queryFeature=function(){var u=m._asyncToGenerator(function*(G){const {_featureAbortController:X,_sourceLayer:aa,graphic:ha,_effectivePopupTemplate:ba,spatialReference:ma,map:oa,view:na}=this,{content:{value:Ea},title:{value:ua}}=yield R.eachAlways({content:this._getContent(),title:this._getTitle()});X===this._featureAbortController&&ha&&(yield e.queryUpdatedFeature({graphic:ha,
popupTemplate:ba,layer:aa,spatialReference:ma},G),{expressionAttributes:{value:G}}=yield R.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(G),expressionAttributes:g.createCompiledExpressions({expressionInfos:null==ba?void 0:ba.expressionInfos,spatialReference:ma,graphic:ha,map:oa,interceptor:z.interceptor,view:na})}),X===this._featureAbortController&&ha&&(this._expressionAttributes=G,this._graphicExpressionAttributes={...ha.attributes,...G},this._set("formattedAttributes",this._createFormattedAttributes(Ea)),
this._set("title",this._compileTitle(ua)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(Ea)||null)))});return function(G){return u.apply(this,arguments)}}();O._createMediaFormattedAttributes=function({contentElement:u,contentElementIndex:G,formattedAttributes:X}){const {_effectivePopupTemplate:aa,graphic:ha,relatedInfos:ba,_sourceLayer:ma,_fieldInfoMap:oa,_graphicExpressionAttributes:na}=this;X.content[G]=e.formatAttributes({fieldInfos:null==
aa?void 0:aa.fieldInfos,graphic:ha,attributes:{...na,...u.attributes},layer:ma,fieldInfoMap:oa,relatedInfos:ba})};O._createFieldsFormattedAttributes=function({contentElement:u,contentElementIndex:G,formattedAttributes:X}){if(u.fieldInfos){const {graphic:aa,relatedInfos:ha,_sourceLayer:ba,_fieldInfoMap:ma,_graphicExpressionAttributes:oa}=this;X.content[G]=e.formatAttributes({fieldInfos:u.fieldInfos,graphic:aa,attributes:{...oa,...u.attributes},layer:ba,fieldInfoMap:ma,relatedInfos:ha})}};O._createFormattedAttributes=
function(u){const {_effectivePopupTemplate:G,graphic:X,relatedInfos:aa,_sourceLayer:ha,_fieldInfoMap:ba,_graphicExpressionAttributes:ma}=this,oa={global:e.formatAttributes({fieldInfos:null==G?void 0:G.fieldInfos,graphic:X,attributes:ma,layer:ha,fieldInfoMap:ba,relatedInfos:aa}),content:[]};Array.isArray(u)&&u.forEach((na,Ea)=>{"fields"===na.type&&this._createFieldsFormattedAttributes({contentElement:na,contentElementIndex:Ea,formattedAttributes:oa});"media"===na.type&&this._createMediaFormattedAttributes({contentElement:na,
contentElementIndex:Ea,formattedAttributes:oa})});return oa};O._checkForRelatedFeatures=function(u){const {graphic:G,_effectivePopupTemplate:X}=this;return this._queryRelatedInfos(G,e.getAllFieldInfos(X),u)};O._queryRelatedInfos=function(){var u=m._asyncToGenerator(function*(G,X,aa){const {relatedInfos:ha,_sourceLayer:ba}=this;ha.clear();const ma=W.isSome(ba.associatedLayer)?yield ba.associatedLayer.load(aa):ba;if(ma){var oa=X.filter(ua=>ua&&e.isRelatedField(ua.fieldName));if(oa&&oa.length){X.forEach(ua=>
this._configureRelatedInfo(ua,ma));var na=yield v.queryLayerInfos({relatedInfos:ha,layer:ma},aa);Object.keys(na).forEach(ua=>{var Fa;const pa=ha.get(ua.toString());ua=null==(Fa=na[ua])?void 0:Fa.value;pa&&ua&&(pa.layerInfo=ua.data)});var Ea=yield v.queryRelatedFeatures({graphic:G,relatedInfos:ha,layer:ma},aa);Object.keys(Ea).forEach(ua=>{var Fa;v.setRelatedFeatures(null==(Fa=Ea[ua])?void 0:Fa.value,ha.get(ua.toString()))})}}});return function(G,X,aa){return u.apply(this,arguments)}}();O._configureRelatedInfo=
function(u,G){const {relatedInfos:X}=this,aa=v.getRelatedFieldInfo(u.fieldName);if(aa){var {layerId:ha,fieldName:ba}=aa;ha&&(G=X.get(ha.toString())||v.createRelatedInfo(ha,G))&&(v.updateRelatedInfo({relatedInfo:G,fieldName:ba,fieldInfo:u}),this.relatedInfos.set(ha,G))}};m._createClass(r,[{key:"_effectivePopupTemplate",get:function(){return W.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return e.createfieldInfoMap(e.getAllFieldInfos(this._effectivePopupTemplate),
this._sourceLayer)}},{key:"_sourceLayer",get:function(){return e.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(u){this._set("graphic",u?u.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(u){void 0===u?this._clearOverride("spatialReference"):this._override("spatialReference",u)}},{key:"map",get:function(){return this.get("view.map")||
null},set:function(u){void 0===u?this._clearOverride("map"):this._override("map",u)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return r}(E);E.interceptor=new x.FeatureSetQueryInterceptor(e.preLayerQueryCallback,e.preRequestCallback);p.__decorate([q.property()],E.prototype,"_error",void 0);p.__decorate([q.property()],E.prototype,"_featureAbortController",void 0);p.__decorate([q.property({readOnly:!0})],E.prototype,"_effectivePopupTemplate",null);p.__decorate([q.property({readOnly:!0})],
E.prototype,"_fieldInfoMap",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"_sourceLayer",null);p.__decorate([q.property()],E.prototype,"abilities",void 0);p.__decorate([F.cast("abilities")],E.prototype,"castAbilities",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"content",void 0);p.__decorate([q.property({readOnly:!0})],E.prototype,"contentViewModels",void 0);p.__decorate([q.property({type:Boolean})],E.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([q.property({readOnly:!0})],
E.prototype,"state",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"formattedAttributes",void 0);p.__decorate([q.property({type:y,value:null})],E.prototype,"graphic",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"lastEditInfo",void 0);p.__decorate([q.property({readOnly:!0})],E.prototype,"relatedInfos",void 0);p.__decorate([q.property()],E.prototype,"spatialReference",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"title",void 0);p.__decorate([q.property()],E.prototype,
"map",null);p.__decorate([q.property({readOnly:!0})],E.prototype,"waitingForContent",null);p.__decorate([q.property()],E.prototype,"view",void 0);return E=z=p.__decorate([w.subclass("esri.widgets.FeatureViewModel")],E)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(m){m.FeatureSetQueryInterceptor=function(p,y){this.preLayerQueryCallback=p;this.preRequestCallback=y;this.preLayerQueryCallback||(this.preLayerQueryCallback=x=>{});this.preRequestCallback||
(this.preLayerQueryCallback=x=>{})};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(m,p,y,x,E,Y,
L,W,R,T,P){m.FeatureContentMixin=q=>{q=function(f){function n(){var F=f.apply(this,arguments)||this;F.renderNodeContent=w=>T.isWidget(w)&&!w.destroyed?P.tsx("div",{key:w},w.render()):w instanceof HTMLElement?P.tsx("div",{key:w,bind:w,afterCreate:F._attachToNode}):T.hasDomNode(w)?P.tsx("div",{key:w,bind:w.domNode,afterCreate:F._attachToNode}):null;return F}p._inheritsLoose(n,f);n.prototype._attachToNode=function(F){F.appendChild(this)};return n}(q);return q=y.__decorate([R.subclass("esri.widgets.Feature.ContentMixin")],
q)};Object.defineProperty(m,"__esModule",{value:!0})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),function(m,
p,y,x,E,Y,L,W,R,T,P,q,f,n,F,w,M,H,Q,K,J,B,g,e,v){const z={title:!0,content:!0,lastEditedInfo:!0};x=function(C){function S(r,O){r=C.call(this,r,O)||this;r._contentWidgets=[];r.graphic=null;r.defaultPopupTemplateEnabled=!1;r.headingLevel=2;r.label=void 0;r.messages=null;r.messagesCommon=null;r.messagesURIUtils=null;r.spatialReference=null;r.title=null;r.visibleElements={...z};r.map=null;r.view=null;r.viewModel=new H;return r}p._inheritsLoose(S,C);var A=S.prototype;A.initialize=function(){this.own(E.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};A.loadDependencies=function(){return new Promise((r,O)=>m(["../chunks/calcite-notice"],r,O))};A.destroy=function(){this._destroyContentWidgets()};A.castVisibleElements=function(r){return{...z,...r}};A.render=function(){var {state:r}=this.viewModel;r=e.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===r?this.renderError():"loading"===r?this.renderLoading():this.renderContentContainer());return e.tsx("div",
{class:this.classes("esri-feature","esri-widget")},r)};A.setActiveMedia=function(r,O){this.viewModel.setActiveMedia(r,O)};A.nextMedia=function(r){this.viewModel.nextMedia(r)};A.previousMedia=function(r){this.viewModel.previousMedia(r)};A.renderError=function(){const {messagesCommon:r,messages:O,visibleElements:u}=this;return e.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},u.title?e.tsx("div",{key:"error-title",slot:"title"},r.errorMessage):null,e.tsx("div",
{key:"error-message",slot:"message"},O.loadingError))};A.renderLoading=function(){return e.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},e.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};A.renderContentContainer=function(){const {visibleElements:r}=this;return r.content?e.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};A.renderTitle=function(){const {visibleElements:r,
title:O}=this;return r.title?e.tsx(K.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:O}):null};A.renderContent=function(){var r=this.viewModel.content;return r?Array.isArray(r)?r.length?e.tsx("div",{key:"content-content-elements"},r.map(this.renderContentElement,this)):null:"string"===typeof r?(r=this._contentWidgets[0],!r||r.destroyed?null:e.tsx("div",{key:"content-content"},r.render())):this.renderNodeContent(r):null};A.renderContentElement=function(r,O){const {visibleElements:u}=
this;if("boolean"!==typeof u.content&&!u.content[r.type])return null;switch(r.type){case "attachments":return this.renderAttachments(O);case "custom":return this.renderCustom(r,O);case "fields":return this.renderFields(O);case "media":return this.renderMedia(O);case "text":return this.renderText(r,O);case "expression":return this.renderExpression(O);default:return null}};A.renderAttachments=function(r){const O=this._contentWidgets[r];if(!O||O.destroyed)return null;const {state:u,attachmentInfos:G}=
O.viewModel;return"loading"===u||0<G.length?e.tsx("div",{key:this._buildKey("attachments-element",r),class:this.classes("esri-feature__content-element")},O.render()):null};A.renderExpression=function(r){const O=this._contentWidgets[r];return!O||O.destroyed?null:e.tsx("div",{key:this._buildKey("expression-element",r),class:"esri-feature__content-element"},O.render())};A.renderCustom=function(r,O){({creator:r}=r);const u=this._contentWidgets[O];return!u||u.destroyed?null:r?e.tsx("div",{key:this._buildKey("custom-element",
O),class:"esri-feature__content-element"},u.render()):null};A.renderFields=function(r){const O=this._contentWidgets[r];return!O||O.destroyed?null:e.tsx("div",{key:this._buildKey("fields-element",r),class:"esri-feature__content-element"},O.render())};A.renderMedia=function(r){const O=this._contentWidgets[r];return!O||O.destroyed?null:e.tsx("div",{key:this._buildKey("media-element",r),class:"esri-feature__content-element"},O.render())};A.renderLastEditInfo=function(){const {visibleElements:r,messages:O}=
this;var {lastEditInfo:u}=this.viewModel;if(!u||!r.lastEditedInfo)return null;const {date:G,user:X}=u;u=v.substitute("edit"===u.type?X?O.lastEditedByUser:O.lastEdited:X?O.lastCreatedByUser:O.lastCreated,{date:G,user:X});return e.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},u)};A.renderText=function(r,O){const u=this._contentWidgets[O];return!u||u.destroyed?null:r.text?e.tsx("div",{key:this._buildKey("text-element",O),class:this.classes("esri-feature__content-element",
"esri-feature__text")},u.render()):null};A._buildKey=function(r,...O){const u=this.get("viewModel.graphic.uid")||"0";O=O.join("-");return`${r}__${u}-${O}`};A._destroyContentWidget=function(r){r&&(r.viewModel=null,!r.destroyed&&r.destroy())};A._destroyContentWidgets=function(){this._contentWidgets.forEach(r=>this._destroyContentWidget(r));this._contentWidgets=[]};A._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:r,visibleElements:O}=this;var u=this.get("viewModel.content");
const {contentViewModels:G}=this.viewModel;Array.isArray(u)?u.forEach((X,aa)=>{"attachments"===X.type&&(this._contentWidgets[aa]=new f({displayType:X.displayType,headingLevel:O.title?r+1:r,viewModel:G[aa]}));"fields"===X.type&&(this._contentWidgets[aa]=new w({viewModel:G[aa]}));"media"===X.type&&(this._contentWidgets[aa]=new M({viewModel:G[aa]}));"text"===X.type&&(this._contentWidgets[aa]=new n({viewModel:G[aa]}));"custom"===X.type&&(this._contentWidgets[aa]=new n({viewModel:G[aa]}));"expression"===
X.type&&(this._contentWidgets[aa]=new F({viewModel:G[aa]}))},this):(u=G[0])&&!u.destroyed&&(this._contentWidgets[0]=new n({viewModel:u}));this.scheduleRender()};return S}(Q.FeatureContentMixin(q));y.__decorate([Y.aliasOf("viewModel.graphic")],x.prototype,"graphic",void 0);y.__decorate([Y.aliasOf("viewModel.defaultPopupTemplateEnabled")],x.prototype,"defaultPopupTemplateEnabled",void 0);y.__decorate([T.property()],x.prototype,"headingLevel",void 0);y.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],x.prototype,"label",void 0);y.__decorate([T.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);y.__decorate([T.property(),B.messageBundle("esri/t9n/common")],x.prototype,"messagesCommon",void 0);y.__decorate([T.property(),B.messageBundle("esri/widgets/support/t9n/uriUtils")],x.prototype,"messagesURIUtils",void 0);y.__decorate([Y.aliasOf("viewModel.spatialReference")],x.prototype,"spatialReference",void 0);y.__decorate([Y.aliasOf("viewModel.title")],
x.prototype,"title",void 0);y.__decorate([T.property()],x.prototype,"visibleElements",void 0);y.__decorate([R.cast("visibleElements")],x.prototype,"castVisibleElements",null);y.__decorate([Y.aliasOf("viewModel.map")],x.prototype,"map",void 0);y.__decorate([Y.aliasOf("viewModel.view")],x.prototype,"view",void 0);y.__decorate([T.property({type:H})],x.prototype,"viewModel",void 0);return x=y.__decorate([P.subclass("esri.widgets.Feature")],x)});