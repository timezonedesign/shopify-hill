// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(Q,A,r,V,R,na,J,m,B,T,M,G,C,da){const ta=
r.ofType(C);r=function(W){function H(n){var w=W.call(this,n)||this;w._handles=new R;w.listItemCreatedFunction=null;w.operationalItems=new ta;w.view=null;w._callListItemsCreatedDebounced=na.debounce(Q._asyncToGenerator(function*(){return w._callListItemsCreated()}),300);return w}Q._inheritsLoose(H,W);var p=H.prototype;p.initialize=function(){this._handles.add(J.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};p.destroy=function(){this._handles.destroy();this.view=this._handles=null;
this.operationalItems.removeAll()};p.triggerAction=function(n,w){n&&!n.disabled&&this.emit("trigger-action",{action:n,item:w})};p.moveListItem=function(n,w,t,Y){var ea,O;const u=null==n?void 0:n.layer;if(u){var P=null==(ea=this.view)?void 0:null==(O=ea.map)?void 0:O.layers;ea=w?da.getItemLayers(w):P;P=t?da.getItemLayers(t):P;ea&&P&&({operationalItems:O}=this,w=(null==w?void 0:w.children)||O,O=(null==t?void 0:t.children)||O,Y=P.length-Y,n.parent=t||null,w.includes(n)&&w.remove(n),ea.includes(u)&&ea.remove(u),
O.includes(n)||O.add(n,Y),P.includes(u)||P.add(u,Y))}};p._createLayerViewHandles=function(n){const {_handles:w}=this;w.remove("layer-views");this._compileList();n&&w.add(n.on("change",()=>this._compileList()),"layer-views")};p._createMapLayerHandles=function(n){const {_handles:w}=this;w.remove("map-layers");this._compileList();n&&w.add(n.on("change",()=>this._compileList()),"map-layers")};p._watchItemProperties=function(n){this._handles.add([n.children.on("change",()=>{this._callListItemCreatedChildren(n.children)})],
`children-change-${n.uid}`)};p._callListItemCreatedChildren=function(n){n.forEach(w=>this._callListItemCreated(w))};p._callListItemCreated=function(n){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:n});this._callListItemCreatedChildren(n.children)};p._createListItem=function(n){const {view:w}=this;n=new C({layer:n,view:w});this._watchItemProperties(n);return n};p._removeAllItems=function(){const {_handles:n,operationalItems:w}=this;w.forEach(t=>{n.remove(`children-change-${t.uid}`)});
w.removeAll()};p._getViewableLayers=function(n){if(n)return n.filter(w=>"hide"!==da.findLayerListMode(w))};p._watchLayersListMode=function(n){const {_handles:w}=this;w.remove("layer-list-mode");n&&n.forEach(t=>{w.add(J.watch(t,"listMode",()=>this._compileList()),"layer-list-mode")})};p._compileList=function(){var n=this.get("view.map.layers");this._watchLayersListMode(n);(n=this._getViewableLayers(n))&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n),this._beforeCallListItemsCreated()):
this._removeAllItems()};p._beforeCallListItemsCreated=function(){var n=Q._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(na.throwIfNotAbortError)});return function(){return n.apply(this,arguments)}}();p._callListItemsCreated=function(){var n=Q._asyncToGenerator(function*(){var w;yield null==(w=this.view)?void 0:w.when();this.operationalItems.forEach(t=>this._callListItemCreated(t))});return function(){return n.apply(this,arguments)}}();p._createNewItems=function(n){const {operationalItems:w}=
this;n.forEach(t=>{w.find(Y=>Y.layer===t)||w.add(this._createListItem(t))})};p._removeItems=function(n){const {_handles:w,operationalItems:t}=this,Y=[];t.forEach(ea=>{ea&&n&&n.find(O=>ea.layer===O)||(w.remove(`children-change-${ea.uid}`),Y.push(ea))});t.removeMany(Y)};p._sortItems=function(n){const {operationalItems:w}=this;w.sort((t,Y)=>{t=n.indexOf(t.layer);Y=n.indexOf(Y.layer);return t>Y?-1:t<Y?1:0})};p._viewHandles=function(){const {_handles:n,view:w}=this;n.remove(["map-layers","layer-views",
"view-layers"]);this._compileList();w&&w.ready&&n.add([J.init(this,"view.map.allLayers",t=>this._createMapLayerHandles(t)),J.init(this,"view.allLayerViews",t=>this._createLayerViewHandles(t)),J.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};Q._createClass(H,[{key:"state",get:function(){const n=this.get("view");return this.get("view.ready")?"ready":n?"loading":"disabled"}}]);return H}(V.EventedAccessor);A.__decorate([m.property()],r.prototype,"listItemCreatedFunction",
void 0);A.__decorate([m.property({type:ta})],r.prototype,"operationalItems",void 0);A.__decorate([m.property({readOnly:!0})],r.prototype,"state",null);A.__decorate([m.property()],r.prototype,"view",void 0);return r=A.__decorate([G.subclass("esri.widgets.LayerList.LayerListViewModel")],r)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(Q,A,r,V,R,na,J,m,B,T,M,G,C,da,ta,W,H,p,n){var w;B=V.ofType({key:"type",defaultKeyValue:"button",base:da,typeMap:{button:ta,toggle:H,slider:W}});const t=V.ofType(B);r=w=function(Y){function ea(u){u=Y.call(this,u)||this;u.actionsSections=new t;u.actionsOpen=!1;u.children=new (V.ofType(w));u.childrenSortable=!0;u.error=null;u.layer=null;u.layerView=null;u.open=!1;u.panel=null;u.parent=null;u.sortable=!0;u.view=null;u.visible=null;return u}Q._inheritsLoose(ea,Y);var O=ea.prototype;O.initialize=
function(){this.handles.add([J.init(this,"layer",u=>this._watchLayerProperties(u)),J.init(this,"view",u=>this._updateChildren(u)),J.init(this,"panel",u=>this._setListItemOnPanel(u)),J.init(this,["layer","view"],()=>this._getLayerView())])};O.destroy=function(){this.view=null};O.castPanel=function(u){this.get("panel.open")&&!u.hasOwnProperty("open")&&(u.open=!0);return u?new p(u):null};O.clone=function(){return new w({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),
layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};O._setListItemOnPanel=function(u){u&&(u.listItem=this)};O._updateChildren=function(u){const P=this.children;P&&P.forEach(pa=>pa.view=u)};O._addChildren=function(u){this.handles.remove("child-list-mode");this.children.removeAll();if(u){u.forEach(pa=>{this.handles.add(J.watch(pa,"listMode",()=>this._addChildren(u)),"child-list-mode")});var P=u.filter(pa=>"hide"!==n.findLayerListMode(pa));this.children.addMany(this._makeChildren(P))}};
O._watchSublayerChanges=function(u){u&&this.handles.add(u.on("change",()=>{this._addChildren(u)}),"layer")};O._initializeChildLayers=function(u){this._addChildren(u);this._watchSublayerChanges(u)};O._makeChildren=function(u){return u.map(P=>n.canDisplayLayer(P)?new w({layer:P,parent:this,view:this.view}):null).reverse()};O._watchLayerProperties=function(u){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),u))if(this.handles.add(J.watch(u,"listMode",()=>this._watchLayerProperties(u)),
"layer"),"hide-children"===n.findLayerListMode(u))this.children.removeAll();else{var P=n.getNormalizedChildLayerProperty(u);P&&this.handles.add(J.init(u,P,()=>{u.hasOwnProperty(P)&&this._initializeChildLayers(u[P])}),"layer")}};O._getLayerView=function(){var u=Q._asyncToGenerator(function*(){const {layer:P,view:pa}=this;if(P&&pa)try{const wa=yield pa.whenLayerView(P);wa.layer===this.layer&&this._set("layerView",wa)}catch{}});return function(){return u.apply(this,arguments)}}();O._isLayerUpdating=
function(u){return u&&"loading"===u.loadStatus};Q._createClass(ea,[{key:"title",get:function(){const u=this.get("layer.layer");return(!u||u&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(u){void 0===u?this._clearOverride("title"):this._override("title",u)}},{key:"updating",get:function(){const u=this.layerView;return u?u.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!n.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))}},{key:"visibilityMode",get:function(){return n.findLayerVisibilityMode(this.layer)}}]);return ea}(na.IdentifiableMixin(R.HandleOwnerMixin(r)));A.__decorate([G.property({type:t})],r.prototype,"actionsSections",void 0);A.__decorate([G.property()],r.prototype,"actionsOpen",void 0);A.__decorate([G.property({type:V})],r.prototype,"children",void 0);A.__decorate([G.property()],r.prototype,"childrenSortable",void 0);A.__decorate([m.aliasOf("layer.loadError?")],r.prototype,"error",
void 0);A.__decorate([G.property()],r.prototype,"layer",void 0);A.__decorate([G.property({readOnly:!0})],r.prototype,"layerView",void 0);A.__decorate([G.property()],r.prototype,"open",void 0);A.__decorate([G.property({type:p})],r.prototype,"panel",void 0);A.__decorate([M.cast("panel")],r.prototype,"castPanel",null);A.__decorate([G.property()],r.prototype,"parent",void 0);A.__decorate([G.property()],r.prototype,"sortable",void 0);A.__decorate([G.property()],r.prototype,"title",null);A.__decorate([G.property({readOnly:!0})],
r.prototype,"updating",null);A.__decorate([G.property({value:null})],r.prototype,"view",void 0);A.__decorate([m.aliasOf("layer.visible")],r.prototype,"visible",void 0);A.__decorate([G.property({readOnly:!0})],r.prototype,"visibleAtCurrentScale",null);A.__decorate([G.property({readOnly:!0})],r.prototype,"visibilityMode",null);return r=w=A.__decorate([C.subclass("esri.widgets.LayerList.ListItem")],r)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(Q,A,r,V,R,na,J,m){var B;V=B=function(T){function M(G){G=T.call(this,G)||this;G.displayValueEnabled=!1;G.max=1;G.min=0;G.step=.1;G.type="slider";G.value=null;return G}Q._inheritsLoose(M,T);M.prototype.clone=function(){return new B({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return M}(m);A.__decorate([r.property()],
V.prototype,"displayValueEnabled",void 0);A.__decorate([r.property()],V.prototype,"max",void 0);A.__decorate([r.property()],V.prototype,"min",void 0);A.__decorate([r.property()],V.prototype,"step",void 0);A.__decorate([r.property()],V.prototype,"value",void 0);return V=B=A.__decorate([J.subclass("esri.support.Action.ActionSlider")],V)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/widget ../support/jsxFactory".split(" "),
function(Q,A,r,V,R,na,J,m,B,T,M,G,C,da){R=function(ta){function W(p,n){p=ta.call(this,p,n)||this;p._legend=null;p._handles=new V;p.content=null;p.image=null;p.listItem=null;p.open=!1;p.visible=!0;return p}A._inheritsLoose(W,ta);var H=W.prototype;H.initialize=function(){this.own([na.init(this,"content",p=>this._createLegend(p))])};H.destroy=function(){const {_legend:p}=this;p&&p.destroy();this._legend=null};H.render=function(){return da.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
H._renderContent=function(p){const {_legend:n,listItem:w}=this;return p?"legend"===p?w&&w.view&&w.layer&&n?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:n},n.render()):null:"string"===typeof p?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:p,innerHTML:p}):C.isWidget(p)?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:p},p.render()):p instanceof HTMLElement?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:p,bind:p,afterCreate:this._attachToNode}):null:null};H._renderContents=function(){const {content:p}=this;return Array.isArray(p)?p.map(n=>this._renderContent(n)):this._renderContent(p)};H._getLegendOptions=function(p){if(p){var {layer:n,view:w}=p;if(n&&w)return{view:w,layerInfos:[{layer:n,title:""}]}}};H._createLegend=function(p){this._hasLegend(p)&&
!this._legend&&(new Promise((n,w)=>Q(["../Legend"],t=>n(Object.freeze({__proto__:null,default:t})),w))).then(({default:n})=>{const {_handles:w,listItem:t}=this,Y=new n(this._getLegendOptions(t));this._legend=Y;this.notifyChange("className");this.notifyChange("title");n=na.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(Y));w.add(n,"legends");this.scheduleRender()})};H._hasLegend=function(p){return"legend"===p?!0:Array.isArray(p)?p.some(n=>"legend"===n):!1};H._attachToNode=function(p){p.appendChild(this)};
H._updateLegend=function(p){const {listItem:n}=this;if(n){var {layer:w,view:t}=n;p.view=t;p.layerInfos=[{layer:w,title:null}];this.scheduleRender()}};H._getWidget=function(p){return"legend"===p?this._legend:C.isWidget(p)?p:null};H._getFirstWidget=function(){const {content:p}=this;if(Array.isArray(p)){let n=null;p.some(w=>{(w=this._getWidget(w))&&(n=w);return!!w});return n}return this._getWidget(p)};A._createClass(W,[{key:"className",get:function(){const {image:p}=this,n=this._getFirstWidget();return this._get("className")||
!p&&n?n.iconClass:""},set:function(p){void 0===p?this._clearOverride("className"):this._override("className",p)}},{key:"title",get:function(){const p=this._getFirstWidget();return this._get("title")||p?p.label:""},set:function(p){void 0===p?this._clearOverride("title"):this._override("title",p)}}]);return W}(R.IdentifiableMixin(G));r.__decorate([J.property()],R.prototype,"className",null);r.__decorate([J.property()],R.prototype,"content",void 0);r.__decorate([J.property()],R.prototype,"image",void 0);
r.__decorate([J.property()],R.prototype,"listItem",void 0);r.__decorate([J.property()],R.prototype,"title",null);r.__decorate([J.property()],R.prototype,"open",void 0);r.__decorate([J.property()],R.prototype,"visible",void 0);return R=r.__decorate([M.subclass("esri.widgets.LayerList.ListItemPanel")],R)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(Q){function A(m){if(m)return null!=m.listMode?m.listMode:void 0}function r(m){if(m)return null!=m.minScale?
m.minScale:void 0}function V(m){if(m)return null!=m.maxScale?m.maxScale:void 0}function R(m){if(m){if(!("type"in m))return"sublayers";if(m.listMode!==J.hideChildren&&"wmts"!==m.type)switch(m.type){case "group":return"layers";case "analysis":return"analyses";default:return"sublayers"}}}function na(m,B){m&&m.sort((T,M)=>{T=B.indexOf(T.uid);M=B.indexOf(M.uid);return T>M?-1:T<M?1:0})}const J={hide:"hide",hideChildren:"hide-children"};Q.canDisplayLayer=function(m){return A(m)!==J.hide};Q.canSortSublayers=
function(m){m=m&&(m.get("layer.layer")||m.layer);if(!m)return!1;m=m.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof m?m:!0};Q.findLayerListMode=A;Q.findLayerMaxScale=V;Q.findLayerMinScale=r;Q.findLayerVisibilityMode=function(m){if(!m)return"inherited";var B=m.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof B)return B?"independent":"inherited";B=m.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof B?B?
"independent":"inherited":null!=m.visibilityMode?m.visibilityMode:"independent"};Q.findSelectedItem=function(m,B){var T;const M=null==(T=m.layer)?void 0:T.uid;return M&&B.find(G=>{var C;return(null==(C=G.layer)?void 0:C.uid)===M})};Q.getItemLayers=function(m){return(m=null==m?void 0:m.layer)&&"group"===m.type?m.layers:null};Q.getNormalizedChildLayerProperty=R;Q.isLayerOutsideScaleRange=function(m,B){if(!m||isNaN(B))return!1;var T=r(m);m=V(m);T=!isNaN(T)&&0<T&&B>T;B=!isNaN(m)&&0<m&&B<m;return T||B};
Q.sortChildLayersToIds=function(m,B){if(m=null==m?void 0:m.layer){var T=R(m);T&&(m=m.get(T),na(m,B))}};Q.sortLayersToIds=na;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(Q){function A(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function r(a){for(var b=1;b<arguments.length;b++){var c=
null!=arguments[b]?arguments[b]:{};b%2?A(Object(c),!0).forEach(function(e){var g=c[e];e in a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function V(a){"@babel/helpers - typeof";V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:
function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return V(a)}function R(){R=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return R.apply(this,arguments)}function na(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var k=e[g];0<=b.indexOf(k)||(c[k]=a[k])}}if(Object.getOwnPropertySymbols)for(g=
Object.getOwnPropertySymbols(a),k=0;k<g.length;k++)e=g[k],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function J(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function m(a,b,c){a.addEventListener(b,c,!Ca&&wb)}function B(a,b,c){a.removeEventListener(b,c,!Ca&&wb)}function T(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function M(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&T(a,b):T(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function G(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(xb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(xb," ")}}function C(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function da(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=C(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function ta(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function W(){var a=document.scrollingElement;return a?a:document.documentElement}function H(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==W()){var k=a.getBoundingClientRect();var l=k.top;var x=k.left;var D=k.bottom;var F=k.right;var I=k.height;var N=k.width}else x=l=0,D=window.innerHeight,F=window.innerWidth,I=window.innerHeight,N=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!Ca)){do if(g&&g.getBoundingClientRect&&
("none"!==C(g,"transform")||c&&"static"!==C(g,"position"))){D=g.getBoundingClientRect();l-=D.top+parseInt(C(g,"border-top-width"));x-=D.left+parseInt(C(g,"border-left-width"));D=l+k.height;F=x+k.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=da(g||a))&&a.a,g=a&&a.d,a&&(l/=g,x/=e,N/=e,I/=g,D=l+I,F=x+N));return{top:l,left:x,bottom:D,right:F,width:N,height:I}}}function p(a,b,c){var e=O(a,!0);for(a=H(a)[b];e;){b=H(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===W())break;
e=O(e,!1)}return!1}function n(a,b,c,e){for(var g=0,k=0,l=a.children;k<l.length;){if("none"!==l[k].style.display&&l[k]!==d.ghost&&(e||l[k]!==d.dragged)&&M(l[k],c.draggable,a,!1)){if(g===b)return l[k];g++}k++}return null}function w(a,b){for(a=a.lastElementChild;a&&(a===d.ghost||"none"===C(a,"display")||b&&!T(a,b));)a=a.previousElementSibling;return a||null}function t(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===d.clone||b&&!T(a,
b)||c++;return c}function Y(a){var b=0,c=0,e=W();if(a){do{var g=da(a),k=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[b,c]}function ea(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&b[e]===a[c][e])return Number(c);return-1}function O(a,b){if(!a||!a.getBoundingClientRect)return W();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=C(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||
a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return W()}function u(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function P(a,b){return function(){if(!Sa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Sa=setTimeout(function(){Sa=
void 0},b)}}}function pa(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function wa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Ha(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==C(c,"display")&&c!==d.ghost){a.push({target:c,rect:H(c)});var e=r({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=da(c,!0);g&&(e.top-=
g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(ea(a,{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,k=0;a.forEach(function(l){var x=0,D=l.target,F=D.fromRect,I=H(D),N=D.prevFromRect,ja=D.prevToRect;l=l.rect;var fa=da(D,!0);fa&&(I.top-=fa.f,I.left-=fa.e);D.toRect=I;D.thisAnimationDuration&&u(N,I)&&!u(F,I)&&(l.top-I.top)/(l.left-I.left)===(F.top-I.top)/(F.left-I.left)&&(x=Math.sqrt(Math.pow(N.top-
l.top,2)+Math.pow(N.left-l.left,2))/Math.sqrt(Math.pow(N.top-ja.top,2)+Math.pow(N.left-ja.left,2))*e.options.animation);u(I,F)||(D.prevFromRect=F,D.prevToRect=I,x||(x=e.options.animation),e.animate(D,l,I,x));x&&(g=!0,k=Math.max(k,x),clearTimeout(D.animationResetTimer),D.animationResetTimer=setTimeout(function(){D.animationTime=0;D.prevFromRect=null;D.fromRect=null;D.prevToRect=null;D.thisAnimationDuration=null},x),D.thisAnimationDuration=x)});clearTimeout(b);g?b=setTimeout(function(){"function"===
typeof c&&c()},k):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,k){if(k){C(c,"transition","");C(c,"transform","");var l=da(this.el),x=(e.left-g.left)/(l&&l.a||1);e=(e.top-g.top)/(l&&l.d||1);c.animatingX=!!x;c.animatingY=!!e;C(c,"transform","translate3d("+x+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;C(c,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));C(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){C(c,"transition","");C(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},k)}}}}function y(a){var b=r({putSortable:ka,cloneEl:aa,targetEl:v,rootEl:Z,oldIndex:La,oldDraggableIndex:Ta,newIndex:ra,newDraggableIndex:Ea},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,k=b.cloneEl,l=b.toEl,x=b.fromEl,D=b.oldIndex,F=b.newIndex,I=b.oldDraggableIndex,N=b.newDraggableIndex,ja=b.originalEvent,fa=b.putSortable,la=
b.extraEventProperties;if(a=a||c&&c[sa]){var X=a.options,ua="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||Ca||Ua?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=l||c;b.from=x||c;b.item=g||c;b.clone=k;b.oldIndex=D;b.newIndex=F;b.oldDraggableIndex=I;b.newDraggableIndex=N;b.originalEvent=ja;b.pullMode=fa?fa.lastPutMode:void 0;e=r(r({},la),Va.getEventProperties(e,a));for(var xa in e)b[xa]=e[xa];c&&c.dispatchEvent(b);X[ua]&&
X[ua].call(a,b)}}function d(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=R({},b);a[sa]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,l){k.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==d.supportPointer&&"PointerEvent"in window&&!Wa,emptyInsertThreshold:5};
Va.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);zb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Jb)this.options.touchStartThreshold=1;b.supportPointer?m(a,"pointerdown",this._onTapStart):(m(a,"mousedown",this._onTapStart),m(a,"touchstart",this._onTapStart));this.nativeDraggable&&(m(a,"dragover",this),m(a,"dragenter",this));bb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||
[]);R(this,Ha())}function f(a,b,c,e,g,k,l,x){var D=a[sa],F=D.options.onMove,I;if(!window.CustomEvent||Ca||Ua){var N=document.createEvent("Event");N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=b;N.from=a;N.dragged=c;N.draggedRect=e;N.related=g||b;N.relatedRect=k||H(b);N.willInsertAfter=x;N.originalEvent=l;a.dispatchEvent(N);F&&(I=F.call(D,N,l));return I}function h(a){a.draggable=!1}function q(){mb=!1}function z(a,b,c){c=H(n(c.el,0,c.options,!0));return b?
a.clientX<c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function E(a,b,c){c=H(w(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function L(a,b,c,e,g,k,l,x){a=e?a.clientY:a.clientX;var D=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!l)if(x&&cb<D*g)if(!Xa&&(1===Ya?a>F+D*k/2:a<c-D*
k/2)&&(Xa=!0),Xa)e=!0;else{if(1===Ya?a<F+cb:a>c-cb)return-Ya}else if(a>F+D*(1-g)/2&&a<c-D*(1-g)/2)return b=t(v)<t(b)?1:-1,b;if(e||l)if(a<F+D*k/2||a>c-D*k/2)return a>F+D/2?1:-1;return 0}function S(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function ba(a){db.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&db.push(c)}}function ia(a){return setTimeout(a,0)}function va(){ha.forEach(function(a){clearInterval(a.pid)});
ha=[]}function Ma(){}function Na(){}var Ca=J(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ua=J(/Edge/i),Ab=J(/firefox/i),Wa=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),Za=J(/iP(ad|od|hone)/i),Kb=J(/chrome/i)&&J(/android/i),wb={capture:!1,passive:!1},xb=/\s+/g,Sa,sa="Sortable"+(new Date).getTime(),Oa=[],nb={initializeByDefault:!0},Va={mount:function(a){for(var b in nb)!nb.hasOwnProperty(b)||b in a||(a[b]=nb[b]);Oa.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName,
" more than once");});Oa.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Oa.forEach(function(k){if(b[k.pluginName]){if(b[k.pluginName][g])b[k.pluginName][g](r({sortable:b},c));if(b.options[k.pluginName]&&b[k.pluginName][a])b[k.pluginName][a](r({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Oa.forEach(function(k){var l=k.pluginName;if(a.options[l]||k.initializeByDefault)k=new k(a,b,a.options),k.sortable=a,k.options=
a.options,a[l]=k,R(c,k.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};Oa.forEach(function(e){"function"===typeof e.eventProperties&&R(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Oa.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],
c))});return e}},Lb=["evt"],qa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=na(c,Lb);Va.pluginEvent.bind(d)(a,b,r({dragEl:v,parentEl:ca,ghostEl:K,rootEl:Z,nextEl:Ia,lastDownEl:eb,cloneEl:aa,cloneHidden:Fa,dragStarted:$a,putSortable:ka,activeSortable:d.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Ta,newIndex:ra,newDraggableIndex:Ea,hideGhostForTarget:Bb,unhideGhostForTarget:Cb,cloneNowHidden:function(){Fa=!0},cloneNowShown:function(){Fa=!1},dispatchSortableEvent:function(g){y({sortable:b,
name:g,originalEvent:e})}},c))},v,ca,K,Z,Ia,eb,aa,Fa,La,ra,Ta,Ea,fb,ka,Pa=!1,gb=!1,bb=[],Ja,ya,ob,pb,Db,Eb,$a,Qa,Ya,Xa=!1,hb=!1,cb,ma,qb=[],mb=!1,db=[],ib="undefined"!==typeof document,Fb=Ua||Ca?"cssFloat":"float",Jb=ib&&!Kb&&!Za&&"draggable"in document.createElement("div"),Gb=function(){if(ib){if(Ca)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,b){var c=C(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-
parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),g=n(a,0,b);a=n(a,1,b);var k=g&&C(g);b=a&&C(a);var l=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+H(g).width,x=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+H(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&k["float"]&&"none"!==k["float"]?(c="left"===k["float"]?"left":"right",
!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):g&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||l>=e&&"none"===c[Fb]||a&&"none"===c[Fb]&&l+x>e)?"vertical":"horizontal"},Mb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var k=c?b.left:b.top,l=c?b.right:b.bottom;b=c?b.width:b.height;return e===k||g===l||e+a/2===k+b/2},Nb=function(a,b){var c;bb.some(function(e){var g=e[sa].options.emptyInsertThreshold;if(g&&!w(e)){var k=
H(e),l=b>=k.top-g&&b<=k.bottom+g;if(a>=k.left-g&&a<=k.right+g&&l)return c=e}});return c},zb=function(a){function b(g,k){return function(l,x,D,F){var I=l.options.group.name&&x.options.group.name&&l.options.group.name===x.options.group.name;if(null==g&&(k||I))return!0;if(null==g||!1===g)return!1;if(k&&"clone"===g)return g;if("function"===typeof g)return b(g(l,x,D,F),k)(l,x,D,F);l=(k?l:x).options.group.name;return!0===g||"string"===typeof g&&g===l||g.join&&-1<g.indexOf(l)}}var c={},e=a.group;e&&"object"==
V(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Bb=function(){!Gb&&K&&C(K,"display","none")},Cb=function(){!Gb&&K&&C(K,"display","")};ib&&document.addEventListener("click",function(a){if(gb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),gb=!1},!0);var Ka=function(a){if(v){a=a.touches?a.touches[0]:a;var b=Nb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[sa]._onDragOver(c)}}},Ob=function(a){v&&v.parentNode[sa]._isOutsideThisEl(a.target)};d.prototype={constructor:d,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Qa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,
k=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,x=(l||a).target,D=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||x,F=e.filter;ba(c);if(!(v||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||D.isContentEditable||!this.nativeDraggable&&Wa&&x&&"SELECT"===x.tagName.toUpperCase()||(x=M(x,e.draggable,c,!1),x&&x.animated||eb===x))){La=t(x);Ta=t(x,e.draggable);if("function"===typeof F){if(F.call(this,a,x,this)){y({sortable:b,rootEl:D,
name:"filter",targetEl:x,toEl:c,fromEl:c});qa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(I){if(I=M(D,I.trim(),c,!1))return y({sortable:b,rootEl:I,name:"filter",targetEl:x,fromEl:c,toEl:c}),qa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!M(D,e.handle,c,!1)||this._prepareDragStart(a,l,x)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,k=e.options,l=g.ownerDocument;if(c&&!v&&c.parentNode===g){var x=
H(c);Z=g;v=c;ca=v.parentNode;Ia=v.nextSibling;eb=c;fb=k.group;d.dragged=v;Ja={target:v,clientX:(b||a).clientX,clientY:(b||a).clientY};Db=Ja.clientX-x.left;Eb=Ja.clientY-x.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;v.style["will-change"]="all";c=function(){qa("delayEnded",e,{evt:a});d.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Ab&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,b),y({sortable:e,name:"choose",originalEvent:a}),G(v,k.chosenClass,!0))};k.ignore.split(",").forEach(function(D){ta(v,
D.trim(),h)});m(l,"dragover",Ka);m(l,"mousemove",Ka);m(l,"touchmove",Ka);m(l,"mouseup",e._onDrop);m(l,"touchend",e._onDrop);m(l,"touchcancel",e._onDrop);Ab&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0);qa("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!b||this.nativeDraggable&&(Ua||Ca)?c():d.eventCanceled?this._onDrop():(m(l,"mouseup",e._disableDelayedDrag),m(l,"touchend",e._disableDelayedDrag),m(l,"touchcancel",e._disableDelayedDrag),m(l,"mousemove",e._delayedDragTouchMoveHandler),
m(l,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&m(l,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,k.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&h(v);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;B(a,"mouseup",this._disableDelayedDrag);B(a,"touchend",this._disableDelayedDrag);B(a,"touchcancel",this._disableDelayedDrag);B(a,"mousemove",this._delayedDragTouchMoveHandler);B(a,"touchmove",this._delayedDragTouchMoveHandler);B(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?m(document,
"pointermove",this._onTouchMove):b?m(document,"touchmove",this._onTouchMove):m(document,"mousemove",this._onTouchMove):(m(v,"dragend",this),m(Z,"dragstart",this._onDragStart));try{document.selection?ia(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Pa=!1;if(Z&&v){qa("dragStarted",this,{evt:b});this.nativeDraggable&&m(document,"dragover",Ob);var c=this.options;!a&&G(v,c.dragClass,!1);G(v,c.ghostClass,!0);d.active=this;a&&this._appendGhost();
y({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(ya){this._lastX=ya.clientX;this._lastY=ya.clientY;Bb();for(var a=document.elementFromPoint(ya.clientX,ya.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ya.clientX,ya.clientY);if(a===b)break;b=a}v.parentNode[sa]._isOutsideThisEl(a);if(b){do{if(b[sa]){var c=void 0;if((c=b[sa]._onDragOver({clientX:ya.clientX,clientY:ya.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Cb()}},_onTouchMove:function(a){if(Ja){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=K&&da(K,!0),k=K&&g&&g.a,l=K&&g&&g.d,x=Za&&ma&&Y(ma);k=(b.clientX-Ja.clientX+e.x)/(k||1)+(x?x[0]-qb[0]:0)/(k||1);e=(b.clientY-Ja.clientY+e.y)/(l||1)+(x?x[1]-qb[1]:0)/(l||1);if(!d.active&&!Pa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}K&&(g?(g.e+=k-(ob||0),g.f+=e-(pb||0)):g={a:1,
b:0,c:0,d:1,e:k,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),C(K,"webkitTransform",c),C(K,"mozTransform",c),C(K,"msTransform",c),C(K,"transform",c),ob=k,pb=e,ya=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!K){var a=this.options.fallbackOnBody?document.body:Z,b=H(v,!0,Za,!0,a),c=this.options;if(Za){for(ma=a;"static"===C(ma,"position")&&"none"===C(ma,"transform")&&ma!==document;)ma=ma.parentNode;ma!==document.body&&
ma!==document.documentElement?(ma===document&&(ma=W()),b.top+=ma.scrollTop,b.left+=ma.scrollLeft):ma=W();qb=Y(ma)}K=v.cloneNode(!0);G(K,c.ghostClass,!1);G(K,c.fallbackClass,!0);G(K,c.dragClass,!0);C(K,"transition","");C(K,"transform","");C(K,"box-sizing","border-box");C(K,"margin",0);C(K,"top",b.top);C(K,"left",b.left);C(K,"width",b.width);C(K,"height",b.height);C(K,"opacity","0.8");C(K,"position",Za?"absolute":"fixed");C(K,"zIndex","100000");C(K,"pointerEvents","none");d.ghost=K;a.appendChild(K);
C(K,"transform-origin",Db/parseInt(K.style.width)*100+"% "+Eb/parseInt(K.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;qa("dragStart",this,{evt:a});d.eventCanceled?this._onDrop():(qa("setupClone",this),d.eventCanceled||(aa=wa(v),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),G(aa,this.options.chosenClass,!1),d.clone=aa),c.cloneId=ia(function(){qa("clone",c);d.eventCanceled||(c.options.removeCloneOnHide||Z.insertBefore(aa,v),c._hideClone(),
y({sortable:c,name:"clone"}))}),!b&&G(v,g.dragClass,!0),b?(gb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(B(document,"mouseup",c._onDrop),B(document,"touchend",c._onDrop),B(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,v)),m(document,"drop",c),C(v,"transform","translateZ(0)")),Pa=!0,c._dragStartId=ia(c._dragStarted.bind(c,b,a)),m(document,"selectstart",c),$a=!0,Wa&&C(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ga,jb){qa(Ga,
X,r({evt:a,isOwner:ja,axis:xa?"vertical":"horizontal",revert:D,dragRect:za,targetRect:x,canSort:fa,fromSortable:la,target:l,completed:e,onMove:function(Hb,Pb){return f(Z,k,v,za,Hb,H(Hb),a,Pb)},changed:g},jb))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==la&&la.captureAnimationState()}function e(Ga){b("dragOverCompleted",{insertion:Ga});Ga&&(ja?N._hideClone():N._showClone(X),X!==la&&(G(v,ka?ka.options.ghostClass:N.options.ghostClass,!1),G(v,F.ghostClass,!0)),ka!==X&&X!==
d.active?ka=X:X===d.active&&ka&&(ka=null),la===X&&(X._ignoreWhileAnimating=l),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==la&&(la.animateAll(),la._ignoreWhileAnimating=null));if(l===v&&!v.animated||l===k&&!l.animated)Qa=null;F.dragoverBubble||a.rootEl||l===document||(v.parentNode[sa]._isOutsideThisEl(a.target),!Ga&&Ka(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ua=!0}function g(){ra=t(v);Ea=t(v,F.draggable);y({sortable:X,name:"change",
toEl:k,newIndex:ra,newDraggableIndex:Ea,originalEvent:a})}var k=this.el,l=a.target,x,D,F=this.options,I=F.group,N=d.active,ja=fb===I,fa=F.sort,la=ka||N,X=this,ua=!1;if(!mb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();l=M(l,F.draggable,k,!0);b("dragOver");if(d.eventCanceled)return ua;if(v.contains(a.target)||l.animated&&l.animatingX&&l.animatingY||X._ignoreWhileAnimating===l)return e(!1);gb=!1;if(N&&!F.disabled&&(ja?fa||(D=ca!==Z):ka===this||(this.lastPutMode=fb.checkPull(this,N,v,
a))&&I.checkPut(this,N,v,a))){var xa="vertical"===this._getDirection(a,l);var za=H(v);b("dragOverValid");if(d.eventCanceled)return ua;if(D)return ca=Z,c(),this._hideClone(),b("revert"),d.eventCanceled||(Ia?Z.insertBefore(v,Ia):Z.appendChild(v)),e(!0);I=w(k,F.draggable);if(!I||E(a,xa,this)&&!I.animated){if(I===v)return e(!1);I&&k===a.target&&(l=I);l&&(x=H(l));if(!1!==f(Z,k,v,za,l,x,a,!!l))return c(),k.appendChild(v),ca=k,g(),e(!0)}else if(I&&z(a,xa,this)){var Aa=n(k,0,F,!0);if(Aa===v)return e(!1);
l=Aa;x=H(l);if(!1!==f(Z,k,v,za,l,x,a,!1))return c(),k.insertBefore(v,Aa),ca=k,g(),e(!0)}else if(l.parentNode===k){x=H(l);var U=0;U=v.parentNode!==k;var oa=!Mb(v.animated&&v.toRect||za,l.animated&&l.toRect||x,xa);I=xa?"top":"left";var Da=p(l,"top","top")||p(v,"top","top"),kb=Da?Da.scrollTop:void 0;Qa!==l&&(Aa=x[I],Xa=!1,hb=!oa&&F.invertSwap||U);U=L(a,l,x,xa,oa?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,hb,Qa===l);if(0!==U){oa=t(v);do{oa-=U;var Ba=ca.children[oa]}while(Ba&&
("none"===C(Ba,"display")||Ba===K))}if(0===U||Ba===l)return e(!1);Qa=l;Ya=U;Ba=l.nextElementSibling;oa=!1;oa=1===U;U=f(Z,k,v,za,l,x,a,oa);if(!1!==U){if(1===U||-1===U)oa=1===U;mb=!0;setTimeout(q,30);c();oa&&!Ba?k.appendChild(v):l.parentNode.insertBefore(v,oa?Ba:l);Da&&pa(Da,0,kb-Da.scrollTop);ca=v.parentNode;void 0===Aa||hb||(cb=Math.abs(Aa-H(l)[I]));g();return e(!0)}}if(k.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove);
B(document,"touchmove",this._onTouchMove);B(document,"pointermove",this._onTouchMove);B(document,"dragover",Ka);B(document,"mousemove",Ka);B(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;B(a,"mouseup",this._onDrop);B(a,"touchend",this._onDrop);B(a,"pointerup",this._onDrop);B(a,"touchcancel",this._onDrop);B(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ra=t(v);Ea=t(v,c.draggable);qa("drop",this,{evt:a});ca=v&&v.parentNode;ra=t(v);Ea=
t(v,c.draggable);if(!d.eventCanceled&&(Xa=hb=Pa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wa&&C(document.body,"user-select",""),C(v,"transform",""),a&&($a&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(Z===ca||ka&&"clone"!==
ka.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&B(v,"dragend",this),h(v),v.style["will-change"]="",$a&&!Pa&&G(v,ka?ka.options.ghostClass:this.options.ghostClass,!1),G(v,this.options.chosenClass,!1),y({sortable:this,name:"unchoose",toEl:ca,newIndex:null,newDraggableIndex:null,originalEvent:a}),Z!==ca?(0<=ra&&(y({rootEl:ca,name:"add",toEl:ca,fromEl:Z,originalEvent:a}),y({sortable:this,name:"remove",toEl:ca,originalEvent:a}),y({rootEl:ca,name:"sort",toEl:ca,
fromEl:Z,originalEvent:a}),y({sortable:this,name:"sort",toEl:ca,originalEvent:a})),ka&&ka.save()):ra!==La&&0<=ra&&(y({sortable:this,name:"update",toEl:ca,originalEvent:a}),y({sortable:this,name:"sort",toEl:ca,originalEvent:a})),d.active)))){if(null==ra||-1===ra)ra=La,Ea=Ta;y({sortable:this,name:"end",toEl:ca,originalEvent:a});this.save()}this._nulling()},_nulling:function(){qa("nulling",this);Z=v=ca=K=Ia=aa=eb=Fa=Ja=ya=$a=ra=Ea=La=Ta=Qa=Ya=ka=fb=d.dragged=d.ghost=d.clone=d.active=null;db.forEach(function(a){a.checked=
!0});db.length=ob=pb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,k=this.options;e<g;e++)b=c[e],M(b,k.draggable,this.el,!1)&&a.push(b.getAttribute(k.dataIdAttr)||S(b));return a},sort:function(a,b){var c=
{},e=this.el;this.toArray().forEach(function(g,k){k=e.children[k];M(k,this.options.draggable,e,!1)&&(c[g]=k)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return M(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Va.modifyOption(this,a,b);c[a]="undefined"!==typeof e?
e:b;"group"===a&&zb(c)},destroy:function(){qa("destroy",this);var a=this.el;a[sa]=null;B(a,"mousedown",this._onTapStart);B(a,"touchstart",this._onTapStart);B(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(B(a,"dragover",this),B(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();bb.splice(bb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Fa||(qa("hideClone",
this),d.eventCanceled||(C(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Fa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Fa&&(qa("showClone",this),d.eventCanceled||(v.parentNode!=Z||this.options.group.revertClone?Ia?Z.insertBefore(aa,Ia):Z.appendChild(aa):Z.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),C(aa,"display",""),Fa=!1))}};ib&&m(document,"touchmove",function(a){(d.active||Pa)&&a.cancelable&&
a.preventDefault()});d.utils={on:m,off:B,css:C,find:ta,is:function(a,b){return!!M(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:P,closest:M,toggleClass:G,clone:wa,index:t,nextTick:ia,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:n};d.get=function(a){return a[sa]};d.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||
!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(d.utils=r(r({},d.utils),e.utils));Va.mount(e)})};d.create=function(a,b){return new d(a,b)};d.version="1.14.0";var ha=[],ab,rb,sb=!1,tb,ub,lb,Ra,vb=P(function(a,b,c,e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,l=b.scrollSensitivity,x=b.scrollSpeed,D=W(),F=!1;if(rb!==c){rb=c;va();ab=b.scroll;var I=b.scrollFn;!0===ab&&(ab=
O(c,!0))}c=0;var N=ab;do{var ja=N,fa=H(ja),la=fa.top,X=fa.bottom,ua=fa.left,xa=fa.right,za=fa.width;fa=fa.height;var Aa=void 0,U=void 0,oa=ja.scrollWidth,Da=ja.scrollHeight;U=C(ja);var kb=ja.scrollLeft,Ba=ja.scrollTop;ja===D?(Aa=za<oa&&("auto"===U.overflowX||"scroll"===U.overflowX||"visible"===U.overflowX),U=fa<Da&&("auto"===U.overflowY||"scroll"===U.overflowY||"visible"===U.overflowY)):(Aa=za<oa&&("auto"===U.overflowX||"scroll"===U.overflowX),U=fa<Da&&("auto"===U.overflowY||"scroll"===U.overflowY));
ua=Aa&&(Math.abs(xa-g)<=l&&kb+za<oa)-(Math.abs(ua-g)<=l&&!!kb);la=U&&(Math.abs(X-k)<=l&&Ba+fa<Da)-(Math.abs(la-k)<=l&&!!Ba);if(!ha[c])for(X=0;X<=c;X++)ha[X]||(ha[X]={});if(ha[c].vx!=ua||ha[c].vy!=la||ha[c].el!==ja)if(ha[c].el=ja,ha[c].vx=ua,ha[c].vy=la,clearInterval(ha[c].pid),0!=ua||0!=la)F=!0,ha[c].pid=setInterval(function(){e&&0===this.layer&&d.active._onTouchMove(lb);var Ga=ha[this.layer].vy?ha[this.layer].vy*x:0,jb=ha[this.layer].vx?ha[this.layer].vx*x:0;"function"===typeof I&&"continue"!==I.call(d.dragged.parentNode[sa],
jb,Ga,a,lb,ha[this.layer].el)||pa(ha[this.layer].el,jb,Ga)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&N!==D&&(N=O(N,!1)));sb=F}},30),Ib=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,k=a.dispatchSortableEvent,l=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||g,l(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};
Ma.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=n(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Ib};R(Ma,{pluginName:"revertOnSpill"});Na.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;
a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Ib};R(Na,{pluginName:"removeOnSpill"});d.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):this.options.supportPointer?
m(document,"pointermove",this._handleFallbackAutoScroll):b.touches?m(document,"touchmove",this._handleFallbackAutoScroll):m(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,
"mousemove",this._handleFallbackAutoScroll));clearInterval(Ra);va();clearTimeout(Sa);Sa=void 0},nulling:function(){lb=rb=ab=sb=Ra=tb=ub=null;ha.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,k=(b.touches?b.touches[0]:b).clientY,l=document.elementFromPoint(g,k);lb=b;if(c||this.options.forceAutoScrollFallback||Ua||Ca||Wa){vb(b,this.options,l,c);var x=O(l,!0);!sb||Ra&&g===tb&&k===ub||(Ra&&clearInterval(Ra),
Ra=setInterval(function(){var D=O(document.elementFromPoint(g,k),!0);D!==x&&(x=D,va());vb(b,e.options,D,c)},10),tb=g,ub=k)}else this.options.bubbleScroll&&O(l,!0)!==W()?vb(b,this.options,O(l,!1),!1):va()}};return R(a,{pluginName:"scroll",initializeByDefault:!0})});d.mount(Na,Ma);Q.Sortable=d})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(Q,
A,r,V,R,na,J,m,B,T,M,G,C,da,ta,W,H,p,n,w,t,Y,ea){function O(wa){const {actionsOpen:Ha,children:y}=wa;Ha&&(wa.actionsOpen=!1);y.forEach(d=>O(d))}const u=r.ofType(ta),P={exclusive:"exclusive",inherited:"inherited",independent:"independent"},pa={statusIndicators:!0};r=function(wa){function Ha(d,f){var h=wa.call(this,d,f)||this;h._handles=new R;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=na("esri-layerlist-new-ui");h.visibleItems=null;h.iconClass="esri-icon-layers";h.label=
void 0;h.listItemCreatedFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.operationalItems=null;h.selectionEnabled=!1;h.selectedItems=new u;h.view=null;h.viewModel=new da;h.visibleElements={...pa};h._onSortableSort=({to:q,from:z,item:E,newIndex:L})=>{z&&q&&(z===q?h._sortLayers(h._sortableMap.get(z.dataset.group)):h._moveLayerFromChildList({to:q,from:z,item:E,newIndex:L}))};h._sortableCanPut=(q,z,E)=>{var L,S;const ba=q.el.dataset.group;z=z.el.dataset.group;q=q.el["data-item"];
E=E["data-item"];E=null==E?void 0:null==(L=E.layer)?void 0:L.type;L=null==q?void 0:null==(S=q.layer)?void 0:S.type;return ba&&z&&E&&!("group"===L&&"group"===E)};h._sortableCanPull=(q,z,E)=>{var L;q=q.el.dataset.group;z=z.el.dataset.group;E=E["data-item"];E=null==E?void 0:null==(L=E.layer)?void 0:L.type;return q&&z&&!!E};h._onSortableEnd=({oldIndex:q,from:z,to:E,item:L})=>{z!==E&&z.insertBefore(L,z.children[q])};return h}Q._inheritsLoose(Ha,wa);var y=Ha.prototype;y.initialize=function(){const d=this.operationalItems;
this._setVisibleItems(d);this.own(J.on(this,"operationalItems","change",()=>this._itemsChanged(d)),J.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};y.destroy=function(){this._destroySortables();this._handles.destroy();this._handles=null};y.castVisibleElements=function(d){return{...pa,...d}};y.triggerAction=function(d,f){this.viewModel.triggerAction(d,f)};y.render=function(){var d;const {visibleItems:f,_newUI:h}=this,q=null==(d=this.viewModel)?void 0:d.state;return t.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",
{["esri-layer-list--new-ui"]:h,["esri-hidden"]:"loading"===q,["esri-disabled"]:"disabled"===q})},null!=f&&f.length?this.renderItems():this.renderNoItems())};y.renderNoItems=function(){return t.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};y.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return t.tsx("ul",{"aria-label":h.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(q=>this.renderItem(q,null)).toArray())};y.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return t.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h.options,title:h.options},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};y.renderActionsMenu=function(d,f,h,q){var {panel:z}=d;z=z&&z.visible?this.renderPanelButton(z):null;const E=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,q):null)||z||f?t.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
z,E,d):null};y.renderChildList=function(d,f){var h;const {selectionEnabled:q}=this,{visibilityMode:z,children:E}=d;var L=!!d.error;L=!!E.length&&!L;const S=!L&&q&&"group"===(null==(h=d.layer)?void 0:h.type),{exclusive:ba,inherited:ia}=P;h={["esri-layer-list__list--exclusive"]:z===ba,["esri-layer-list__list--inherited"]:z===ia,["esri-layer-list__list--independent"]:z!==ia&&z!==ba};return L||S?t.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,
afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",h),"aria-expanded":d.open?"true":"false",role:q?"listbox":z===ba?"radiogroup":"group",hidden:d.open||S?null:!0},null==E?void 0:E.map(va=>this.renderItem(va,d)).toArray()):null};y.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const {children:q}=d,z=!!d.error,E={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return q.length&&!z?t.tsx("span",{onclick:this._toggleChildrenClick,
onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",E),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},t.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),t.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),t.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl",
"esri-icon-left-triangle-arrow")})):null};y.renderError=function(d){return d.error?t.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},t.tsx("span",null,this.messages.layerError)):null};y.renderItemContent=function(d,f,h){var {id:q}=this,z=`${q}_${d.uid}`;q=`${z}_actions`;z=`${z}__list`;const {panel:E}=d,L=this._filterActions(d.actionsSections),S=this._countActions(L);return[t.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},
this.renderChildrenToggle(d,z),this.renderLabel(d,f,h),this.renderActionsMenu(d,L,S,q)),this.renderError(d),S?this.renderActionsSections(d,L,q):null,E&&E.open?E.render():null,this.renderChildList(d,z)]};y.renderItem=function(d,f){const {_newUI:h,id:q,selectionEnabled:z,selectedItems:E,visibleElements:L}=this;var {children:S}=d;const ba=`${`${q}_${d.uid}`}__title`;var ia=!!d.error;S={["esri-layer-list__item--has-children"]:!!S.length&&!ia,["esri-layer-list__item--error"]:!!ia,["esri-layer-list__item--updating"]:d.updating&&
!f&&L.statusIndicators,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:z};if(z){var va;ia={["data-layer-uid"]:null==(va=d.layer)?void 0:va.uid,["data-sort-filter"]:(!d.sortable).toString()};return t.tsx("li",{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":ba,onclick:this._toggleSelection,
onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":W.findSelectedItem(d,E)?"true":"false",role:"option",...ia},this.renderItemContent(d,f,ba))}return t.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":ba},this.renderItemContent(d,f,ba))};y.renderItemTitle=function(d,f){const {messages:h}=this,q=d.title||h.untitledLayer;
d=d.visibleAtCurrentScale?q:`${q} (${h.layerInvisibleAtScale})`;return t.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},q)};y.renderItemToggleIcon=function(d,f){const {_newUI:h}=this,{exclusive:q}=P;f=f&&f.visibilityMode;return t.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==q,["esri-layer-list__item-radio-icon"]:h&&f===q,["esri-icon-radio-checked"]:f===
q&&d.visible,["esri-icon-radio-unchecked"]:f===q&&!d.visible,["esri-icon-visible"]:f!==q&&d.visible,["esri-icon-non-visible"]:f!==q&&!d.visible}),"aria-hidden":"true"})};y.renderItemToggle=function(d,f,h){const {selectionEnabled:q,messages:z}=this,{exclusive:E}=P,L=f&&f.visibilityMode;return q?t.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":L,tabIndex:0,
title:d.visible?z.hideLayer:z.showLayer,"aria-checked":d.visible?"true":"false",role:L===E?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):t.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};y.renderItemError=function(d){return d.error?t.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null};y.renderLabel=function(d,f,h){const {selectionEnabled:q,_newUI:z,messages:E}=this,{inherited:L,
exclusive:S}=P,ba=null==f?void 0:f.visibilityMode;var ia=ba===S?"radio":"switch";f=[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h)];z&&f.reverse();ia=q?t.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},f):t.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":ba,tabIndex:0,"aria-checked":d.visible?"true":
"false",title:d.visible?E.hideLayer:E.showLayer,role:ia,"aria-labelledby":h},f);return ba===L||d.error?t.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemError(d),this.renderItemTitle(d,h)):ia};y.renderPanelButton=function(d){const {className:f,open:h,title:q,image:z}=d,E=z||f?f:"esri-icon-default-action",L=this._getIconImageStyles(d),S={["esri-layer-list__item-actions-menu-item--active"]:h},ba={["esri-layer-list__item-action-image"]:!!L["background-image"]};
E&&(ba[E]=!!E);return t.tsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",S),role:"button",tabindex:"0",title:q,"aria-label":q},t.tsx("span",{class:this.classes(ba),styles:L}))};y.renderActionsSections=function(d,f,h){f=f.toArray().map((q,z)=>t.tsx("ul",{key:`${d}-action-section-${z}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,q)));return t.tsx("div",
{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};y.renderActionSection=function(d,f){return(f&&f.toArray()).map(h=>this.renderAction({item:d,action:h}))};y.renderActionIcon=function(d){const {active:f,className:h}=d,q=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const z={["esri-layer-list__item-action-image"]:!f&&!!q["background-image"],["esri-icon-loading-indicator"]:f,
["esri-rotating"]:f};d&&!f&&(z[d]=!0);return t.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",z),styles:q})};y.renderActionTitle=function(d,f){return f?null:t.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};y.renderAction=function(d){const {item:f,action:h,singleAction:q}=d,{active:z,disabled:E,title:L}=h;d={["esri-layer-list__item-actions-menu-item"]:q&&"button"===h.type,["esri-layer-list__item-action"]:z||
!q&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!z&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!z&&"toggle"===h.type&&h.value,["esri-disabled-element"]:E};const S=[this.renderActionIcon(h),this.renderActionTitle(L,q)];return q?t.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L,"aria-label":L},S):t.tsx("li",{bind:this,"data-item":f,"data-action":h,
key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L,"aria-label":L},S)};y._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};y._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};y._moveLayerFromChildList=function({to:d,from:f,item:h,newIndex:q}){this.viewModel.moveListItem(h["data-item"],
f["data-item"],d["data-item"],q)};y._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();if(f)W.sortChildLayersToIds(f,d);else{var h,q;W.sortLayersToIds(null==(h=this.view)?void 0:null==(q=h.map)?void 0:q.layers,d)}}};y._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:q}=this,z=h.get(f);var E=d["data-item"];E=("root"===f?!0:E.childrenSortable&&W.canSortSublayers(E))&&q;z?z.option("disabled",!E):E&&(d=ea.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,
pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!E,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};y._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};y._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};y._setVisibleItems=function(d){this.visibleItems=null==d?void 0:
d.filter(f=>this.errorsVisible||!f.error)};y._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};y._focusListItem=function(d){var f;const {_focusSortUid:h}=this;d&&h&&(null==(f=d["data-item"].layer)?void 0:f.uid)===h&&(d.focus(),this._focusSortUid=null)};y._watchActionSectionChanges=function(d,f){const h="action-section"+f;this._handles.add(d.on("change",this.scheduleRender.bind(this)),h);d.forEach(q=>this._renderOnActionChanges(q,f))};y._renderOnActionChanges=
function(d,f){f="actions"+f;"toggle"===d.type?this._handles.add([J.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],f):"slider"===d.type?this._handles.add([J.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],f):this._handles.add([J.init(d,["className","image","id","title","visible"],()=>this.scheduleRender())],f)};y._renderOnItemChanges=function(d){const f=d.uid,h="items"+f;this._handles.add([J.init(d,
"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],h);d.children.forEach(q=>this._renderOnItemChanges(q));d.actionsSections.forEach(q=>this._watchActionSectionChanges(q,f))};y._itemsChanged=function(d){this._handles.removeAll();d.forEach(f=>this._renderOnItemChanges(f));
this._setVisibleItems(d);this.scheduleRender()};y._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};y._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};y._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};y._selectionKeydown=function(d){var f=V.eventKey(d);if(-1===
["ArrowDown","ArrowUp"].indexOf(f))this._toggleSelection(d);else{d.stopPropagation();var h=d.currentTarget,q=h["data-item"],{_sortableMap:z,selectedItems:E}=this;if(h=z.get(h.dataset.group)){var L=W.findSelectedItem(q,E),S=h.toArray();d=S.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===f){const Na=d+1;if(Na>=S.length)return;if(L){var ba;S.splice(Na,0,S.splice(d,1)[0]);h.sort(S);this._sortLayers(h);this._focusSortUid=null==(ba=q.layer)?void 0:ba.uid}else{var ia;this._focusSortUid=null==
(ia=q.layer)?void 0:ia.uid;this.scheduleRender()}}if("ArrowUp"===f&&(f=d-1,!(-1>=f)))if(L){var va;S.splice(f,0,S.splice(d,1)[0]);h.sort(S);this._sortLayers(h);this._focusSortUid=null==(va=q.layer)?void 0:va.uid}else{var Ma;this._focusSortUid=null==(Ma=q.layer)?void 0:Ma.uid;this.scheduleRender()}}}}};y._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:h}=f;(h=!h)&&this.operationalItems.forEach(q=>O(q));f.actionsOpen=h;d.stopPropagation()};y._triggerPanel=function(d){const f=
d.currentTarget["data-panel"];f&&(f.open=!f.open);d.stopPropagation()};y._triggerAction=function(d){var f=d.currentTarget;const h=f["data-action"];f=f["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,f);d.stopPropagation()};y._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");f=f["data-item"];h===P.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};y._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];
f.open=!f.open;d.stopPropagation()};y._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;d=d.currentTarget["data-item"];const q=W.findSelectedItem(d,h),{length:z}=h,E=q&&1===z;f?q?null==h.remove?void 0:h.remove(q):h.add(d):z&&!E?(h.removeAll(),h.add(d)):q?null==h.remove?void 0:h.remove(q):h.add(d)};return Ha}(C);A.__decorate([M.property()],r.prototype,"visibleItems",void 0);A.__decorate([M.property()],r.prototype,"iconClass",void 0);A.__decorate([M.property()],
r.prototype,"errorsVisible",void 0);A.__decorate([M.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],r.prototype,"label",void 0);A.__decorate([m.aliasOf("viewModel.listItemCreatedFunction")],r.prototype,"listItemCreatedFunction",void 0);A.__decorate([M.property(),p.messageBundle("esri/widgets/LayerList/t9n/LayerList")],r.prototype,"messages",void 0);A.__decorate([M.property(),p.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);A.__decorate([M.property()],r.prototype,
"multipleSelectionEnabled",void 0);A.__decorate([m.aliasOf("viewModel.operationalItems")],r.prototype,"operationalItems",void 0);A.__decorate([M.property()],r.prototype,"selectionEnabled",void 0);A.__decorate([M.property()],r.prototype,"selectedItems",void 0);A.__decorate([m.aliasOf("viewModel.view")],r.prototype,"view",void 0);A.__decorate([w.vmEvent("trigger-action"),M.property({type:da})],r.prototype,"viewModel",void 0);A.__decorate([M.property()],r.prototype,"visibleElements",void 0);A.__decorate([T.cast("visibleElements")],
r.prototype,"castVisibleElements",null);A.__decorate([m.aliasOf("viewModel.triggerAction")],r.prototype,"triggerAction",null);A.__decorate([H.accessibleHandler()],r.prototype,"_toggleActionsOpen",null);A.__decorate([H.accessibleHandler()],r.prototype,"_triggerPanel",null);A.__decorate([H.accessibleHandler()],r.prototype,"_triggerAction",null);A.__decorate([H.accessibleHandler()],r.prototype,"_toggleVisibility",null);A.__decorate([H.accessibleHandler()],r.prototype,"_toggleChildrenClick",null);A.__decorate([H.accessibleHandler()],
r.prototype,"_toggleSelection",null);return r=A.__decorate([G.subclass("esri.widgets.LayerList")],r)});