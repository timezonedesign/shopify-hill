// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/iteratorUtils":function(){define(["exports"],function(h){h.cache=function(k){const f=[];return function*(){yield*f;for(const n of k)f.push(n),yield n}};h.find=function(k,f){for(const n of k)if(null!=n&&f(n))return n};h.isIterable=function(k){return null!=k&&"function"===typeof k[Symbol.iterator]};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m){function d(e,b){return b?c[e].valueToClassName[b].split(" "):[]}const c={widthBreakpoint:{getValue(e){const b=e.viewSize[0];e=e.breakpoints;const p=this.values;return b<=e.xsmall?p.xsmall:b<=e.small?p.small:b<=e.medium?p.medium:b<=e.large?p.large:p.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const b=e.viewSize[1];e=e.breakpoints;const p=this.values;return b<=e.xsmall?p.xsmall:b<=e.small?p.small:b<=e.medium?p.medium:b<=e.large?p.large:p.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){e=e.viewSize;const b=this.values;return e[1]>=e[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},g={xsmall:544,small:768,medium:992,large:1200};h.BreakpointsOwner=
e=>{e=function(b){function p(...r){r=b.call(this,...r)||this;r._breakpointsHandles=new x;r.orientation=null;r.widthBreakpoint=null;r.heightBreakpoint=null;r.breakpoints=g;return r}k._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){this._breakpointsHandles.add(I.init(this,["breakpoints","size"],this._updateClassNames))};w.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};w._updateClassNames=function(){if(this.container){var r=
n.acquire(),t=n.acquire(),q=!1,B;for(B in c){const A=this[B],l=c[B].getValue({viewSize:this.size,breakpoints:this.breakpoints});A!==l&&(q=!0,this[B]=l,d(B,A).forEach(F=>t.push(F)),d(B,l).forEach(F=>r.push(F)))}q&&(this._applyClassNameChanges(r,t),n.release(r),n.release(t))}};w._applyClassNameChanges=function(r,t){const q=this.container;q&&(t.forEach(B=>q.classList.remove(B)),r.forEach(B=>q.classList.add(B)))};w._removeActiveClassNames=function(){const r=this.container;if(r)for(var t in c)d(t,this[t]).forEach(q=>
r.classList.remove(q))};k._createClass(p,[{key:"breakpoints",set:function(r){var t=this._get("breakpoints");if(r!==t){t=(t=r)&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large;if(!t){const q=JSON.stringify(g,null,2);console.warn("provided breakpoints are not valid, using defaults:"+q)}r=t?r:g;this._set("breakpoints",{...r})}}}]);return p}(e);f.__decorate([z.property()],e.prototype,"breakpoints",null);f.__decorate([z.property()],e.prototype,"orientation",void 0);f.__decorate([z.property()],e.prototype,
"widthBreakpoint",void 0);f.__decorate([z.property()],e.prototype,"heightBreakpoint",void 0);return e=f.__decorate([m.subclass("esri.views.BreakpointsOwner")],e)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c){function g(b){b&&(n.empty(b),b.parentNode&&b.parentNode.removeChild(b))}const e=[0,0];h.DOMContainer=b=>{b=function(p){function w(...t){var q=p.call(this,...t)||this;q._freqInfo={freq:16,time:750};q._overlayRenderTaskHandle=null;q.height=0;q.position=null;q.resizing=!1;q.root=null;q.surface=null;q.suspended=!0;q.ui=null;q.userContent=null;q.width=0;q.widthBreakpoint=null;q.handles.add([q.watch("cursor",B=>{const A=q.surface;A&&A.setAttribute("data-cursor",B)}),
q.watch("interacting",B=>{const A=q.surface;A&&A.setAttribute("data-interacting",B.toString())})]);return q}k._inheritsLoose(w,p);var r=w.prototype;r.initialize=function(){this.handles.add(this.watch("ui",(t,q)=>this._handleUIChange(t,q)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};r.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};r.blur=function(){this.surface&&this.surface.blur()};r.focus=function(){this.surface&&this.surface.focus()};r.pageToContainer=function(t,q,B){const A=this.position;t-=A[0];q-=A[1];B?(B[0]=t,B[1]=q):B=[t,q];return B};r.containerToPage=function(t,q,B){const A=this.position;t+=A[0];q+=A[1];B?(B[0]=t,B[1]=q):B=[t,q];return B};r._handleUIChange=function(t,q){q&&(this.handles.remove("ui"),q.destroy());t&&this._wireUI(t);this._set("ui",t)};r._wireUI=function(t){this.handles.remove("ui");
t&&(t.view=this,this.handles.add([I.init(this,"root",q=>{if(q){{const B=document.createElement("div");q.appendChild(B);q=B}}else q=null;t.container=q}),I.init(this,"popup",(q,B)=>{B&&t.remove(B,"popup");q&&(q.view=t.view,t.add(q,{key:"popup",position:"manual"}))})],"ui"))};r._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};r._startMeasuring=function(){const t=this._freqInfo;t.freq=16;t.time=750;this.handles.add([(()=>{const q=()=>{t.freq=
16;t.time=750};window.addEventListener("resize",q);return{remove(){window.removeEventListener("resize",q)}}})(),x.addFrameTask({prepare:q=>{const B=this._measure(),A=this._freqInfo;A.time+=q.deltaTime;B&&(A.freq=16,this._get("resizing")||this._set("resizing",!0));A.time<A.freq||(A.time=0,this._position()||B?A.freq=16:A.freq=Math.min(750,2*A.freq),!B&&512<=A.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};r._measure=function(){var t=this.container;
const q=t?t.clientWidth:0;t=t?t.clientHeight:0;if(0===q||0===t)return this.suspended||this._set("suspended",!0),!1;const B=this.width,A=this.height;if(q===B&&t===A)return this.suspended&&this._set("suspended",!1),!1;this._set("width",q);this._set("height",t);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:B,oldHeight:A,width:q,height:t});return!0};r._position=function(){var t=this.container;const q=this.position;{const B=(t.ownerDocument||window.document).defaultView;t=t.getBoundingClientRect();
e[0]=t.left+B.pageXOffset;e[1]=t.top+B.pageYOffset}return q&&e[0]===q[0]&&e[1]===q[1]?!1:(this._set("position",[e[0],e[1]]),!0)};r.forceDOMReadyCycle=function(){};k._createClass(w,[{key:"container",set:function(t){var q=this._get("container");if(q!==t)if(this.handles.remove("dom-size"),this._stopMeasuring(),q&&(q.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
g(this.root),this._set("root",null),n.reparent(this.userContent,q),g(this.userContent),this._set("userContent",null)),t){t.classList.add("esri-view");q=document.createElement("div");q.className="esri-view-user-storage";n.reparent(t,q);t.appendChild(q);this._set("userContent",q);q=document.createElement("div");q.className="esri-view-root";t.insertBefore(q,t.firstChild);this._set("root",q);const B=document.createElement("div");B.className="esri-view-surface";B.setAttribute("role","application");B.tabIndex=
0;q.appendChild(B);this._set("surface",B);const A=new d;q.appendChild(A.surface);this._set("overlay",A);A.watch("needsRender",l=>{l&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=x.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(I.init(this,"size",l=>{const [F,K]=l;F>=document.body.clientWidth||K>=document.body.clientHeight?B.classList.add("esri-view-surface--inset-outline"):
B.classList.remove("esri-view-surface--inset-outline")}),"dom-size");this._set("container",t);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}},{key:"popup",get:function(){return this._get("popup")||new c({view:this})},set:function(t){const q=this._get("popup");q&&
q!==t&&q.destroy();this._set("popup",t)}},{key:"size",get:function(){return[this.width,this.height]}}]);return w}(b);f.__decorate([z.property({value:null,cast:p=>n.byId(p)})],b.prototype,"container",null);f.__decorate([z.property({readOnly:!0})],b.prototype,"focused",null);f.__decorate([z.property({readOnly:!0})],b.prototype,"height",void 0);f.__decorate([z.property({type:c})],b.prototype,"popup",null);f.__decorate([z.property({type:d})],b.prototype,"overlay",void 0);f.__decorate([z.property({readOnly:!0})],
b.prototype,"position",void 0);f.__decorate([z.property({readOnly:!0})],b.prototype,"resizing",void 0);f.__decorate([z.property({readOnly:!0})],b.prototype,"root",void 0);f.__decorate([z.property({value:null,readOnly:!0})],b.prototype,"size",null);f.__decorate([z.property({readOnly:!0})],b.prototype,"surface",void 0);f.__decorate([z.property({readOnly:!0})],b.prototype,"suspended",void 0);f.__decorate([z.property()],b.prototype,"ui",void 0);f.__decorate([z.property({readOnly:!0})],b.prototype,"userContent",
void 0);f.__decorate([z.property({readOnly:!0})],b.prototype,"width",void 0);f.__decorate([z.property()],b.prototype,"widthBreakpoint",void 0);return b=f.__decorate([m.subclass("esri.views.DOMContainer")],b)};h.isDOMContainer=function(b){return b&&"focus"in b};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){f=function(c){function g(){var b=c.apply(this,arguments)||this;b.items=new n;b._watchUpdatingTracking=new d.WatchUpdatingTracking;b._callbacks=new Map;b._projector=m.createProjector();b._hiddenProjector=m.createProjector();return b}h._inheritsLoose(g,c);var e=g.prototype;e.initialize=function(){const b=document.createElement("div");b.className="esri-overlay-surface";this._set("surface",b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");b.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,p=>{for(const w of p.added){const r=()=>w.render();this._callbacks.set(w,r);this._projector.append(this.surface,r)}for(const w of p.removed)p=this._projector.detach(this._callbacks.get(w)),this.surface.removeChild(p.domNode),this._callbacks.delete(w)})};e.addItem=function(b){this.items.add(b)};e.removeItem=function(b){this.items.remove(b)};e.destroy=function(){this.items.removeAll();
this._callbacks.forEach(b=>this._projector.detach(b));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};e.render=function(){this._projector.renderNow()};e.computeBoundingRect=function(b){const p=this._hiddenSurface,w=this._hiddenProjector;let r=null;const t=()=>r=b.render();w.append(p,t);w.renderNow();const q={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const B=r.domNode.getBoundingClientRect();q.left=B.left;q.top=B.top;q.right=B.right;q.bottom=B.bottom}for(w.detach(t);p.firstChild;)p.removeChild(p.firstChild);
return q};e.overlaps=function(b,p){b=this.computeBoundingRect(b);p=this.computeBoundingRect(p);return Math.max(b.left,p.left)<=Math.min(b.right,p.right)&&Math.max(b.top,p.top)<=Math.min(b.bottom,p.bottom)};e.renderCanvas=function(b){if(this.items.some(w=>w.visible)){var p=b.getContext("2d");p.save();p.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(w=>{p.save();w.renderCanvas(p);p.restore()});p.restore()}};h._createClass(g,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(b=>b.visible)}}]);return g}(f);k.__decorate([x.property({readOnly:!0})],f.prototype,"surface",void 0);k.__decorate([x.property({readOnly:!0})],f.prototype,"items",void 0);k.__decorate([x.property({readOnly:!0})],f.prototype,"needsRender",null);k.__decorate([x.property({readOnly:!0})],f.prototype,"_watchUpdatingTracking",void 0);k.__decorate([x.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],f.prototype,"updating",void 0);
return f=k.__decorate([E.subclass("esri.views.overlay.ViewOverlay")],f)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F,K,R,W){function V(ba,J){return void 0===J?`${"esri-popup"}__${ba}`:`${"esri-popup"}__${ba}-${J}`}const U={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},M=z.getLogger("esri.widgets.Popup"),P={closeButton:!0,featureNavigation:!0};f=function(ba){function J(v,D){var C=ba.call(this,v,D)||this;C._blurClose=!1;C._blurContainer=!1;C._containerNode=null;C._mainContainerNode=null;C._featureMenuNode=null;C._actionsMenuNode=null;C._focusClose=
!1;C._focusContainer=!1;C._focusDockButton=!1;C._focusFeatureMenuButton=!1;C._focusActionsMenuButton=!1;C._focusFirstFeature=!1;C._focusFirstAction=!1;C._handles=new I;C._pointerOffsetInPx=16;C._spinner=null;C._feature=null;C._featureMenuIntersectionObserverCallback=([O])=>{null!=O&&O.isIntersecting&&C.viewModel.featurePage++};C._featureMenuIntersectionObserver=new IntersectionObserver(C._featureMenuIntersectionObserverCallback,{root:window.document});C._displaySpinnerThrottled=E.throttle(()=>C._displaySpinner(),
0);C.actions=null;C.alignment="auto";C.autoCloseEnabled=null;C.autoOpenEnabled=null;C.defaultPopupTemplateEnabled=null;C.content=null;C.collapsed=!1;C.collapseEnabled=!0;C.dockEnabled=!1;C.featureCount=null;C.featureMenuOpen=!1;C.features=null;C.goToOverride=null;C.headingLevel=2;C.highlightEnabled=null;C.location=null;C.label=void 0;C.maxInlineActions=3;C.messages=null;C.messagesCommon=null;C.promises=null;C.selectedFeature=null;C.selectedFeatureIndex=null;C.spinnerEnabled=!0;C.title=null;C.updateLocationEnabled=
null;C.view=null;C.viewModel=new q;C.visible=null;C.visibleElements={...P};C._addSelectedFeatureIndexHandle();C.own([u.watch(h._assertThisInitialized(C),"viewModel.screenLocation",()=>C._positionContainer()),u.watch(h._assertThisInitialized(C),["viewModel.active","dockEnabled"],()=>C._toggleScreenLocationEnabled()),u.watch(h._assertThisInitialized(C),"viewModel.screenLocation",(O,T)=>{!!O!==!!T&&C.reposition()}),u.watch(h._assertThisInitialized(C),["viewModel.view.padding","viewModel.view.size","viewModel.active",
"viewModel.location","alignment"],()=>C.reposition()),u.watch(h._assertThisInitialized(C),"spinnerEnabled",O=>C._spinnerEnabledChange(O)),u.watch(h._assertThisInitialized(C),"viewModel.view.size",(O,T)=>C._updateDockEnabledForViewSize(O,T)),u.watch(h._assertThisInitialized(C),"viewModel.view",(O,T)=>C._viewChange(O,T)),u.watch(h._assertThisInitialized(C),"viewModel.view.ready",(O,T)=>C._viewReadyChange(O,T)),u.watch(h._assertThisInitialized(C),["viewModel.waitingForResult","viewModel.location"],()=>
{C._hideSpinner();C._displaySpinnerThrottled()}),u.watch(h._assertThisInitialized(C),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>C._setTitleFromFeatureWidget()),u.watch(h._assertThisInitialized(C),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>C._setContentFromFeatureWidget()),u.whenFalse(h._assertThisInitialized(C),"collapsed",()=>{var O,T;"xsmall"===(null==(O=C.viewModel)?void 0:null==(T=O.view)?void 0:T.widthBreakpoint)&&
C.viewModel.active&&C.collapseEnabled&&C.viewModel.centerAtLocation()}),u.on(h._assertThisInitialized(C),"viewModel.allActions","change",()=>C._watchActions()),u.init(h._assertThisInitialized(C),"viewModel.allActions",()=>C._watchActions()),u.watch(h._assertThisInitialized(C),"viewModel.featureViewModels",()=>C._featureMenuViewportScrollTop())]);return C}h._inheritsLoose(J,ba);var H=J.prototype;H.destroy=function(){var v,D;this._destroySelectedFeatureWidget();this._destroySpinner();null==(v=this._handles)?
void 0:v.destroy();this._unobserveFeatureMenuObserver();null==(D=this._featureMenuIntersectionObserver)?void 0:D.disconnect();this._handles=null};H.castVisibleElements=function(v){return{...P,...v}};H.blur=function(){const {active:v}=this.viewModel;v||M.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};H.clear=function(){this.viewModel.clear()};H.close=function(){this.visible=!1};H.fetchFeatures=
function(v,D){return this.viewModel.fetchFeatures(v,D)};H.focus=function(){const {active:v}=this.viewModel;v||M.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};H.next=function(){return this.viewModel.next()};H.open=function(v){var D,C;this._handles.remove("selected-index");const O={collapsed:v?!!v.collapsed:!1,actionsMenuOpen:v?!!v.actionsMenuOpen:!1,featureMenuOpen:v?!!v.featureMenuOpen:!1};
"xsmall"===(null==(D=this.viewModel)?void 0:null==(C=D.view)?void 0:C.widthBreakpoint)&&(O.collapsed=!0);this.set(O);this.viewModel.open(v);this._addSelectedFeatureIndexHandle()};H.previous=function(){return this.viewModel.previous()};H.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};H.triggerAction=function(v){this.viewModel.triggerAction(v)};H.render=function(){var v,D,C,O;const {actionsMenuOpen:T,dockEnabled:Q,featureMenuVisible:Y,dividedActions:ha,
currentAlignment:da,currentDockPosition:ka}=this,{active:qa}=this.viewModel;var {menuActions:pa}=ha;pa=qa&&1<pa.length&&T;const ea=null==(v=this.selectedFeature)?void 0:null==(D=v.layer)?void 0:D.title;v=null==(C=this.selectedFeature)?void 0:null==(O=C.layer)?void 0:O.id;return K.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===da,["esri-popup--aligned-bottom-center"]:"bottom-center"===da,["esri-popup--aligned-top-left"]:"top-left"===da,["esri-popup--aligned-bottom-left"]:"bottom-left"===
da,["esri-popup--aligned-top-right"]:"top-right"===da,["esri-popup--aligned-bottom-right"]:"bottom-right"===da,["esri-popup--is-docked"]:qa&&Q,["esri-popup--shadow"]:qa&&!Q,["esri-popup--is-docked-top-left"]:"top-left"===ka,["esri-popup--is-docked-top-center"]:"top-center"===ka,["esri-popup--is-docked-top-right"]:"top-right"===ka,["esri-popup--is-docked-bottom-left"]:"bottom-left"===ka,["esri-popup--is-docked-bottom-center"]:"bottom-center"===ka,["esri-popup--is-docked-bottom-right"]:"bottom-right"===
ka,["esri-popup--feature-menu-open"]:Y,["esri-popup--actions-menu-open"]:pa}),role:"presentation","data-layer-title":ea,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},qa?[this.renderMainContainer(),this.renderPointer()]:null)};H.renderLoadingIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};H.renderNavigationLoading=function(){const {messagesCommon:v}=
this;return this.viewModel.pendingPromisesCount?K.tsx("div",{key:V("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null};H.renderPreviousIcon=function(){const v=R.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:v,["esri-popup__pagination-previous-icon--rtl"]:v,["esri-icon-left-triangle-arrow"]:!v,["esri-popup__pagination-previous-icon"]:!v})})};
H.renderPreviousButton=function(){const {messages:v}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())};H.renderNextIcon=function(){const v=R.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:v,["esri-popup__pagination-next-icon--rtl"]:v,
["esri-icon-right-triangle-arrow"]:!v,["esri-popup__pagination-next-icon"]:!v})})};H.renderNextButton=function(){const {messages:v}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":v.next,title:v.next},this.renderNextIcon())};H.renderFeatureMenuButton=function(){const {featureMenuOpen:v,featureMenuId:D,messagesCommon:C}=this,{featureCount:O,selectedFeatureIndex:T}=
this.viewModel;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":D,"aria-expanded":v.toString(),"aria-label":C.menu,title:C.menu},this._getPageText(O,T))};H.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};H.renderDockIcon=function(){const {dockEnabled:v}=this,D=this._wouldDockTo();return K.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:v,["esri-popup__icon--dock-icon"]:!v,["esri-icon-dock-right"]:!v&&("top-right"===D||"bottom-right"===D),["esri-icon-dock-left"]:!v&&("top-left"===D||"bottom-left"===D),["esri-icon-maximize"]:!v&&"top-center"===D,["esri-icon-dock-bottom"]:!v&&
"bottom-center"===D},"esri-popup__icon")})};H.renderDockButton=function(){var v,D,C;const {dockEnabled:O,messages:T}=this,Q=null==(v=this.viewModel)?void 0:null==(D=v.view)?void 0:D.widthBreakpoint;v=O?T.undock:T.dock;return"xsmall"!==Q&&null!=(C=this.dockOptions)&&C.buttonEnabled?K.tsx("div",{role:"button","aria-label":v,title:v,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button",
"esri-popup__button--dock")},this.renderDockIcon()):null};H.renderTitle=function(){const {title:v}=this.viewModel,{titleId:D,collapsible:C,contentCollapsed:O,messagesCommon:T}=this;var Q={["esri-popup__header-container--button"]:C};const Y=K.tsx(B.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:v});Q=C?K.tsx("button",{key:`${v}--collapsible`,id:D,title:O?T.expand:T.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",
Q),"aria-expanded":O?"false":"true",onclick:this._toggleCollapsed},Y):K.tsx("div",{key:v,id:D,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",Q)},Y);return v?Q:null};H.renderCloseIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};H.renderCloseButton=function(){const {visibleElements:v,messagesCommon:D}=this;return v.closeButton?K.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":D.close,title:D.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};H.renderHeader=function(){return K.tsx("header",{class:"esri-popup__header"},this.renderTitle(),K.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};H.renderContentContainer=function(){const {contentId:v,hasContent:D,contentCollapsed:C}=
this,{content:O}=this.viewModel;return D&&!C?K.tsx("article",{key:O,enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:"esri-popup__content"},this.renderContent()):null};H.renderActionsMenuButton=function(){const {actionsMenuId:v,actionsMenuButtonId:D,actionsMenuOpen:C,dividedActions:O,messagesCommon:T}=this,Q=C?T.close:T.open,{menuActions:Y}=O;return Y.length?K.tsx("div",{key:V("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",
id:D,"aria-haspopup":"true","aria-controls":C?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":Q,title:Q},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};H.renderMenuActions=function(){const {actionsMenuId:v,actionsMenuButtonId:D,actionsMenuOpen:C,dividedActions:O}=this,{menuActions:T}=O;return T.length&&C?K.tsx("ul",{id:v,
role:"menu","aria-labelledby":D,key:V("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},T.toArray().map(Q=>this.renderAction({action:Q,type:"menu-item"}))):null};H.renderInlineActions=function(){const {inlineActions:v}=this.dividedActions;return!!v.length&&v.toArray().map(D=>this.renderAction({action:D,type:"inline"}))};H.renderInlineActionsContainer=function(){const {inlineActions:v,
menuActions:D}=this.dividedActions,C=!!v.length,O=!!D.length;return C||O?K.tsx("div",{key:"inline-actions-container","data-inline-actions":C.toString(),"data-menu-actions":O.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};H.renderNavigation=function(){return this.featureNavigationVisible?K.tsx("section",{key:V("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):
null};H.renderFooter=function(){const {featureNavigationVisible:v,dividedActions:D}=this,{inlineActions:C,menuActions:O}=D,T=!!C.length,Q={["esri-popup__footer--has-pagination"]:v,["esri-popup__footer--has-actions"]:T,["esri-popup__footer--has-actions-menu"]:!!O.length};return v||T?K.tsx("div",{key:V("feature-buttons"),class:this.classes("esri-popup__footer",Q)},this.renderInlineActionsContainer(),this.renderNavigation()):null};H.renderFeatureMenuContainer=function(){var {messages:v}=this;const {featureViewModels:D,
isLoadingFeature:C}=this.viewModel;v=W.substitute(v.selectedFeatures,{total:D.length});return K.tsx("section",{key:V("menu"),class:"esri-popup__feature-menu"},K.tsx("strong",{class:"esri-popup__feature-menu-header"},v),K.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:R.storeNode},this.renderFeatureMenu(),K.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
C?K.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};H.renderPointer=function(){return this.dockEnabled?null:K.tsx("div",{key:V("pointer"),class:"esri-popup__pointer",role:"presentation"},K.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};H.renderMainContainer=function(){const {dockEnabled:v,currentAlignment:D,currentDockPosition:C,titleId:O,contentId:T,collapsible:Q,hasContent:Y,contentCollapsed:ha,visibleElements:da}=this,
{title:ka}=this.viewModel,qa="bottom-left"===D||"bottom-center"===D||"bottom-right"===D||"top-left"===C||"top-center"===C||"top-right"===C,pa="top-left"===D||"top-center"===D||"top-right"===D||"bottom-left"===C||"bottom-center"===C||"bottom-right"===C;return K.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:v,["esri-popup--is-collapsible"]:Q,["esri-popup--is-collapsed"]:ha}),tabIndex:da.closeButton?null:-1,role:"dialog","aria-labelledby":ka?O:"","aria-describedby":Y&&
!ha?T:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},qa?this.renderFooter():null,qa?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),pa?this.renderFooter():null,pa?this.renderFeatureMenuContainer():null)};H.renderContent=function(){var v;const D=null==(v=this.viewModel)?void 0:v.content;return D?"string"===typeof D?K.tsx("div",{key:D,innerHTML:D}):this.renderNodeContent(D):null};
H.renderActionText=function(v){return K.tsx("span",{key:"text",class:"esri-popup__action-text"},v)};H.renderActionIcon=function(v){const D=this._getActionClass(v),C=this._getActionImage(v),O={["esri-icon-loading-indicator"]:v.active,["esri-rotating"]:v.active,["esri-popup__icon"]:!!D,["esri-popup__action-image"]:!v.active&&!!C};D&&(O[D]=!v.active);return K.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",O),styles:this._getIconStyles(C)})};H.renderAction=function(v){const {action:D,
type:C}=v;v=this._getActionTitle(D);const O={["esri-popup__action"]:"toggle"!==D.type,["esri-popup__action-toggle"]:"toggle"===D.type,["esri-popup__action-toggle--on"]:"toggle"===D.type&&D.value,["esri-popup__button--disabled"]:D.disabled},T=[this.renderActionIcon(D),this.renderActionText(v)];v="menu-item"===C?K.tsx("li",{key:D.uid,role:"menuitem",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",O),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":D.uid,
onclick:this._triggerAction,onkeydown:this._triggerAction},T):K.tsx("div",{key:D.uid,role:"button",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",O),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":D.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},T);return D.visible?v:null};H.renderFeatureMenuItem=function(v,D){const {messages:C,messagesCommon:O}=this,{selectedFeatureIndex:T,selectedFeatureViewModel:Q}=this.viewModel;var Y=v===Q;const ha=
{["esri-popup__feature-menu-item--selected"]:Y};Y=Y?K.tsx("span",{key:V(`feature-menu-selected-feature-${T}`),title:C.selectedFeature,"aria-label":C.selectedFeature,class:"esri-icon-check-mark"}):null;v=K.tsx("span",{innerHTML:v.title||O.untitled});return K.tsx("li",{role:"menuitem",tabIndex:-1,key:V(`feature-menu-feature-${T}`),class:this.classes(ha,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":D,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},
K.tsx("span",{class:"esri-popup__feature-menu-title"},v,Y))};H.renderFeatureMenu=function(){const {featureMenuId:v}=this,{featureViewModels:D}=this.viewModel;return 1<D.length?K.tsx("ol",{class:"esri-popup__feature-menu-list",id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},D.filter(C=>!!C.graphic).map((C,O)=>this.renderFeatureMenuItem(C,O))):null};H._getActionTitle=function(v){const {messages:D,selectedFeature:C,
messagesCommon:O}=this,{id:T}=v,Q=null==C?void 0:C.attributes;return(v="zoom-to-feature"===T?W.substitute(v.title,{messages:D}):"remove-selected-feature"===T?W.substitute(v.title,{messages:O}):"zoom-to-clustered-features"===T?W.substitute(v.title,{messages:D}):"browse-clustered-features"===T?W.substitute(v.title,{messages:D}):v.title)&&Q?W.substitute(v,Q):v};H._getActionClass=function(v){var {selectedFeature:D}=this;D=null==D?void 0:D.attributes;const {className:C,image:O}=v;return(v=O||C?C:"esri-icon-default-action")&&
D?W.substitute(v,D):v};H._getActionImage=function(v){var {selectedFeature:D}=this;D=null==D?void 0:D.attributes;({image:v}=v);return v&&D?W.substitute(v,D):v};H._createFeatureUpdatedAnimation=function(){return R.cssTransition("enter","esri-popup--feature-updated")};H._getInlineActionCount=function(){const {maxInlineActions:v,featureNavigationVisible:D}=this;if("number"!==typeof v)return null;const C=Math.round(v);return Math.max(D?C-1:C,0)};H._watchActions=function(){const {allActions:v}=this.viewModel;
this.notifyChange("dividedActions");this._handles.remove("actions");v&&v.forEach(D=>{this._handles.add(u.watch(D,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};H._divideActions=function(){var {allActions:v}=this.viewModel;v=v.filter(T=>T.visible);const D=this._getInlineActionCount(),C=null===D,O=0===D;return{inlineActions:C?v.slice(0):O?new n:v.slice(0,D),menuActions:C?new n:O?v.slice(0):v.slice(D)}};H._featureMenuOpenChanged=function(v){v?
this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};H._actionsMenuOpenChanged=function(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};H._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:v,messagesCommon:D}=this;if(v){var C,O;this.viewModel.title="error"===(null==(C=v.viewModel)?void 0:C.state)?D.errorMessage:(null==(O=v.viewModel)?void 0:O.title)||""}};H._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:v}=this;v&&(this.viewModel.content=
v)};H._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};H._featureMenuIntersectionObserverCreated=function(v){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(v);this._featureMenuIntersectionObserverNode=v};H._handleFeatureMenuKeyup=function(v){"Escape"===x.eventKey(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=
!1,this.scheduleRender())};H._handleActionMenuKeyup=function(v){"Escape"===x.eventKey(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};H._handleFeatureMenuItemKeyup=function(v){const D=x.eventKey(v);var {_featureMenuNode:C}=this;const O=v.currentTarget["data-feature-index"];if(C){C=C.querySelectorAll("li");var T=C.length;"ArrowUp"===D?(v.stopPropagation(),C[(O-1+T)%T].focus()):"ArrowDown"===D?(v.stopPropagation(),C[(O+1+T)%T].focus()):"Home"===
D?(v.stopPropagation(),C[0].focus()):"End"===D&&(v.stopPropagation(),C[C.length-1].focus())}};H._handleActionMenuItemKeyup=function(v){const D=x.eventKey(v);var {_actionsMenuNode:C}=this;const O=v.currentTarget.dataset.actionUid;var {menuActions:T}=this.dividedActions;T=T.findIndex(Y=>Y.uid===O);if(C){C=C.querySelectorAll("li");var Q=C.length;"ArrowUp"===D?(v.stopPropagation(),C[(T-1+Q)%Q].focus()):"ArrowDown"===D?(v.stopPropagation(),C[(T+1+Q)%Q].focus()):"Home"===D?(v.stopPropagation(),C[0].focus()):
"End"===D&&(v.stopPropagation(),C[C.length-1].focus())}};H._handleMainKeyup=function(v){const D=x.eventKey(v);"ArrowLeft"===D&&(v.stopPropagation(),this.previous());"ArrowRight"===D&&(v.stopPropagation(),this.next())};H._spinnerEnabledChange=function(v){this._destroySpinner();v&&(v=this.get("viewModel.view"),this._createSpinner(v))};H._hideSpinner=function(){const {_spinner:v}=this;v&&(v.location=null,v.hide())};H._displaySpinner=function(){const {_spinner:v}=this;if(v){var {location:D,waitingForResult:C}=
this.viewModel;C?v.show({location:D}):v.hide()}};H._getIconStyles=function(v){return{"background-image":v?`url(${v})`:""}};H._addSelectedFeatureIndexHandle=function(){const v=u.watch(this,"viewModel.selectedFeatureIndex",(D,C)=>this._selectedFeatureIndexUpdated(D,C));this._handles.add(v,"selected-index")};H._selectedFeatureIndexUpdated=function(v,D){const {featureCount:C}=this;C&&v!==D&&-1!==v&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};H._destroySelectedFeatureWidget=function(){const {_feature:v}=
this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy());this._feature=null};H._isScreenLocationWithinView=function(v,D){return-1<v.x&&-1<v.y&&v.x<=D.width&&v.y<=D.height};H._isOutsideView=function(v){const {popupHeight:D,popupWidth:C,screenLocation:O,side:T,view:Q}=v;if(isNaN(C)||isNaN(D)||!Q||!O)return!1;v=Q.padding;return"right"===T&&O.x+C/2>Q.width-v.right||"left"===T&&O.x-C/2<v.left||"top"===T&&O.y-D<v.top||"bottom"===T&&O.y+D>Q.height-v.bottom?!0:!1};H._calculateAutoAlignment=function(v){if("auto"!==
v)return v;const {_pointerOffsetInPx:D,_containerNode:C,_mainContainerNode:O,viewModel:T}=this,{screenLocation:Q,view:Y}=T;if(G.isNone(Q)||!Y||!C)return"top-center";if(!this._isScreenLocationWithinView(Q,Y))return this._get("currentAlignment")||"top-center";var ha=(v=O?window.getComputedStyle(O,null):null)?parseInt(v.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,da=v?parseInt(v.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ka,width:qa}=C.getBoundingClientRect();
v=qa+D;const pa=Math.max(ka,ha,da)+D;ha=this._isOutsideView({popupHeight:pa,popupWidth:v,screenLocation:Q,side:"right",view:Y});da=this._isOutsideView({popupHeight:pa,popupWidth:v,screenLocation:Q,side:"left",view:Y});const ea=this._isOutsideView({popupHeight:pa,popupWidth:v,screenLocation:Q,side:"top",view:Y});v=this._isOutsideView({popupHeight:pa,popupWidth:v,screenLocation:Q,side:"bottom",view:Y});return da?ea?"bottom-right":"top-right":ha?ea?"bottom-left":"top-left":ea?v?"top-center":"bottom-center":
"top-center"};H._callCurrentAlignment=function(v){return"function"===typeof v?v.call(this):v};H._getCurrentAlignment=function(){const {alignment:v,dockEnabled:D}=this;return D||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))};H._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};H._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};H._calculatePositionResult=
function(v){const D=["left","right"];R.isRTL(this.container)&&D.reverse();return v.replace(/leading/gi,D[0]).replace(/trailing/gi,D[1])};H._callDockPosition=function(v){return"function"===typeof v?v.call(this):v};H._getDockPosition=function(){var v;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(v=this.dockOptions)?void 0:v.position)))};H._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};
H._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};H._calculateAutoDockPosition=function(v){var D;if("auto"!==v)return v;v=null==(D=this.viewModel)?void 0:D.view;D=R.isRTL(this.container)?"top-left":"top-right";if(!v)return D;var C=v.padding||{left:0,right:0,top:0,bottom:0};C=v.width-C.left-C.right;({breakpoints:v}=v);return v&&C<=v.xsmall?"bottom-center":D};H._positionContainer=function(v=this._containerNode){v&&(this._containerNode=v);if(v){var {screenLocation:D}=this.viewModel,
{width:C}=v.getBoundingClientRect();if(D=this._calculatePositionStyle(D,C))v.style.top=D.top,v.style.left=D.left,v.style.bottom=D.bottom,v.style.right=D.right}};H._calculateFullWidth=function(v){const {currentAlignment:D,_pointerOffsetInPx:C}=this;return"top-left"===D||"bottom-left"===D||"top-right"===D||"bottom-right"===D?v+C:v};H._calculateAlignmentPosition=function(v,D,C,O){const {currentAlignment:T,_pointerOffsetInPx:Q}=this;O/=2;const Y=C.height-D;C=C.width-v;const {padding:ha}=this.view;if("bottom-center"===
T)return{top:D+Q-ha.top,left:v-O-ha.left};if("top-left"===T)return{bottom:Y+Q-ha.bottom,right:C+Q-ha.right};if("bottom-left"===T)return{top:D+Q-ha.top,right:C+Q-ha.right};if("top-right"===T)return{bottom:Y+Q-ha.bottom,left:v+Q-ha.left};if("bottom-right"===T)return{top:D+Q-ha.top,left:v+Q-ha.left};if("top-center"===T)return{bottom:Y+Q-ha.bottom,left:v-O-ha.left}};H._calculatePositionStyle=function(v,D){const {dockEnabled:C,view:O}=this;if(O){if(C)return{left:"",top:"",right:"",bottom:""};if(!G.isNone(v)&&
D&&(D=this._calculateFullWidth(D),v=this._calculateAlignmentPosition(v.x,v.y,O,D)))return{top:void 0!==v.top?`${v.top}px`:"auto",left:void 0!==v.left?`${v.left}px`:"auto",bottom:void 0!==v.bottom?`${v.bottom}px`:"auto",right:void 0!==v.right?`${v.right}px`:"auto"}}};H._viewChange=function(v,D){v&&D&&(this.close(),this.clear())};H._viewReadyChange=function(v,D){v?(v=this.get("viewModel.view"),this._wireUpView(v)):D&&(this.close(),this.clear())};H._wireUpView=function(v){this._destroySpinner();if(v){var {spinnerEnabled:D}=
this;D&&this._createSpinner(v);this._setDockEnabledForViewSize(this.dockOptions)}};H._dockingThresholdCrossed=function(v,D,C){const [O,T]=v,[Q,Y]=D,{width:ha,height:da}=C;return O<=ha&&Q>ha||O>ha&&Q<=ha||T<=da&&Y>da||T>da&&Y<=da};H._updateDockEnabledForViewSize=function(v,D){if(v&&D){var C=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},O=C.left+C.right,T=C.top+C.bottom;C=[];var Q=[];C[0]=v[0]-O;C[1]=v[1]-T;Q[0]=D[0]-O;Q[1]=D[1]-T;({dockOptions:v}=this);this._dockingThresholdCrossed(C,
Q,v.breakpoint)&&this._setDockEnabledForViewSize(v);this._setCurrentDockPosition()}};H._focusDockButtonNode=function(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())};H._closeButtonNodeUpdated=function(v){this._focusClose?(this._focusClose=!1,v.focus()):this._blurClose&&(this._blurClose=!1,v.blur())};H._mainContainerNodeUpdated=function(v){this._mainContainerNode=v;this._focusContainer?(this._focusContainer=!1,v.focus()):this._blurContainer&&(this._blurContainer=!1,v.blur())};H._featureMenuNodeUpdated=
function(v){(this._featureMenuNode=v)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};H._actionsMenuNodeUpdated=function(v){(this._actionsMenuNode=v)&&this._focusFirstAction&&(this._focusFirstAction=!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};H._focusFeatureMenuButtonNode=function(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())};H._focusActionsMenuButtonNode=function(v){this._focusActionsMenuButton&&
(this._focusActionsMenuButton=!1,v.focus())};H._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};H._toggleScreenLocationEnabled=function(){const {dockEnabled:v,viewModel:D}=this;D&&(D.screenLocationEnabled=D.active&&!v)};H._shouldDockAtCurrentViewSize=function(v){var D,C;v=v.breakpoint;const O=null==(D=this.viewModel)?void 0:null==(C=D.view)?void 0:C.ui;if(!O)return!1;const {width:T,height:Q}=O;if(isNaN(T)||isNaN(Q))return!1;D=v.hasOwnProperty("width")&&
T<=v.width;C=v.hasOwnProperty("height")&&Q<=v.height;return D||C};H._setDockEnabledForViewSize=function(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))};H._getPageText=function(v,D){return this.featureNavigationVisible?W.substitute(this.messages.pageText,{index:D+1,total:v}):null};H._destroySpinner=function(){const {_spinner:v,view:D}=this;v&&(D&&D.ui&&D.ui.remove(this._spinner,"popup-spinner"),v.destroy(),this._spinner=null)};H._createSpinner=function(v){v&&(this._spinner=
new w({view:v}),v.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};H._toggleCollapsed=function(){this.collapsed=!this.collapsed};H._close=function(){this.close();this.view&&this.view.focus()};H._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};H._toggleFeatureMenu=function(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v);this.actionsMenuOpen=!1;this.featureMenuOpen=v};H._toggleActionsMenu=function(){const v=
!this.actionsMenuOpen;this._actionsMenuOpenChanged(v);this.featureMenuOpen=!1;this.actionsMenuOpen=v};H._triggerAction=function(v){const D=v.currentTarget.dataset.actionUid;var {allActions:C}=this.viewModel;v=C.findIndex(O=>O.uid===D);(C=C.getItemAt(v))&&"toggle"===C.type&&(C.value=!C.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(v)};H._selectFeature=function(v){v=v.currentTarget["data-feature-index"];isNaN(v)||(this.viewModel.selectedFeatureIndex=v);this.featureMenuOpen=!1;this._focusFeatureMenuButton=
!0;this.scheduleRender()};H._next=function(){this.next()};H._previous=function(){this.previous()};h._createClass(J,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var v,
D,C,O,T,Q,Y;return!!(this.selectedFeatureWidget?(null==(v=this.selectedFeatureWidget)?0:null==(D=v.viewModel)?0:D.waitingForContent)||"error"===(null==(C=this.selectedFeatureWidget)?void 0:null==(O=C.viewModel)?void 0:O.state)||(null==(T=this.selectedFeatureWidget)?0:null==(Q=T.viewModel)?0:Q.content):null==(Y=this.viewModel)?0:Y.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",
get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(v){this._set("actionsMenuOpen",
!!v)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||U},set:function(v){var D={...U};const C=this.get("viewModel.view.breakpoints");var O={};C&&(O.width=C.xsmall,O.height=C.xsmall);v={...D,...v};D={...D.breakpoint,...O};({breakpoint:O}=v);!0===O?v.breakpoint=D:"object"===typeof O&&(v.breakpoint={...D,...O});this._set("dockOptions",
v);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:v,visibleElements:D,headingLevel:C}=this,{selectedFeatureViewModel:O}=this.viewModel,T={...D,title:!1};if(!O)return null;v?(v.viewModel=O,v.visibleElements=T):this._feature=new p({headingLevel:C+1,viewModel:O,visibleElements:T});return this._feature}}]);return J}(t.FeatureContentMixin(r));k.__decorate([e.property({readOnly:!0})],f.prototype,"actionsMenuId",null);k.__decorate([e.property({readOnly:!0})],
f.prototype,"actionsMenuButtonId",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"featureMenuId",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"titleId",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"contentId",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"hasContent",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"featureNavigationVisible",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"collapsible",null);k.__decorate([e.property({readOnly:!0})],
f.prototype,"featureMenuVisible",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"contentCollapsed",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"dividedActions",null);k.__decorate([m.aliasOf("viewModel.actions")],f.prototype,"actions",void 0);k.__decorate([e.property()],f.prototype,"actionsMenuOpen",null);k.__decorate([e.property()],f.prototype,"alignment",void 0);k.__decorate([m.aliasOf("viewModel.autoCloseEnabled")],f.prototype,"autoCloseEnabled",void 0);k.__decorate([m.aliasOf("viewModel.autoOpenEnabled")],
f.prototype,"autoOpenEnabled",void 0);k.__decorate([m.aliasOf("viewModel.defaultPopupTemplateEnabled")],f.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([m.aliasOf("viewModel.content")],f.prototype,"content",void 0);k.__decorate([e.property()],f.prototype,"collapsed",void 0);k.__decorate([e.property()],f.prototype,"collapseEnabled",void 0);k.__decorate([e.property({readOnly:!0})],f.prototype,"currentAlignment",null);k.__decorate([e.property({readOnly:!0})],f.prototype,"currentDockPosition",
null);k.__decorate([e.property()],f.prototype,"dockOptions",null);k.__decorate([e.property()],f.prototype,"dockEnabled",void 0);k.__decorate([m.aliasOf("viewModel.featureCount")],f.prototype,"featureCount",void 0);k.__decorate([e.property()],f.prototype,"featureMenuOpen",void 0);k.__decorate([m.aliasOf("viewModel.features")],f.prototype,"features",void 0);k.__decorate([m.aliasOf("viewModel.goToOverride")],f.prototype,"goToOverride",void 0);k.__decorate([e.property()],f.prototype,"headingLevel",void 0);
k.__decorate([m.aliasOf("viewModel.highlightEnabled")],f.prototype,"highlightEnabled",void 0);k.__decorate([m.aliasOf("viewModel.location")],f.prototype,"location",void 0);k.__decorate([e.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0);k.__decorate([e.property()],f.prototype,"maxInlineActions",void 0);k.__decorate([e.property(),l.messageBundle("esri/widgets/Popup/t9n/Popup")],f.prototype,"messages",void 0);k.__decorate([e.property(),l.messageBundle("esri/t9n/common")],
f.prototype,"messagesCommon",void 0);k.__decorate([m.aliasOf("viewModel.promises")],f.prototype,"promises",void 0);k.__decorate([m.aliasOf("viewModel.selectedFeature")],f.prototype,"selectedFeature",void 0);k.__decorate([m.aliasOf("viewModel.selectedFeatureIndex")],f.prototype,"selectedFeatureIndex",void 0);k.__decorate([e.property({readOnly:!0})],f.prototype,"selectedFeatureWidget",null);k.__decorate([e.property()],f.prototype,"spinnerEnabled",void 0);k.__decorate([m.aliasOf("viewModel.title")],
f.prototype,"title",void 0);k.__decorate([m.aliasOf("viewModel.updateLocationEnabled")],f.prototype,"updateLocationEnabled",void 0);k.__decorate([m.aliasOf("viewModel.view")],f.prototype,"view",void 0);k.__decorate([e.property({type:q}),F.vmEvent(["triggerAction","trigger-action"])],f.prototype,"viewModel",void 0);k.__decorate([m.aliasOf("viewModel.visible")],f.prototype,"visible",void 0);k.__decorate([e.property()],f.prototype,"visibleElements",void 0);k.__decorate([g.cast("visibleElements")],f.prototype,
"castVisibleElements",null);k.__decorate([A.accessibleHandler()],f.prototype,"_close",null);k.__decorate([A.accessibleHandler()],f.prototype,"_toggleDockEnabled",null);k.__decorate([A.accessibleHandler()],f.prototype,"_toggleFeatureMenu",null);k.__decorate([A.accessibleHandler()],f.prototype,"_toggleActionsMenu",null);k.__decorate([A.accessibleHandler()],f.prototype,"_triggerAction",null);k.__decorate([A.accessibleHandler()],f.prototype,"_selectFeature",null);k.__decorate([A.accessibleHandler()],
f.prototype,"_next",null);k.__decorate([A.accessibleHandler()],f.prototype,"_previous",null);return f=k.__decorate([b.subclass("esri.widgets.Popup")],f)})},"esri/core/throttle":function(){define(["exports"],function(h){function k(f,n,x,I){let z=null,G=1E3;"number"===typeof n?(G=n,I=x):(z=null!=n?n:null,G=x);let E=0,u;const m=()=>{E=0;f.apply(I,u)};n=(...d)=>{z&&z.apply(I,d);u=d;G?E||(E=setTimeout(m,G)):m()};n.remove=()=>{E&&(clearTimeout(E),E=0)};n.forceUpdate=()=>{E&&(clearTimeout(E),m())};n.hasPendingUpdates=
()=>!!E;return n}h.default=k;h.throttle=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F){const K={title:!0,content:!0,lastEditedInfo:!0};n=function(R){function W(U,M){U=R.call(this,U,M)||this;U._contentWidgets=[];U.graphic=null;U.defaultPopupTemplateEnabled=!1;U.headingLevel=2;U.label=void 0;U.messages=null;U.messagesCommon=null;U.messagesURIUtils=null;U.spatialReference=null;U.title=null;U.visibleElements={...K};U.map=null;U.view=null;U.viewModel=new w;return U}k._inheritsLoose(W,R);var V=W.prototype;V.initialize=function(){this.own(x.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};V.loadDependencies=function(){return new Promise((U,M)=>h(["../chunks/calcite-notice"],U,M))};V.destroy=function(){this._destroyContentWidgets()};V.castVisibleElements=function(U){return{...K,...U}};V.render=function(){var {state:U}=this.viewModel;U=l.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===U?this.renderError():"loading"===U?this.renderLoading():this.renderContentContainer());return l.tsx("div",
{class:this.classes("esri-feature","esri-widget")},U)};V.setActiveMedia=function(U,M){this.viewModel.setActiveMedia(U,M)};V.nextMedia=function(U){this.viewModel.nextMedia(U)};V.previousMedia=function(U){this.viewModel.previousMedia(U)};V.renderError=function(){const {messagesCommon:U,messages:M,visibleElements:P}=this;return l.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},P.title?l.tsx("div",{key:"error-title",slot:"title"},U.errorMessage):null,l.tsx("div",
{key:"error-message",slot:"message"},M.loadingError))};V.renderLoading=function(){return l.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},l.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};V.renderContentContainer=function(){const {visibleElements:U}=this;return U.content?l.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};V.renderTitle=function(){const {visibleElements:U,
title:M}=this;return U.title?l.tsx(t.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:M}):null};V.renderContent=function(){var U=this.viewModel.content;return U?Array.isArray(U)?U.length?l.tsx("div",{key:"content-content-elements"},U.map(this.renderContentElement,this)):null:"string"===typeof U?(U=this._contentWidgets[0],!U||U.destroyed?null:l.tsx("div",{key:"content-content"},U.render())):this.renderNodeContent(U):null};V.renderContentElement=function(U,M){const {visibleElements:P}=
this;if("boolean"!==typeof P.content&&!P.content[U.type])return null;switch(U.type){case "attachments":return this.renderAttachments(M);case "custom":return this.renderCustom(U,M);case "fields":return this.renderFields(M);case "media":return this.renderMedia(M);case "text":return this.renderText(U,M);case "expression":return this.renderExpression(M);default:return null}};V.renderAttachments=function(U){const M=this._contentWidgets[U];if(!M||M.destroyed)return null;const {state:P,attachmentInfos:ba}=
M.viewModel;return"loading"===P||0<ba.length?l.tsx("div",{key:this._buildKey("attachments-element",U),class:this.classes("esri-feature__content-element")},M.render()):null};V.renderExpression=function(U){const M=this._contentWidgets[U];return!M||M.destroyed?null:l.tsx("div",{key:this._buildKey("expression-element",U),class:"esri-feature__content-element"},M.render())};V.renderCustom=function(U,M){({creator:U}=U);const P=this._contentWidgets[M];return!P||P.destroyed?null:U?l.tsx("div",{key:this._buildKey("custom-element",
M),class:"esri-feature__content-element"},P.render()):null};V.renderFields=function(U){const M=this._contentWidgets[U];return!M||M.destroyed?null:l.tsx("div",{key:this._buildKey("fields-element",U),class:"esri-feature__content-element"},M.render())};V.renderMedia=function(U){const M=this._contentWidgets[U];return!M||M.destroyed?null:l.tsx("div",{key:this._buildKey("media-element",U),class:"esri-feature__content-element"},M.render())};V.renderLastEditInfo=function(){const {visibleElements:U,messages:M}=
this;var {lastEditInfo:P}=this.viewModel;if(!P||!U.lastEditedInfo)return null;const {date:ba,user:J}=P;P=F.substitute("edit"===P.type?J?M.lastEditedByUser:M.lastEdited:J?M.lastCreatedByUser:M.lastCreated,{date:ba,user:J});return l.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},P)};V.renderText=function(U,M){const P=this._contentWidgets[M];return!P||P.destroyed?null:U.text?l.tsx("div",{key:this._buildKey("text-element",M),class:this.classes("esri-feature__content-element",
"esri-feature__text")},P.render()):null};V._buildKey=function(U,...M){const P=this.get("viewModel.graphic.uid")||"0";M=M.join("-");return`${U}__${P}-${M}`};V._destroyContentWidget=function(U){U&&(U.viewModel=null,!U.destroyed&&U.destroy())};V._destroyContentWidgets=function(){this._contentWidgets.forEach(U=>this._destroyContentWidget(U));this._contentWidgets=[]};V._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:U,visibleElements:M}=this;var P=this.get("viewModel.content");
const {contentViewModels:ba}=this.viewModel;Array.isArray(P)?P.forEach((J,H)=>{"attachments"===J.type&&(this._contentWidgets[H]=new c({displayType:J.displayType,headingLevel:M.title?U+1:U,viewModel:ba[H]}));"fields"===J.type&&(this._contentWidgets[H]=new b({viewModel:ba[H]}));"media"===J.type&&(this._contentWidgets[H]=new p({viewModel:ba[H]}));"text"===J.type&&(this._contentWidgets[H]=new g({viewModel:ba[H]}));"custom"===J.type&&(this._contentWidgets[H]=new g({viewModel:ba[H]}));"expression"===J.type&&
(this._contentWidgets[H]=new e({viewModel:ba[H]}))},this):(P=ba[0])&&!P.destroyed&&(this._contentWidgets[0]=new g({viewModel:P}));this.scheduleRender()};return W}(r.FeatureContentMixin(d));f.__decorate([I.aliasOf("viewModel.graphic")],n.prototype,"graphic",void 0);f.__decorate([I.aliasOf("viewModel.defaultPopupTemplateEnabled")],n.prototype,"defaultPopupTemplateEnabled",void 0);f.__decorate([u.property()],n.prototype,"headingLevel",void 0);f.__decorate([u.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],n.prototype,"label",void 0);f.__decorate([u.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],n.prototype,"messages",void 0);f.__decorate([u.property(),B.messageBundle("esri/t9n/common")],n.prototype,"messagesCommon",void 0);f.__decorate([u.property(),B.messageBundle("esri/widgets/support/t9n/uriUtils")],n.prototype,"messagesURIUtils",void 0);f.__decorate([I.aliasOf("viewModel.spatialReference")],n.prototype,"spatialReference",void 0);f.__decorate([I.aliasOf("viewModel.title")],
n.prototype,"title",void 0);f.__decorate([u.property()],n.prototype,"visibleElements",void 0);f.__decorate([E.cast("visibleElements")],n.prototype,"castVisibleElements",null);f.__decorate([I.aliasOf("viewModel.map")],n.prototype,"map",void 0);f.__decorate([I.aliasOf("viewModel.view")],n.prototype,"view",void 0);f.__decorate([u.property({type:w})],n.prototype,"viewModel",void 0);return n=f.__decorate([m.subclass("esri.widgets.Feature")],n)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b){x=function(p){function w(t,q){t=p.call(this,t,q)||this;t._featureElementInfo=null;t.attachmentsWidget=new u;t.description=null;t.displayType=null;t.graphic=null;t.headingLevel=2;t.title=null;t.viewModel=new d;return t}h._inheritsLoose(w,p);var r=w.prototype;r.initialize=function(){this._featureElementInfo=new c;f.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());f.init(this,"viewModel.graphic",t=>this.attachmentsWidget.graphic=
t)};r.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};r.render=function(){var t;const {attachmentsWidget:q}=this;return b.tsx("div",{class:"esri-feature-attachments"},null==(t=this._featureElementInfo)?void 0:t.render(),null==q?void 0:q.render())};r._setupFeatureElementInfo=function(){const {description:t,title:q,headingLevel:B}=this;this._featureElementInfo.set({description:t,title:q,headingLevel:B})};return w}(m);k.__decorate([G.property({readOnly:!0})],x.prototype,
"attachmentsWidget",void 0);k.__decorate([n.aliasOf("viewModel.description")],x.prototype,"description",void 0);k.__decorate([n.aliasOf("attachmentsWidget.displayType")],x.prototype,"displayType",void 0);k.__decorate([n.aliasOf("viewModel.graphic")],x.prototype,"graphic",void 0);k.__decorate([G.property()],x.prototype,"headingLevel",void 0);k.__decorate([n.aliasOf("viewModel.title")],x.prototype,"title",void 0);k.__decorate([G.property({type:d})],x.prototype,"viewModel",void 0);return x=k.__decorate([E.subclass("esri.widgets.Feature.FeatureAttachments")],
x)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w){const r={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},t=window.CSS;z=function(q){function B(l,F){l=q.call(this,l,F)||this;l.abilities=null;l.displayType="auto";l.graphic=null;l.label=void 0;l.messages=null;l.messagesUnits=null;l.selectedFile=null;l.submitting=!1;l.viewModel=new c;l.visibleElements={...r};l._supportsImageOrientation=t&&t.supports&&t.supports("image-orientation",
"from-image");l._addAttachmentForm=null;l._updateAttachmentForm=null;return l}h._inheritsLoose(B,q);var A=B.prototype;A.initialize=function(){this.own(x.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),x.init(this,"viewModel.mode",()=>this._modeChanged()))};A.castVisibleElements=function(l){return{...r,...l}};A.addAttachment=function(){const {_addAttachmentForm:l,viewModel:F}=this;this._set("submitting",!0);this._set("error",null);return F.addAttachment(l).then(K=>{this._set("submitting",
!1);this._set("error",null);F.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new f("attachments:add-attachment",this.messages.addErrorMessage,K));throw K;})};A.deleteAttachment=function(l){const {viewModel:F}=this;this._set("submitting",!0);this._set("error",null);return F.deleteAttachment(l).then(K=>{this._set("submitting",!1);this._set("error",null);F.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new f("attachments:delete-attachment",
this.messages.deleteErrorMessage,K));throw K;})};A.updateAttachment=function(){const {viewModel:l}=this,{_updateAttachmentForm:F}=this;this._set("submitting",!0);this._set("error",null);return l.updateAttachment(F).then(K=>{this._set("submitting",!1);this._set("error",null);l.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new f("attachments:update-attachment",this.messages.updateErrorMessage,K));throw K;})};A.render=function(){const {submitting:l,viewModel:F}=this,{state:K}=
F;return w.tsx("div",{class:this.classes("esri-attachments","esri-widget")},l?this.renderProgressBar():null,"loading"===K?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};A.renderErrorMessage=function(){const {error:l,visibleElements:F}=this;return l&&F.errorMessage?w.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},l.message):null};A.renderAttachments=function(){const {mode:l,activeAttachmentInfo:F}=this.viewModel;return"add"===l?this.renderAddForm():
"edit"===l?this.renderDetailsForm(F):this.renderAttachmentContainer()};A.renderLoading=function(){return w.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},w.tsx("div",{class:"esri-attachments__loader"}))};A.renderProgressBar=function(){return this.visibleElements.progressBar?w.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};A.renderAddForm=function(){const {submitting:l,selectedFile:F}=this;var K=l||!F,R=this.visibleElements.cancelAddButton?w.tsx("button",
{type:"button",bind:this,disabled:l,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",l&&"esri-button--disabled")},this.messages.cancel):null;K=this.visibleElements.addSubmitButton?w.tsx("button",{type:"submit",disabled:K,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:K})},this.messages.add):null;const W=F?w.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
F.name):null;R=w.tsx("form",{bind:this,afterCreate:e.storeNode,afterRemoved:e.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},w.tsx("fieldset",{class:"esri-attachments__file-fieldset"},W,w.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},F?this.messages.changeFile:this.messages.selectFile,w.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
K,R);return w.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},R)};A.renderDetailsForm=function(l){const {visibleElements:F,viewModel:K,selectedFile:R,submitting:W}=this,{contentType:V,size:U,url:M}=l;var {abilities:P}=K,ba=W||!R,J=P.editing&&P.operations.delete&&F.deleteButton?w.tsx("button",{key:"delete-button",type:"button",disabled:W,bind:this,onclick:C=>this._submitDeleteAttachment(C,l),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:W})},this.messages.delete):null;ba=P.editing&&P.operations.update&&F.updateButton?w.tsx("button",{disabled:ba,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:ba})},this.messages.update):null;const H=this.visibleElements.cancelUpdateButton?w.tsx("button",{disabled:W,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:W})},this.messages.cancel):null;var v=R?w.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},R.name):null;P=P.editing&&P.operations.update?w.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},v,w.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,w.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;v=w.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},w.tsx("label",null,n.formatFileSize(this.messagesUnits,U)));const D=w.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},w.tsx("label",null,V));J=w.tsx("form",{bind:this,afterCreate:e.storeNode,afterRemoved:e.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},w.tsx("div",{class:"esri-attachments__metadata"},
v,D),P,w.tsx("div",{class:"esri-attachments__actions"},J,H,ba));return w.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},w.tsx("a",{class:"esri-attachments__item-link",href:M,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:l,size:400}),w.tsx("div",{class:"esri-attachments__item-link-overlay"},w.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},w.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},w.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),w.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),J)};A.renderImageMask=function({attachmentInfo:l,size:F}){var {supportsResizeAttachments:K}=this.viewModel;const {contentType:R,name:W,url:V}=l,U=K&&g.isSupportedImage(R);l=(l=this._getCSSTransform(l,U))?{transform:l,"image-orientation":"none"}:{};const M=-1===V.indexOf("?")?"?":"\x26";F=U?`${V}${M}w=${F}`:g.getIconPath(R);K={["esri-attachments__image--resizable"]:K};
return w.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!U},"esri-attachments__item-mask")},w.tsx("img",{styles:l,alt:W,src:F,class:this.classes(K,"esri-attachments__image")}))};A.renderAttachmentInfo=function({attachmentInfo:l,displayType:F}){var {viewModel:K}=this;({abilities:K}=K);const {name:R,url:W}=l;F=this.renderImageMask({attachmentInfo:l,size:"list"===F?48:400});var V=K.editing?w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
e.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;V=w.tsx("label",{class:"esri-attachments__label"},w.tsx("span",{class:"esri-attachments__filename"},R||this.messages.noTitle),V);F=[F,V];K=K.editing?w.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":l.id,onclick:()=>this._startEditAttachment(l),type:"button"},F):w.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:W,target:"_blank"},F);return w.tsx("li",{class:"esri-attachments__item",key:l},K)};A.renderAttachmentContainer=function(){const {effectiveDisplayType:l,viewModel:F,visibleElements:K}=this,{attachmentInfos:R,abilities:W}=F;var V=R&&R.length;const U={["esri-attachments__container--list"]:"preview"!==l,["esri-attachments__container--preview"]:"preview"===l},M=W.editing&&W.operations.add&&K.addButton?w.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;V=V?w.tsx("ul",{class:"esri-attachments__items"},R.toArray().map(P=>this.renderAttachmentInfo({attachmentInfo:P,displayType:l}))):w.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return w.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",U)},V,M)};A._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};A._handleFileInputChange=function(l){l=(l=l.target)&&l.files&&l.files.item(0);this._set("selectedFile",l)};A._submitDeleteAttachment=function(l,F){l.preventDefault();this.deleteAttachment(F)};A._submitAddAttachment=function(l){l.preventDefault();this.addAttachment()};A._submitUpdateAttachment=function(l){l.preventDefault();this.updateAttachment()};A._startEditAttachment=
function(l){const {viewModel:F}=this;F.activeAttachmentInfo=l;F.mode="edit"};A._startAddAttachment=function(){this.viewModel.mode="add"};A._cancelForm=function(l){l.preventDefault();this.viewModel.mode="view"};A._getCSSTransform=function(l,F){({orientationInfo:l}=l);return!this._supportsImageOrientation&&F&&l?[l.rotation?`rotate(${l.rotation}deg)`:"",l.mirrored?"scaleX(-1)":""].join(" "):""};h._createClass(B,[{key:"effectiveDisplayType",get:function(){return"auto"===this.displayType?this.viewModel.supportsResizeAttachments?
"preview":"list":this.displayType}}]);return B}(d);k.__decorate([I.aliasOf("viewModel.abilities")],z.prototype,"abilities",void 0);k.__decorate([u.property()],z.prototype,"displayType",void 0);k.__decorate([u.property({readOnly:!0})],z.prototype,"effectiveDisplayType",null);k.__decorate([I.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);k.__decorate([u.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);k.__decorate([u.property(),b.messageBundle("esri/widgets/Attachments/t9n/Attachments")],
z.prototype,"messages",void 0);k.__decorate([u.property(),b.messageBundle("esri/core/t9n/Units")],z.prototype,"messagesUnits",void 0);k.__decorate([u.property({readOnly:!0})],z.prototype,"selectedFile",void 0);k.__decorate([u.property({readOnly:!0})],z.prototype,"submitting",void 0);k.__decorate([u.property({readOnly:!0})],z.prototype,"error",void 0);k.__decorate([u.property({type:c})],z.prototype,"viewModel",void 0);k.__decorate([u.property()],z.prototype,"visibleElements",void 0);k.__decorate([E.cast("visibleElements")],
z.prototype,"castVisibleElements",null);return z=k.__decorate([m.subclass("esri.widgets.Attachments")],z)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(h,k,f,n,x){function I(E,u,m){return E.units[u][m]}function z(E,u,m,d=2,c="abbr"){return`${x.formatNumber(u,{minimumFractionDigits:d,maximumFractionDigits:d})} ${I(E,m,c)}`}const G=["B","kB","MB","GB","TB"];h.formatAngleDegrees=function(E,u,m=2){E=n.convertUnit(E,u,"degrees");
return x.formatNumber(E,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:m,minimumFractionDigits:m})};h.formatDMS=function(E,u,m=2){E=n.convertUnit(E,u,"degrees");u=E-Math.floor(E);E-=u;u*=60;let d=u-Math.floor(u);u-=d;d*=60;return`${E.toFixed()}\u00b0 ${u.toFixed()}' ${d.toFixed(m)}"`};h.formatDecimal=z;h.formatFileSize=function(E,u){let m=0===u?0:Math.floor(Math.log(u)/Math.log(1024));m=k.clamp(m,0,G.length-1);u=x.formatNumber(u/1024**m,{maximumFractionDigits:2});return f.replace(E.units.bytes[G[m]],
{fileSize:u})};h.formatImperialArea=function(E,u,m,d=2,c="abbr"){const g=n.preferredImperialAreaUnit(u,m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.formatImperialLength=function(E,u,m,d=2,c="abbr"){const g=n.preferredImperialLengthUnit(u,m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.formatImperialVerticalLength=function(E,u,m,d=2,c="abbr"){const g=n.preferredImperialVerticalLengthUnit(u,m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.formatMetricArea=function(E,u,m,d=2,c="abbr"){const g=n.preferredMetricAreaUnit(u,
m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.formatMetricLength=function(E,u,m,d=2,c="abbr"){const g=n.preferredMetricLengthUnit(u,m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.formatMetricVerticalLength=function(E,u,m,d=2,c="abbr"){const g=n.preferredMetricVerticalLengthUnit(u,m);return z(E,n.convertUnit(u,m,g),g,d,c)};h.unitName=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b){const p={editing:!1,operations:{add:!0,update:!0,delete:!0}},w=n.ofType(g);n=function(r){function t(B){var A=r.call(this,B)||this;A._getAttachmentsPromise=null;A._attachmentLayer=null;A.abilities={...p};A.activeAttachmentInfo=null;A.attachmentInfos=new w;A.graphic=null;A.mode="view";A.handles.add([G.init(h._assertThisInitialized(A),"graphic",()=>A._graphicChanged())]);return A}h._inheritsLoose(t,r);var q=t.prototype;q.destroy=function(){this.graphic=this._attachmentLayer=
null};q.castAbilities=function(B){return{...p,...B}};q.getAttachments=function(){var B=h._asyncToGenerator(function*(){const {_attachmentLayer:A,attachmentInfos:l}=this;if(!A||"function"!==typeof A.queryAttachments)throw new x("invalid-layer","getAttachments(): A valid layer is required.");const F=this._getFeatureId();var K=new e({objectIds:[F],returnMetadata:!0});const R=[];this._getAttachmentsPromise=K=A.queryAttachments(K).then(W=>W[F]||R).catch(()=>R);this.notifyChange("state");K=yield K;l.removeAll();
K.length&&l.addMany(K);this._getAttachmentsPromise=null;this.notifyChange("state");return K});return function(){return B.apply(this,arguments)}}();q.addAttachment=function(){var B=h._asyncToGenerator(function*(A){const {_attachmentLayer:l,attachmentInfos:F,graphic:K,abilities:R}=this;if(!A)throw new x("invalid-attachment","addAttachment(): An attachment is required.",{attachment:A});if(!R.operations.add)throw new x("invalid-abilities","addAttachment(): add abilities are required.");if(!l||"function"!==
typeof l.addAttachment)throw new x("invalid-layer","addAttachment(): A valid layer is required.");A=yield l.addAttachment(K,A).then(W=>this._queryAttachment(W.objectId));F.add(A);return A});return function(A){return B.apply(this,arguments)}}();q.deleteAttachment=function(){var B=h._asyncToGenerator(function*(A){const {_attachmentLayer:l,attachmentInfos:F,graphic:K,abilities:R}=this;if(!A)throw new x("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:A});
if(!R.operations.delete)throw new x("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!l||"function"!==typeof l.deleteAttachments)throw new x("invalid-layer","deleteAttachment(): A valid layer is required.");const W=yield l.deleteAttachments(K,[A.id]).then(()=>A);F.remove(W);return W});return function(A){return B.apply(this,arguments)}}();q.updateAttachment=function(){var B=h._asyncToGenerator(function*(A,l=this.activeAttachmentInfo){const {_attachmentLayer:F,attachmentInfos:K,
graphic:R,abilities:W}=this;if(!A)throw new x("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:A});if(!l)throw new x("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:l});if(!W.operations.update)throw new x("invalid-abilities","updateAttachment(): Update abilities are required.");const V=K.findIndex(U=>U===l);if(!F||"function"!==typeof F.updateAttachment)throw new x("invalid-layer","updateAttachment(): A valid layer is required.");
A=yield F.updateAttachment(R,l.id,A).then(U=>this._queryAttachment(U.objectId));K.splice(V,1,A);return A});return function(A){return B.apply(this,arguments)}}();q._queryAttachment=function(){var B=h._asyncToGenerator(function*(A){if(!A)throw new x("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:l}=this,F=this._getFeatureId();A=new e({objectIds:[F],attachmentsWhere:`AttachmentId=${A}`,returnMetadata:!0});return l.queryAttachments(A).then(K=>K[F][0])});return function(A){return B.apply(this,
arguments)}}();q._getFeatureId=function(){const {_attachmentLayer:B,graphic:A}=this;if(!B||!A)return null;const {objectIdField:l}=B,{attributes:F}=A;return F&&F[l]};q._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};q._setAttachmentLayer=function(){var {graphic:B}=this;this._attachmentLayer=(B=b.getSourceLayer(B))?"scene"===B.type&&z.isSome(B.associatedLayer)?B.associatedLayer:B:null};h._createClass(t,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return t}(I.HandleOwner);k.__decorate([E.property()],n.prototype,"abilities",void 0);k.__decorate([d.cast("abilities")],n.prototype,"castAbilities",null);k.__decorate([E.property()],n.prototype,"activeAttachmentInfo",void 0);k.__decorate([E.property({readOnly:!0,type:w})],n.prototype,"attachmentInfos",void 0);k.__decorate([E.property({type:f})],
n.prototype,"graphic",void 0);k.__decorate([E.property()],n.prototype,"mode",void 0);k.__decorate([E.property({readOnly:!0})],n.prototype,"state",null);k.__decorate([E.property({readOnly:!0})],n.prototype,"supportsResizeAttachments",null);return n=k.__decorate([c.subclass("esri.widgets.Attachments.AttachmentsViewModel")],n)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m){function d(){d=k._asyncToGenerator(function*(ea,ia){return"function"===typeof ea?ea.call(null,ia):ea});return d.apply(this,arguments)}function c(ea){return ea?T.test(ea):!1}function g(ea,ia){if(!c(ia)||!ea)return null;const ma=ia.replace(T,"").toLowerCase();let sa;ea.some(S=>S.name.toLowerCase()===ma?(sa=S,!0):!1);return sa}function e(ea,ia){return(ia=b(ia,ea))?ia.name:ea}function b(ea,ia){return ea&&"function"===typeof ea.getField?ea.getField(ia):null}function p({formattedAttributes:ea,
template:ia,fieldInfoMap:ma}){return`${I.replace(I.replace(ia,sa=>{{const S=ma.get(sa.toLowerCase());sa=`{${S&&S.fieldName||sa}}`}return sa}),ea).replace(D,"")}`.trim()}function w(ea,ia,ma=!1){const sa=ia[ea];"string"===typeof sa&&(ma=(ma?encodeURIComponent(sa):sa).replace(O,"%27"),ia[ea]=ma)}function r(ea,ia=!1){const ma={...ea};Object.keys(ma).forEach(sa=>w(sa,ma,ia));return ma}function t(ea,ia){return ea.replace(C,(ma,sa,S)=>(ma=b(ia,S))?`{${ma.name}}`:sa)}function q(ea,ia,ma){return(ea=t(ea,ma))?
ea.replace(ha,(sa,S,ca)=>{S=`${S||ca}`.trim();return I.replace(sa,r(ia,S&&"{"!==S[0]))}):ea}function B(ea,ia){var ma=ia.fieldName,sa=A(ia.fieldInfos,ma),S=null==sa?void 0:sa.clone();sa=ia.preventPlacesFormatting;ia=ia.layer;ma=b(ia,ma);if(S&&"date"===(null==ma?void 0:ma.type)){ma=S.format||new u;ma.dateFormat=ma.dateFormat||"short-date-short-time";var ca;if(!(ca="feature"===(null==ia?void 0:ia.type)&&ia.datesInUnknownTimezone)){if(ca=!(null==ia||!ia.layer))ca=ia.layer,ca="map-image"===(null==ca?void 0:
ca.type);ca=ca&&ia.layer.datesInUnknownTimezone}ma.dateTimeFormatOptions=ca?{timeZone:"UTC"}:null;S.format=ma}S=S&&S.format;"string"!==typeof ea||!S||null!=S.dateFormat||null==S.places&&null==S.digitSeparator||(ia=Number(ea),isNaN(ia)||(ea=ia));return"string"===typeof ea||null==ea||null==S?K(ea):sa?G.formatNumber(ea,{...G.convertNumberFormatToIntlOptions(S),minimumFractionDigits:0,maximumFractionDigits:20}):S.format(ea)}function A(ea,ia){if(ea&&ea.length&&ia){var ma=ia.toLowerCase(),sa=void 0;ea.some(S=>
S.fieldName&&S.fieldName.toLowerCase()===ma?(sa=S,!0):!1);return sa}}function l({fieldName:ea,graphic:ia,layer:ma}){if(ba(ea)||!ma||"function"!==typeof ma.getFeatureType)return null;const {typeIdField:sa}=ma;return sa&&ea===sa?(ea=ma.getFeatureType(ia))?ea.name:null:null}function F({fieldName:ea,value:ia,graphic:ma,layer:sa}){return ba(ea)||!sa||"function"!==typeof sa.getFieldDomain?null:(ea=sa.getFieldDomain(ea,{feature:ma}))&&"coded-value"===ea.type?ea.getName(ia):null}function K(ea){return"string"===
typeof ea?ea.replace(Q,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ea}function R(ea){const {value:ia,fieldName:ma,fieldInfos:sa,fieldInfoMap:S,layer:ca,graphic:ja}=ea;return null==ia?"":(ea=F({fieldName:ma,value:ia,graphic:ja,layer:ca}))||(ea=l({fieldName:ma,graphic:ja,layer:ca}))?ea:S.get(ma.toLowerCase())?B(ia,{fieldInfos:sa,fieldName:ma,layer:ca}):(ea=ca&&ca.fieldsIndex)&&ea.isDateField(ma)?z.formatDate(ia,ka):K(ia)}function W(ea,ia){return V.apply(this,arguments)}function V(){V=k._asyncToGenerator(function*(ea,
ia){var ma,sa;const {layer:S,graphic:ca,outFields:ja,objectIds:na,returnGeometry:ta,spatialReference:xa}=ea;ea=na[0];if("number"!==typeof ea&&"string"!==typeof ea)return v.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:S,graphic:ca,objectId:ea,requiredFields:ja}),null;if(null==(ma=S.capabilities)||null==(sa=ma.operations)||!sa.supportsQuery)return v.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:S,
graphic:ca,requiredFields:ja,returnGeometry:ta}),null;ma=S.createQuery();ma.objectIds=na;ma.outFields=null!=ja&&ja.length?ja:[S.objectIdField];ma.returnGeometry=!!ta;ma.returnZ=!!ta;ma.returnM=!!ta;ma.outSpatialReference=xa;return(yield S.queryFeatures(ma,ia)).features[0]});return V.apply(this,arguments)}function U(ea){return M.apply(this,arguments)}function M(){M=k._asyncToGenerator(function*(ea){var ia;if(null==(ia=ea.expressionInfos)||!ia.length)return!1;ia=yield m.loadArcade();({arcadeUtils:{hasGeometryFunctions:ia}}=
ia);return ia(ea)});return M.apply(this,arguments)}function P(){P=k._asyncToGenerator(function*({graphic:ea,popupTemplate:ia,layer:ma,spatialReference:sa},S){if(ma&&ia&&("function"===typeof ma.load&&(yield ma.load(S)),ea.attributes)){var ca=ea.attributes[ma.objectIdField];if(null!=ca){ca=[ca];var ja=yield ia.getRequiredFields(ma.fieldsIndex),na=E.featureHasFields(ja,ea);ja=na?[]:ja;ia=ia.returnGeometry||(yield U(ia));if(!na||ia)if(ma=yield W({layer:ma,graphic:ea,outFields:ja,objectIds:ca,returnGeometry:ia,
spatialReference:sa},S))ma.geometry&&(ea.geometry=ma.geometry),ma.attributes&&(ea.attributes={...ea.attributes,...ma.attributes})}}});return P.apply(this,arguments)}function ba(ea=""){return ea?-1!==ea.indexOf("relationships/"):!1}function J({attributes:ea,graphic:ia,relatedInfo:ma}){ea&&ia&&ma&&Object.keys(ia.attributes).forEach(sa=>{var S={layerId:ma.relation.id.toString(),fieldName:sa};ea[S?`${"relationships/"}${S.layerId}/${S.fieldName}`:""]=ia.attributes[sa]})}function H(ea,ia){ea&&ia&&(ia.relatedFeatures&&
ia.relatedFeatures&&ia.relatedFeatures.forEach(ma=>J({attributes:ea,graphic:ma,relatedInfo:ia})),ia.relatedStatsFeatures&&ia.relatedStatsFeatures&&ia.relatedStatsFeatures.forEach(ma=>J({attributes:ea,graphic:ma,relatedInfo:ia})))}const v=n.getLogger("esri.widgets.Feature.support.featureUtils"),D=/href=(""|'')/gi,C=/(\{([^\{\r\n]+)\})/g,O=/'/g,T=/^\s*expression\//i,Q=/(\n)/gi,Y=/[\u00A0-\u9999<>&]/gim,ha=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,da=/^(?:mailto:|tel:)/,ka=z.convertDateFormatToIntlOptions("short-date-short-time"),
qa=ea=>{if(!ea)return!1;ea=ea.toUpperCase();return-1<ea.indexOf("CURRENT_TIMESTAMP")||-1<ea.indexOf("CURRENT_DATE")||-1<ea.indexOf("CURRENT_TIME")},pa=({layer:ea,method:ia,query:ma,definitionExpression:sa})=>{var S,ca;null!=(S=ea.capabilities)&&null!=(ca=S.query)&&ca.supportsCacheHint&&"attachments"!==ia&&(ea=x.isSome(ma.where)&&ma.where,ia=x.isSome(ma.geometry)&&ma.geometry,qa(sa)||qa(ea)||"extent"===(null==ia?void 0:ia.type)||"tile"===ma.resultType||(ma.cacheHint=!0))};h.applyTextFormattingHTML=
K;h.createfieldInfoMap=function(ea,ia){const ma=new Map;ea&&ea.forEach(sa=>{const S=e(sa.fieldName,ia);sa.fieldName=S;ma.set(S.toLowerCase(),sa)});return ma};h.fixTokens=t;h.formatAttributes=function({fieldInfos:ea,attributes:ia,layer:ma,graphic:sa,fieldInfoMap:S,relatedInfos:ca}){const ja={};null==ca?void 0:ca.forEach(na=>H(ja,na));Object.keys(ia).forEach(na=>{ja[na]=R({fieldName:na,fieldInfos:ea,fieldInfoMap:S,layer:ma,value:ia[na],graphic:sa})});return ja};h.formatEditInfo=function(ea,ia){const {creatorField:ma,
creationDateField:sa,editorField:S,editDateField:ca}=ea;if(ia){ea=ia[ca];if("number"===typeof ea)return ia=ia[S],{type:"edit",date:z.formatDate(ea,ka),user:ia};ea=ia[sa];return"number"===typeof ea?(ia=ia[ma],{type:"create",date:z.formatDate(ea,ka),user:ia}):null}};h.formatValueToFieldInfo=B;h.getAllFieldInfos=function(ea){const ia=[];if(!ea)return ia;const {fieldInfos:ma,content:sa}=ea;ma&&ia.push(...ma);if(!sa||!Array.isArray(sa))return ia;sa.forEach(S=>{"fields"===S.type&&(S=S&&S.fieldInfos)&&ia.push(...S)});
return ia};h.getFieldInfo=A;h.getFieldInfoLabel=function(ea,ia){return(ia=g(ia,null==ea?void 0:ea.fieldName))?ia.title||null:ea?ea.label||ea.fieldName:null};h.getFixedFieldName=e;h.getFixedFieldNames=function(ea,ia){return ea&&ea.map(ma=>e(ma,ia))};h.getSourceLayer=function(ea){if(!x.isNone(ea))return ea.get("sourceLayer")||ea.get("layer")};h.graphicCallback=function(ea,ia){return d.apply(this,arguments)};h.htmlEntities=function(ea){return ea.replace(Y,ia=>`&#${ia.charCodeAt(0)};`)};h.isExpressionField=
c;h.isRelatedField=ba;h.preLayerQueryCallback=({query:ea,layer:ia,method:ma})=>{pa({layer:ia,method:ma,query:ea,definitionExpression:`${ia.definitionExpression} ${ia.serviceDefinitionExpression}`})};h.preRequestCallback=({queryPayload:ea,layer:ia,method:ma})=>{pa({layer:ia,method:ma,query:ea,definitionExpression:`${ia.definitionExpression} ${ia.serviceDefinitionExpression}`})};h.queryUpdatedFeature=function(ea,ia){return P.apply(this,arguments)};h.shouldOpenInNewTab=function(ea=""){if(ea)return!da.test(ea.trim().toLowerCase())};
h.substituteAttributes=p;h.substituteFieldsInLinksAndAttributes=function({attributes:ea,globalAttributes:ia,layer:ma,text:sa,expressionAttributes:S,fieldInfoMap:ca}){return sa?p({formattedAttributes:ia,template:q(sa,{...ia,...S,...ea},ma),fieldInfoMap:ca}):""};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(h,k){h.getIconPath=function(f){const n=k.getAssetUrl("esri/themes/base/images/files/");
return f?"text/plain"===f?`${n}text-32.svg`:"application/pdf"===f?`${n}pdf-32.svg`:"text/csv"===f?`${n}csv-32.svg`:"application/gpx+xml"===f?`${n}gpx-32.svg`:"application/x-dwf"===f?`${n}cad-32.svg`:"application/postscript"===f||"application/json"===f||"text/xml"===f||"model/vrml"===f?`${n}code-32.svg`:"application/x-zip-compressed"===f||"application/x-7z-compressed"===f||"application/x-gzip"===f||"application/x-tar"===f||"application/x-gtar"===f||"application/x-bzip2"===f||"application/gzip"===f||
"application/x-compress"===f||"application/x-apple-diskimage"===f||"application/x-rar-compressed"===f||"application/zip"===f?`${n}zip-32.svg`:-1!==f.indexOf("image/")?`${n}image-32.svg`:-1!==f.indexOf("audio/")?`${n}sound-32.svg`:-1!==f.indexOf("video/")?`${n}video-32.svg`:-1!==f.indexOf("msexcel")||-1!==f.indexOf("ms-excel")||-1!==f.indexOf("spreadsheetml")?`${n}excel-32.svg`:-1!==f.indexOf("msword")||-1!==f.indexOf("ms-word")||-1!==f.indexOf("wordprocessingml")?`${n}word-32.svg`:-1!==f.indexOf("powerpoint")||
-1!==f.indexOf("presentationml")?`${n}report-32.svg`:`${n}generic-32.svg`:`${n}generic-32.svg`};h.isSupportedImage=function(f){f=f.toLowerCase();return"image/bmp"===f||"image/emf"===f||"image/exif"===f||"image/gif"===f||"image/x-icon"===f||"image/jpeg"===f||"image/png"===f||"image/tiff"===f||"image/x-wmf"===f};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(h,k,f,n,x,I,z,G){n=function(E){function u(m){m=E.call(this,m)||this;m.description=null;m.title=null;return m}h._inheritsLoose(u,E);return u}(G);k.__decorate([f.property()],n.prototype,"description",void 0);k.__decorate([f.property()],n.prototype,"title",void 0);return n=k.__decorate([z.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],n)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){n=function(c){function g(b,p){b=c.call(this,b,p)||this;b.description=null;b.headingLevel=2;b.title=null;return b}h._inheritsLoose(g,c);var e=g.prototype;e.render=function(){return d.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};e.renderTitle=function(){const {title:b}=this;return b?d.tsx(E.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},b):null};e.renderDescription=function(){const {description:b}=
this;return b?d.tsx("div",{key:"description",class:"esri-feature-element-info__description"},b):null};return g}(G);k.__decorate([f.property()],n.prototype,"description",void 0);k.__decorate([f.property()],n.prototype,"headingLevel",void 0);k.__decorate([f.property()],n.prototype,"title",void 0);return n=k.__decorate([z.subclass("esri.widgets.Feature.support.FeatureElementInfo")],n)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(h,k,f,n,x,I){const z={heading:"esri-widget__heading"};h.CSS=z;h.Heading=function(G,E){const u=`h${k.clamp(Math.ceil(G.level),1,6)}`;delete G.level;return I.tsx(u,{...G,class:f.classes(z.heading,G.class)},E)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c){n=function(g){function e(p,w){p=g.call(this,p,w)||this;p.creator=null;p.graphic=null;p.viewModel=null;p._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(t=>{m.shouldOpenInNewTab(t.href)&&!t.hasAttribute("target")&&t.setAttribute("target","_blank")})};return p}h._inheritsLoose(e,g);var b=e.prototype;b.renderLoading=function(){return c.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},c.tsx("div",{class:"esri-feature-content__loader"}))};
b.renderCreated=function(){var p;const w=null==(p=this.viewModel)?void 0:p.created;return w?w instanceof HTMLElement?c.tsx("div",{key:w,bind:w,afterCreate:this._attachToNode}):d.isWidget(w)?c.tsx("div",{key:w},!w.destroyed&&w.render()):c.tsx("div",{key:w,innerHTML:w,afterCreate:this._addTargetToAnchors}):null};b.render=function(){var p;const w=null==(p=this.viewModel)?void 0:p.state;return c.tsx("div",{class:"esri-feature-content"},"loading"===w?this.renderLoading():this.renderCreated())};b._attachToNode=
function(p){p.appendChild(this)};return e}(E);k.__decorate([f.aliasOf("viewModel.creator")],n.prototype,"creator",void 0);k.__decorate([f.aliasOf("viewModel.graphic")],n.prototype,"graphic",void 0);k.__decorate([z.property({type:u})],n.prototype,"viewModel",void 0);return n=k.__decorate([G.subclass("esri.widgets.Feature.FeatureContent")],n)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){n=function(c){function g(b){var p=c.call(this,b)||this;p._loadingPromise=null;p.created=null;p.creator=null;p.destroyer=null;p.graphic=null;p.handles.add(I.init(h._assertThisInitialized(p),"creator",w=>{p._destroyContent();p._createContent(w)}));return p}h._inheritsLoose(g,c);var e=g.prototype;e.destroy=function(){this._destroyContent()};e._destroyContent=function(){const {created:b,graphic:p,destroyer:w}=this;b&&(d.graphicCallback(w,{graphic:p}).catch(()=>null),
this._set("created",null))};e._createContent=function(){var b=h._asyncToGenerator(function*(p){var {graphic:w}=this;this._loadingPromise=p=d.graphicCallback(p,{graphic:w}).catch(()=>null);this.notifyChange("state");w=yield p;p===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",w))});return function(p){return b.apply(this,arguments)}}();h._createClass(g,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return g}(x.HandleOwnerMixin(n));
k.__decorate([z.property({readOnly:!0})],n.prototype,"created",void 0);k.__decorate([z.property()],n.prototype,"creator",void 0);k.__decorate([z.property()],n.prototype,"destroyer",void 0);k.__decorate([z.property({type:f})],n.prototype,"graphic",void 0);k.__decorate([z.property({readOnly:!0})],n.prototype,"state",null);return n=k.__decorate([m.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b){x=function(p){function w(t,q){t=p.call(this,t,q)||this;t.viewModel=new c;return t}h._inheritsLoose(w,p);var r=w.prototype;r.initialize=function(){f.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};r.destroy=function(){var t;null==(t=this._contentWidget)?void 0:t.destroy();this._contentWidget=null};r.renderLoading=function(){return b.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},b.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};r.render=function(){var t;const {state:q}=this.viewModel;return b.tsx("div",{class:"esri-feature-expression"},"loading"===q?this.renderLoading():"disabled"===q?null:null==(t=this._contentWidget)?void 0:t.render())};r._setupExpressionWidget=function(){var t;const {contentElementViewModel:q,contentElement:B}=this.viewModel,A=null==B?void 0:B.type;null==(t=this._contentWidget)?void 0:t.destroy();this._contentWidget=null;this._contentWidget=q?"fields"===A?new m({viewModel:q}):
"media"===A?new d({viewModel:q}):"text"===A?new u({viewModel:q}):null:null;this.scheduleRender()};return w}(E);k.__decorate([n.property({type:c})],x.prototype,"viewModel",void 0);return x=k.__decorate([G.subclass("esri.widgets.Feature.FeatureExpression")],x)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p){x=function(w){function r(q,B){q=w.call(this,q,B)||this;q._featureElementInfo=null;q.attributes=null;q.description=null;q.expressionInfos=null;q.fieldInfos=null;q.title=null;q.viewModel=new m;q.messages=null;q.messagesURIUtils=null;return q}h._inheritsLoose(r,w);var t=r.prototype;t.initialize=function(){this._featureElementInfo=new d;f.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};t.destroy=function(){this._featureElementInfo.destroy()};
t.renderFieldInfo=function(q,B){var {attributes:A}=this.viewModel;const l=q.fieldName,F=q.label||l;A=A?null==A[l]?"":A[l]:"";q=!(!q.format||!q.format.dateFormat);A="number"!==typeof A||q?c.autoLink(this.messagesURIUtils,A):this._forceLTR(A);q={["esri-feature-fields__field-data--date"]:q};return p.tsx("tr",{key:`fields-element-info-row-${l}-${B}`},p.tsx("th",{key:`fields-element-info-row-header-${l}-${B}`,class:"esri-feature-fields__field-header",innerHTML:F}),p.tsx("td",{key:`fields-element-info-row-data-${l}-${B}`,
class:this.classes("esri-feature-fields__field-data",q),innerHTML:A}))};t.renderFields=function(){const {formattedFieldInfos:q}=this.viewModel;return null!=q&&q.length?p.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},p.tsx("tbody",null,q.map((B,A)=>this.renderFieldInfo(B,A)))):null};t.render=function(){var q;return p.tsx("div",{class:"esri-feature-fields"},null==(q=this._featureElementInfo)?void 0:q.render(),this.renderFields())};t._setupFeatureElementInfo=function(){const {description:q,
title:B}=this;this._featureElementInfo.set({description:q,title:B})};t._forceLTR=function(q){return`&lrm;${q}`};return r}(u);k.__decorate([n.aliasOf("viewModel.attributes")],x.prototype,"attributes",void 0);k.__decorate([n.aliasOf("viewModel.description")],x.prototype,"description",void 0);k.__decorate([n.aliasOf("viewModel.expressionInfos")],x.prototype,"expressionInfos",void 0);k.__decorate([n.aliasOf("viewModel.fieldInfos")],x.prototype,"fieldInfos",void 0);k.__decorate([n.aliasOf("viewModel.title")],
x.prototype,"title",void 0);k.__decorate([G.property({type:m})],x.prototype,"viewModel",void 0);k.__decorate([G.property(),e.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);k.__decorate([G.property(),e.messageBundle("esri/widgets/support/t9n/uriUtils")],x.prototype,"messagesURIUtils",void 0);return x=k.__decorate([E.subclass("esri.widgets.Feature.FeatureFields")],x)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m){f=function(d){function c(g){g=d.call(this,g)||this;g.attributes=null;g.expressionInfos=null;g.description=null;g.fieldInfos=null;g.title=null;return g}h._inheritsLoose(c,d);h._createClass(c,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:g,fieldInfos:e}=this,b=[];null==e?void 0:e.forEach(p=>{if(!p.hasOwnProperty("visible")||p.visible)p=p.clone(),p.label=m.getFieldInfoLabel(p,g),b.push(p)});return b}}]);return c}(f);k.__decorate([n.property()],f.prototype,
"attributes",void 0);k.__decorate([n.property({type:[E]})],f.prototype,"expressionInfos",void 0);k.__decorate([n.property()],f.prototype,"description",void 0);k.__decorate([n.property({type:[u]})],f.prototype,"fieldInfos",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"formattedFieldInfos",null);k.__decorate([n.property()],f.prototype,"title",void 0);return f=k.__decorate([G.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],f)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(h,k){function f(x){let I=null;n.some(z=>{z.pattern.test(x)&&(I=z);return!!I});return I}const n=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];h.autoLink=function(x,I){if("string"!==typeof I||!I)return I;const z=f(I);if(!z)return I;const G=I.match(z.pattern);
x=k.replace(k.replace(z.label,{messages:x,hierPart:G&&G[2]}),{appName:z.appName});return I.replace(z.pattern,`<a${z.target?` target="${z.target}"`:""} href="$1"${"_blank"===z.target?' rel\x3d"noreferrer"':""}>${x}</a>`)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r){I=function(t){function q(A,l){var F=t.call(this,A,l)||this;F._refreshTimer=null;F._refreshIntervalInfo=null;F._featureElementInfo=null;F.attributes=null;F.activeMediaInfoIndex=null;F.description=null;F.fieldInfoMap=null;F.layer=null;F.mediaInfos=null;F.popupTemplate=null;F.relatedInfos=null;F.title=null;F.viewModel=new d;F.messages=null;F._getChartDependencies=function(){var K=h._asyncToGenerator(function*(R){const W=yield e.loadChartsModule();var {viewModel:V}=
h._assertThisInitialized(F);V&&({activeMediaInfo:V}=V,F._renderChart({chartDiv:R,mediaInfo:V,chartsModule:W}))});return function(R){return K.apply(this,arguments)}}();return F}h._inheritsLoose(q,t);var B=q.prototype;B.initialize=function(){this._featureElementInfo=new c;this.own(n.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),n.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};B.destroy=function(){this._clearMediaRefreshTimer();
this._featureElementInfo.destroy()};B.render=function(){var A;return r.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(A=this._featureElementInfo)?void 0:A.render(),this.renderMedia())};B.renderMedia=function(){const {formattedMediaInfoCount:A}=this.viewModel;return A?r.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};B.renderImageMediaInfo=
function(A){var {_refreshIntervalInfo:l}=this;const {activeMediaInfoIndex:F,formattedMediaInfoCount:K}=this.viewModel,{value:R,refreshInterval:W,altText:V,title:U,type:M}=A,{sourceURL:P,linkURL:ba}=R;A=g.shouldOpenInNewTab(ba)?"_blank":"_self";const J="_blank"===A?"noreferrer":"";l=W?l:null;l=r.tsx("img",{alt:V||U,key:`media-${M}-${F}-${K}-${l?l.timestamp:0}`,src:l?l.sourceURL:P});return(A=ba?r.tsx("a",{title:U,href:ba,rel:J,target:A},l):null)?A:l};B.renderChartMediaInfo=function(A){const {activeMediaInfoIndex:l,
formattedMediaInfoCount:F}=this.viewModel;return r.tsx("div",{key:`media-${A.type}-${l}-${F}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};B.renderMediaInfoType=function(){const {activeMediaInfo:A}=this.viewModel;return A?"image"===A.type?this.renderImageMediaInfo(A):-1!==A.type.indexOf("chart")?this.renderChartMediaInfo(A):null:null};B.renderMediaInfo=function(){var {activeMediaInfo:A}=this.viewModel;if(!A)return null;const l=A.title?r.tsx("div",{key:"media-title",
class:"esri-feature-media__item-title",innerHTML:A.title}):null;A=A.caption?r.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:A.caption}):null;return r.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},r.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),l,A)};B.renderMediaPageButton=function(A){if(2>this.viewModel.formattedMediaInfoCount)return null;const l=(A="previous"===A)?this.messages.previous:
this.messages.next,F=A?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),K=A?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),R=A?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return r.tsx("button",{type:"button",key:A?"media-previous":"media-next",title:l,"aria-label":l,tabIndex:0,class:F,bind:this,onclick:A?this._previous:this._next},r.tsx("span",{"aria-hidden":"true",class:K}),r.tsx("span",{"aria-hidden":"true",class:R}))};B._setupFeatureElementInfo=function(){const {description:A,title:l}=this;this._featureElementInfo.set({description:A,title:l})};B._next=function(){this.viewModel.next()};
B._previous=function(){this.viewModel.previous()};B._handleMediaKeyup=function(A){const l=f.eventKey(A);"ArrowLeft"===l&&(A.stopPropagation(),this.viewModel.previous());"ArrowRight"===l&&(A.stopPropagation(),this.viewModel.next())};B._renderChart=function(A){const {chartsModule:l,chartDiv:F,mediaInfo:K}=A,{value:R,type:W}=K,{am4core:V}=l,U=e.getColorSet(V);b.isDarkTheme()&&V.useTheme(l.am4themes_dark);V.useTheme(l.am4themes_animated);V.useTheme(function(M){M instanceof V.ColorSet&&U&&(M.list=U)});
A="pie-chart"===W?this._createPieChart(A):this._createXYChart(A);F.setAttribute("aria-label",K.altText||K.title);A.data=R.series.map(M=>({tooltip:M.tooltip,value:M.value})).filter(M=>"pie-chart"===W?0<M.value:!0)};B._customizeChartTooltip=function(A,l){A.label.wrap=!0;A.label.maxWidth=200;A.autoTextColor=!1;A.getFillFromObject=!1;A.label.fill=l.color("#ffffff");A.background.fill=l.color({r:0,g:0,b:0,a:.7})};B._createPieChart=function(A){const {chartDiv:l,chartsModule:F}=A,{am4core:K,am4charts:R}=
F;A=K.create(l,R.PieChart);A.rtl=b.isRTL(this.container);const W=A.series.push(new R.PieSeries);W.labels.template.disabled=!0;W.ticks.template.disabled=!0;W.dataFields.value="value";W.dataFields.category="tooltip";this._customizeChartTooltip(W.tooltip,K);return A};B._getMinSeriesValue=function(A){let l=0;A.forEach(F=>l=Math.min(F.value,l));return l};B._createColumnChart=function(A,l){const {chartsModule:F,mediaInfo:K}=l;({value:l}=K);const {am4core:R,am4charts:W}=F,V=A.xAxes.push(new W.CategoryAxis);
V.dataFields.category="tooltip";V.renderer.labels.template.disabled=!0;this._customizeChartTooltip(V.tooltip,R);V.tooltip.events.on("sizechanged",()=>{V.tooltip.dy=-V.tooltip.contentHeight});var U=A.yAxes.push(new W.ValueAxis);const M=U.renderer.labels.template;U.renderer.minLabelPosition=.05;U.renderer.maxLabelPosition=.95;U.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(U.tooltip,R);M.wrap=!0;U=A.series.push(new W.ColumnSeries);U.dataFields.valueY="value";U.dataFields.categoryX=
"tooltip";A.cursor=new W.XYCursor;15<l.series.length&&(A.scrollbarX=new R.Scrollbar)};B._createBarChart=function(A,l){const {chartsModule:F,mediaInfo:K}=l;({value:l}=K);const {am4core:R,am4charts:W}=F,V=A.yAxes.push(new W.CategoryAxis);V.dataFields.category="tooltip";V.renderer.inversed=!0;V.renderer.labels.template.disabled=!0;this._customizeChartTooltip(V.tooltip,R);V.tooltip.events.on("sizechanged",()=>{V.tooltip.dx=V.tooltip.contentWidth});var U=A.xAxes.push(new W.ValueAxis);const M=U.renderer.labels.template;
U.renderer.minLabelPosition=.05;U.renderer.maxLabelPosition=.95;U.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(U.tooltip,R);M.wrap=!0;U=A.series.push(new W.ColumnSeries);U.dataFields.valueX="value";U.dataFields.categoryY="tooltip";A.cursor=new W.XYCursor;15<l.series.length&&(A.scrollbarY=new R.Scrollbar)};B._createLineChart=function(A,l){const {chartsModule:F,mediaInfo:K}=l;({value:l}=K);const {am4core:R,am4charts:W}=F,V=A.xAxes.push(new W.CategoryAxis);V.dataFields.category=
"tooltip";V.renderer.labels.template.disabled=!0;this._customizeChartTooltip(V.tooltip,R);V.tooltip.events.on("sizechanged",()=>{V.tooltip.dy=-V.tooltip.contentHeight});var U=A.yAxes.push(new W.ValueAxis);const M=U.renderer.labels.template;U.renderer.minLabelPosition=.05;U.renderer.maxLabelPosition=.95;U.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(U.tooltip,R);M.wrap=!0;U=A.series.push(new W.LineSeries);U.dataFields.categoryX="tooltip";U.dataFields.valueY="value";A.cursor=new W.XYCursor;
15<l.series.length&&(A.scrollbarX=new R.Scrollbar)};B._createXYChart=function(A){const {chartDiv:l,chartsModule:F,mediaInfo:K}=A,{type:R}=K,{am4core:W,am4charts:V}=F,U=W.create(l,V.XYChart);U.rtl=b.isRTL(this.container);"column-chart"===R&&this._createColumnChart(U,A);"bar-chart"===R&&this._createBarChart(U,A);"line-chart"===R&&this._createLineChart(U,A);return U};B._clearMediaRefreshTimer=function(){const {_refreshTimer:A}=this;A&&(clearTimeout(A),this._refreshTimer=null)};B._updateMediaInfoTimestamp=
function(A){const l=Date.now();this._refreshIntervalInfo={timestamp:l,sourceURL:this._getImageSource(A,l)};this.scheduleRender()};B._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:A}=this.viewModel;A&&"image"===A.type&&A.refreshInterval&&this._setRefreshTimeout(A)};B._setRefreshTimeout=function(A){const {refreshInterval:l,value:F}=A;l&&(A=6E4*l,this._updateMediaInfoTimestamp(F.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(F.sourceURL)},
A))};B._getImageSource=function(A,l){const F=-1!==A.indexOf("?")?"\x26":"?",[K,R=""]=A.split("#");return`${K}${F}timestamp=${l}${R?"#":""}${R}`};return q}(m);k.__decorate([x.aliasOf("viewModel.attributes")],I.prototype,"attributes",void 0);k.__decorate([x.aliasOf("viewModel.activeMediaInfoIndex")],I.prototype,"activeMediaInfoIndex",void 0);k.__decorate([x.aliasOf("viewModel.description")],I.prototype,"description",void 0);k.__decorate([x.aliasOf("viewModel.fieldInfoMap")],I.prototype,"fieldInfoMap",
void 0);k.__decorate([x.aliasOf("viewModel.layer")],I.prototype,"layer",void 0);k.__decorate([x.aliasOf("viewModel.mediaInfos")],I.prototype,"mediaInfos",void 0);k.__decorate([x.aliasOf("viewModel.popupTemplate")],I.prototype,"popupTemplate",void 0);k.__decorate([x.aliasOf("viewModel.relatedInfos")],I.prototype,"relatedInfos",void 0);k.__decorate([x.aliasOf("viewModel.title")],I.prototype,"title",void 0);k.__decorate([E.property({type:d})],I.prototype,"viewModel",void 0);k.__decorate([E.property(),
p.messageBundle("esri/widgets/Feature/t9n/Feature")],I.prototype,"messages",void 0);return I=k.__decorate([u.subclass("esri.widgets.Feature.FeatureMedia")],I)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){f=function(c){function g(b){b=c.call(this,b)||this;b.activeMediaInfoIndex=0;b.attributes=null;b.description=null;b.fieldInfoMap=null;b.formattedAttributes=null;b.expressionAttributes=null;b.layer=null;b.mediaInfos=null;b.popupTemplate=null;b.relatedInfos=null;b.title=null;return b}h._inheritsLoose(g,c);var e=g.prototype;e.setActiveMedia=function(b){this._setContentElementMedia(b)};e.next=function(){this._pageContentElementMedia(1)};e.previous=function(){this._pageContentElementMedia(-1)};
e._setContentElementMedia=function(b){const {formattedMediaInfoCount:p}=this;this.activeMediaInfoIndex=(b+p)%p};e._pageContentElementMedia=function(b){const {activeMediaInfoIndex:p}=this;this._setContentElementMedia(p+b)};e._formatMediaInfos=function(){const {attributes:b,mediaInfos:p,formattedAttributes:w,expressionAttributes:r,fieldInfoMap:t,layer:q}=this;return null==p?void 0:p.map(B=>{B=null==B?void 0:B.clone();if(!B)return null;B.title=m.substituteFieldsInLinksAndAttributes({attributes:b,fieldInfoMap:t,
globalAttributes:w,expressionAttributes:r,layer:q,text:B.title});B.caption=m.substituteFieldsInLinksAndAttributes({attributes:b,fieldInfoMap:t,globalAttributes:w,expressionAttributes:r,layer:q,text:B.caption});B.altText=m.substituteFieldsInLinksAndAttributes({attributes:b,fieldInfoMap:t,globalAttributes:w,expressionAttributes:r,layer:q,text:B.altText});if("image"===B.type){var {value:A}=B;this._setImageValue({value:A,formattedAttributes:w,layer:q});return B.value.sourceURL?B:void 0}return"pie-chart"===
B.type||"line-chart"===B.type||"column-chart"===B.type||"bar-chart"===B.type?({value:A}=B,this._setChartValue({value:A,chartType:B.type,attributes:b,formattedAttributes:w,layer:q}),B):null}).filter(Boolean)};e._setImageValue=function(b){const {fieldInfoMap:p}=this,{value:w,formattedAttributes:r,layer:t}=b,{linkURL:q,sourceURL:B}=w;B&&(b=m.fixTokens(B,t),w.sourceURL=m.substituteAttributes({formattedAttributes:r,template:b,fieldInfoMap:p}));q&&(b=m.fixTokens(q,t),w.linkURL=m.substituteAttributes({formattedAttributes:r,
template:b,fieldInfoMap:p}))};e._setChartValue=function(b){const {value:p,attributes:w,formattedAttributes:r,chartType:t,layer:q}=b,{popupTemplate:B,relatedInfos:A}=this,{fields:l,normalizeField:F}=p;p.fields=m.getFixedFieldNames(l,q);F&&(p.normalizeField=m.getFixedFieldName(F,q));if(l.some(R=>!!(null!=r[R]||m.isRelatedField(R)&&A.size))){var K=null==B?void 0:B.fieldInfos;l.forEach(R=>{m.isRelatedField(R)?p.series=[...p.series,...this._getRelatedChartInfos({fieldInfos:K,fieldName:R,formattedAttributes:r,
chartType:t,value:p})]:(R=this._getChartOption({value:p,attributes:w,chartType:t,formattedAttributes:r,fieldName:R,fieldInfos:K}),p.series.push(R))})}};e._getRelatedChartInfos=function(b){var p;const {fieldInfos:w,fieldName:r,formattedAttributes:t,chartType:q,value:B}=b,A=[];b=d.getRelatedFieldInfo(r);const {layerId:l,fieldName:F}=b;b=null==(p=this.relatedInfos)?void 0:p.get(l.toString());if(!b)return A;const {relatedFeatures:K,relation:R}=b;if(!R||!K)return A;({cardinality:p}=R);K.forEach(W=>{const {attributes:V}=
W;V&&Object.keys(V).forEach(U=>{U===F&&A.push(this._getChartOption({value:B,attributes:V,formattedAttributes:t,fieldName:r,chartType:q,relatedFieldName:U,fieldInfos:w}))})});return"one-to-many"===p||"many-to-many"===p?A:[A[0]]};e._getTooltip=function({label:b,value:p,chartType:w}){return"pie-chart"===w?b:`${b}: ${p}`};e._getChartOption=function(b){const {value:p,attributes:w,formattedAttributes:r,fieldName:t,relatedFieldName:q,fieldInfos:B,chartType:A}=b;var {layer:l}=this;const {normalizeField:F,
tooltipField:K}=p;var R=F?m.isRelatedField(F)?w[d.getRelatedFieldInfo(F).fieldName]:w[F]:null;b=q&&void 0!==w[q]?w[q]:void 0!==w[t]?w[t]:r[t];const W=void 0===b?null:b&&R?b/R:b;b=new u({value:W});if(m.isRelatedField(t)){var V=d.getRelatedFieldInfo(t);var U=d.getRelatedFieldInfo(K);U=U?U.fieldName:null;l=m.formatValueToFieldInfo(W,{fieldInfos:B,fieldName:q,layer:l,preventPlacesFormatting:!!R});V=V?V.label||V.fieldName:q;b.tooltip=this._getTooltip({label:U&&void 0!==w[U]?w[U]:V,value:l,chartType:A});
return b}R=m.getFieldInfo(B,t);l=m.getFixedFieldName(t,l);R=K&&void 0!==r[K]?r[K]:m.getFieldInfoLabel(R||new E({fieldName:l}),null==(V=this.popupTemplate)?void 0:V.expressionInfos);b.tooltip=this._getTooltip({label:R,value:r[l],chartType:A});return b};h._createClass(g,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return g}(f);k.__decorate([n.property()],f.prototype,"activeMediaInfoIndex",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"activeMediaInfo",null);k.__decorate([n.property()],f.prototype,"attributes",void 0);k.__decorate([n.property()],f.prototype,"description",void 0);k.__decorate([n.property()],f.prototype,"fieldInfoMap",void 0);k.__decorate([n.property()],f.prototype,"formattedAttributes",void 0);k.__decorate([n.property()],f.prototype,"expressionAttributes",void 0);k.__decorate([n.property({readOnly:!0})],
f.prototype,"formattedMediaInfos",null);k.__decorate([n.property()],f.prototype,"layer",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"formattedMediaInfoCount",null);k.__decorate([n.property()],f.prototype,"mediaInfos",void 0);k.__decorate([n.property()],f.prototype,"popupTemplate",void 0);k.__decorate([n.property()],f.prototype,"relatedInfos",void 0);k.__decorate([n.property()],f.prototype,"title",void 0);return f=k.__decorate([G.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
f)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(h,k,f,n,x,I,z,G,E,u,m,d){function c(A,l){if(!l.relationships)return null;let F=null;
({relationships:l}=l);l.some(K=>K.id===parseInt(A,10)?(F=K,!0):!1);return F}function g({originRelationship:A,relationships:l,layerId:F}){let K;l&&l.some(R=>{`${R.relatedTableId}`===F&&R.id===A.id&&(K=R);return!!K});return K}function e(A,l){l=l.toLowerCase();for(const F in A)if(F.toLowerCase()===l)return A[F];return null}function b(A,l,F,K){const R=new E;R.outFields=["*"];R.relationshipId="number"===typeof l.id?l.id:parseInt(l.id,10);R.objectIds=[A.attributes[F.objectIdField]];return F.queryRelatedFeatures(R,
K)}function p(A,l,F){let K=0;const R=[];for(;K<l.length;)R.push(`${A} IN (${l.slice(K,F+K)})`),K+=F;return R.join(" OR ")}function w(A,l,F,K){return r.apply(this,arguments)}function r(){r=k._asyncToGenerator(function*(A,l,F,K){var R=F.layerId.toString();const {layerInfo:W,queryTask:V,relation:U,relatedFields:M,outStatistics:P}=l;R=g({originRelationship:U,relationships:W.relationships,layerId:R});if(R.relationshipTableId&&R.keyFieldInRelationshipTable){F=(yield b(A,R,F,K))[A.attributes[F.objectIdField]];
if(!F)return null;const ba=F.features.map(J=>J.attributes[W.objectIdField]);if(0<(null==P?void 0:P.length)&&W.supportsStatistics)return l=new G,l.where=p(W.objectIdField,ba,1E3),l.outFields=M,l.outStatistics=P,l={features:Promise.resolve(F),statsFeatures:V.execute(l)},I.eachAlways(l)}return(R=null==R?void 0:R.keyField)?(F=z.isNumericField(t(W.fields,R)),A=e(A.attributes,U.keyField),R=F?`${R}=${A}`:`${R}='${A}'`,A=V.execute(new G({where:R,outFields:l.relatedFields}),K),l=l.outStatistics&&0<l.outStatistics.length&&
W.supportsStatistics?V.execute(new G({where:R,outFields:l.relatedFields,outStatistics:l.outStatistics}),K):null,K={features:A},l&&(K.statsFeatures=l),I.eachAlways(K)):null});return r.apply(this,arguments)}function t(A,l){if(null!=A){l=l.toLowerCase();for(const F of A)if(F&&F.name.toLowerCase()===l)return F}return null}const q=x.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),B=new Map;h.createRelatedInfo=function(A,l){if(A=c(A,l)){var F=`${l.url}/${A.relatedTableId}`;l=new m({url:F,
sourceSpatialReference:l.spatialReference});return{url:F,queryTask:l,relation:A,relatedFields:[],outStatistics:[]}}};h.getDestinationRelation=g;h.getRelatedFieldInfo=function(A){if(!d.isRelatedField(A))return null;const [l,F]=A.split("/").slice(1);return{layerId:l,fieldName:F}};h.queryLayerInfos=function({relatedInfos:A,layer:l},F){const K={};A.forEach((R,W)=>{({relation:R}=R);if(!R)throw W=new n("relation-required","A relation is required on a layer to retrieve related records."),q.error(W),W;({relatedTableId:R}=
R);if("number"!==typeof R)throw W=new n("A related table ID is required on a layer to retrieve related records."),q.error(W),W;R=`${l.url}/${R}`;const V=B.get(R),U=V?V:f(R,{query:{f:"json"},signal:F&&F.signal});V||B.set(R,U);K[W]=U});return I.eachAlways(K)};h.queryRelatedFeatures=function({graphic:A,relatedInfos:l,layer:F},K){const R={};l.forEach((W,V)=>{W.layerInfo&&(R[V]=w(A,W,F,K))});return I.eachAlways(R)};h.setRelatedFeatures=function(A,l){if(l&&A){var {features:F,statsFeatures:K}=A;A=F&&F.value;
l.relatedFeatures=A?A.features:[];A=K&&K.value;l.relatedStatsFeatures=A?A.features:[]}};h.updateRelatedInfo=function({relatedInfo:A,fieldName:l,fieldInfo:F}){A.relatedFields.push(l);F.statisticType&&(l=new u({statisticType:F.statisticType,onStatisticField:l,outStatisticFieldName:l}),A.outStatistics.push(l))};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(h,k,f,n,x,I){function z(c){if(!c)return"en-us";if(u.has(c.toLowerCase()))return c.toLowerCase();{c=c.split("-")[0].toLowerCase();let e=null;for(g of u.keys())if(g.startsWith(c)){e=g;break}var g=e}return g||"en-us"}function G(){G=f._asyncToGenerator(function*(c=I.getLocale()){c=z(c);if(m&&c===d)return m;m=(new Promise((g,e)=>h(["../../chunks/index"],g,e))).then(g=>g.index);d=c;try{const [g,e]=yield Promise.all([m,u.get(d)()]);d===c&&(g.am4core.options.defaultLocale=e.default);g.am4core.options.suppressWarnings=
!0;g.am4core.options.autoDispose=!0}catch{return d=m=null}return m});return G.apply(this,arguments)}n="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var E=[{name:"default",colors:[].concat(n.slice(30,39),n.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const u=new Map([["ar",()=>(new Promise((c,g)=>h(["../../chunks/ar2"],c,g))).then(c=>c.ar)],["bg-bg",()=>(new Promise((c,
g)=>h(["../../chunks/bg_BG"],c,g))).then(c=>c.bg_BG)],["bs-ba",()=>(new Promise((c,g)=>h(["../../chunks/bs_BA"],c,g))).then(c=>c.bs_BA)],["ca-es",()=>(new Promise((c,g)=>h(["../../chunks/ca_ES"],c,g))).then(c=>c.ca_ES)],["cs-cz",()=>(new Promise((c,g)=>h(["../../chunks/cs_CZ"],c,g))).then(c=>c.cs_CZ)],["da-dk",()=>(new Promise((c,g)=>h(["../../chunks/da_DK"],c,g))).then(c=>c.da_DK)],["de-de",()=>(new Promise((c,g)=>h(["../../chunks/de_DE"],c,g))).then(c=>c.de_DE)],["de-ch",()=>(new Promise((c,g)=>
h(["../../chunks/de_CH"],c,g))).then(c=>c.de_CH)],["el-gr",()=>(new Promise((c,g)=>h(["../../chunks/el_GR"],c,g))).then(c=>c.el_GR)],["en-us",()=>(new Promise((c,g)=>h(["../../chunks/en_US"],c,g))).then(c=>c.en_US)],["en-ca",()=>(new Promise((c,g)=>h(["../../chunks/en_CA"],c,g))).then(c=>c.en_CA)],["es-es",()=>(new Promise((c,g)=>h(["../../chunks/es_ES"],c,g))).then(c=>c.es_ES)],["et-ee",()=>(new Promise((c,g)=>h(["../../chunks/et_EE"],c,g))).then(c=>c.et_EE)],["fi-fi",()=>(new Promise((c,g)=>h(["../../chunks/fi_FI"],
c,g))).then(c=>c.fi_FI)],["fr-fr",()=>(new Promise((c,g)=>h(["../../chunks/fr_FR"],c,g))).then(c=>c.fr_FR)],["he-il",()=>(new Promise((c,g)=>h(["../../chunks/he_IL"],c,g))).then(c=>c.he_IL)],["hr-hr",()=>(new Promise((c,g)=>h(["../../chunks/hr_HR"],c,g))).then(c=>c.hr_HR)],["hu-hu",()=>(new Promise((c,g)=>h(["../../chunks/hu_HU"],c,g))).then(c=>c.hu_HU)],["id-id",()=>(new Promise((c,g)=>h(["../../chunks/id_ID"],c,g))).then(c=>c.id_ID)],["it-it",()=>(new Promise((c,g)=>h(["../../chunks/it_IT"],c,g))).then(c=>
c.it_IT)],["ja-jp",()=>(new Promise((c,g)=>h(["../../chunks/ja_JP"],c,g))).then(c=>c.ja_JP)],["ko-kr",()=>(new Promise((c,g)=>h(["../../chunks/ko_KR"],c,g))).then(c=>c.ko_KR)],["lt-lt",()=>(new Promise((c,g)=>h(["../../chunks/lt_LT"],c,g))).then(c=>c.lt_LT)],["lv-lv",()=>(new Promise((c,g)=>h(["../../chunks/lv_LV"],c,g))).then(c=>c.lv_LV)],["nb-no",()=>(new Promise((c,g)=>h(["../../chunks/nb_NO"],c,g))).then(c=>c.nb_NO)],["nl-nl",()=>(new Promise((c,g)=>h(["../../chunks/nl_NL"],c,g))).then(c=>c.nl_NL)],
["pl-pl",()=>(new Promise((c,g)=>h(["../../chunks/pl_PL"],c,g))).then(c=>c.pl_PL)],["pt-br",()=>(new Promise((c,g)=>h(["../../chunks/pt_BR"],c,g))).then(c=>c.pt_BR)],["pt-pt",()=>(new Promise((c,g)=>h(["../../chunks/pt_PT"],c,g))).then(c=>c.pt_PT)],["ro-ro",()=>(new Promise((c,g)=>h(["../../chunks/ro_RO"],c,g))).then(c=>c.ro_RO)],["ru-ru",()=>(new Promise((c,g)=>h(["../../chunks/ru_RU"],c,g))).then(c=>c.ru_RU)],["sk-sk",()=>(new Promise((c,g)=>h(["../../chunks/sk_SK"],c,g))).then(c=>c.sk_SK)],["sl-sl",
()=>(new Promise((c,g)=>h(["../../chunks/sl_SL"],c,g))).then(c=>c.sl_SL)],["sr-rs",()=>(new Promise((c,g)=>h(["../../chunks/sr_RS"],c,g))).then(c=>c.sr_RS)],["sv-se",()=>(new Promise((c,g)=>h(["../../chunks/sv_SE"],c,g))).then(c=>c.sv_SE)],["th-th",()=>(new Promise((c,g)=>h(["../../chunks/th_TH"],c,g))).then(c=>c.th_TH)],["tr-tr",()=>(new Promise((c,g)=>h(["../../chunks/tr_TR"],c,g))).then(c=>c.tr_TR)],["uk-ua",()=>(new Promise((c,g)=>h(["../../chunks/uk_UA"],c,g))).then(c=>c.uk_UA)],["vi-vn",()=>
(new Promise((c,g)=>h(["../../chunks/vi_VN"],c,g))).then(c=>c.vi_VN)],["zh-cn",()=>(new Promise((c,g)=>h(["../../chunks/zh_Hans"],c,g))).then(c=>c.zh_Hans)],["zh-hk",()=>(new Promise((c,g)=>h(["../../chunks/zh_Hant"],c,g))).then(c=>c.zh_Hant)],["zh-tw",()=>(new Promise((c,g)=>h(["../../chunks/zh_Hant"],c,g))).then(c=>c.zh_Hant)]]);let m,d;k.getChartLocale=z;k.getColorSet=function(c,g="default"){const e=E.find(b=>b.name===g);return e?e.colors.map(b=>c.color(b)):null};k.loadChartsModule=function(){return G.apply(this,
arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F){x=function(K){function R(W){var V=K.call(this,W)||this;V._abortController=null;V.expressionInfo=null;V.graphic=null;V.contentElement=null;V.contentElementViewModel=null;V.interceptor=null;V.view=null;V._cancelQuery=()=>{const {_abortController:U}=h._assertThisInitialized(V);U&&U.abort();V._abortController=null};V._createVM=()=>{var U,M;const P=null==(U=V.contentElement)?void 0:U.type;null==(M=V.contentElementViewModel)?void 0:M.destroy();
U="fields"===P?new A:"media"===P?new l:"text"===P?new B:null;V._set("contentElementViewModel",U)};V._compile=h._asyncToGenerator(function*(){V._cancelQuery();const U=new AbortController;V._abortController=U;yield V._compileExpression();V._abortController===U&&(V._abortController=null)});V._compileThrottled=z.throttle(V._compile,1,h._assertThisInitialized(V));V._compileExpression=h._asyncToGenerator(function*(){const {expressionInfo:U,graphic:M,interceptor:P,spatialReference:ba,map:J,view:H,_abortController:v}=
h._assertThisInitialized(V);if(U&&M&&ba&&J&&H){var D=yield F.loadArcadeUtils();if(v===V._abortController)if((D=yield F.createCompiledExpression({arcadeUtils:D,expressionInfo:U,graphic:M,interceptor:P,map:J,spatialReference:ba,view:H}))&&"esri.arcade.Dictionary"===D.declaredClass){D=yield n.castAsJsonAsync(D,v.signal);var C=null==D?void 0:D.type;D="media"===C?r.fromJSON(D):"text"===C?t.fromJSON(D):"fields"===C?w.fromJSON(D):null;V._set("contentElement",D)}else V._set("contentElement",null)}else V._set("contentElement",
null)});V.handles.add([G.init(h._assertThisInitialized(V),["expressionInfo","graphic","map","spatialReference","view"],V._compileThrottled),G.init(h._assertThisInitialized(V),"contentElement",V._createVM)]);return V}h._inheritsLoose(R,K);R.prototype.destroy=function(){var W;this._cancelQuery();null==(W=this.contentElementViewModel)?void 0:W.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};h._createClass(R,[{key:"spatialReference",get:function(){var W;return(null==
(W=this.view)?void 0:W.spatialReference)||null},set:function(W){void 0===W?this._clearOverride("spatialReference"):this._override("spatialReference",W)}},{key:"state",get:function(){const {_abortController:W,contentElement:V,contentElementViewModel:U}=this;return W?"loading":V||U?"ready":"disabled"}},{key:"map",get:function(){var W;return(null==(W=this.view)?void 0:W.map)||null},set:function(W){void 0===W?this._clearOverride("map"):this._override("map",W)}}]);return R}(I.HandleOwnerMixin(x));k.__decorate([E.property()],
x.prototype,"_abortController",void 0);k.__decorate([E.property({type:q})],x.prototype,"expressionInfo",void 0);k.__decorate([E.property({type:f})],x.prototype,"graphic",void 0);k.__decorate([E.property({readOnly:!0})],x.prototype,"contentElement",void 0);k.__decorate([E.property({readOnly:!0})],x.prototype,"contentElementViewModel",void 0);k.__decorate([E.property()],x.prototype,"interceptor",void 0);k.__decorate([E.property()],x.prototype,"spatialReference",null);k.__decorate([E.property({readOnly:!0})],
x.prototype,"state",null);k.__decorate([E.property()],x.prototype,"map",null);k.__decorate([E.property()],x.prototype,"view",void 0);return x=k.__decorate([c.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],x)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p){function w(L,Z,la){return""===Z||null===Z||void 0===Z||Z===la||Z===la?L:L=L.split(Z).join(la)}function r(L){return L instanceof fb||L instanceof k||L instanceof gb}function t(L){return B(L)||l(L)||U(L)||A(L)||null===L||L===Qa||"number"===typeof L?!0:!1}function q(L,Z){return void 0===L?Z:L}function B(L){return"string"===typeof L||L instanceof String}function A(L){return"boolean"===typeof L}function l(L){return"number"===typeof L}function F(L){return"number"===
typeof L&&isFinite(L)&&Math.floor(L)===L}function K(L){return L instanceof Array}function R(L){return!0===(L&&L.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===L.declaredRootClass)}function W(L){return!0===(L&&L.declaredRootClass&&"esri.arcade.featureSetCollection"===L.declaredRootClass)}function V(L){return L instanceof f}function U(L){return L instanceof Date}function M(L,Z,la){if(L.length<Z||L.length>la)throw Error("Function called with wrong number of Parameters");}function P(L){return 0>
L?-Math.round(-L):Math.round(L)}function ba(){let L=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){const la=(L+16*Math.random())%16|0;L=Math.floor(L/16);return("x"===Z?la:la&3|8).toString(16)})}function J(L,Z){if(!1===isNaN(L)){if(void 0===Z||null===Z||""===Z)return L.toString();Z=w(Z,"\u2030","");Z=w(Z,"\u00a4","");return e.format(L,{pattern:Z})}return L.toString()}function H(L,Z){L=c.DateTime.fromJSDate(L);return void 0===Z||null===Z||""===Z?L.toISO({suppressMilliseconds:!0}):
L.toFormat(v(Z),{locale:p.getLocale(),numberingSystem:"latn"})}function v(L){L=L.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Z="";const la=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const wa of L.match(la))switch(wa){case "D":Z+="d";break;case "DD":Z+="dd";break;case "DDD":Z+="o";break;case "d":Z+="c";break;case "ddd":Z+="ccc";break;
case "dddd":Z+="cccc";break;case "M":Z+="L";break;case "MM":Z+="LL";break;case "MMM":Z+="LLL";break;case "MMMM":Z+="LLLL";break;case "YY":Z+="yy";break;case "Y":case "YYYY":Z+="yyyy";break;case "Q":Z+="q";break;case "Z":Z+="ZZ";break;case "ZZ":Z+="ZZZ";break;case "S":Z+="'S'";break;case "SS":Z+="'SS'";break;case "SSS":Z+="u";break;case "A":case "a":Z+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Z+=wa;break;default:Z=2<=wa.length&&"["===wa.slice(0,
1)&&"]"===wa.slice(-1)?Z+`'${wa.slice(1,-1)}'`:Z+`'${wa}'`}return Z}function D(L,Z,la){switch(la){case "\x3e":return L>Z;case "\x3c":return L<Z;case "\x3e\x3d":return L>=Z;case "\x3c\x3d":return L<=Z}return!1}function C(L,Z,la){if(null===L){if(null===Z||Z===Qa)return D(null,null,la);if(l(Z))return D(0,Z,la);if(B(Z)||A(Z))return D(0,da(Z),la);if(U(Z))return D(0,Z.getTime(),la)}if(L===Qa){if(null===Z||Z===Qa)return D(null,null,la);if(l(Z))return D(0,Z,la);if(B(Z)||A(Z))return D(0,da(Z),la);if(U(Z))return D(0,
Z.getTime(),la)}else if(l(L)){if(l(Z))return D(L,Z,la);if(A(Z))return D(L,da(Z),la);if(null===Z||Z===Qa)return D(L,0,la);if(B(Z))return D(L,da(Z),la);if(U(Z))return D(L,Z.getTime(),la)}else if(B(L)){if(B(Z))return D(T(L),T(Z),la);if(U(Z))return D(da(L),Z.getTime(),la);if(l(Z))return D(da(L),Z,la);if(null===Z||Z===Qa)return D(da(L),0,la);if(A(Z))return D(da(L),da(Z),la)}else if(U(L)){if(U(Z))return D(L,Z,la);if(null===Z||Z===Qa)return D(L.getTime(),0,la);if(l(Z))return D(L.getTime(),Z,la);if(A(Z)||
B(Z))return D(L.getTime(),da(Z),la)}else if(A(L)){if(A(Z))return D(L,Z,la);if(l(Z))return D(da(L),da(Z),la);if(U(Z))return D(da(L),Z.getTime(),la);if(null===Z||Z===Qa)return D(da(L),0,la);if(B(Z))return D(da(L),da(Z),la)}return!O(L,Z)||"\x3c\x3d"!==la&&"\x3e\x3d"!==la?!1:!0}function O(L,Z){if(L===Z||null===L&&Z===Qa||null===Z&&L===Qa)return!0;if(U(L)&&U(Z))return L.getTime()===Z.getTime();if(L instanceof n||L instanceof x)return L.equalityTest(Z);if(L instanceof u&&Z instanceof u){const la=L.cache._arcadeCacheId,
wa=Z.cache._arcadeCacheId;if(void 0!==la&&null!==la)return la===wa}return void 0!==L&&void 0!==Z&&null!==L&&null!==Z&&"object"===typeof L&&"object"===typeof Z&&(L._arcadeCacheId===Z._arcadeCacheId&&void 0!==L._arcadeCacheId&&null!==L._arcadeCacheId||L._underlyingGraphic===Z._underlyingGraphic&&void 0!==L._underlyingGraphic&&null!==L._underlyingGraphic)?!0:!1}function T(L,Z){if(B(L))return L;if(null===L)return"";if(l(L))return J(L,Z);if(A(L))return L.toString();if(U(L))return H(L,Z);if(L instanceof
G)return JSON.stringify(L.toJSON());if(K(L)){Z=[];for(var la=0;la<L.length;la++)Z[la]=ha(L[la]);return"["+Z.join(",")+"]"}if(L instanceof f){Z=[];for(la=0;la<L.length();la++)Z[la]=ha(L.get(la));return"["+Z.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():r(L)?"object, Function":""}function Q(L){const Z=[];if(!1===K(L))return null;if(L instanceof f){for(var la=0;la<L.length();la++)Z[la]=da(L.get(la));return Z}for(la=0;la<L.length;la++)Z[la]=da(L[la]);return Z}
function Y(L,Z){if(B(L))return L;if(null===L)return"";if(l(L))return J(L,Z);if(A(L))return L.toString();if(U(L))return H(L,Z);if(L instanceof G)return L instanceof z?'{"xmin":'+L.xmin.toString()+',"ymin":'+L.ymin.toString()+","+(L.hasZ?'"zmin":'+L.zmin.toString()+",":"")+(L.hasM?'"mmin":'+L.mmin.toString()+",":"")+'"xmax":'+L.xmax.toString()+',"ymax":'+L.ymax.toString()+","+(L.hasZ?'"zmax":'+L.zmax.toString()+",":"")+(L.hasM?'"mmax":'+L.mmax.toString()+",":"")+'"spatialReference":'+na(L.spatialReference)+
"}":na(L.toJSON(),(wa,va)=>wa.key===va.key?0:"spatialReference"===wa.key?1:"spatialReference"===va.key||wa.key<va.key?-1:wa.key>va.key?1:0);if(K(L)){Z=[];for(var la=0;la<L.length;la++)Z[la]=ha(L[la]);return"["+Z.join(",")+"]"}if(L instanceof f){Z=[];for(la=0;la<L.length();la++)Z[la]=ha(L.get(la));return"["+Z.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():r(L)?"object, Function":""}function ha(L){return null===L?"null":A(L)||l(L)||B(L)?JSON.stringify(L):L instanceof
G||L instanceof f||L instanceof Array?Y(L):L instanceof Date?JSON.stringify(H(L,"")):null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():"null"}function da(L,Z){return l(L)?L:null===L||""===L?0:U(L)?NaN:A(L)?L?1:0:K(L)||""===L||void 0===L?NaN:void 0!==Z&&B(L)?(Z=w(Z,"\u2030",""),Z=w(Z,"\u00a4",""),e.parse(L,{pattern:Z})):L===Qa?0:Number(L)}function ka(L){return U(L)?L:B(L)&&(L=pa(L))?L.toJSDate():null}function qa(L){return U(L)?c.DateTime.fromJSDate(L):B(L)?pa(L):null}function pa(L){const Z=
/ (\d\d)/;let la=c.DateTime.fromISO(L);return la.isValid||Z.test(L)&&(L=L.replace(Z,"T$1"),la=c.DateTime.fromISO(L),la.isValid)?la:null}function ea(L){return A(L)?L:B(L)?(L=L.toLowerCase(),"true"===L?!0:!1):l(L)?0===L||isNaN(L)?!1:!0:!1}function ia(L,Z){if(g.isNone(L))return null;if(null===L.spatialReference||void 0===L.spatialReference)L.spatialReference=Z;return L}function ma(L){if(null===L)return null;if(L instanceof u)return"NaN"===L.x||null===L.x||isNaN(L.x)?null:L;if(L instanceof m){if(0===
L.rings.length)return null;for(const Z of L.rings)if(0<Z.length)return L;return null}if(L instanceof d){if(0===L.paths.length)return null;for(const Z of L.paths)if(0<Z.length)return L;return null}return L instanceof E?0===L.points.length?null:L:L instanceof z?"NaN"===L.xmin||null===L.xmin||isNaN(L.xmin)?null:L:null}function sa(L,Z){if(!L||!L.domain)return Z;let la=null;if("string"===L.field.type||"esriFieldTypeString"===L.field.type)Z=T(Z);else{if(null===Z||void 0===Z)return null;if(""===Z)return Z;
Z=da(Z)}for(let wa=0;wa<L.domain.codedValues.length;wa++){const va=L.domain.codedValues[wa];va.code===Z&&(la=va)}return null===la?Z:la.name}function S(L,Z){if(!L||!L.domain)return Z;let la=null;Z=T(Z);for(let wa=0;wa<L.domain.codedValues.length;wa++){const va=L.domain.codedValues[wa];va.name===Z&&(la=va)}return null===la?Z:la.code}function ca(L,Z,la=null,wa){if(!Z||!Z.fields)return null;let va=null;for(let Ra=0;Ra<Z.fields.length;Ra++){const Oa=Z.fields[Ra];Oa.name.toLowerCase()===L.toString().toLowerCase()&&
(va=Oa)}if(null===va)throw Error("Field not found");let Ea,Ia;wa||(wa=la&&Z.typeIdField&&la._field(Z.typeIdField));null!=wa&&Z.types.some(function(Ra){return Ra.id===wa?((Ea=Ra.domains&&Ra.domains[va.name])&&"inherited"===Ea.type&&(Ea=ja(va.name,Z),Ia=!0),!0):!1});Ia||Ea||(Ea=ja(L,Z));return{field:va,domain:Ea}}function ja(L,Z){let la;Z.fields.some(function(wa){wa.name.toLowerCase()===L.toLowerCase()&&(la=wa.domain);return!!la});return la}function na(L,Z){Z||(Z={});"function"===typeof Z&&(Z={cmp:Z});
const la="boolean"===typeof Z.cycles?Z.cycles:!1,wa=Z.cmp&&function(Ea){return function(Ia){return function(Ra,Oa){return Ea({key:Ra,value:Ia[Ra]},{key:Oa,value:Ia[Oa]})}}}(Z.cmp),va=[];return function Ra(Ia){Ia&&Ia.toJSON&&"function"===typeof Ia.toJSON&&(Ia=Ia.toJSON());if(void 0!==Ia){if("number"===typeof Ia)return isFinite(Ia)?""+Ia:"null";if("object"!==typeof Ia)return JSON.stringify(Ia);var Oa;if(Array.isArray(Ia)){var Wa="[";for(Oa=0;Oa<Ia.length;Oa++)Oa&&(Wa+=","),Wa+=Ra(Ia[Oa])||"null";return Wa+
"]"}if(null===Ia)return"null";if(-1!==va.indexOf(Ia)){if(la)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var db=va.push(Ia)-1,ab=Object.keys(Ia).sort(wa&&wa(Ia));Wa="";for(Oa=0;Oa<ab.length;Oa++){const ob=ab[Oa],pb=Ra(Ia[ob]);pb&&(Wa&&(Wa+=","),Wa+=JSON.stringify(ob)+":"+pb)}va.splice(db,1);return"{"+Wa+"}"}}(L)}function ta(L){if(null===L)return null;const Z=[];for(const la of L)la&&(la.declaredClass&&"esri.arcade.Feature"===la.declaredClass||"FeatureSetReader"===
la.type)?Z.push(la.geometry()):Z.push(la);return Z}function xa(L,Z){if(Z instanceof u)L.push(Z.hasZ?Z.hasM?[Z.x,Z.y,Z.z,Z.m]:[Z.x,Z.y,Z.z]:[Z.x,Z.y]);else throw Error("Invalid Argument");}function za(L,Z){if(K(L)||V(L)){let la=!1,wa=!1,va=[];if(K(L)){for(const Ea of L)xa(va,Ea);0<va.length&&(Z=L[0].spatialReference,la=L[0].hasZ,wa=L[0].hasM)}else if(L instanceof x)va=L._elements,0<va.length&&(la=L._hasZ,wa=L._hasM,Z=L.get(0).spatialReference);else if(V(L)){for(const Ea of L.toArray())xa(va,Ea);0<
va.length&&(Z=L.get(0).spatialReference,la=!0===L.get(0).hasZ,wa=!0===L.get(0).hasM)}else throw Error("Invalid Argument");if(0===va.length)return null;!1===b.isClockwise(va,wa,la)&&(va=va.slice(0).reverse());return new m({rings:[va],spatialReference:Z,hasZ:la,hasM:wa})}return L}function ya(L,Z){if(K(L)||V(L)){let la=!1,wa=!1,va=[];if(K(L)){for(const Ea of L)xa(va,Ea);0<va.length&&(Z=L[0].spatialReference,la=!0===L[0].hasZ,wa=!0===L[0].hasM)}else if(L instanceof x)va=L._elements,0<va.length&&(la=L._hasZ,
wa=L._hasM,Z=L.get(0).spatialReference);else if(V(L)){for(const Ea of L.toArray())xa(va,Ea);0<va.length&&(Z=L.get(0).spatialReference,la=!0===L.get(0).hasZ,wa=!0===L.get(0).hasM)}return 0===va.length?null:new d({paths:[va],spatialReference:Z,hasZ:la,hasM:wa})}return L}function Da(L,Z){if(K(L)||V(L)){let la=!1,wa=!1,va=[];if(K(L)){for(const Ea of L)xa(va,Ea);0<va.length&&(Z=L[0].spatialReference,la=!0===L[0].hasZ,wa=!0===L[0].hasM)}else if(L instanceof x)va=L._elements,0<va.length&&(la=L._hasZ,wa=
L._hasM,Z=L.get(0).spatialReference);else if(V(L)){for(const Ea of L.toArray())xa(va,Ea);0<va.length&&(Z=L.get(0).spatialReference,la=!0===L.get(0).hasZ,wa=!0===L.get(0).hasM)}return 0===va.length?null:new E({points:va,spatialReference:Z,hasZ:la,hasM:wa})}return L}function Aa(L,Z=!1){const la=[];if(null===L)return la;if(!0===K(L)){for(var wa=0;wa<L.length;wa++){var va=T(L[wa]);""===va&&!0!==Z||la.push(va)}return la}if(L instanceof f){for(wa=0;wa<L.length();wa++)va=T(L.get(wa)),""===va&&!0!==Z||la.push(va);
return la}return t(L)?(L=T(L),""===L&&!0!==Z||la.push(L),la):[]}function Ka(L){hb++;return 0===hb%100?(hb=0,I.create(Z=>{setTimeout(()=>{Z(L)},0)})):L}function La(L,Z,la){switch(la){case "\x26":return L&Z;case "|":return L|Z;case "^":return L^Z;case "\x3c\x3c":return L<<Z;case "\x3e\x3e":return L>>Z;case "\x3e\x3e\x3e":return L>>>Z}}function Xa(L,Z=null){if(null!=L){if(A(L)||l(L)||B(L))return L;if(L instanceof G)return!0===(null==Z?void 0:Z.keepGeometryType)?L:L.toJSON();if(L instanceof f)return L.toArray().map(la=>
Xa(la,Z));if(L instanceof Array)return L.map(la=>Xa(la,Z));if(L instanceof Date)return L;if(null!==L&&"object"===typeof L&&void 0!==L.castAsJson)return L.castAsJson(Z)}return null}function ib(L,Z,la,wa,va){return Ya(L,Z,la).then(Ea=>{va[wa]=Ea})}function Ya(L,Z=null,la=null){L instanceof f&&(L=L.toArray());if(null!=L){if(t(L)||L instanceof G||L instanceof Date)return I.resolve(Xa(L,la));if(L instanceof Array){const wa=[],va=[];for(const Ea of L)null===Ea||t(Ea)||Ea instanceof G||Ea instanceof Date?
va.push(Xa(Ea,la)):(va.push(null),wa.push(ib(Ea,Z,la,va.length-1,va)));return 0<wa.length?I.all(wa).then(()=>va):I.resolve(va)}if(null!==L&&"object"===typeof L&&void 0!==L.castAsJsonAsync)return L.castAsJsonAsync(Z,la)}return I.resolve(null)}let jb=function(L){this.value=L},kb=function(L){this.value=L},fb=function(L){this.fn=L},gb=function(L,Z){this.paramCount=Z;this.fn=L};const qb=fb,Sa=gb,Qa={type:"VOID"},rb={type:"BREAK"},lb={type:"CONTINUE"};let hb=0;const sb=Object.freeze({__proto__:null,ReturnResultE:jb,
ImplicitResultE:kb,NativeFunctionE:fb,SizzleFunctionE:gb,NativeFunction:qb,ImplicitResult:kb,ReturnResult:jb,SizzleFunction:Sa,voidOperation:Qa,breakResult:rb,continueResult:lb,multiReplace:w,isFunctionParameter:r,isSimpleType:t,defaultUndefined:q,isString:B,isBoolean:A,isNumber:l,isInteger:F,isArray:K,isFeatureSet:R,isFeatureSetCollection:W,isImmutableArray:V,isDate:U,pcCheck:M,absRound:P,generateUUID:ba,formatNumber:J,formatDate:H,standardiseDateFormat:v,greaterThanLessThan:C,equalityTest:O,toString:T,
toNumberArray:Q,toStringExplicit:Y,toNumber:da,toDate:ka,toDateTime:qa,toBoolean:ea,fixSpatialReference:ia,fixNullGeometry:ma,getDomainValue:sa,getDomainCode:S,getDomain:ca,stableStringify:na,autoCastFeatureToGeometry:ta,autoCastArrayOfPointsToPolygon:za,autoCastArrayOfPointsToPolyline:ya,autoCastArrayOfPointsToMultiPoint:Da,toStringArray:Aa,tick:Ka,binaryOperator:La,castAsJson:Xa,castAsJsonAsync:Ya});h.ImplicitResult=kb;h.ImplicitResultE=kb;h.NativeFunction=qb;h.NativeFunctionE=fb;h.ReturnResult=
jb;h.ReturnResultE=jb;h.SizzleFunction=Sa;h.SizzleFunctionE=gb;h.absRound=P;h.autoCastArrayOfPointsToMultiPoint=Da;h.autoCastArrayOfPointsToPolygon=za;h.autoCastArrayOfPointsToPolyline=ya;h.autoCastFeatureToGeometry=ta;h.binaryOperator=La;h.breakResult=rb;h.castAsJson=Xa;h.castAsJsonAsync=Ya;h.continueResult=lb;h.defaultUndefined=q;h.equalityTest=O;h.fixNullGeometry=ma;h.fixSpatialReference=ia;h.formatDate=H;h.formatNumber=J;h.generateUUID=ba;h.getDomain=ca;h.getDomainCode=S;h.getDomainValue=sa;h.greaterThanLessThan=
C;h.isArray=K;h.isBoolean=A;h.isDate=U;h.isFeatureSet=R;h.isFeatureSetCollection=W;h.isFunctionParameter=r;h.isImmutableArray=V;h.isInteger=F;h.isNumber=l;h.isSimpleType=t;h.isString=B;h.lc=sb;h.multiReplace=w;h.pcCheck=M;h.stableStringify=na;h.standardiseDateFormat=v;h.tick=Ka;h.toBoolean=ea;h.toDate=ka;h.toDateTime=qa;h.toNumber=da;h.toNumberArray=Q;h.toString=T;h.toStringArray=Aa;h.toStringExplicit=Y;h.voidOperation=Qa})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(h,
k){this.context=this.definition=null;this.definition=h;this.context=k}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function h(f=[]){this._elements=f}var k=h.prototype;k.length=function(){return this._elements.length};k.get=function(f){return this._elements[f]};k.toArray=function(){const f=[];for(let n=0;n<this.length();n++)f.push(this.get(n));return f};return h}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray",
"./ImmutablePointArray"],function(h,k,f){return function(n){function x(z,G,E,u,m){z=n.call(this,z)||this;z._lazyPath=[];z._hasZ=!1;z._hasM=!1;z._hasZ=E;z._hasM=u;z._spRef=G;z._cacheId=m;return z}h._inheritsLoose(x,n);var I=x.prototype;I.get=function(z){if(void 0===this._lazyPath[z]){const G=this._elements[z];if(void 0===G)return;this._lazyPath[z]=new f(G,this._spRef,this._hasZ,this._hasM,this._cacheId,z)}return this._lazyPath[z]};I.equalityTest=function(z){return z===this?!0:null===z||!1===z instanceof
x?!1:z.getUniqueHash()===this.getUniqueHash()};I.getUniqueHash=function(){return this._cacheId.toString()};return x}(k)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(h,k,f){return function(n){function x(z,G,E,u,m,d){z=n.call(this,z)||this;z._lazyPt=[];z._hasZ=!1;z._hasM=!1;z._spRef=G;z._hasZ=E;z._hasM=u;z._cacheId=m;z._partId=d;return z}h._inheritsLoose(x,n);var I=x.prototype;I.get=function(z){if(void 0===
this._lazyPt[z]){const G=this._elements[z];if(void 0===G)return;const E=this._hasZ,u=this._hasM;let m=null;m=E&&!u?new f(G[0],G[1],G[2],void 0,this._spRef):u&&!E?new f(G[0],G[1],void 0,G[2],this._spRef):E&&u?new f(G[0],G[1],G[2],G[3],this._spRef):new f(G[0],G[1],this._spRef);m.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+z.toString();this._lazyPt[z]=m}return this._lazyPt[z]};I.equalityTest=function(z){return z===this?!0:null===z||!1===z instanceof x?!1:z.getUniqueHash()===
this.getUniqueHash()};I.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return x}(k)})},"esri/chunks/datetime":function(){define(["exports"],function(h){function k(a){return"undefined"===typeof a}function f(a){return"number"===typeof a}function n(a){return"number"===typeof a&&0===a%1}function x(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function I(a,y,N){if(0!==a.length)return a.reduce((X,aa)=>{aa=[y(aa),aa];return X?N(X[0],
aa[0])===X[0]?X:aa:aa},null)[1]}function z(a,y){return y.reduce((N,X)=>{N[X]=a[X];return N},{})}function G(a,y){return Object.prototype.hasOwnProperty.call(a,y)}function E(a,y,N){return n(a)&&a>=y&&a<=N}function u(a,y=2){const N=0>a?"-":"";a=N?-1*a:a;y=a.toString().length<y?("0".repeat(y)+a).slice(-y):a.toString();return`${N}${y}`}function m(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function d(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function c(a){if(!k(a)&&null!==a&&""!==a)return a=
1E3*parseFloat("0."+a),Math.floor(a)}function g(a,y,N=!1){y=10**y;return(N?Math.trunc:Math.round)(a*y)/y}function e(a){return 0===a%4&&(0!==a%100||0===a%400)}function b(a,y){var N=y-1;N=N-12*Math.floor(N/12)+1;return 2===N?e(a+(y-N)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][N-1]}function p(a){let y=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(y=new Date(y),y.setUTCFullYear(y.getUTCFullYear()-1900));return+y}function w(a){var y=a-1;y=(y+Math.floor(y/
4)-Math.floor(y/100)+Math.floor(y/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===y?53:52}function r(a){return 99<a?a:60<a?1900+a:2E3+a}function t(a,y,N,X=null){a=new Date(a);const aa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};X&&(aa.timeZone=X);return(y=(new Intl.DateTimeFormat(N,{timeZoneName:y,...aa})).formatToParts(a).find(fa=>"timezonename"===fa.type.toLowerCase()))?y.value:null}function q(a,y){a=parseInt(a,
10);Number.isNaN(a)&&(a=0);y=parseInt(y,10)||0;y=0>a||Object.is(a,-0)?-y:y;return 60*a+y}function B(a){const y=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(y))throw new Va(`Invalid unit value ${a}`);return y}function A(a,y){const N={};for(const X in a)if(G(a,X)){const aa=a[X];void 0!==aa&&null!==aa&&(N[y(X)]=B(aa))}return N}function l(a,y){const N=Math.trunc(Math.abs(a/60)),X=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(y){case "short":return`${a}${u(N,2)}:${u(X,2)}`;case "narrow":return`${a}${N}${0<
X?`:${X}`:""}`;case "techie":return`${a}${u(N,2)}${u(X,2)}`;default:throw new RangeError(`Value format ${y} is out of range for property format`);}}function F(a){return z(a,["hour","minute","second","millisecond"])}function K(a){switch(a){case "narrow":return[...Fc];case "short":return[...Ob];case "long":return[...Gc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function R(a){switch(a){case "narrow":return[...Hc];
case "short":return[...Pb];case "long":return[...Qb];case "numeric":return"1234567".split("");default:return null}}function W(a){switch(a){case "narrow":return[...Ic];case "short":return[...Jc];case "long":return[...Kc];default:return null}}function V(a,y,N="always",X=!1){const aa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var fa=-1===["hours","minutes",
"seconds"].indexOf(a);if("auto"===N&&fa)switch(N="days"===a,y){case 1:return N?"tomorrow":`next ${aa[a][0]}`;case -1:return N?"yesterday":`last ${aa[a][0]}`;case 0:return N?"today":`this ${aa[a][0]}`}N=Object.is(y,-0)||0>y;y=Math.abs(y);fa=1===y;const oa=aa[a];a=X?fa?oa[1]:oa[2]||oa[1]:fa?aa[a][0]:a;return N?`${y} ${a} ago`:`in ${y} ${a}`}function U(a,y){let N="";for(const X of a)N=X.literal?N+X.val:N+y(X.val);return N}function M(a,y){if(k(a)||null===a)return y;if(a instanceof tb)return a;if("string"===
typeof a){const N=a.toLowerCase();return"local"===N||"system"===N?y:"utc"===N||"gmt"===N?Ta.utcInstance:$a.isValidSpecifier(N)?$a.create(a):Ta.parseSpecifier(N)||new Rb(a)}return f(a)?Ta.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Rb(a)}function P(a,y={}){const N=JSON.stringify([a,y]);let X=Bb[N];X||(X=new Intl.DateTimeFormat(a,y),Bb[N]=X);return X}function ba(a,y={}){const N=JSON.stringify([a,y]);let X=Cb[N];X||(X=new Intl.NumberFormat(a,y),Cb[N]=X);return X}function J(a,
y={}){const {base:N,...X}=y,aa=JSON.stringify([a,X]);let fa=Db[aa];fa||(fa=new Intl.RelativeTimeFormat(a,y),Db[aa]=fa);return fa}function H(a){const y=[];for(let N=1;12>=N;N++){const X=Ca.utc(2016,N,1);y.push(a(X))}return y}function v(a){const y=[];for(let N=1;7>=N;N++){const X=Ca.utc(2016,11,13+N);y.push(a(X))}return y}function D(a,y,N,X,aa){a=a.listingMode(N);return"error"===a?null:"en"===a?X(y):aa(y)}function C(...a){a=a.reduce((y,N)=>y+N.source,"");return RegExp(`^${a}$`)}function O(...a){return y=>
a.reduce(([N,X,aa],fa)=>{const [oa,ra,ua]=fa(y,aa);return[{...N,...oa},X||ra,ua]},[{},null,1]).slice(0,2)}function T(a,...y){if(null==a)return[null,null];for(const [N,X]of y)if(y=N.exec(a))return X(y);return[null,null]}function Q(...a){return(y,N)=>{const X={};let aa;for(aa=0;aa<a.length;aa++)X[a[aa]]=m(y[N+aa]);return[X,null,N+aa]}}function Y(a,y,N){a=a[y];return k(a)?N:m(a)}function ha(a,y){return[{year:Y(a,y),month:Y(a,y+1,1),day:Y(a,y+2,1)},null,y+3]}function da(a,y){return[{hours:Y(a,y,0),minutes:Y(a,
y+1,0),seconds:Y(a,y+2,0),milliseconds:c(a[y+3])},null,y+4]}function ka(a,y){const N=!a[y]&&!a[y+1];a=q(a[y+1],a[y+2]);return[{},N?null:Ta.instance(a),y+3]}function qa(a,y){return[{},a[y]?$a.create(a[y]):null,y+1]}function pa(a){const [y,N,X,aa,fa,oa,ra,ua,Ha]=a,Ba="-"===y[0];a=ua&&"-"===ua[0];const Fa=(Ja,bb=!1)=>void 0!==Ja&&(bb||Ja&&Ba)?-Ja:Ja;return[{years:Fa(d(N)),months:Fa(d(X)),weeks:Fa(d(aa)),days:Fa(d(fa)),hours:Fa(d(oa)),minutes:Fa(d(ra)),seconds:Fa(d(ua),"-0"===ua),milliseconds:Fa(c(Ha),
a)}]}function ea(a,y,N,X,aa,fa,oa){y={year:2===y.length?r(m(y)):m(y),month:Ob.indexOf(N)+1,day:m(X),hour:m(aa),minute:m(fa)};oa&&(y.second=m(oa));a&&(y.weekday=3<a.length?Qb.indexOf(a)+1:Pb.indexOf(a)+1);return y}function ia(a){const [,y,N,X,aa,fa,oa,ra,ua,Ha,Ba,Fa]=a;a=ea(y,aa,X,N,fa,oa,ra);let Ja;Ja=ua?Lc[ua]:Ha?0:q(Ba,Fa);return[a,new Ta(Ja)]}function ma(a){const [,y,N,X,aa,fa,oa,ra]=a;return[ea(y,aa,X,N,fa,oa,ra),Ta.utcInstance]}function sa(a){const [,y,N,X,aa,fa,oa,ra]=a;return[ea(y,ra,N,X,aa,
fa,oa),Ta.utcInstance]}function S(a,y,N=!1){a={values:N?y.values:{...a.values,...y.values||{}},loc:a.loc.clone(y.loc),conversionAccuracy:y.conversionAccuracy||a.conversionAccuracy};return new Ga(a)}function ca(a,y,N,X,aa){a=a[aa][N];var fa=y[N]/a;fa=Math.sign(fa)!==Math.sign(X[aa])&&0!==X[aa]&&1>=Math.abs(fa)?0>fa?Math.floor(fa):Math.ceil(fa):Math.trunc(fa);X[aa]+=fa;y[N]-=fa*a}function ja(a,y){Mc.reduce((N,X)=>{if(k(y[X]))return N;N&&ca(a,y,N,y,X);return X},null)}function na(a,y){a=y.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-
a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Ga.fromMillis(a).as("days"))}function ta(a,y,N){var X=[["years",(ra,ua)=>ua.year-ra.year],["quarters",(ra,ua)=>ua.quarter-ra.quarter],["months",(ra,ua)=>ua.month-ra.month+12*(ua.year-ra.year)],["weeks",(ra,ua)=>{ra=na(ra,ua);return(ra-ra%7)/7}],["days",na]];const aa={};let fa,oa;for(const [ra,ua]of X)0<=N.indexOf(ra)&&(fa=ra,X=ua(a,y),oa=a.plus({[ra]:X}),oa>y?(a=a.plus({[ra]:X-1}),--X):a=oa,aa[ra]=X);return[a,aa,oa,fa]}function xa(a,
y,N,X){let [aa,fa,oa,ra]=ta(a,y,N);a=y-aa;N=N.filter(ua=>0<=["hours","minutes","seconds","milliseconds"].indexOf(ua));0===N.length&&(oa<y&&(oa=aa.plus({[ra]:1})),oa!==aa&&(fa[ra]=(fa[ra]||0)+a/(oa-aa)));y=Ga.fromObject(fa,X);return 0<N.length?Ga.fromMillis(a,X).shiftTo(...N).plus(y):y}function za({numberingSystem:a},y=""){return new RegExp(`${Eb[a||"latn"]}${y}`)}function ya(a,y=N=>N){return{regex:a,deser:([N])=>{{let X=parseInt(N,10);if(isNaN(X)){X="";for(let aa=0;aa<N.length;aa++){const fa=N.charCodeAt(aa);
if(-1!==N[aa].search(Eb.hanidec))X+=Nc.indexOf(N[aa]);else for(const oa in Sb){const [ra,ua]=Sb[oa];fa>=ra&&fa<=ua&&(X+=fa-ra)}}N=parseInt(X,10)}else N=X}return y(N)}}}function Da(a){return a.replace(/\./g,"\\.?").replace(Fb,Tb)}function Aa(a,y){return null===a?null:{regex:RegExp(a.map(Da).join("|")),deser:([N])=>a.findIndex(X=>N.replace(/\./g,"").replace(Fb," ").toLowerCase()===X.replace(/\./g,"").replace(Fb," ").toLowerCase())+y}}function Ka(a,y){return{regex:a,deser:([,N,X])=>q(N,X),groups:y}}
function La(a){return{regex:a,deser:([y])=>y}}function Xa(a,y){const N=za(y),X=za(y,"{2}"),aa=za(y,"{3}"),fa=za(y,"{4}"),oa=za(y,"{6}"),ra=za(y,"{1,2}"),ua=za(y,"{1,3}"),Ha=za(y,"{1,6}"),Ba=za(y,"{1,9}"),Fa=za(y,"{2,4}"),Ja=za(y,"{4,6}"),bb=ub=>({regex:RegExp(ub.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Oc])=>Oc,literal:!0}),mb=(ub=>{if(a.literal)return bb(ub);switch(ub.val){case "G":return Aa(y.eras("short",!1),0);case "GG":return Aa(y.eras("long",!1),0);case "y":return ya(Ha);
case "yy":return ya(Fa,r);case "yyyy":return ya(fa);case "yyyyy":return ya(Ja);case "yyyyyy":return ya(oa);case "M":return ya(ra);case "MM":return ya(X);case "MMM":return Aa(y.months("short",!0,!1),1);case "MMMM":return Aa(y.months("long",!0,!1),1);case "L":return ya(ra);case "LL":return ya(X);case "LLL":return Aa(y.months("short",!1,!1),1);case "LLLL":return Aa(y.months("long",!1,!1),1);case "d":return ya(ra);case "dd":return ya(X);case "o":return ya(ua);case "ooo":return ya(aa);case "HH":return ya(X);
case "H":return ya(ra);case "hh":return ya(X);case "h":return ya(ra);case "mm":return ya(X);case "m":return ya(ra);case "q":return ya(ra);case "qq":return ya(X);case "s":return ya(ra);case "ss":return ya(X);case "S":return ya(ua);case "SSS":return ya(aa);case "u":return La(Ba);case "uu":return La(ra);case "uuu":return ya(N);case "a":return Aa(y.meridiems(),0);case "kkkk":return ya(fa);case "kk":return ya(Fa,r);case "W":return ya(ra);case "WW":return ya(X);case "E":case "c":return ya(N);case "EEE":return Aa(y.weekdays("short",
!1,!1),1);case "EEEE":return Aa(y.weekdays("long",!1,!1),1);case "ccc":return Aa(y.weekdays("short",!0,!1),1);case "cccc":return Aa(y.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ka(new RegExp(`([+-]${ra.source})(?::(${X.source}))?`),2);case "ZZZ":return Ka(new RegExp(`([+-]${ra.source})(${X.source})?`),2);case "z":return La(/[a-z_+-/]{1,256}?/i);default:return bb(ub)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};mb.token=a;return mb}function ib(a){return[`^${a.map(y=>
y.regex).reduce((y,N)=>`${y}(${N.source})`,"")}$`,a]}function Ya(a,y,N){if(a=a.match(y)){y={};let X=1;for(const aa in N)if(G(N,aa)){const fa=N[aa],oa=fa.groups?fa.groups+1:1;!fa.literal&&fa.token&&(y[fa.token.val[0]]=fa.deser(a.slice(X,X+oa)));X+=oa}return[a,y]}return[a,{}]}function jb(a){const y=X=>{switch(X){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";
case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let N;N=k(a.Z)?k(a.z)?null:$a.create(a.z):new Ta(a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=c(a.u));return[Object.keys(a).reduce((X,aa)=>{const fa=y(aa);fa&&(X[fa]=a[aa]);return X},{}),N]}function kb(){Gb||(Gb=Ca.fromMillis(1555555555555));return Gb}function fb(a,y){if(a.literal)return a;
const N=Ua.macroTokenToFormatOpts(a.val);if(!N)return a;y=Ua.create(y,N).formatDateTimeParts(kb()).map(X=>{{const {type:fa,value:oa}=X;if("literal"===fa)X={literal:!0,val:oa};else{X=N[fa];var aa=Pc[fa];"object"===typeof aa&&(aa=aa[X]);X=aa?{literal:!1,val:aa}:void 0}}return X});return y.includes(void 0)?a:y}function gb(a,y){return Array.prototype.concat(...a.map(N=>fb(N,y)))}function qb(a,y,N){N=gb(Ua.parseFormat(N),a);var X=N.map(fa=>Xa(fa,a));const aa=X.find(fa=>fa.invalidReason);if(aa)return{input:y,
tokens:N,invalidReason:aa.invalidReason};{const [fa,oa]=ib(X);X=RegExp(fa,"i");const [ra,ua]=Ya(y,X,oa),[Ha,Ba]=ua?jb(ua):[null,null];if(G(ua,"a")&&G(ua,"H"))throw new vb("Can't include meridiem when specifying 24-hour format");return{input:y,tokens:N,regex:X,rawMatches:ra,matches:ua,result:Ha,zone:Ba}}}function Sa(a,y){return new Za("unit out of range",`you specified ${y} (of type ${typeof y}) as a ${a}, which is invalid`)}function Qa(a,y,N){a=(new Date(Date.UTC(a,y-1,N))).getUTCDay();return 0===
a?7:a}function rb(a,y){a=e(a)?Hb:Ib;const N=a.findIndex(X=>X<y);return{month:N+1,day:y-a[N]}}function lb(a){const {year:y,month:N,day:X}=a;var aa=X+(e(y)?Hb:Ib)[N-1];const fa=Qa(y,N,X);aa=Math.floor((aa-fa+10)/7);let oa;1>aa?(oa=y-1,aa=w(oa)):aa>w(y)?(oa=y+1,aa=1):oa=y;return{weekYear:oa,weekNumber:aa,weekday:fa,...F(a)}}function hb(a){const {weekYear:y,weekNumber:N,weekday:X}=a;var aa=Qa(y,1,4),fa=e(y)?366:365;aa=7*N+X-aa-3;1>aa?(fa=y-1,aa+=e(fa)?366:365):aa>fa?(fa=y+1,aa-=e(y)?366:365):fa=y;const {month:oa,
day:ra}=rb(fa,aa);return{year:fa,month:oa,day:ra,...F(a)}}function sb(a){const {year:y,month:N,day:X}=a;var aa=X+(e(y)?Hb:Ib)[N-1];return{year:y,ordinal:aa,...F(a)}}function L(a){const {year:y,ordinal:N}=a,{month:X,day:aa}=rb(y,N);return{year:y,month:X,day:aa,...F(a)}}function Z(a){const y=n(a.year),N=E(a.month,1,12),X=E(a.day,1,b(a.year,a.month));return y?N?X?!1:Sa("day",a.day):Sa("month",a.month):Sa("year",a.year)}function la(a){const {hour:y,minute:N,second:X,millisecond:aa}=a;a=E(y,0,23)||24===
y&&0===N&&0===X&&0===aa;const fa=E(N,0,59),oa=E(X,0,59),ra=E(aa,0,999);return a?fa?oa?ra?!1:Sa("millisecond",aa):Sa("second",X):Sa("minute",N):Sa("hour",y)}function wa(a){return new Za("unsupported zone",`the zone "${a.name}" is not supported`)}function va(a){null===a.weekData&&(a.weekData=lb(a.c));return a.weekData}function Ea(a,y){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ca({...a,...y,old:a})}function Ia(a,y,N){let X=a-6E4*y;const aa=N.offset(X);if(y===aa)return[X,
y];X-=6E4*(aa-y);y=N.offset(X);return aa===y?[X,aa]:[a-6E4*Math.min(aa,y),Math.max(aa,y)]}function Ra(a,y){a=new Date(a+6E4*y);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Oa(a,y,N){return Ia(p(a),y,N)}function Wa(a,y){const N=a.o;var X=a.c.year+Math.trunc(y.years);const aa=a.c.month+Math.trunc(y.months)+3*Math.trunc(y.quarters);X={...a.c,year:X,month:aa,
day:Math.min(a.c.day,b(X,aa))+Math.trunc(y.days)+7*Math.trunc(y.weeks)};y=Ga.fromObject({years:y.years-Math.trunc(y.years),quarters:y.quarters-Math.trunc(y.quarters),months:y.months-Math.trunc(y.months),weeks:y.weeks-Math.trunc(y.weeks),days:y.days-Math.trunc(y.days),hours:y.hours,minutes:y.minutes,seconds:y.seconds,milliseconds:y.milliseconds}).as("milliseconds");X=p(X);let [fa,oa]=Ia(X,N,a.zone);0!==y&&(fa+=y,oa=a.zone.offset(fa));return{ts:fa,o:oa}}function db(a,y,N,X,aa){const {setZone:fa,zone:oa}=
N;return a&&0!==Object.keys(a).length?(a=Ca.fromObject(a,{...N,zone:y||oa}),fa?a:a.setZone(oa)):Ca.invalid(new Za("unparsable",`the input "${aa}" can't be parsed as ${X}`))}function ab(a,y,N=!0){return a.isValid?Ua.create(Ma.create("en-US"),{allowZ:N,forceSimple:!0}).formatDateTimeFromString(a,y):null}function ob(a,{suppressSeconds:y=!1,suppressMilliseconds:N=!1,includeOffset:X,includePrefix:aa=!1,includeZone:fa=!1,spaceZone:oa=!1,format:ra="extended"}){let ua="basic"===ra?"HHmm":"HH:mm";y&&0===a.second&&
0===a.millisecond||(ua+="basic"===ra?"ss":":ss",N&&0===a.millisecond||(ua+=".SSS"));(fa||X)&&oa&&(ua+=" ");fa?ua+="z":X&&(ua+="basic"===ra?"ZZZ":"ZZ");a=ab(a,ua);aa&&(a="T"+a);return a}function pb(a){const y={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",
weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!y)throw new Ub(a);return y}function Vb(a,y){const N=M(y.zone,Pa.defaultZone);y=Ma.fromObject(y);const X=Pa.now();var aa;if(k(a.year))a=X;else{for(const fa of Wb)k(a[fa])&&(a[fa]=Xb[fa]);if(aa=Z(a)||la(a))return Ca.invalid(aa);aa=N.offset(X);[a,aa]=Oa(a,aa,N)}return new Ca({ts:a,zone:N,loc:y,o:aa})}function Yb(a,y,N){const X=k(N.round)?!0:N.round,
aa=(oa,ra)=>{oa=g(oa,X||N.calendary?0:2,!0);return y.loc.clone(N).relFormatter(N).format(oa,ra)},fa=oa=>N.calendary?y.hasSame(a,oa)?0:y.startOf(oa).diff(a.startOf(oa),oa).get(oa):y.diff(a,oa).get(oa);if(N.unit)return aa(fa(N.unit),N.unit);for(const oa of N.units){const ra=fa(oa);if(1<=Math.abs(ra))return aa(ra,oa)}return aa(a>y?-0:0,N.units[N.units.length-1])}function Zb(a){let y={};0<a.length&&"object"===typeof a[a.length-1]?(y=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[y,
a]}function wb(a){if(Ca.isDateTime(a))return a;if(a&&a.valueOf&&f(a.valueOf()))return Ca.fromJSDate(a);if(a&&"object"===typeof a)return Ca.fromObject(a);throw new Va(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class eb extends Error{}class Qc extends eb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Rc extends eb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Sc extends eb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class vb extends eb{}
class Ub extends eb{constructor(a){super(`Invalid unit ${a}`)}}class Va extends eb{}class cb extends eb{constructor(){super("Zone is an abstract class")}}const Jb={year:"numeric",month:"numeric",day:"numeric"},$b={year:"numeric",month:"short",day:"numeric"},Tc={year:"numeric",month:"short",day:"numeric",weekday:"short"},ac={year:"numeric",month:"long",day:"numeric"},bc={year:"numeric",month:"long",day:"numeric",weekday:"long"},cc={hour:"numeric",minute:"numeric"},dc={hour:"numeric",minute:"numeric",
second:"numeric"},ec={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},fc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},gc={hour:"numeric",minute:"numeric",hourCycle:"h23"},hc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ic={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},kc={year:"numeric",month:"numeric",
day:"numeric",hour:"numeric",minute:"numeric"},lc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Uc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},oc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},
pc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},rc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Gc="January February March April May June July August September October November December".split(" "),
Ob="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Fc="JFMAMJJASOND".split(""),Qb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Pb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Hc="MTWTFSS".split(""),tc=["AM","PM"],Kc=["Before Christ","Anno Domini"],Jc=["BC","AD"],Ic=["B","A"],Vc={D:Jb,DD:$b,DDD:ac,DDDD:bc,t:cc,tt:dc,ttt:ec,tttt:fc,T:gc,TT:hc,TTT:ic,TTTT:jc,f:kc,ff:mc,fff:oc,ffff:qc,F:lc,FF:nc,FFF:pc,FFFF:rc};class Ua{static create(a,y={}){return new Ua(a,y)}static parseFormat(a){let y=
null,N="",X=!1;const aa=[];for(let fa=0;fa<a.length;fa++){const oa=a.charAt(fa);"'"===oa?(0<N.length&&aa.push({literal:X,val:N}),y=null,N="",X=!X):X?N+=oa:oa===y?N+=oa:(0<N.length&&aa.push({literal:!1,val:N}),y=N=oa)}0<N.length&&aa.push({literal:X,val:N});return aa}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,y){this.opts=y;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,y){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,
{...this.opts,...y}).format()}formatDateTime(a,y={}){return this.loc.dtFormatter(a,{...this.opts,...y}).format()}formatDateTimeParts(a,y={}){return this.loc.dtFormatter(a,{...this.opts,...y}).formatToParts()}resolvedOptions(a,y={}){return this.loc.dtFormatter(a,{...this.opts,...y}).resolvedOptions()}num(a,y=0){if(this.opts.forceSimple)return u(a,y);const N={...this.opts};0<y&&(N.padTo=y);return this.loc.numberFormatter(N).format(a)}formatDateTimeFromString(a,y){const N="en"===this.loc.listingMode(),
X=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,aa=(Ba,Fa)=>this.loc.extract(a,Ba,Fa),fa=Ba=>a.isOffsetFixed&&0===a.offset&&Ba.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Ba.format):"",oa=(Ba,Fa)=>N?K(Ba)[a.month-1]:aa(Fa?{month:Ba}:{month:Ba,day:"numeric"},"month"),ra=(Ba,Fa)=>N?R(Ba)[a.weekday-1]:aa(Fa?{weekday:Ba}:{weekday:Ba,month:"long",day:"numeric"},"weekday"),ua=Ba=>{const Fa=Ua.macroTokenToFormatOpts(Ba);return Fa?this.formatWithSystemDefault(a,Fa):Ba},Ha=Ba=>N?W(Ba)[0>a.year?
0:1]:aa({era:Ba},"era");return U(Ua.parseFormat(y),Ba=>{switch(Ba){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===
a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return fa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return fa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return fa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return N?tc[12>a.hour?
0:1]:aa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return X?aa({day:"numeric"},"day"):this.num(a.day);case "dd":return X?aa({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return ra("short",!0);case "cccc":return ra("long",!0);case "ccccc":return ra("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return ra("short",!1);case "EEEE":return ra("long",!1);case "EEEEE":return ra("narrow",!1);case "L":return X?aa({month:"numeric",day:"numeric"},
"month"):this.num(a.month);case "LL":return X?aa({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return oa("short",!0);case "LLLL":return oa("long",!0);case "LLLLL":return oa("narrow",!0);case "M":return X?aa({month:"numeric"},"month"):this.num(a.month);case "MM":return X?aa({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return oa("short",!1);case "MMMM":return oa("long",!1);case "MMMMM":return oa("narrow",!1);case "y":return X?aa({year:"numeric"},"year"):this.num(a.year);
case "yy":return X?aa({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return X?aa({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return X?aa({year:"numeric"},"year"):this.num(a.year,6);case "G":return Ha("short");case "GG":return Ha("long");case "GGGGG":return Ha("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);
case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return ua(Ba)}})}formatDurationFromString(a,y){const N=aa=>{switch(aa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};y=Ua.parseFormat(y);const X=y.reduce((aa,
{literal:fa,val:oa})=>fa?aa:aa.concat(oa),[]);a=a.shiftTo(...X.map(N).filter(aa=>aa));return U(y,(aa=>fa=>{const oa=N(fa);return oa?this.num(aa.get(oa),fa.length):fa})(a))}}class Za{constructor(a,y){this.reason=a;this.explanation=y}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class tb{get type(){throw new cb;}get name(){throw new cb;}get isUniversal(){throw new cb;}offsetName(a,y){throw new cb;}formatOffset(a,y){throw new cb;}offset(a){throw new cb;}equals(a){throw new cb;
}get isValid(){throw new cb;}}let Kb=null;class uc extends tb{static get instance(){null===Kb&&(Kb=new uc);return Kb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:y,locale:N}){return t(a,y,N)}formatOffset(a,y){return l(this.offset(a),y)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}const Wc=RegExp(`^${sc.source}$`);let xb={};const Xc={year:0,
month:1,day:2,hour:3,minute:4,second:5};let yb={};class $a extends tb{static create(a){yb[a]||(yb[a]=new $a(a));return yb[a]}static resetCache(){yb={};xb={}}static isValidSpecifier(a){return!(!a||!a.match(Wc))}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(y){return!1}}constructor(a){super();this.zoneName=a;this.valid=$a.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:y,
locale:N}){return t(a,y,N,this.name)}formatOffset(a,y){return l(this.offset(a),y)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var y=this.name;xb[y]||(xb[y]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));y=xb[y];if(y.formatToParts){y=y.formatToParts(a);var N=[];for(let Ha=0;Ha<y.length;Ha++){const {type:Ba,value:Fa}=y[Ha],Ja=Xc[Ba];k(Ja)||(N[Ja]=parseInt(Fa,10))}y=N}else{{y=y.format(a).replace(/\u200E/g,
"");y=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(y);const [,Ha,Ba,Fa,Ja,bb,mb]=y;y=[Fa,Ha,Ba,Ja,bb,mb]}}const [X,aa,fa,oa,ra,ua]=y;y=p({year:X,month:aa,day:fa,hour:24===oa?0:oa,minute:ra,second:ua,millisecond:0});a=+a;N=a%1E3;return(y-(a-(0<=N?N:1E3+N)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let Lb=null;class Ta extends tb{static get utcInstance(){null===Lb&&(Lb=new Ta(0));return Lb}static instance(a){return 0===a?Ta.utcInstance:new Ta(a)}static parseSpecifier(a){return a&&
(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Ta(q(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${l(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,y){return l(this.fixed,y)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Rb extends tb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let vc=()=>Date.now(),wc="system",xc=null,yc=null,zc=null,Ac;class Pa{static get now(){return vc}static set now(a){vc=a}static set defaultZone(a){wc=a}static get defaultZone(){return M(wc,uc.instance)}static get defaultLocale(){return xc}static set defaultLocale(a){xc=a}static get defaultNumberingSystem(){return yc}static set defaultNumberingSystem(a){yc=a}static get defaultOutputCalendar(){return zc}static set defaultOutputCalendar(a){zc=a}static get throwOnInvalid(){return Ac}static set throwOnInvalid(a){Ac=
a}static resetCaches(){Ma.resetCache();$a.resetCache()}}let Bb={},Cb={},Db={},zb=null;class Yc{constructor(a,y,N){this.padTo=N.padTo||0;this.floor=N.floor||!1;y||(y={useGrouping:!1},0<N.padTo&&(y.minimumIntegerDigits=N.padTo),this.inf=ba(a,y))}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):g(a,3);return u(a,this.padTo)}}class Zc{constructor(a,y,N){this.opts=N;if(a.zone.isUniversal){var X=a.offset/60*-1;X=0<=X?`Etc/GMT+${X}`:`Etc/GMT${X}`;0!==a.offset&&
$a.create(X).valid?this.dt=a:(X="UTC",this.dt=N.timeZoneName?a:0===a.offset?a:Ca.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,X=a.zone.name);a={...this.opts};X&&(a.timeZone=X);this.dtf=P(y,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $c{constructor(a,y,N){this.opts={style:"long",...N};!y&&x()&&(this.rtf=J(a,N))}format(a,y){return this.rtf?
this.rtf.format(a,y):V(y,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,y){return this.rtf?this.rtf.formatToParts(a,y):[]}}class Ma{static fromOpts(a){return Ma.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,y,N,X=!1){a=a||Pa.defaultLocale;var aa;(aa=a)||(X?X="en-US":(zb||(zb=(new Intl.DateTimeFormat).resolvedOptions().locale),X=zb),aa=X);return new Ma(aa,y||Pa.defaultNumberingSystem,N||Pa.defaultOutputCalendar,a)}static resetCache(){zb=null;Bb={};
Cb={};Db={}}static fromObject({locale:a,numberingSystem:y,outputCalendar:N}={}){return Ma.create(a,y,N)}constructor(a,y,N,X){var aa=a.indexOf("-u-");if(-1===aa)a=[a];else{let ua;aa=a.substring(0,aa);try{ua=P(a).resolvedOptions()}catch(Fa){ua=P(aa).resolvedOptions()}const {numberingSystem:Ha,calendar:Ba}=ua;a=[aa,Ha,Ba]}const [fa,oa,ra]=a;this.locale=fa;this.numberingSystem=y||oa||null;this.outputCalendar=N||ra||null;y=this.locale;N=this.numberingSystem;if((a=this.outputCalendar)||N)y+="-u",a&&(y+=
`-ca-${a}`),N&&(y+=`-nu-${N}`);this.intl=y;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=X;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=
a}return this.fastNumbersCached}listingMode(a){a=this.isEnglish();const y=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&y?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Ma.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,y=!1,N=!0){return D(this,a,N,K,()=>{const X=y?{month:a,day:"numeric"}:{month:a},aa=y?"format":"standalone";this.monthsCache[aa][a]||(this.monthsCache[aa][a]=H(fa=>this.extract(fa,X,"month")));return this.monthsCache[aa][a]})}weekdays(a,y=!1,N=!0){return D(this,a,N,R,()=>{const X=y?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},aa=y?"format":"standalone";this.weekdaysCache[aa][a]||(this.weekdaysCache[aa][a]=v(fa=>this.extract(fa,
X,"weekday")));return this.weekdaysCache[aa][a]})}meridiems(a=!0){return D(this,void 0,a,()=>tc,()=>{if(!this.meridiemCache){const y={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ca.utc(2016,11,13,9),Ca.utc(2016,11,13,19)].map(N=>this.extract(N,y,"dayperiod"))}return this.meridiemCache})}eras(a,y=!0){return D(this,a,y,W,()=>{const N={era:a};this.eraCache[a]||(this.eraCache[a]=[Ca.utc(-40,1,1),Ca.utc(2017,1,1)].map(X=>this.extract(X,N,"era")));return this.eraCache[a]})}extract(a,y,N){return(a=
this.dtFormatter(a,y).formatToParts().find(X=>X.type.toLowerCase()===N))?a.value:null}numberFormatter(a={}){return new Yc(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,y={}){return new Zc(a,this.intl,y)}relFormatter(a={}){return new $c(this.intl,this.isEnglish(),a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&
this.outputCalendar===a.outputCalendar}}const Bc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Mb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Cc=RegExp(`${Mb.source}${Bc.source}?`),Nb=RegExp(`(?:T${Cc.source})?`),ad=Q("weekYear","weekNumber","weekDay"),bd=Q("year","ordinal"),Dc=RegExp(`${Mb.source} ?(?:${Bc.source}|(${sc.source}))?`),cd=RegExp(`(?: ${Dc.source})?`),dd=RegExp(`^T?${Mb.source}$`),ed=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Lc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,gd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,jd=C(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Nb),kd=C(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nb),ld=C(/(\d{4})-?(\d{3})/,Nb),md=C(Cc),nd=O(ha,da,ka),od=O(ad,da,ka),pd=O(bd,da,ka),qd=O(da,ka),rd=O(da),sd=C(/(\d{4})-(\d\d)-(\d\d)/,cd),td=C(Dc),ud=O(ha,da,ka,qa),vd=O(da,ka,qa),Ec={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Ec},xd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Ec},nb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Mc=nb.slice(0).reverse();class Ga{constructor(a){const y="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Ma.create();this.conversionAccuracy=y?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=y?xd:wd;this.isLuxonDuration=!0}static fromMillis(a,y){return Ga.fromObject({milliseconds:a},y)}static fromObject(a,y={}){if(null==a||"object"!==typeof a)throw new Va(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Ga({values:A(a,Ga.normalizeUnit),loc:Ma.fromObject(y),conversionAccuracy:y.conversionAccuracy})}static fromDurationLike(a){if(f(a))return Ga.fromMillis(a);
if(Ga.isDuration(a))return a;if("object"===typeof a)return Ga.fromObject(a);throw new Va(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,y){const [N]=T(a,[ed,pa]);return N?Ga.fromObject(N,y):Ga.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,y){const [N]=T(a,[dd,rd]);return N?Ga.fromObject(N,y):Ga.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,y=null){if(!a)throw new Va("need to specify a reason the Duration is invalid");
a=a instanceof Za?a:new Za(a,y);if(Pa.throwOnInvalid)throw new Sc(a);return new Ga({invalid:a})}static normalizeUnit(a){const y={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!y)throw new Ub(a);return y}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,y={}){y={...y,floor:!1!==y.round&&!1!==y.floor};return this.isValid?Ua.create(this.loc,y).formatDurationFromString(this,a):"Invalid Duration"}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+
"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=g(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var y=this.toMillis();if(0>y||864E5<=y)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,
format:"extended",...a};y=this.shiftTo("hours","minutes","seconds","milliseconds");let N="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===y.seconds&&0===y.milliseconds||(N+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===y.milliseconds||(N+=".SSS"));y=y.toFormat(N);a.includePrefix&&(y="T"+y);return y}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Ga.fromDurationLike(a);
const y={};for(const N of nb)if(G(a.values,N)||G(this.values,N))y[N]=a.get(N)+this.get(N);return S(this,{values:y},!0)}minus(a){if(!this.isValid)return this;a=Ga.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const y={};for(const N of Object.keys(this.values))y[N]=B(a(this.values[N],N));return S(this,{values:y},!0)}get(a){return this[Ga.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...A(a,Ga.normalizeUnit)};return S(this,{values:a})}reconfigure({locale:a,
numberingSystem:y,conversionAccuracy:N}={}){a={loc:this.loc.clone({locale:a,numberingSystem:y})};N&&(a.conversionAccuracy=N);return S(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ja(this.matrix,a);return S(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(fa=>Ga.normalizeUnit(fa));const y={},N={},X=this.toObject();let aa;for(const fa of nb)if(0<=a.indexOf(fa)){aa=fa;let oa=0;for(const ua in N)oa+=
this.matrix[ua][fa]*N[ua],N[ua]=0;f(X[fa])&&(oa+=X[fa]);const ra=Math.trunc(oa);y[fa]=ra;N[fa]=oa-ra;for(const ua in X)nb.indexOf(ua)>nb.indexOf(fa)&&ca(this.matrix,X,ua,y,fa)}else f(X[fa])&&(N[fa]=X[fa]);for(const fa in N)0!==N[fa]&&(y[aa]+=fa===aa?N[fa]:N[fa]/this.matrix[aa][fa]);return S(this,{values:y},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const y of Object.keys(this.values))a[y]=-this.values[y];return S(this,{values:a},!0)}get years(){return this.isValid?this.values.years||
0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const X of nb){var y=this.values[X];var N=a.values[X];y=void 0===y||0===y?void 0===N||0===N:y===N;if(!y)return!1}return!0}}class Na{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,y=null){if(!a)throw new Va("need to specify a reason the Interval is invalid");
a=a instanceof Za?a:new Za(a,y);if(Pa.throwOnInvalid)throw new Rc(a);return new Na({invalid:a})}static fromDateTimes(a,y){a=wb(a);y=wb(y);var N=a&&a.isValid?y&&y.isValid?y<a?Na.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${y.toISO()}`):null:Na.invalid("missing or invalid end"):Na.invalid("missing or invalid start");return null==N?new Na({start:a,end:y}):N}static after(a,y){y=Ga.fromDurationLike(y);a=wb(a);return Na.fromDateTimes(a,
a.plus(y))}static before(a,y){y=Ga.fromDurationLike(y);a=wb(a);return Na.fromDateTimes(a.minus(y),a)}static fromISO(a,y){const [N,X]=(a||"").split("/",2);if(N&&X){let oa;try{var aa=Ca.fromISO(N,y);oa=aa.isValid}catch(ua){oa=!1}let ra;try{var fa=Ca.fromISO(X,y);ra=fa.isValid}catch(ua){ra=!1}if(oa&&ra)return Na.fromDateTimes(aa,fa);if(oa){if(fa=Ga.fromISO(X,y),fa.isValid)return Na.after(aa,fa)}else if(ra&&(aa=Ga.fromISO(N,y),aa.isValid))return Na.before(fa,aa)}return Na.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&
a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const y=this.start.startOf(a),N=this.end.startOf(a);return Math.floor(N.diff(y,
a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:y}={}){return this.isValid?Na.fromDateTimes(a||this.s,y||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(wb).filter(fa=>this.contains(fa)).sort();const y=[];let {s:N}=this,X=0;for(;N<
this.e;){var aa=a[X]||this.e;aa=+aa>+this.e?this.e:aa;y.push(Na.fromDateTimes(N,aa));N=aa;X+=1}return y}splitBy(a){a=Ga.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:y}=this,N=1;const X=[];for(;y<this.e;){var aa=this.start.plus(a.mapUnits(fa=>fa*N));aa=+aa>+this.e?this.e:aa;X.push(Na.fromDateTimes(y,aa));y=aa;N+=1}return X}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?
+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const y=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return y>=a?null:Na.fromDateTimes(y,a)}union(a){return this.isValid?Na.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [y,N]=a.sort((X,aa)=>X.s-aa.s).reduce(([X,
aa],fa)=>aa?aa.overlaps(fa)||aa.abutsStart(fa)?[X,aa.union(fa)]:[X.concat([aa]),fa]:[X,fa],[[],null]);N&&y.push(N);return y}static xor(a){let y=null,N=0;const X=[];a=a.map(aa=>[{time:aa.s,type:"s"},{time:aa.e,type:"e"}]);a=Array.prototype.concat(...a).sort((aa,fa)=>aa.time-fa.time);for(const aa of a)N+="s"===aa.type?1:-1,1===N?y=aa.time:(y&&+y!==+aa.time&&X.push(Na.fromDateTimes(y,aa.time)),y=null);return Na.merge(X)}difference(...a){return Na.xor([this].concat(a)).map(y=>this.intersection(y)).filter(y=>
y&&!y.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:y=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${y}${this.e.toFormat(a)}`:
"Invalid Interval"}toDuration(a,y){return this.isValid?this.e.diff(this.s,a,y):Ga.invalid(this.invalidReason)}mapEndpoints(a){return Na.fromDateTimes(a(this.s),a(this.e))}}class Ab{static hasDST(a=Pa.defaultZone){const y=Ca.now().setZone(a).set({month:12});return!a.isUniversal&&y.offset!==y.set({month:6}).offset}static isValidIANAZone(a){return $a.isValidSpecifier(a)&&$a.isValidZone(a)}static normalizeZone(a){return M(a,Pa.defaultZone)}static months(a="long",{locale:y=null,numberingSystem:N=null,
locObj:X=null,outputCalendar:aa="gregory"}={}){return(X||Ma.create(y,N,aa)).months(a)}static monthsFormat(a="long",{locale:y=null,numberingSystem:N=null,locObj:X=null,outputCalendar:aa="gregory"}={}){return(X||Ma.create(y,N,aa)).months(a,!0)}static weekdays(a="long",{locale:y=null,numberingSystem:N=null,locObj:X=null}={}){return(X||Ma.create(y,N,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:y=null,numberingSystem:N=null,locObj:X=null}={}){return(X||Ma.create(y,N,null)).weekdays(a,!0)}static meridiems({locale:a=
null}={}){return Ma.create(a).meridiems()}static eras(a="short",{locale:y=null}={}){return Ma.create(y,null,"gregory").eras(a)}static features(){return{relative:x()}}}const Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",
mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Sb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],
thai:[3664,3673],tibt:[3872,3881]},Nc=Eb.hanidec.replace(/[\[|\]]/g,"").split(""),Tb=`( |${String.fromCharCode(160)})`,Fb=new RegExp(Tb,"g"),Pc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Gb=null;const Ib=[0,31,59,90,120,151,181,212,243,273,
304,334],Hb=[0,31,60,91,121,152,182,213,244,274,305,335],Xb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wb="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class Ca{constructor(a){const y=a.zone||Pa.defaultZone;let N=a.invalid||
(Number.isNaN(a.ts)?new Za("invalid input"):null)||(y.isValid?null:wa(y));this.ts=k(a.ts)?Pa.now():a.ts;let X=null;var aa=null;N||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(y)?[X,aa]=[a.old.c,a.old.o]:(aa=y.offset(this.ts),X=Ra(this.ts,aa),X=(N=Number.isNaN(X.year)?new Za("invalid input"):null)?null:X,aa=N?null:aa));this._zone=y;this.loc=a.loc||Ma.create();this.invalid=N;this.weekData=null;this.c=X;this.o=aa;this.isLuxonDateTime=!0}static now(){return new Ca({})}static local(){const [a,y]=Zb(arguments),
[N,X,aa,fa,oa,ra,ua]=y;return Vb({year:N,month:X,day:aa,hour:fa,minute:oa,second:ra,millisecond:ua},a)}static utc(){const [a,y]=Zb(arguments),[N,X,aa,fa,oa,ra,ua]=y;a.zone=Ta.utcInstance;return Vb({year:N,month:X,day:aa,hour:fa,minute:oa,second:ra,millisecond:ua},a)}static fromJSDate(a,y={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Ca.invalid("invalid input");const N=M(y.zone,Pa.defaultZone);return N.isValid?new Ca({ts:a,zone:N,loc:Ma.fromObject(y)}):
Ca.invalid(wa(N))}static fromMillis(a,y={}){if(f(a))return-864E13>a||864E13<a?Ca.invalid("Timestamp out of range"):new Ca({ts:a,zone:M(y.zone,Pa.defaultZone),loc:Ma.fromObject(y)});throw new Va(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,y={}){if(f(a))return new Ca({ts:1E3*a,zone:M(y.zone,Pa.defaultZone),loc:Ma.fromObject(y)});throw new Va("fromSeconds requires a numerical input");}static fromObject(a,y={}){a=a||{};var N=M(y.zone,Pa.defaultZone);
if(!N.isValid)return Ca.invalid(wa(N));var X=Pa.now();const aa=N.offset(X),fa=A(a,pb);var oa=!k(fa.ordinal),ra=!k(fa.year),ua=!k(fa.month)||!k(fa.day);ra=ra||ua;var Ha=fa.weekYear||fa.weekNumber;y=Ma.fromObject(y);if((ra||oa)&&Ha)throw new vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ua&&oa)throw new vb("Can't mix ordinal dates with month/day");ua=Ha||fa.weekday&&!ra;let Ba=Ra(X,aa);ua?(X=Ad,Ha=yd,Ba=lb(Ba)):oa?(X=Bd,Ha=zd,Ba=sb(Ba)):(X=Wb,Ha=Xb);let Fa=!1;for(var Ja of X)k(fa[Ja])?
fa[Ja]=Fa?Ha[Ja]:Ba[Ja]:Fa=!0;ua?(Ja=n(fa.weekYear),X=E(fa.weekNumber,1,w(fa.weekYear)),Ha=E(fa.weekday,1,7),Ja=Ja?X?Ha?!1:Sa("weekday",fa.weekday):Sa("week",fa.week):Sa("weekYear",fa.weekYear)):oa?(Ja=n(fa.year),X=E(fa.ordinal,1,e(fa.year)?366:365),Ja=Ja?X?!1:Sa("ordinal",fa.ordinal):Sa("year",fa.year)):Ja=Z(fa);if(Ja=Ja||la(fa))return Ca.invalid(Ja);oa=ua?hb(fa):oa?L(fa):fa;const [bb,mb]=Oa(oa,aa,N);N=new Ca({ts:bb,zone:N,o:mb,loc:y});return fa.weekday&&ra&&a.weekday!==N.weekday?Ca.invalid("mismatched weekday",
`you can't specify both a weekday of ${fa.weekday} and a date of ${N.toISO()}`):N}static fromISO(a,y={}){const [N,X]=T(a,[jd,nd],[kd,od],[ld,pd],[md,qd]);return db(N,X,y,"ISO 8601",a)}static fromRFC2822(a,y={}){const [N,X]=T(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fd,ia]);return db(N,X,y,"RFC 2822",a)}static fromHTTP(a,y={}){const [N,X]=T(a,[gd,ma],[hd,ma],[id,sa]);return db(N,X,y,"HTTP",y)}static fromFormat(a,y,N={}){if(k(a)||k(y))throw new Va("fromFormat requires an input string and a format");
const {locale:X=null,numberingSystem:aa=null}=N;var fa=Ma.fromOpts({locale:X,numberingSystem:aa,defaultToEN:!0});{const {result:Ha,zone:Ba,invalidReason:Fa}=qb(fa,a,y);fa=[Ha,Ba,Fa]}const [oa,ra,ua]=fa;return ua?Ca.invalid(ua):db(oa,ra,N,`format ${y}`,a)}static fromString(a,y,N={}){return Ca.fromFormat(a,y,N)}static fromSQL(a,y={}){const [N,X]=T(a,[sd,ud],[td,vd]);return db(N,X,y,"SQL",a)}static invalid(a,y=null){if(!a)throw new Va("need to specify a reason the DateTime is invalid");a=a instanceof
Za?a:new Za(a,y);if(Pa.throwOnInvalid)throw new Qc(a);return new Ca({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?
this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?
this.c.millisecond:NaN}get weekYear(){return this.isValid?va(this).weekYear:NaN}get weekNumber(){return this.isValid?va(this).weekNumber:NaN}get weekday(){return this.isValid?va(this).weekday:NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ab.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ab.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ab.weekdays("short",{locObj:this.loc})[this.weekday-
1]:null}get weekdayLong(){return this.isValid?Ab.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||
this.offset>this.set({month:5}).offset}get isInLeapYear(){return e(this.year)}get daysInMonth(){return b(this.year,this.month)}get daysInYear(){return this.isValid?e(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?w(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:y,numberingSystem:N,calendar:X}=Ua.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:y,numberingSystem:N,outputCalendar:X}}toUTC(a=0,y={}){return this.setZone(Ta.instance(a),y)}toLocal(){return this.setZone(Pa.defaultZone)}setZone(a,
{keepLocalTime:y=!1,keepCalendarTime:N=!1}={}){a=M(a,Pa.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let X=this.ts;if(y||N)y=a.offset(this.ts),N=this.toObject(),[X]=Oa(N,y,a);return Ea(this,{ts:X,zone:a})}return Ca.invalid(wa(a))}reconfigure({locale:a,numberingSystem:y,outputCalendar:N}={}){a=this.loc.clone({locale:a,numberingSystem:y,outputCalendar:N});return Ea(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=A(a,pb);var y=!k(a.weekYear)||
!k(a.weekNumber)||!k(a.weekday);const N=!k(a.ordinal),X=!k(a.year),aa=!k(a.month)||!k(a.day),fa=a.weekYear||a.weekNumber;if((X||aa||N)&&fa)throw new vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(aa&&N)throw new vb("Can't mix ordinal dates with month/day");y?y=hb({...lb(this.c),...a}):k(a.ordinal)?(y={...this.toObject(),...a},k(a.day)&&(y.day=Math.min(b(y.year,y.month),y.day))):y=L({...sb(this.c),...a});const [oa,ra]=Oa(y,this.o,this.zone);return Ea(this,{ts:oa,o:ra})}plus(a){if(!this.isValid)return this;
a=Ga.fromDurationLike(a);return Ea(this,Wa(this,a))}minus(a){if(!this.isValid)return this;a=Ga.fromDurationLike(a).negate();return Ea(this,Wa(this,a))}startOf(a){if(!this.isValid)return this;const y={};a=Ga.normalizeUnit(a);switch(a){case "years":y.month=1;case "quarters":case "months":y.day=1;case "weeks":case "days":y.hour=0;case "hours":y.minute=0;case "minutes":y.second=0;case "seconds":y.millisecond=0}"weeks"===a&&(y.weekday=1);"quarters"===a&&(y.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(y)}endOf(a){return this.isValid?
this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,y={}){return this.isValid?Ua.create(this.loc.redefaultToEN(y)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Jb,y={}){return this.isValid?Ua.create(this.loc.clone(y),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ua.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO(a={}){return this.isValid?`${this.toISODate(a)}T${this.toISOTime(a)}`:null}toISODate({format:a="extended"}={}){a=
"basic"===a?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(a="+"+a);return ab(this,a)}toISOWeekDate(){return ab(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:y=!1,includeOffset:N=!0,includePrefix:X=!1,format:aa="extended"}={}){return ob(this,{suppressSeconds:y,suppressMilliseconds:a,includeOffset:N,includePrefix:X,format:aa})}toRFC2822(){return ab(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ab(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return ab(this,
"yyyy-MM-dd")}toSQLTime({includeOffset:a=!0,includeZone:y=!1}={}){return ob(this,{includeOffset:a,includeZone:y,spaceZone:!0})}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const y=
{...this.c};a.includeConfig&&(y.outputCalendar=this.outputCalendar,y.numberingSystem=this.loc.numberingSystem,y.locale=this.loc.locale);return y}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,y="milliseconds",N={}){if(!this.isValid||!a.isValid)return Ga.invalid("created by diffing an invalid DateTime");N={locale:this.locale,numberingSystem:this.numberingSystem,...N};const X=(Array.isArray(y)?y:[y]).map(Ga.normalizeUnit);y=a.valueOf()>this.valueOf();a=xa(y?this:a,y?a:this,X,N);return y?
a.negate():a}diffNow(a="milliseconds",y={}){return this.diff(Ca.now(),a,y)}until(a){return this.isValid?Na.fromDateTimes(this,a):this}hasSame(a,y){if(!this.isValid)return!1;const N=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(y)<=N&&N<=a.endOf(y)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const y=a.base||Ca.fromObject({},{zone:this.zone}),N=a.padding?
this<y?-a.padding:a.padding:0;let X="years months days hours minutes seconds".split(" "),aa=a.unit;Array.isArray(a.unit)&&(X=a.unit,aa=void 0);return Yb(y,this.plus(N),{...a,numeric:"always",units:X,unit:aa})}toRelativeCalendar(a={}){return this.isValid?Yb(a.base||Ca.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Ca.isDateTime))throw new Va("min requires all arguments be DateTimes");return I(a,y=>y.valueOf(),
Math.min)}static max(...a){if(!a.every(Ca.isDateTime))throw new Va("max requires all arguments be DateTimes");return I(a,y=>y.valueOf(),Math.max)}static fromFormatExplain(a,y,N={}){const {locale:X=null,numberingSystem:aa=null}=N;N=Ma.fromOpts({locale:X,numberingSystem:aa,defaultToEN:!0});return qb(N,a,y)}static fromStringExplain(a,y,N={}){return Ca.fromFormatExplain(a,y,N)}static get DATE_SHORT(){return Jb}static get DATE_MED(){return $b}static get DATE_MED_WITH_WEEKDAY(){return Tc}static get DATE_FULL(){return ac}static get DATE_HUGE(){return bc}static get TIME_SIMPLE(){return cc}static get TIME_WITH_SECONDS(){return dc}static get TIME_WITH_SHORT_OFFSET(){return ec}static get TIME_WITH_LONG_OFFSET(){return fc}static get TIME_24_SIMPLE(){return gc}static get TIME_24_WITH_SECONDS(){return hc}static get TIME_24_WITH_SHORT_OFFSET(){return ic}static get TIME_24_WITH_LONG_OFFSET(){return jc}static get DATETIME_SHORT(){return kc}static get DATETIME_SHORT_WITH_SECONDS(){return lc}static get DATETIME_MED(){return mc}static get DATETIME_MED_WITH_SECONDS(){return nc}static get DATETIME_MED_WITH_WEEKDAY(){return Uc}static get DATETIME_FULL(){return oc}static get DATETIME_FULL_WITH_SECONDS(){return pc}static get DATETIME_HUGE(){return qc}static get DATETIME_HUGE_WITH_SECONDS(){return rc}}
h.DateTime=Ca})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(h,k,f){function n(d){d||(d=f.getLocale());let c=d in E;if(!c){const p=d.split("-");1<p.length&&p[0]in E&&(d=p[0],c=!0);c||(d="en")}const [g,e,b="#,##0.###"]=E[d];return{decimal:g,group:e,pattern:b}}function x(d,c,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);c=c.split(".");var e="string"===typeof g.places&&g.places.indexOf(","),b=g.places;e?b=g.places.substring(e+1):0<=
b||(b=(c[1]||[]).length);0>g.round||(d=Number(d.toFixed(Number(b))));d=String(Math.abs(d)).split(".");const p=d[1]||"";c[1]||g.places?(e&&(g.places=g.places.substring(0,e)),e=void 0!==g.places?g.places:c[1]&&c[1].lastIndexOf("0")+1,e>p.length&&(d[1]=p.padEnd(Number(e),"0")),b<p.length&&(d[1]=p.substr(0,Number(b)))):d[1]&&d.pop();b=c[0].replace(",","");e=b.indexOf("0");-1!==e&&(e=b.length-e,e>d[0].length&&(d[0]=d[0].padStart(e,"0")),-1===b.indexOf("#")&&(d[0]=d[0].substr(d[0].length-e)));b=c[0].lastIndexOf(",");
let w,r;-1!==b&&(w=c[0].length-b-1,c=c[0].substr(0,b),b=c.lastIndexOf(","),-1!==b&&(r=c.length-b-1));c=[];for(b=d[0];b;)e=b.length-w,c.push(0<e?b.substr(e):b),b=0<e?b.slice(0,e):"",r&&(w=r,r=void 0);d[0]=c.reverse().join(g.group||",");return d.join(g.decimal||".")}function I(d){d=d||{};var c=n(d.locale);const g=d.pattern||c.pattern,e=c.group,b=c.decimal;let p=1;if(-1!==g.indexOf("%"))p/=100;else if(-1!==g.indexOf("\u2030"))p/=1E3;else if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");
c=g.split(";");1===c.length&&c.push("-"+c[0]);return{regexp:m(c,function(w){w="(?:"+k.escapeRegExpString(w,".")+")";return w.replace(u,function(r){const t={signed:!1,separator:d.strict?e:[e,""],fractional:d.fractional,decimal:b,exponent:!1};r=r.split(".");let q=d.places;1===r.length&&1!==p&&(r[1]="###");1===r.length||0===q?t.fractional=!1:(void 0===q&&(q=d.pattern?r[1].lastIndexOf("0")+1:Infinity),q&&null==d.fractional&&(t.fractional=!0),!d.places&&q<r[1].length&&(q+=","+r[1].length),t.places=q);
r=r[0].split(",");1<r.length&&(t.groupSize=r.pop().length,1<r.length&&(t.groupSize2=r.pop().length));return"("+z(t)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:e,decimal:b,factor:p}}function z(d){d=d||{};"places"in d||(d.places=Infinity);"string"!==typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(String(d.places))||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var c=G(d);const g=m(d.fractional,function(b){let p="";b&&0!==d.places&&
(p="\\"+d.decimal,p=Infinity===d.places?"(?:"+p+"\\d+)?":p+("\\d{"+d.places+"}"));return p},!0),e=m(d.exponent,function(b){return b?"([eE]"+G({signed:d.eSigned})+")":""});c+=g;g&&(c="(?:(?:"+c+")|(?:"+g+"))");return c+e}function G(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";const c=m(d.signed,function(e){return e?"[-+]":""},!0),g=m(d.separator,function(e){if(!e)return"(?:\\d+)";e=k.escapeRegExpString(e);" "===e?e="\\s":"\u00a0"===e&&
(e="\\s\\xa0");const b=d.groupSize,p=d.groupSize2;return p?(e="(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+e+"]\\d{"+p+"})*["+e+"]\\d{"+b+"})",0<b-p?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":e):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+e+"]\\d{"+b+"})*)"},!0);return c+g}const E={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},u=/[#0,]*[#0](?:\.0*#*)?/,m=function(d,
c,g){if(!(d instanceof Array))return c(d);const e=[];for(let b=0;b<d.length;b++)e.push(c(d[b]));d=e.join("|");return"("+(g?"?:":"")+d+")"};h._parseInfo=I;h.format=function(d,c){c={...c};var g=n(c.locale);c.customs=g;var e=c.pattern||g.pattern;if(isNaN(d)||Infinity===Math.abs(d))return null;{c=c||{};g=c.customs.group;const p=c.customs.decimal;e=e.split(";");var b=e[0];e=e[0>d?1:0]||"-"+b;if(-1!==e.indexOf("%"))d*=100;else if(-1!==e.indexOf("\u2030"))d*=1E3;else{if(-1!==e.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==e.indexOf("E"))throw Error("exponential notation not supported");}const w=u;b=b.match(w);if(!b)throw Error("unable to find a number expression in pattern: "+e);!1===c.fractional&&(c.places=0);d=e.replace(w,x(d,b[0],{decimal:p,group:g,places:c.places,round:c.round}))}return d};h.getCustoms=n;h.parse=function(d,c){c=I(c);d=(new RegExp("^"+c.regexp+"$")).exec(d);if(!d)return NaN;let g=d[1];if(!d[1]){if(!d[2])return NaN;g=d[2];c.factor*=-1}g=g.replace(new RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,
".");return Number(g)*c.factor};h.regexp=function(d){return I(d).regexp};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(h,k,f,n,x,I,z){function G(r){return`<ul class="esri-widget__list">${r.map(t=>`<li>${"string"===typeof t?z.applyTextFormattingHTML(z.htmlEntities(t)):
t}</li>`).join("")}</ul>`}function E(r){return`<table class="esri-widget__table">${r.keys().map(t=>{var q=r.field(t);q="string"===typeof q?z.applyTextFormattingHTML(z.htmlEntities(q)):q;return`<tr><th>${t}</th><td>${q}</td></tr>`}).join("")}</table>`}function u({aggregatedFeatures:r,arcadeUtils:t,featureSetVars:q,context:B,viewInfo:A,map:l,graphic:F,interceptor:K}){q.forEach(R=>{R=R.toLowerCase();var W={map:l,spatialReference:A.sr,interceptor:K};"$map"===R&&(B.vars[R]=t.convertMapToFeatureSetCollection(W));
"$layer"===R&&(B.vars[R]=t.convertFeatureLayerToFeatureSet({layer:F.sourceLayer,spatialReference:A.sr,interceptor:K}));"$datastore"===R&&(B.vars[R]=t.convertServiceUrlToWorkspace({url:F.sourceLayer.url,spatialReference:A.sr,interceptor:K}));if("$aggregatedfeatures"===R){W=F.layer;const {fields:V,objectIdField:U,geometryType:M,spatialReference:P,displayField:ba}=W;W=new I({fields:V,objectIdField:U,geometryType:M,spatialReference:P,displayField:ba,..."feature"===W.type?{templates:W.templates,typeIdField:W.typeIdField,
types:W.types}:null,source:r});B.vars[R]=t.convertFeatureLayerToFeatureSet({layer:W,spatialReference:A.sr,interceptor:K})}})}function m(){return new Promise((r,t)=>h(["../../../support/arcadeUtils"],r,t))}function d(r){return c.apply(this,arguments)}function c(){c=f._asyncToGenerator(function*({graphic:r,view:t}){const {isAggregate:q,layer:B}=r;if(!q||!B||"2d"!==(null==t?void 0:t.type))return[];t=yield t.whenLayerView(B);if(!t.createQuery||!t.queryFeatures)return[];const A=t.createQuery();A.aggregateIds=
[r.getObjectId()];({features:r}=yield t.queryFeatures(A));return r});return c.apply(this,arguments)}function g(r){return e.apply(this,arguments)}function e(){e=f._asyncToGenerator(function*({expressionInfo:r,arcadeUtils:t,interceptor:q,spatialReference:B,map:A,graphic:l,view:F}){if(!r||!r.expression)return null;const K=t.createSyntaxTree(r.expression),R=p.filter(V=>t.hasVariable(K,V));[F]=yield x.all([d({graphic:l,view:F}),t.loadScriptDependencies(K,!0,R)]);const W=t.getViewInfo({spatialReference:B});
B=t.createExecContext(l,W);B.interceptor=q;B.useAsync=!0;u({aggregatedFeatures:F,arcadeUtils:t,featureSetVars:R,context:B,viewInfo:W,map:A,graphic:l,interceptor:q});q=t.createFunction(K,B);return t.executeAsyncFunction(q,B).catch(V=>w.error("arcade-execution-error",{error:V,graphic:l,expressionInfo:r}))});return e.apply(this,arguments)}function b(){b=f._asyncToGenerator(function*({expressionInfos:r,spatialReference:t,graphic:q,interceptor:B,map:A,view:l}){if(!r||!r.length)return{};const F=yield m(),
K={};for(const R of r)K[`expression/${R.name}`]=g({expressionInfo:R,arcadeUtils:F,interceptor:B,spatialReference:t,map:A,graphic:q,view:l});r=yield x.eachAlways(K);t={};for(const R in r)q=r[R].value,q="string"===typeof q?z.applyTextFormattingHTML(z.htmlEntities(q)):Array.isArray(q)?G(q):"esri.arcade.Dictionary"===(null==q?void 0:q.declaredClass)?E(q):q,t[R]=q;return t});return b.apply(this,arguments)}const p=["$datastore","$map","$layer","$aggregatedfeatures"],w=n.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");
k.createCompiledExpression=g;k.createCompiledExpressions=function(r){return b.apply(this,arguments)};k.loadArcadeUtils=m;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F){var K;const R=z.getLogger("esri.widgets.FeatureViewModel"),W={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};x=K=function(V){function U(P){var ba=V.call(this,P)||this;ba._handles=new I;ba._error=null;ba._featureAbortController=null;ba.graphicChangedThrottled=u.throttle(ba.graphicChanged,1,h._assertThisInitialized(ba));ba._expressionAttributes=null;ba._graphicExpressionAttributes=
null;ba.abilities={...W};ba.content=null;ba.contentViewModels=[];ba.defaultPopupTemplateEnabled=!1;ba.formattedAttributes=null;ba.lastEditInfo=null;ba.relatedInfos=new Map;ba.title="";ba.view=null;ba._isAllowedContentType=J=>{const {abilities:H}=h._assertThisInitialized(ba);return"attachments"===J.type&&H.attachmentsContent||"custom"===J.type&&H.customContent||"fields"===J.type&&H.fieldsContent||"media"===J.type&&H.mediaContent||"text"===J.type&&H.textContent||"expression"===J.type&&H.expressionContent};
ba._handles.add(m.init(h._assertThisInitialized(ba),["graphic","_effectivePopupTemplate","abilities"],()=>ba.graphicChangedThrottled()));return ba}h._inheritsLoose(U,V);var M=U.prototype;M.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};M.castAbilities=function(P){return{...W,...P}};M.setActiveMedia=function(P,ba){P=this.contentViewModels[P];P instanceof
B&&P.setActiveMedia(ba)};M.nextMedia=function(P){P=this.contentViewModels[P];P instanceof B&&P.next()};M.previousMedia=function(P){P=this.contentViewModels[P];P instanceof B&&P.previous()};M._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};M.graphicChanged=function(){var P=h._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:ba}=this;if(ba){var J=new AbortController;this._featureAbortController=
J;try{yield this._queryFeature({signal:J.signal})}catch(H){E.isAbortError(H)||(this._error=H,R.error("error","The popupTemplate could not be displayed for this feature.",{error:H,graphic:ba,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===J&&(this._featureAbortController=null)}});return function(){return P.apply(this,arguments)}}();M._cancelFeatureQuery=function(){const {_featureAbortController:P}=this;P&&P.abort();this._featureAbortController=null};M._compileContentElement=
function(P,ba){if("attachments"===P.type)return this._compileAttachments(P,ba);if("custom"===P.type)return this._compileCustom(P,ba);if("fields"===P.type)return this._compileFields(P,ba);if("media"===P.type)return this._compileMedia(P,ba);if("text"===P.type)return this._compileText(P,ba);if("expression"===P.type)return this._compileExpression(P,ba)};M._compileContent=function(P){this._destroyContentViewModels();if(this.graphic)return Array.isArray(P)?P.filter(this._isAllowedContentType).map((ba,J)=>
this._compileContentElement(ba,J)):"string"===typeof P?this._compileText(new p({text:P}),0).text:P};M._destroyContentViewModels=function(){var P;null==(P=this._handles)?void 0:P.remove("content-view-models");this.contentViewModels.forEach(ba=>ba&&!ba.destroyed&&ba.destroy());this._set("contentViewModels",[])};M._setExpressionContentVM=function(P,ba){const {formattedAttributes:J}=this,{contentElement:H,contentElementViewModel:v}=P;P=null==H?void 0:H.type;v&&P&&("fields"===P&&(this._createFieldsFormattedAttributes({contentElement:H,
contentElementIndex:ba,formattedAttributes:J}),v.set(this._createFieldsVMParams(H,ba))),"media"===P&&(this._createMediaFormattedAttributes({contentElement:H,contentElementIndex:ba,formattedAttributes:J}),v.set(this._createMediaVMParams(H,ba))),"text"===P&&v.set(this._createTextVMParams(H)))};M._compileExpression=function(P,ba){const {expressionInfo:J}=P,{graphic:H,map:v,spatialReference:D,view:C}=this,O=new t({expressionInfo:J,graphic:H,interceptor:K.interceptor,map:v,spatialReference:D,view:C});
this.contentViewModels[ba]=O;this._handles.add(m.init(O,"contentElementViewModel",()=>this._setExpressionContentVM(O,ba)),"content-view-models");return P};M._compileAttachments=function(P,ba){const {graphic:J}=this,{description:H,title:v}=P;this.contentViewModels[ba]=new w({graphic:J,...this._compileTitleAndDesc({title:v,description:H})});return P};M._compileCustom=function(P,ba){const {graphic:J}=this,{creator:H,destroyer:v}=P;this.contentViewModels[ba]=new r({graphic:J,creator:H,destroyer:v});return P};
M._compileTitleAndDesc=function({title:P,description:ba}){const {_fieldInfoMap:J,_sourceLayer:H,graphic:v,formattedAttributes:D,_expressionAttributes:C}=this,{attributes:O}=v,T=D.global;return{title:l.substituteFieldsInLinksAndAttributes({attributes:O,fieldInfoMap:J,globalAttributes:T,expressionAttributes:C,layer:H,text:P}),description:l.substituteFieldsInLinksAndAttributes({attributes:O,fieldInfoMap:J,globalAttributes:T,expressionAttributes:C,layer:H,text:ba})}};M._createFieldsVMParams=function(P,
ba){const {_effectivePopupTemplate:J,formattedAttributes:H}=this,v={...H.global,...H.content[ba]};ba=(null==P?void 0:P.fieldInfos)||(null==J?void 0:J.fieldInfos);ba=null==ba?void 0:ba.filter(({fieldName:T})=>l.isExpressionField(T)||l.isRelatedField(T)||v.hasOwnProperty(T));const D=null==J?void 0:J.expressionInfos,{description:C,title:O}=P;return{attributes:v,expressionInfos:D,fieldInfos:ba,...this._compileTitleAndDesc({title:O,description:C})}};M._compileFields=function(P,ba){const J=P.clone();P=
new q(this._createFieldsVMParams(P,ba));this.contentViewModels[ba]=P;J.fieldInfos=P.formattedFieldInfos.slice(0);return J};M._createMediaVMParams=function(P,ba){const {graphic:J,_fieldInfoMap:H,formattedAttributes:v,_effectivePopupTemplate:D,relatedInfos:C,_sourceLayer:O,_expressionAttributes:T}=this,{attributes:Q}=J,{description:Y,mediaInfos:ha,title:da}=P;return{activeMediaInfoIndex:P.activeMediaInfoIndex||0,attributes:Q,layer:O,fieldInfoMap:H,formattedAttributes:{...v.global,...v.content[ba]},
expressionAttributes:T,mediaInfos:ha,popupTemplate:D,relatedInfos:C,...this._compileTitleAndDesc({title:da,description:Y})}};M._compileMedia=function(P,ba){const J=P.clone();P=new B(this._createMediaVMParams(P,ba));J.mediaInfos=P.formattedMediaInfos.slice(0);this.contentViewModels[ba]=P;return J};M._createTextVMParams=function(P){const {graphic:ba,_fieldInfoMap:J,_sourceLayer:H,_expressionAttributes:v}=this;if(P&&P.text){const {attributes:D}=ba;P.text=l.substituteFieldsInLinksAndAttributes({attributes:D,
fieldInfoMap:J,globalAttributes:this.formattedAttributes.global,expressionAttributes:v,layer:H,text:P.text})}return{graphic:ba,creator:P.text}};M._compileText=function(P,ba){P=P.clone();this.contentViewModels[ba]=new r(this._createTextVMParams(P));return P};M._compileLastEditInfo=function(){const {_effectivePopupTemplate:P,_sourceLayer:ba,graphic:J}=this;if(P){var {lastEditInfoEnabled:H}=P,v=null==ba?void 0:ba.editFieldsInfo;if(H&&v)return l.formatEditInfo(v,J.attributes)}};M._compileTitle=function(P){const {_fieldInfoMap:ba,
_sourceLayer:J,graphic:H,_expressionAttributes:v}=this,{attributes:D}=H;return l.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:ba,globalAttributes:this.formattedAttributes.global,expressionAttributes:v,layer:J,text:P})};M._getTitle=function(){var P=h._asyncToGenerator(function*(){const {_effectivePopupTemplate:ba,graphic:J}=this;return l.graphicCallback(null==ba?void 0:ba.title,{graphic:J})});return function(){return P.apply(this,arguments)}}();M._getContent=function(){var P=h._asyncToGenerator(function*(){const {_effectivePopupTemplate:ba,
graphic:J}=this;return l.graphicCallback(null==ba?void 0:ba.content,{graphic:J})});return function(){return P.apply(this,arguments)}}();M._queryFeature=function(){var P=h._asyncToGenerator(function*(ba){const {_featureAbortController:J,_sourceLayer:H,graphic:v,_effectivePopupTemplate:D,spatialReference:C,map:O,view:T}=this,{content:{value:Q},title:{value:Y}}=yield E.eachAlways({content:this._getContent(),title:this._getTitle()});J===this._featureAbortController&&v&&(yield l.queryUpdatedFeature({graphic:v,
popupTemplate:D,layer:H,spatialReference:C},ba),{expressionAttributes:{value:ba}}=yield E.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(ba),expressionAttributes:A.createCompiledExpressions({expressionInfos:null==D?void 0:D.expressionInfos,spatialReference:C,graphic:v,map:O,interceptor:K.interceptor,view:T})}),J===this._featureAbortController&&v&&(this._expressionAttributes=ba,this._graphicExpressionAttributes={...v.attributes,...ba},this._set("formattedAttributes",this._createFormattedAttributes(Q)),
this._set("title",this._compileTitle(Y)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(Q)||null)))});return function(ba){return P.apply(this,arguments)}}();M._createMediaFormattedAttributes=function({contentElement:P,contentElementIndex:ba,formattedAttributes:J}){const {_effectivePopupTemplate:H,graphic:v,relatedInfos:D,_sourceLayer:C,_fieldInfoMap:O,_graphicExpressionAttributes:T}=this;J.content[ba]=l.formatAttributes({fieldInfos:null==H?void 0:
H.fieldInfos,graphic:v,attributes:{...T,...P.attributes},layer:C,fieldInfoMap:O,relatedInfos:D})};M._createFieldsFormattedAttributes=function({contentElement:P,contentElementIndex:ba,formattedAttributes:J}){if(P.fieldInfos){const {graphic:H,relatedInfos:v,_sourceLayer:D,_fieldInfoMap:C,_graphicExpressionAttributes:O}=this;J.content[ba]=l.formatAttributes({fieldInfos:P.fieldInfos,graphic:H,attributes:{...O,...P.attributes},layer:D,fieldInfoMap:C,relatedInfos:v})}};M._createFormattedAttributes=function(P){const {_effectivePopupTemplate:ba,
graphic:J,relatedInfos:H,_sourceLayer:v,_fieldInfoMap:D,_graphicExpressionAttributes:C}=this,O={global:l.formatAttributes({fieldInfos:null==ba?void 0:ba.fieldInfos,graphic:J,attributes:C,layer:v,fieldInfoMap:D,relatedInfos:H}),content:[]};Array.isArray(P)&&P.forEach((T,Q)=>{"fields"===T.type&&this._createFieldsFormattedAttributes({contentElement:T,contentElementIndex:Q,formattedAttributes:O});"media"===T.type&&this._createMediaFormattedAttributes({contentElement:T,contentElementIndex:Q,formattedAttributes:O})});
return O};M._checkForRelatedFeatures=function(P){const {graphic:ba,_effectivePopupTemplate:J}=this;return this._queryRelatedInfos(ba,l.getAllFieldInfos(J),P)};M._queryRelatedInfos=function(){var P=h._asyncToGenerator(function*(ba,J,H){const {relatedInfos:v,_sourceLayer:D}=this;v.clear();const C=G.isSome(D.associatedLayer)?yield D.associatedLayer.load(H):D;if(C){var O=J.filter(Y=>Y&&l.isRelatedField(Y.fieldName));if(O&&O.length){J.forEach(Y=>this._configureRelatedInfo(Y,C));var T=yield F.queryLayerInfos({relatedInfos:v,
layer:C},H);Object.keys(T).forEach(Y=>{var ha;const da=v.get(Y.toString());Y=null==(ha=T[Y])?void 0:ha.value;da&&Y&&(da.layerInfo=Y.data)});var Q=yield F.queryRelatedFeatures({graphic:ba,relatedInfos:v,layer:C},H);Object.keys(Q).forEach(Y=>{var ha;F.setRelatedFeatures(null==(ha=Q[Y])?void 0:ha.value,v.get(Y.toString()))})}}});return function(ba,J,H){return P.apply(this,arguments)}}();M._configureRelatedInfo=function(P,ba){const {relatedInfos:J}=this,H=F.getRelatedFieldInfo(P.fieldName);if(H){var {layerId:v,
fieldName:D}=H;v&&(ba=J.get(v.toString())||F.createRelatedInfo(v,ba))&&(F.updateRelatedInfo({relatedInfo:ba,fieldName:D,fieldInfo:P}),this.relatedInfos.set(v,ba))}};h._createClass(U,[{key:"_effectivePopupTemplate",get:function(){return G.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return l.createfieldInfoMap(l.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return l.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(P){this._set("graphic",P?P.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(P){void 0===P?this._clearOverride("spatialReference"):this._override("spatialReference",P)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(P){void 0===P?this._clearOverride("map"):
this._override("map",P)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return U}(x);x.interceptor=new n.FeatureSetQueryInterceptor(l.preLayerQueryCallback,l.preRequestCallback);k.__decorate([d.property()],x.prototype,"_error",void 0);k.__decorate([d.property()],x.prototype,"_featureAbortController",void 0);k.__decorate([d.property({readOnly:!0})],x.prototype,"_effectivePopupTemplate",null);k.__decorate([d.property({readOnly:!0})],x.prototype,"_fieldInfoMap",null);
k.__decorate([d.property({readOnly:!0})],x.prototype,"_sourceLayer",null);k.__decorate([d.property()],x.prototype,"abilities",void 0);k.__decorate([e.cast("abilities")],x.prototype,"castAbilities",null);k.__decorate([d.property({readOnly:!0})],x.prototype,"content",void 0);k.__decorate([d.property({readOnly:!0})],x.prototype,"contentViewModels",void 0);k.__decorate([d.property({type:Boolean})],x.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([d.property({readOnly:!0})],x.prototype,"state",
null);k.__decorate([d.property({readOnly:!0})],x.prototype,"formattedAttributes",void 0);k.__decorate([d.property({type:f,value:null})],x.prototype,"graphic",null);k.__decorate([d.property({readOnly:!0})],x.prototype,"lastEditInfo",void 0);k.__decorate([d.property({readOnly:!0})],x.prototype,"relatedInfos",void 0);k.__decorate([d.property()],x.prototype,"spatialReference",null);k.__decorate([d.property({readOnly:!0})],x.prototype,"title",void 0);k.__decorate([d.property()],x.prototype,"map",null);
k.__decorate([d.property({readOnly:!0})],x.prototype,"waitingForContent",null);k.__decorate([d.property()],x.prototype,"view",void 0);return x=K=k.__decorate([b.subclass("esri.widgets.FeatureViewModel")],x)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(h){h.FeatureSetQueryInterceptor=function(k,f){this.preLayerQueryCallback=k;this.preRequestCallback=f;this.preLayerQueryCallback||(this.preLayerQueryCallback=n=>{});this.preRequestCallback||(this.preLayerQueryCallback=
n=>{})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(h,k,f,n,x,I,z,G,E,u,m){h.FeatureContentMixin=
d=>{d=function(c){function g(){var e=c.apply(this,arguments)||this;e.renderNodeContent=b=>u.isWidget(b)&&!b.destroyed?m.tsx("div",{key:b},b.render()):b instanceof HTMLElement?m.tsx("div",{key:b,bind:b,afterCreate:e._attachToNode}):u.hasDomNode(b)?m.tsx("div",{key:b,bind:b.domNode,afterCreate:e._attachToNode}):null;return e}k._inheritsLoose(g,c);g.prototype._attachToNode=function(e){e.appendChild(this)};return g}(d);return d=f.__decorate([E.subclass("esri.widgets.Feature.ContentMixin")],d)};Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),function(h,k,f,n,x,
I,z,G,E,u,m,d,c,g,e,b){z=function(p){function w(t,q){t=p.call(this,t,q)||this;t._animationDelay=500;t._animationPromise=null;t.location=null;t.view=null;t.viewModel=new c;t.visible=!1;return t}h._inheritsLoose(w,p);var r=w.prototype;r.initialize=function(){this.own([x.watch(this,"visible",t=>this._visibleChange(t))])};r.destroy=function(){this._animationPromise=null};r.show=function(t){const {location:q,promise:B}=t;q&&(this.viewModel.location=q);this.visible=!0;t=()=>this.hide();B&&B.catch(()=>{}).then(t)};
r.hide=function(){this.visible=!1};r.render=function(){var {visible:t}=this,{screenLocation:q}=this.viewModel;q=!!q;t={["esri-spinner--start"]:t&&q,["esri-spinner--finish"]:!t&&q};q=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",t),styles:q})};r._visibleChange=function(t){if(t)this.viewModel.screenLocationEnabled=!0;else{var q=n.after(this._animationDelay);this._animationPromise=q;q.catch(()=>{}).then(()=>{this._animationPromise===q&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};r._getPositionStyles=function(){const {screenLocation:t,view:q}=this.viewModel;if(!q||f.isNone(t))return{};const {padding:B}=q;return{left:`${t.x-B.left}px`,top:`${t.y-B.top}px`}};return w}(d);k.__decorate([I.aliasOf("viewModel.location")],z.prototype,"location",void 0);k.__decorate([I.aliasOf("viewModel.view")],z.prototype,"view",void 0);k.__decorate([u.property({type:c})],z.prototype,"viewModel",void 0);k.__decorate([I.aliasOf("viewModel.visible")],z.prototype,
"visible",void 0);return z=k.__decorate([m.subclass("esri.widgets.Spinner")],z)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(h,k,f,n,x,I,z,G){n=function(E){function u(m){m=E.call(this,m)||this;m.visible=
!1;return m}h._inheritsLoose(u,E);return u}(G);k.__decorate([f.property()],n.prototype,"visible",void 0);return n=k.__decorate([z.subclass("esri.widgets.CompassViewModel")],n)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m){f=function(d){function c(e){var b=d.call(this,e)||this;b._anchorHandles=new n;b.location=null;b.screenLocation=null;b.screenLocationEnabled=!1;b.view=null;b._anchorHandles.add([I.watch(h._assertThisInitialized(b),["screenLocationEnabled","location","view.size","view.stationary"],()=>b._updateScreenPointAndHandle()),I.watch(h._assertThisInitialized(b),["view","view.ready"],()=>b._wireUpView())]);return b}h._inheritsLoose(c,d);var g=c.prototype;g.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};g._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:e}=this;e=I.pausable(e,"3d"===e.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(e,"view");this._viewpointHandle=e;this._toggleWatchingViewpoint()}};g._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
g._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};g._toggleWatchingViewpoint=function(){const {_viewpointHandle:e,location:b,screenLocationEnabled:p}=this;e&&(b&&p?e.resume():e.pause())};g._setScreenLocation=function(){const {location:e,view:b,screenLocationEnabled:p}=this;var w=this.get("view.ready");w=p&&w&&x.isSome(e)?b.toScreen(e):null;this._set("screenLocation",w)};return c}(f.EventedAccessor);k.__decorate([z.property()],f.prototype,"location",
void 0);k.__decorate([z.property({readOnly:!0})],f.prototype,"screenLocation",void 0);k.__decorate([z.property()],f.prototype,"screenLocationEnabled",void 0);k.__decorate([z.property()],f.prototype,"view",void 0);return f=k.__decorate([m.subclass("esri.widgets.support.AnchorElementViewModel")],f)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F,K,R,W,V,U,M){const P=I.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:t,toggle:q}}),ba=E.getLogger("esri.widgets.Popup.PopupViewModel");f=function(J){function H(D){D=J.call(this,D)||this;D._handles=new G;D._pendingPromises=new Set;D._fetchFeaturesController=null;D._selectedClusterFeature=null;D.featurePage=null;D.actions=new P;D.defaultPopupTemplateEnabled=!1;D.autoCloseEnabled=!1;D.autoOpenEnabled=!0;D.browseClusterEnabled=
!1;D.content=null;D.featuresPerPage=20;D.featureViewModelAbilities=null;D.featureViewModels=[];D.highlightEnabled=!0;D.includeDefaultActions=!0;D.selectedClusterBoundaryFeature=new n({symbol:new M({outline:{width:1.5,color:"cyan"},style:"none"})});D.title=null;D.updateLocationEnabled=!1;D.view=null;D.visible=!1;D.zoomFactor=4;D.zoomToLocation=null;return D}h._inheritsLoose(H,J);var v=H.prototype;v.initialize=function(){this._handles.add([m.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),m.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),m.watch(this,"view.animation.state",D=>this._animationStateChange(D)),m.watch(this,"location",D=>this._locationChange(D)),m.watch(this,"selectedFeature",D=>this._selectedFeatureChange(D)),m.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),m.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),m.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",D=>R.triggerAction({event:D,view:this.view})),m.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),m.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),m.watch(this,["view.scale"],this._viewScaleChange),m.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),m.watch(this,"browseClusterEnabled",D=>D?this.enableClusterBrowsing():this.disableClusterBrowsing())])};v.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};v.centerAtLocation=function(){var {view:D}=this;const C=R.getSelectedTarget(this);return C?this.callGoTo({target:{target:C,scale:D.scale}}):(D=new z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:C,view:D}),ba.error(D),Promise.reject(D))};v.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};v.fetchFeatures=function(D,C){const {view:O}=this;return O&&D?O.fetchPopupFeatures(D,{event:C&&C.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:C&&C.signal}):(D=new z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:D,view:O}),ba.error(D),Promise.reject(D))};v.open=
function(D){D={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...D,visible:!0};const {fetchFeatures:C}=D;delete D.fetchFeatures;C&&this._setFetchFeaturesPromises(D.location);this.set(D)};v.triggerAction=function(D){(D=this.allActions.getItemAt(D))&&!D.disabled&&this.emit("trigger-action",{action:D})};v.next=function(){this.selectedFeatureIndex+=1;return this};v.previous=function(){--this.selectedFeatureIndex;return this};v.disableClusterBrowsing=function(){R.removeClusteredFeaturesForBrowsing(this);
this._clearBrowsedClusterGraphics()};v.enableClusterBrowsing=function(){var D=h._asyncToGenerator(function*(){yield R.displayClusterExtent(this);yield R.browseAggregateFeatures(this)});return function(){return D.apply(this,arguments)}}();v._animationStateChange=function(D){this.zoomToLocation||(K.zoomToFeature.disabled="waiting-for-target"===D)};v._clearBrowsedClusterGraphics=function(){var D;const C=null==(D=this.view)?void 0:D.graphics;C&&(C.remove(this.selectedClusterBoundaryFeature),C.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};v._viewScaleChange=function(){var D;if(null!=(D=this.selectedFeature)&&D.isAggregate||this.browseClusterEnabled)this.visible=this.browseClusterEnabled=!1};v._locationChange=function(D){const {selectedFeature:C,updateLocationEnabled:O}=this;O&&D&&(!C||C.geometry)&&this.centerAtLocation()};v._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+
1:null};v._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};v._setGraphicOnFeatureViewModels=function(){const {features:D,featureCount:C,featurePage:O,featuresPerPage:T,featureViewModels:Q}=this;if(null!==O){var Y=((O-1)*T+C)%C;Q.slice(Y,Y+T).forEach((ha,da)=>{ha&&!ha.graphic&&(ha.graphic=D[Y+da])})}};v._selectedFeatureChange=function(){var D=h._asyncToGenerator(function*(C){if(C){var {location:O,updateLocationEnabled:T,view:Q}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&
(Q.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),C.isAggregate||(C.symbol=yield B.getDisplayedSymbol(C),this._selectedClusterFeature=C,Q.graphics.add(this._selectedClusterFeature))):!T&&O||!C.geometry?T&&!C.geometry&&this.centerAtLocation().then(()=>{this.location=Q.center.clone()}):this.location=u.unwrap(this._getPointFromGeometry(C.geometry))}});return function(C){return D.apply(this,arguments)}}();v._waitingForResultChange=function(){!this.featureCount&&this.promises&&
(this.visible=!1)};v._setFetchFeaturesPromises=function(D){return this._fetchFeaturesWithController(this._getScreenPoint(D||this.location)).then(C=>{const {clientOnlyGraphics:O,promisesPerLayerView:T}=C;C=Promise.resolve(O);const Q=T.map(Y=>Y.promise);this.promises=[C,...Q]})};v._destroyFeatureVMs=function(){this.featureViewModels.forEach(D=>D&&!D.destroyed&&D.destroy());this._set("featureViewModels",[])};v._updateFeatureVMs=function(){const {selectedFeature:D,features:C,featureViewModels:O}=this;
null!=D&&D.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(C&&C.length){var T=O.slice(0),Q=[];C.forEach((Y,ha)=>{if(Y){var da=null;T.some((pa,ea)=>{pa&&pa.graphic===Y&&(da=pa,T.splice(ea,1));return!!da});if(da)Q[ha]=da;else{var ka,qa;const pa=new F({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(ka=this.view)?void 0:ka.spatialReference,graphic:Y===D?Y:null,map:null==(qa=this.view)?void 0:qa.map,
view:this.view});Q[ha]=pa}}});T.forEach(Y=>Y&&!Y.destroyed&&Y.destroy());this._set("featureViewModels",Q)}};v._getScreenPoint=function(D){const {view:C}=this;return C&&D&&"function"===typeof C.toScreen?C.toScreen(D):null};v._autoOpenEnabledChange=function(){const {_handles:D,autoOpenEnabled:C}=this;D.remove("auto-fetch-features");if(C&&this.view){const O=this.view.on("click",T=>{"mouse"===T.pointerType&&0!==T.button||this._fetchFeaturesAndOpen(T)},A.ViewEventPriorities.WIDGET);D.add(O,"auto-fetch-features")}};
v._cancelFetchingFeatures=function(){const D=this._fetchFeaturesController;D&&D.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};v._fetchFeaturesWithController=function(D,C){this._cancelFetchingFeatures();const O=new AbortController,{signal:T}=O;this._fetchFeaturesController=O;this.notifyChange("waitingForResult");D=this.fetchFeatures(D,{signal:T,event:C});D.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return D};
v._fetchFeaturesAndOpen=function(D){const {screenPoint:C,mapPoint:O}=D,{view:T}=this;this._fetchFeaturesWithController(C,D).then(Q=>{const {clientOnlyGraphics:Y,promisesPerLayerView:ha,location:da}=Q,ka=[Promise.resolve(Y),...ha.map(qa=>qa.promise)];T.popup.open({location:da||O,promises:ka});return Q})};v._updatePendingPromises=function(D){D&&this._pendingPromises.has(D)&&(this._pendingPromises.delete(D),this.notifyChange("pendingPromisesCount"))};v._autoClose=function(){this.autoCloseEnabled&&(this.visible=
!1)};v._getPointFromGeometry=function(D){return u.isNone(D)?null:"point"===D.type?D:"extent"===D.type?D.center:"polygon"===D.type?D.centroid:"multipoint"===D.type||"polyline"===D.type?D.extent.center:null};v._getLayerView=function(){var D=h._asyncToGenerator(function*(C,O){yield C.when();return C.whenLayerView(O)});return function(C,O){return D.apply(this,arguments)}}();v._highlightFeature=function(){var D=h._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:C,
highlightEnabled:O,view:T,visible:Q}=this;if(C&&T&&O&&Q){var {layer:Y,sourceLayer:ha}=C;if("map-notes"===(null==ha?void 0:ha.type)||"subtype-group"===(null==ha?void 0:ha.type))Y=ha;if(Y&&Y instanceof w){var da=this._getLayerView(T,Y);this._highlightPromise=da;var ka=yield da;if(ka&&l.highlightsSupported(ka)&&this._highlightPromise===da&&this.selectedFeature&&this.highlightEnabled&&this.visible){da="objectIdField"in Y&&Y.objectIdField;var qa=C.attributes;ka=ka.highlight(qa&&da&&qa[da]||C);this._handles.add(ka,
"highlight")}}}});return function(){return D.apply(this,arguments)}}();v._updateFeatures=function(D){const {features:C}=this;D&&D.length&&(C.length?(D=D.filter(O=>-1===C.indexOf(O)),this.features=C.concat(D)):this.features=D)};h._createClass(H,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(D=>D.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const D=this._get("allActions")||new P;D.removeAll();
const {actions:C,defaultActions:O,defaultPopupTemplateEnabled:T,includeDefaultActions:Q,selectedFeature:Y}=this;var ha=Q?O.concat(C):C;const da=Y&&("function"===typeof Y.getEffectivePopupTemplate&&Y.getEffectivePopupTemplate(T)||Y.popupTemplate),ka=da&&da.actions;(ha=da&&da.overwriteActions?ka:ka?ka.concat(ha):ha)&&ha.filter(Boolean).forEach(qa=>D.add(qa));return D}},{key:"defaultActions",get:function(){var D;const C=this._get("defaultActions")||new P;C.removeAll();C.addMany(null!=(D=this.selectedFeature)&&
D.isAggregate?[K.zoomToClusteredFeatures.clone(),K.browseClusteredFeatures.clone()]:[K.zoomToFeature.clone()]);return C}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(D){D=D||[];this._set("features",D);const {pendingPromisesCount:C,promiseCount:O,selectedFeatureIndex:T}=this,Q=O&&D.length;Q&&C&&-1===T?this.selectedFeatureIndex=0:Q&&-1!==T||(this.selectedFeatureIndex=D.length?0:-1)}},{key:"location",get:function(){return this._get("location")||
null},set:function(D){const C=this.get("view.spatialReference.isWebMercator");D&&D.get("spatialReference.isWGS84")&&C&&(D=p.geographicToWebMercator(D));this._set("location",D)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||
[]},set:function(D){this._pendingPromises.clear();this.features=[];Array.isArray(D)&&D.length?(this._set("promises",D),D=D.slice(0),D.forEach(C=>{this._pendingPromises.add(C);C.then(O=>{this._pendingPromises.has(C)&&this._updateFeatures(O);this._updatePendingPromises(C)},()=>this._updatePendingPromises(C))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:D,selectedFeatureIndex:C}=this;return-1===C?null:D[C]||null}},{key:"selectedFeatureIndex",
get:function(){const D=this._get("selectedFeatureIndex");return"number"===typeof D?D:-1},set:function(D){const {featureCount:C}=this;D=isNaN(D)||-1>D||!C?-1:(D+C)%C;this._set("selectedFeatureIndex",D)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return H}(V.GoToMixin(W));k.__decorate([d.property()],f.prototype,"featurePage",void 0);k.__decorate([d.property()],
f.prototype,"isLoadingFeature",null);k.__decorate([d.property({type:P})],f.prototype,"actions",void 0);k.__decorate([d.property({readOnly:!0})],f.prototype,"active",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"allActions",null);k.__decorate([d.property({type:Boolean})],f.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([d.property()],f.prototype,"autoCloseEnabled",void 0);k.__decorate([d.property()],f.prototype,"autoOpenEnabled",void 0);k.__decorate([d.property()],f.prototype,
"browseClusterEnabled",void 0);k.__decorate([d.property()],f.prototype,"content",void 0);k.__decorate([d.property({type:P,readOnly:!0})],f.prototype,"defaultActions",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"featureCount",null);k.__decorate([d.property()],f.prototype,"features",null);k.__decorate([d.property()],f.prototype,"featuresPerPage",void 0);k.__decorate([d.property()],f.prototype,"featureViewModelAbilities",void 0);k.__decorate([d.property({readOnly:!0})],f.prototype,"featureViewModels",
void 0);k.__decorate([d.property()],f.prototype,"highlightEnabled",void 0);k.__decorate([d.property()],f.prototype,"includeDefaultActions",void 0);k.__decorate([d.property({type:U})],f.prototype,"location",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"pendingPromisesCount",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"selectedClusterBoundaryFeature",void 0);k.__decorate([d.property({readOnly:!0})],f.prototype,"waitingForResult",null);k.__decorate([d.property({readOnly:!0})],
f.prototype,"promiseCount",null);k.__decorate([d.property()],f.prototype,"promises",null);k.__decorate([d.property({value:null,readOnly:!0})],f.prototype,"selectedFeature",null);k.__decorate([d.property({value:-1})],f.prototype,"selectedFeatureIndex",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"selectedFeatureViewModel",null);k.__decorate([d.property({readOnly:!0})],f.prototype,"state",null);k.__decorate([d.property()],f.prototype,"title",void 0);k.__decorate([d.property()],f.prototype,
"updateLocationEnabled",void 0);k.__decorate([d.property()],f.prototype,"view",void 0);k.__decorate([d.property()],f.prototype,"visible",void 0);k.__decorate([d.property()],f.prototype,"zoomFactor",void 0);k.__decorate([d.property()],f.prototype,"zoomToLocation",void 0);k.__decorate([d.property()],f.prototype,"centerAtLocation",null);return f=k.__decorate([b.subclass("esri.widgets.Popup.PopupViewModel")],f)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),
function(h,k,f,n,x,I,z){function G(g,e){return E.apply(this,arguments)}function E(){E=f._asyncToGenerator(function*(g,e){switch(g.type){case "web-style":var {previewWebStyleSymbol:b}=yield new Promise((p,w)=>h(["./previewWebStyleSymbol"],p,w));return b(g,G,e);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:b}=yield new Promise((p,w)=>h(["./previewSymbol3D"],p,w)),b(g,e);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:b}=
yield new Promise((p,w)=>h(["./previewSymbol2D"],p,w)),b(g,e);case "cim":return{previewCIMSymbol:b}=yield new Promise((p,w)=>h(["./previewCIMSymbol"],p,w)),b(g,e)}});return E.apply(this,arguments)}function u(g){return g&&"opacity"in g?g.opacity*u(g.parent):1}function m(){m=f._asyncToGenerator(function*(g,e){var b,p;if(g){var w=g.sourceLayer;w=null!=(b=x.isSome(e)&&null!=(p=e.useSourceLayer)&&p?w:g.layer)?b:w;b=u(w);if(x.isSome(g.symbol)&&(!x.isSome(e)||!0!==e.ignoreGraphicSymbol))return g="web-style"===
g.symbol.type?yield g.symbol.fetchSymbol(x.isSome(e)?e.abortOptions:null):g.symbol.clone(),z.applyColorToSymbol(g,null,b),g;var r=x.isSome(e)&&e.renderer||w&&"renderer"in w&&w.renderer;if(p=r&&"getSymbolAsync"in r?yield r.getSymbolAsync(g,e):null){p="web-style"===p.type?yield p.fetchSymbol(x.isSome(e)?e.abortOptions:null):p.clone();if(!("visualVariables"in r&&r.visualVariables&&r.visualVariables.length))return z.applyColorToSymbol(p,null,b),p;"arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&
(x.isNone(e)||x.isNone(e.arcade))&&(e={...x.unwrap(e)},e.arcade=yield I.loadArcade());w=yield new Promise((F,K)=>h(["../../renderers/visualVariables/support/visualVariableUtils"],F,K));var t=[],q=[],B=[],A=[];for(var l of r.visualVariables)switch(l.type){case "color":t.push(l);break;case "opacity":q.push(l);break;case "rotation":A.push(l);break;case "size":l.target||B.push(l)}l=(l=!!t.length&&t[t.length-1])?w.getColor(l,g,e):null;q=(q=!!q.length&&q[q.length-1])?w.getOpacity(q,g,e):null;null!=b&&(q=
null!=q?q*b:b);z.applyColorToSymbol(p,l,q);B.length&&(b=w.getAllSizes(B,g,e),yield z.applySizesToSymbol(p,b));for(const F of A)z.applyRotationToSymbol(p,w.getRotationAngle(F,g,e),F.axis);return p}}});return m.apply(this,arguments)}function d(){d=f._asyncToGenerator(function*(g,e){var b;if(g){var p=u(g.layer||g.sourceLayer);if(x.isSome(g.symbol)&&(!x.isSome(e)||!0!==e.ignoreGraphicSymbol))return g="web-style"===g.symbol.type?yield g.symbol.fetchSymbol(x.isSome(e)?e.abortOptions:null):g.symbol.clone(),
z.getColorFromSymbol(g,p);var w=x.isSome(e)&&e.renderer||g.get("layer.renderer")||g.get("sourceLayer.renderer"),r=yield w.getSymbolAsync(g,e);if(r){r="web-style"===r.type?yield r.fetchSymbol(x.isSome(e)?e.abortOptions:null):r.clone();r=z.getColorFromSymbol(r,p);if(!("visualVariables"in w)||"visualVariables"in w&&!w.visualVariables||"visualVariables"in w&&(null==(b=w.visualVariables)||!b.length))return r;w.arcadeRequiredForVisualVariables&&(x.isNone(e)||x.isNone(e.arcade))&&(e={...x.unwrap(e)},e.arcade=
yield I.loadArcade());b=yield new Promise((B,A)=>h(["../../renderers/visualVariables/support/visualVariableUtils"],B,A));var t=[],q=[];for(const B of w.visualVariables)switch(B.type){case "color":t.push(B);break;case "opacity":q.push(B)}w=(w=0<t.length?t[t.length-1]:null)?b.getColor(w,g,e):r;g=(r=0<q.length?q[q.length-1]:null)?b.getOpacity(r,g,e):null;null!=p&&(g=null!=g?g*p:p);return w?z.applyOpacityToColor(w,g):null}}});return d.apply(this,arguments)}let c=null;k.getDisplayedColor=function(g,e){return d.apply(this,
arguments)};k.getDisplayedSymbol=function(g,e){return m.apply(this,arguments)};k.renderColorRampPreviewHTML=function(g,e={}){var b="horizontal"===e.align;const {width:p=b?75:24,height:w=b?24:75,gradient:r=!0}=e;var t=window.devicePixelRatio,q=p*t,B=w*t;t=document.createElement("canvas");t.width=q;t.height=B;t.style.width=`${p}px`;t.style.height=`${w}px`;const A=t.getContext("2d");var l=b?q:0,F=b?0:B;if(r){const K=A.createLinearGradient(0,0,l,F);b=g.length;const R=1===b?0:1/(b-1);g.forEach((W,V)=>
K.addColorStop(V*R,W.toString()));A.fillStyle=K;A.fillRect(0,0,q,B)}else{q=b?q/g.length:q;B=b?B:B/g.length;F=l=0;for(const K of g)A.fillStyle=K.toString(),A.fillRect(l,F,q,B),l=b?l+q:0,F=b?0:F+B}g=document.createElement("div");g.style.width=`${p}px`;g.style.height=`${w}px`;g.style.filter=z.getCSSFilterFromEffectList(null==e?void 0:e.effectList);g.appendChild(t);return g};k.renderDotDensityPreviewHTML=function(g,e,b){const {backgroundColor:p,outline:w,dotSize:r}=g;b=b&&b.swatchSize||22;const t=Math.round(b*
b/r**2*.8),q=window.devicePixelRatio;g=document.createElement("canvas");const B=b*q;g.width=B;g.height=B;g.style.width=`${g.width/q}px`;g.style.height=`${g.height/q}px`;const A=g.getContext("2d");p&&(A.fillStyle=p.toCss(!0),A.fillRect(0,0,B,B),A.fill());A.fillStyle=e.toCss(!0);if(c&&c.length/2===t)for(e=0;e<2*t;e+=2)A.fillRect(c[e],c[e+1],r*q,r*q),A.fill();else for(c=[],e=0;e<2*t;e+=2){const l=Math.floor(Math.random()*(B-0+1)),F=Math.floor(Math.random()*(B-0+1));c.push(l,F);A.fillRect(l,F,r*q,r*q);
A.fill()}w&&(w.color&&(A.strokeStyle=w.color.toCss(!0)),A.lineWidth=w.width,A.strokeRect(0,0,B,B));b=new Image(b,b);b.src=g.toDataURL();return b};k.renderPreviewHTML=G;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c){function g(M){M=M.symbolLayers;if(!M)return null;let P=null;M.forEach(ba=>{if("object"!==ba.type||null==ba.resource.href)P="water"===ba.type?G.unwrap(ba.color):G.isSome(ba.material)?G.unwrap(ba.material.color):null});return P?new n(P):null}function e(M,P){if(null==P)return M;M=M.toRgba();M[3]*=P;return new n(M)}function b(M,P,ba){if(M=M.symbolLayers){var J=H=>{H=G.isSome(H)?H:null;P=P||H||null!=ba&&U;return e(P,ba)};M.forEach(H=>{if("object"!==H.type||null==H.resource.href||
P)if("water"===H.type)H.color=J(H.color);else{var v=G.isSome(H.material)?H.material.color:null;v=J(v);G.isNone(H.material)?H.material=new c.default({color:v}):H.material.color=v;null!=ba&&"outline"in H&&G.isSome(H.outline)&&G.isSome(H.outline.color)&&(H.outline.color=e(H.outline.color,ba))}})}}function p(M,P){return w.apply(this,arguments)}function w(){w=f._asyncToGenerator(function*(M,P){(M=M.symbolLayers)&&(yield I.forEach(M,function(){var ba=f._asyncToGenerator(function*(J){return r(J,P)});return function(J){return ba.apply(this,
arguments)}}()))});return w.apply(this,arguments)}function r(M,P){return t.apply(this,arguments)}function t(){t=f._asyncToGenerator(function*(M,P){switch(M.type){case "extrude":M.size="number"===typeof P[2]?P[2]:0;break;case "icon":case "line":case "text":P=q(P);G.isSome(P)&&(M.size=P);break;case "path":{const ba=l(P,u.ONES,[M.width,void 0,M.height]);M.width=R(P[0],M.width,1,ba);M.height=R(P[2],M.height,1,ba)}break;case "object":yield B(M,P)}});return t.apply(this,arguments)}function q(M){for(const P of M)if("number"===
typeof P)return P;return null}function B(M,P){return A.apply(this,arguments)}function A(){A=f._asyncToGenerator(function*(M,P){const {resourceSize:ba,symbolSize:J}=yield F(M),H=l(P,ba,J);M.width=R(P[0],J[0],ba[0],H);M.depth=R(P[1],J[1],ba[1],H);M.height=R(P[2],J[2],ba[2],H)});return A.apply(this,arguments)}function l(M,P,ba){for(let J=0;3>J;J++){const H=M[J];switch(H){case "symbol-value":return null!=ba[J]?ba[J]/P[J]:1;case "proportional":break;default:if(H&&P[J])return H/P[J]}}return 1}function F(M){return K.apply(this,
arguments)}function K(){K=f._asyncToGenerator(function*(M){const P=yield(yield new Promise((C,O)=>h(["./symbolLayerUtils"],C,O))).computeObjectLayerResourceSize(M,10),{width:ba,height:J,depth:H}=M;M=[ba,H,J];let v=1;for(var D=0;3>D;D++)if(null!=M[D]){v=M[D]/P[D];break}for(D=0;3>D;D++)null==M[D]&&(M[D]=P[D]*v);return{resourceSize:P,symbolSize:M}});return K.apply(this,arguments)}function R(M,P,ba,J){switch(M){case "proportional":return ba*J;case "symbol-value":return null!=P?P:ba;default:return M}}
function W(){W=f._asyncToGenerator(function*(M,P){if(M&&P){if(x.isSymbol3D(M))return p(M,P);if(x.isSymbol2D(M)&&(P=q(P),!G.isNone(P)))switch(M.type){case "simple-marker":M.size=P;break;case "picture-marker":{const ba=M.width/M.height;1<ba?(M.width=P,M.height=P*ba):(M.width=P*ba,M.height=P);break}case "simple-line":M.width=P;break;case "text":M.font.size=P}}});return W.apply(this,arguments)}const V=/\/resource\/(.*?)\.svg$/,U=new n("white");k.applyColorToSymbol=function(M,P,ba){if(M&&(P||null!=ba))if(P&&
(P=new n(P)),x.isSymbol3D(M))b(M,P,ba);else if(x.isSymbol2D(M)){if(P=P||M.color)M.color=e(P,ba);null!=ba&&"outline"in M&&M.outline&&M.outline.color&&(M.outline.color=e(M.outline.color,ba))}};k.applyOpacityToColor=e;k.applyRotationToSymbol=function(M,P,ba){M&&null!=P&&(x.isSymbol3D(M)?(M=M.symbolLayers)&&M.forEach(J=>{if(J&&"object"===J.type)switch(ba){case "tilt":J.tilt=P;break;case "roll":J.roll=P;break;default:J.heading=P}}):!x.isSymbol2D(M)||"simple-marker"!==M.type&&"picture-marker"!==M.type&&
"text"!==M.type||(M.angle=P))};k.applySizesToSymbol=function(M,P){return W.apply(this,arguments)};k.getCSSFilterFromEffectList=function(M){if(!M)return null;M=M.effects.filter(P=>"bloom"!==P.type).map(P=>P.toJSON());return m.effectFunctionsFromJSON(M)};k.getColorFromSymbol=function(M,P){if(!M)return null;let ba=null;x.isSymbol3D(M)?ba=g(M):x.isSymbol2D(M)&&(ba=M.color?new n(M.color):null);return ba?e(ba,P):null};k.getIconHref=function(M,P){P=P.resource.href;return!z("esri-canvas-svg-support")&&M.styleOrigin&&
V.test(P)?P.replace(V,"/resource/png/$1.png"):P};k.getSymbolOutlineSize=function(M){if(!M)return 0;if(x.isSymbol3D(M)){{const P=M.symbolLayers&&M.symbolLayers.length;P?(M=M.symbolLayers.getItemAt(P-1),M="outline"in M?G.get(M,"outline","size"):void 0):M=void 0}return G.isSome(M)?M:0}return(M=d.getStroke(M))&&E.px2pt(M.width)||0};k.isVolumetricSymbol=function(M){if(G.isNone(M)||!("symbolLayers"in M)||G.isNone(M.symbolLayers))return!1;switch(M.type){case "point-3d":return M.symbolLayers.some(P=>"object"===
P.type);case "line-3d":return M.symbolLayers.some(P=>"path"===P.type);case "polygon-3d":return M.symbolLayers.some(P=>"object"===P.type||"extrude"===P.type);default:return!1}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(h,k,f,n,x,I,z){function G(c){if(!c)return null;let g;switch(c.type){case "simple-fill":case "picture-fill":case "simple-marker":g=
G(c.outline);break;case "simple-line":{const e=I.pt2px(c.width);"none"!==c.style&&0!==e&&(g={color:c.color,style:d(c.style),width:e,cap:c.cap,join:"miter"===c.join?I.pt2px(c.miterLimit):c.join});break}default:g=null}return g}const E={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},m=new x(1E3),d=function(){const c={};return function(g){if(c[g])return c[g];const e=g.replace(/-/g,"");return c[g]=e}}();
f=new f([128,128,128]);h.defaultThematicColor=f;h.dekebabifyLineStyle=d;h.getFill=function(c){const g=c.style;let e=null;if(c)switch(c.type){case "simple-marker":"cross"!==g&&"x"!==g&&(e=c.color);break;case "simple-fill":"solid"===g?e=c.color:"none"!==g&&(e={type:"pattern",x:0,y:0,src:k.getAssetUrl(`esri/symbols/patterns/${g}.png`),width:5,height:5});break;case "picture-fill":e={type:"pattern",src:c.url,width:I.pt2px(c.width)*c.xscale,height:I.pt2px(c.height)*c.yscale,x:I.pt2px(c.xoffset),y:I.pt2px(c.yoffset)};
break;case "text":e=c.color;break;case "cim":e=z.getCIMSymbolColor(c)}return e};h.getPatternUrlWithColor=function(c,g){const e=c+"-"+g;return void 0!==m.get(e)?Promise.resolve(m.get(e)):n(c,{responseType:"image"}).then(b=>{b=b.data;const p=b.naturalWidth,w=b.naturalHeight,r=document.createElement("canvas");r.width=p;r.height=w;const t=r.getContext("2d");t.fillStyle=g;t.fillRect(0,0,p,w);t.globalCompositeOperation="destination-in";t.drawImage(b,0,0);b=r.toDataURL();m.put(e,b);return b})};h.getSVGAlign=
function(c){return c=(c=c.horizontalAlignment)&&E[c.toLowerCase()]||"middle"};h.getSVGBaseline=function(c){return(c=c.verticalAlignment)&&u[c.toLowerCase()]||"alphabetic"};h.getSVGBaselineShift=function(c){return"bottom"===c.verticalAlignment?"super":null};h.getStroke=G;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(h){return function(){function k(n,x){this._storage=new h.MemCacheStorage;this._storage.maxSize=n;x&&this._storage.registerRemoveFunc("",
x)}var f=k.prototype;f.put=function(n,x){this._storage.put(n,x,1,1)};f.pop=function(n){return this._storage.pop(n)};f.get=function(n){return this._storage.get(n)};f.clear=function(){this._storage.clearAll()};f.destroy=function(){this._storage.destroy()};return k}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(h,k,f){function n(d){d=f.toCIMSymbolJSON(d);if("CIMTextSymbol"===d.type)return d.height;let c=0;if(d.symbolLayers)for(const g of d.symbolLayers)f.isCIMMarker(g)&&
g.size>c?c=g.size:f.isCIMStroke(g)&&g.width>c?c=g.width:f.isCIMFill(g);return c}function x(d,c,g,e){if("CIMTextSymbol"===d.type)d.height*=c;else{if(g&&d.effects)for(const b of d.effects)G(b,c);if(d.symbolLayers)for(const b of d.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":I(b,c,e);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=e&&e.preserveOutlineWidth||(b.width*=c);break;case "CIMPictureFill":b.height*=c;b.offsetX*=c;b.offsetY*=c;break;case "CIMHatchFill":x(b.lineSymbol,
c,!0,{...e,preserveOutlineWidth:!1}),b.offsetX*=c,b.offsetY*=c,b.separation*=c}}}function I(d,c,g){d.markerPlacement&&z(d.markerPlacement,c);d.offsetX*=c;d.offsetY*=c;d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*c,y:d.anchorPoint.y*c});d.size*=c;if("CIMVectorMarker"===d.type&&d.markerGraphics)for(const e of d.markerGraphics)d.scaleSymbolsProportionally||x(e.symbol,c,!0,g)}function z(d,c){f.isCIMMarkerStrokePlacement(d)&&(d.offset*=c);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset*=
c;d.offsetAlongLine*=c;if(d.placementTemplate&&d.placementTemplate.length){var g=d.placementTemplate.map(e=>e*c);d.placementTemplate=g}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset*=c;d.placementTemplate&&d.placementTemplate.length&&(g=d.placementTemplate.map(e=>e*c),d.placementTemplate=g);break;case "CIMMarkerPlacementOnLine":d.startPointOffset*=c;break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine*=c;break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition*=
c;d.endPosition*=c;break;case "CIMMarkerPlacementPolygonCenter":d.offsetX*=c;d.offsetY*=c;break;case "CIMMarkerPlacementInsidePolygon":d.offsetX*=c,d.offsetY*=c,d.stepX*=c,d.stepY*=c}}function G(d,c){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width*=c;break;case "CIMGeometricEffectBuffer":d.size*=c;break;case "CIMGeometricEffectCut":d.beginCut*=c;d.endCut*=c;d.middleCut*=c;break;case "CIMGeometricEffectDashes":d.customEndingOffset*=c;d.offsetAlongLine*=c;if(d.dashTemplate&&
d.dashTemplate.length){const g=d.dashTemplate.map(e=>e*c);d.dashTemplate=g}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length*=c;break;case "CIMGeometricEffectMove":d.offsetX*=c;d.offsetY*=c;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset*=c;break;case "CIMGeometricEffectRegularPolygon":d.radius*=c;break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth*=c;d.length*=c;d.toWidth*=c;break;case "CIMGeometricEffectWave":d.amplitude*=
c,d.period*=c}}function E(d,c){let g;g="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(g.symbolLayers)for(const e of g.symbolLayers)if(!(e.colorLocked||d&&(f.isCIMStroke(e)||f.isCIMMarker(e)&&e.markerPlacement&&f.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(e.type){case "CIMVectorMarker":e.markerGraphics.forEach(b=>{E(b.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":u(c,e.color);break;case "CIMHatchFill":E(e.lineSymbol,c)}}function u(d,c){for(const g of d)if(g.join(".")===
c.join("."))return;d.push(c)}function m(d,c){var g="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type?!0:!1;if(g.symbolLayers)for(const e of g.symbolLayers)if(!(e.colorLocked||d&&(f.isCIMStroke(e)||f.isCIMMarker(e)&&e.markerPlacement&&f.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(g=c.toArray(0),e.type){case "CIMVectorMarker":e.markerGraphics.forEach(b=>{m(b.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=g;break;case "CIMHatchFill":m(e.lineSymbol,c)}}
h.applyCIMSymbolColor=function(d,c){c instanceof k||(c=new k(c));d=f.toCIMSymbolJSON(d);m(d,c)};h.applyCIMSymbolRotation=function(d,c,g=!1){d=f.toCIMSymbolJSON(d);g&&0!==c&&(c=360-c);if("CIMTextSymbol"===d.type)d.angle=c;else if("CIMPointSymbol"===d.type&&d.symbolLayers){g=c-(d.angle||0);for(const e of d.symbolLayers)if(f.isCIMMarker(e)){let b=e.rotation||0;b=e.rotateClockwise?b-g:b+g;e.rotation=b}d.angle=c}};h.getCIMSymbolColor=function(d){d=f.toCIMSymbolJSON(d);const c=[];E(d,c);return c.length?
new k(f.fromCIMColor(c[0])):null};h.getCIMSymbolRotation=function(d,c=!1){d=f.toCIMSymbolJSON(d);return"CIMTextSymbol"===d.type||"CIMPointSymbol"===d.type?c&&0!==d.angle?360-d.angle:d.angle||0:0};h.getCIMSymbolSize=n;h.scaleCIMMarker=I;h.scaleCIMSymbolTo=function(d,c,g){const e=f.toCIMSymbolJSON(d);d=n(d);if(0===d)if("CIMTextSymbol"===e.type)e.height=c;else{if(e.symbolLayers)for(const b of e.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":b.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":b.width=
c}}else x(e,c/d,!1,g)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(h){function k(f,n){"string"!==typeof f&&(f=String(f));switch(n){case "LowerCase":return f.toLowerCase();case "Allcaps":return f.toUpperCase();default:return f}}h._adjustTextCase=k;h.colorToArray=function(f){return[f.r,f.g,f.b,f.a]};h.createLabelOverrideFunction=function(f,n,x){const I=u=>{let m=u.length;for(;m--;)if(-1===" /-,\n".indexOf(u.charAt(m)))return!1;
return!0},z=[];var G=0;let E=-1;do E=n.indexOf("[",G),E>=G&&(E>G&&(G=n.substr(G,E-G),z.push([G,null,I(G)])),G=E+1,E=n.indexOf("]",G),E>=G&&(E>G&&(G=n.substr(G,E-G),(G=f[G])&&z.push([null,G,!1])),G=E+1));while(-1!==E);G<n.length-1&&(f=n.substr(G),z.push([f,null,I(f)]));return u=>{let m="",d=null;for(const c of z){const [g,e,b]=c;if(g)b?d=g:(d&&(m+=d,d=null),m+=g);else{const p=u.attributes[e];p&&(d&&(m+=d,d=null),m+=p)}}return k(m,x)}};h.evaluateValueOrFunction=function(f,n,x,I){return"function"===
typeof f?f(n,x,I):f};h.fromCIMColor=function(f){return f?{r:f[0],g:f[1],b:f[2],a:f[3]/255}:{r:0,g:0,b:0,a:0}};h.getValue=f=>isNaN(f)||!f?0:f;h.isCIMFill=function(f){return"CIMGradientFill"===f.type||"CIMHatchFill"===f.type||"CIMPictureFill"===f.type||"CIMSolidFill"===f.type||"CIMWaterFill"===f.type};h.isCIMMarker=function(f){return"CIMVectorMarker"===f.type||"CIMPictureMarker"===f.type||"CIMBarChartMarker"===f.type||"CIMCharacterMarker"===f.type||"CIMPieChartMarker"===f.type||"CIMStackedBarChartMarker"===
f.type};h.isCIMMarkerStrokePlacement=function(f){return"CIMMarkerPlacementAlongLineRandomSize"===f.type||"CIMMarkerPlacementAlongLineSameSize"===f.type||"CIMMarkerPlacementAlongLineVariableSize"===f.type||"CIMMarkerPlacementAtExtremities"===f.type||"CIMMarkerPlacementAtMeasuredUnits"===f.type||"CIMMarkerPlacementAtRatioPositions"===f.type||"CIMMarkerPlacementOnLine"===f.type||"CIMMarkerPlacementOnVertices"===f.type};h.isCIMStroke=function(f){return"CIMGradientStroke"===f.type||"CIMPictureStroke"===
f.type||"CIMSolidStroke"===f.type};h.resampleHermite=function(f,n,x,I,z,G,E=!0){const u=n/z;x/=G;const m=Math.ceil(u/2),d=Math.ceil(x/2);for(let e=0;e<G;e++)for(let b=0;b<z;b++){const p=4*(b+(E?G-e-1:e)*z);var c=0;let w=0,r=0,t=0,q=0,B=0,A=0;const l=(e+.5)*x;for(let F=Math.floor(e*x);F<(e+1)*x;F++){var g=Math.abs(l-(F+.5))/d;const K=(b+.5)*u;g*=g;for(let R=Math.floor(b*u);R<(b+1)*u;R++){let W=Math.abs(K-(R+.5))/m;c=Math.sqrt(g+W*W);-1<=c&&1>=c&&(c=2*c*c*c-3*c*c+1,0<c&&(W=4*(R+F*n),A+=c*f[W+3],r+=
c,255>f[W+3]&&(c=c*f[W+3]/250),t+=c*f[W],q+=c*f[W+1],B+=c*f[W+2],w+=c))}}I[p]=t/w;I[p+1]=q/w;I[p+2]=B/w;I[p+3]=A/r}};h.toCIMSymbolJSON=function(f){var n;return null==(n=f.data)?void 0:n.symbol};h.toKebabCase=f=>f&&f.toLowerCase().replace(/\s+/g,"-");Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(h,k){h.extractSafeScaleBounds=function(f){let {minScale:n,maxScale:x}=f;return{minScale:n||0,maxScale:x||
0}};h.highlightsSupported=function(f){return f&&"function"===typeof f.highlight};h.occludeesSupported=function(f){return f&&"function"===typeof f.maskOccludee};h.scaleBoundsPredicate=function(f,n,x){return k.isNone(f)||f>x&&(0===n||f<n)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(h,k){const f=new k({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),
n=new k({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),x=new k({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});k=new k({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});h.all=[f,n,k,x];h.browseClusteredFeatures=k;h.removeSelectedFeature=n;h.zoomToClusteredFeatures=x;h.zoomToFeature=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),
function(h,k,f,n,x,I){function z(b){const {selectedFeature:p,location:w,view:r}=b;return r?"3d"===r.type?p||w:b.get("selectedFeature.geometry")||w:null}function G(b,p){if("3d"!==(null==p?void 0:p.type)||!b||"esri.Graphic"!==b.declaredClass)return!0;if((p=p.getViewForGraphic(b))&&"whenGraphicBounds"in p){let w=!1;p.whenGraphicBounds(b,{useViewElevation:!0}).then(r=>{w=!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}).catch(()=>
{const r=new f("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:b});e.error(r)});return w}return!0}function E(b){return u.apply(this,arguments)}function u(){u=k._asyncToGenerator(function*(b){const {location:p,selectedFeature:w,view:r,zoomFactor:t}=b,q=z(b);if(!q)return b=new f("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:q,view:r}),e.error(b),Promise.reject(b);const B=r.scale/t,A=b.get("selectedFeature.geometry")||
p,l=A&&"point"===A.type&&G(w,r);I.zoomToFeature.active=!0;I.zoomToFeature.disabled=!0;try{yield b.view.goTo({target:q,scale:l?B:void 0})}finally{I.zoomToFeature.active=!1,I.zoomToFeature.disabled=!1,b.zoomToLocation=null,l&&(b.location=A)}});return u.apply(this,arguments)}function m(b){return d.apply(this,arguments)}function d(){d=k._asyncToGenerator(function*(b){const {selectedFeature:p,view:w}=b;if("2d"!==(null==w?void 0:w.type))throw b=new f("zoomToCluster:invalid-view","View must be 2d MapView.",
{view:w}),e.error(b),b;if(!p.isAggregate)throw b=new f("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p}),e.error(b),b;b=yield w.whenLayerView(p.sourceLayer);const r=b.createQuery();r.aggregateIds=[p.getObjectId()];I.zoomToClusteredFeatures.active=!0;I.zoomToClusteredFeatures.disabled=!0;({extent:b}=yield b.queryExtent(r));yield w.goTo({target:b});I.zoomToClusteredFeatures.active=!1;I.zoomToClusteredFeatures.disabled=!1});return d.apply(this,
arguments)}function c(){c=k._asyncToGenerator(function*(b){const {selectedFeature:p,view:w}=b;if("2d"!==(null==w?void 0:w.type))throw b=new f("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:w}),e.error(b),b;if(!p.isAggregate)throw b=new f("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p}),e.error(b),b;var r=yield w.whenLayerView(p.sourceLayer);const t=r.createQuery();t.aggregateIds=[p.getObjectId()];({extent:r}=
yield r.queryExtent(t));b.selectedClusterBoundaryFeature.geometry=r;w.graphics.add(b.selectedClusterBoundaryFeature)});return c.apply(this,arguments)}function g(){g=k._asyncToGenerator(function*(b){const {selectedFeature:p,view:w}=b;if("2d"!==(null==w?void 0:w.type))throw b=new f("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:w}),e.error(b),b;if(!p.isAggregate)throw b=new f("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:p}),e.error(b),b;b=yield w.whenLayerView(p.sourceLayer);const r=b.createQuery();r.aggregateIds=[p.getObjectId()];I.browseClusteredFeatures.active=!0;I.browseClusteredFeatures.disabled=!0;({features:b}=yield b.queryFeatures(r));I.browseClusteredFeatures.active=!1;I.browseClusteredFeatures.disabled=!1;w.popup.open({features:[p].concat(b),featureMenuOpen:!0})});return g.apply(this,arguments)}const e=n.getLogger("esri.widgets.Popup.PopupViewModel");h.browseAggregateFeatures=function(b){return g.apply(this,
arguments)};h.displayClusterExtent=function(b){return c.apply(this,arguments)};h.getSelectedTarget=z;h.isZoomScreenSize=G;h.removeClusteredFeaturesForBrowsing=function(b){b.features=b.features.filter(p=>p.isAggregate)};h.triggerAction=function(b){const {event:p,view:w}=b;({action:b}=p);var r=w&&w.popup;if(!b)return Promise.reject(new f("trigger-action:missing-arguments","Event has no action"));if(!r)return Promise.reject(new f("trigger-action:missing-arguments","view.popup is missing"));const {disabled:t,
id:q}=b;if(!q)return Promise.reject(new f("trigger-action:invalid-action","action.id is missing"));if(t)return Promise.reject(new f("trigger-action:invalid-action","Action is disabled"));if(q===I.zoomToFeature.id)return E(r.viewModel).catch(x.throwIfNotAbortError);if(q===I.zoomToClusteredFeatures.id)return m(r.viewModel);if(q===I.browseClusteredFeatures.id)return r.featureMenuOpen=!r.featureMenuOpen,r.viewModel.browseClusterEnabled=!r.viewModel.browseClusterEnabled,Promise.resolve();r.viewModel.browseClusterEnabled=
!1;if(q===I.removeSelectedFeature.id){r.close();({selectedFeature:b}=r);if(!b)return Promise.reject(new f(`trigger-action:${I.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:b}));({sourceLayer:r}=b);r?r.remove(b):w.graphics.remove(b)}return Promise.resolve()};h.zoomToClusterExtent=m;h.zoomToLocation=E;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G){h.GoToMixin=E=>{E=function(u){function m(...d){d=u.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}k._inheritsLoose(m,u);m.prototype.callGoTo=function(d){const {view:c}=this;return this.goToOverride?this.goToOverride(c,d):c.goTo(d.target,d.options)};return m}(E);f.__decorate([n.property()],E.prototype,"goToOverride",void 0);f.__decorate([n.property()],E.prototype,"view",void 0);return E=f.__decorate([G.subclass("esri.widgets.support.GoTo")],E)};Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/views/MapViewBase":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/layers/features/support/TileStore ./2d/support/Timeline ../geometry/Point ../geometry/Extent ../geometry/SpatialReference".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F,K,R,W,V,U,M,P,ba,J,H,v){const D=I.getLogger("esri.views.MapView");f=function(C){function O(Q){var Y=C.call(this,Q)||this;Y._stationaryTimer=null;Y.frameTask=new B(h._assertThisInitialized(Y));Y.featuresTilingScheme=null;Y.fullOpacity=1;Y.graphicsView=null;Y.initialExtent=null;Y.map=null;Y.labelManager=null;Y.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};Y.resizeAlign="center";
Y.supportsGround=!1;Y.timeline=new ba.Timeline;Y.type="2d";Y.constraints=new l;Y.padding={top:0,right:0,bottom:0,left:0};const ha=Y.handles,da=()=>Y.notifyChange("updating");ha.add([Y.watch("viewpoint",()=>{Y._lastStationaryEventTimestamp=performance.now();Y._flipStationary(160)},!0),Y.on("resize",ka=>Y._resizeHandler(ka)),Y.watch("animationManager.animation",ka=>{Y.animation=ka}),Y.allLayerViews.on("change",()=>{da();ha.remove("map-view-base-layerViewsUpdating");ha.add(Y.allLayerViews.map(ka=>ka.watch("updating",
da)),"map-view-base-layerViewsUpdating")})],"map-view-base");return Y}h._inheritsLoose(O,C);var T=O.prototype;T.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};T.goTo=function(Q,Y){if(Q)return this.animation&&(this.animation=null),this._createAnimation(),u.whenTrueOnce(this,"ready",Y&&Y.signal).then(()=>{const ha={animate:!0,...Y},da=M.createAsync(Q,this);this.animation.update(da);this._gotoTask={};return ha.animate?this._gotoAnimated(da,
ha):this._gotoImmediate(da,ha)});D.error("#goTo()","target cannot be null or undefined")};T.hitTest=function(Q){return Promise.reject("Should be implemented by subclasses")};T.popupHitTest=function(Q){return this.hitTest(Q).then(Y=>({...Y,mapPoint:this.toMap(Q)}))};T.toMap=function(Q){if(!this.ready)return null;const [Y,ha]=this.state.toMap([0,0],[Q.x,Q.y]);return new J({x:Y,y:ha,spatialReference:this.spatialReference})};T.toScreen=function(Q){if(!this.ready)return null;Q=this._normalizeInput(Q);
Q=[Q.x,Q.y];this.state.toScreen(Q,Q);return E.createScreenPoint(Q[0],Q[1])};T.pixelSizeAt=function(){return this.ready?this.state.resolution:(D.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};T.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};T.getDefaultSpatialReference=function(){var Q,Y,ha;return this.map&&"initialViewProperties"in this.map&&(null==(Q=this.map)?void 0:null==(Y=Q.initialViewProperties)?void 0:Y.spatialReference)||(null==(ha=this.defaultsFromMap)?
void 0:ha.spatialReference)||null};T.getSpatialReferenceSupport=function({layer:Q}){return Q||this._get("ready")?{}:null!==this._getDefaultViewpoint()?{}:null};T.importLayerView=function(Q){return A.layerView2DImporter.importLayerView(Q)};T.hasLayerViewModule=function(Q){return A.layerView2DImporter.hasLayerViewModule(Q)};T._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new t;return this.animation};T._cancellableGoTo=function(Q,Y,ha){const da=()=>Q===this._gotoTask,
ka=ha.then(()=>{da()&&(this.animation=null)}).catch(pa=>{da()&&(this.animation=null,Y.done||(Y.stop(),this.frameTask.animationInProgress=!1));throw pa;}),qa=new Promise(pa=>pa(ka));Y.when().catch(()=>{da()&&qa.cancel&&qa.cancel()});return qa};T._gotoImmediate=function(Q,Y){const ha=this._gotoTask,da=this.animation;Q=Q.then(ka=>{G.throwIfAborted(Y);if(ha!==this._gotoTask)throw new x("view:goto-interrupted","Goto was interrupted");this.viewpoint=da.target=ka;da.finish()});return this._cancellableGoTo(ha,
da,Q)};T._gotoAnimated=function(Q,Y){const ha=this._gotoTask,da=this.animation;Q=Q.then(ka=>{G.throwIfAborted(Y);if(ha!==this._gotoTask)throw new x("view:goto-interrupted","Goto was interrupted");da.update(ka);this.animationManager.animate(da,this.viewpoint,Y);return da.when().then(()=>{},()=>{})});return this._cancellableGoTo(ha,da,Q)};T._resizeHandler=function(Q){const Y=this.state;if(Y){var ha=this.state.paddedViewState.viewpoint,da=this.state.paddedViewState.size.concat();Y.size=[Q.width,Q.height];
M.resize(ha,ha,da,this.state.paddedViewState.size,this.resizeAlign);ha=this.constraints.constrain(ha,null);this.state.viewpoint=ha}};T._startup=function(){const Q=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(Q);this._set("animationManager",new q({view:this}));this._set("state",new F({padding:this._get("padding"),size:this.size,viewpoint:Q}));this._set("featuresTilingScheme",new R(p.create({spatialReference:this.spatialReference,size:512,numLODs:36})));this._set("ready",
!0);this.frameTask&&this.frameTask.start()};T._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const {center:[Q,Y],spatialReference:ha,rotation:da,scale:ka}=this.state.paddedViewState,qa=new J({x:Q,y:Y,spatialReference:ha});this._set("viewpoint",null);this._set("extent",null);this._set("center",qa);this._set("zoom",-1);this._set("rotation",da);this._set("scale",ka);this._set("spatialReference",
ha);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};T._flipStationary=function(Q){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const Y=performance.now()-this._lastStationaryEventTimestamp;160>Y&&(this._stationaryTimer=this._flipStationary(Y))},Q)};T._normalizeInput=function(Q,Y=this.spatialReference){const ha=Q&&Q.targetGeometry||
Q;return Y?ha?Y.equals(ha.spatialReference)?Q:b.canProject(ha,Y)?Q&&"esri.Viewpoint"===Q.declaredClass?(Q.targetGeometry=b.project(ha,Y),Q):b.project(ha,Y):null:null:Q};T._getDefaultViewpoint=function(){var Q=this.constraints,Y=this._get("zoom"),ha=this._get("scale"),da=this._normalizeInput(this._get("center")),ka=this._normalizeInput(this._get("extent")),qa=this._get("rotation"),pa=this._normalizeInput(this._get("viewpoint"));Q.effectiveLODs?-1!==Y&&(ha=Q.zoomToScale(Y)):Y=-1;let ea=null;var ia=
null;Y=0;Q=pa&&pa.rotation;var ma=pa&&pa.targetGeometry;z.isSome(ma)&&("extent"===ma.type?ea=ma:"point"===ma.type&&(ia=ma,Y=pa.scale));pa=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));ma=this._normalizeInput(this.initialExtent);ka=ka||ea||pa||ma;da=da||ia||ka&&ka.center;ia=this.get("map.initialViewProperties.viewpoint.scale");ha=ha||Y||ia||ka&&M.extentToScale(ka,this.size);Y=this.get("map.initialViewProperties.viewpoint.rotation");return da&&ha?new n({targetGeometry:da,
scale:ha,rotation:qa||Q||Y||0}):null};h._createClass(O,[{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1}}}},{key:"animation",set:function(Q){var Y=this._get("animation");Q!==Y&&(Y&&Y.stop(),!Q||Q.isFulfilled()?this._set("animation",null):(this._set("animation",Q),this.frameTask.animationInProgress=!0,Y=()=>{Q===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());this.frameTask.animationInProgress=!1},Q.when(Y,
Y)))}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:Q,spatialReference:Y}=this.state.paddedViewState;return new J({x:Q[0],y:Q[1],spatialReference:Y})},set:function(Q){if(null!=Q)if(this._normalizeInput(Q))if(this.ready){var Y=this.viewpoint;M.centerAt(Y,Y,Q);this.viewpoint=Y}else this._set("center",Q),this.notifyChange("initialExtentRequired");else D.error("#center",`incompatible spatialReference ${JSON.stringify(Q.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}},
{key:"constraints",set:function(Q){const Y=this._get("constraints");Y&&(this.handles.remove("map-view-base-constraints"),Y.destroy());this._set("constraints",Q);Q&&(Q.view=this,this.ready&&(this.state.viewpoint=Q.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Q.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=Q.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():
this._get("extent")},set:function(Q){if(null!=Q){var Y=this._normalizeInput(Q);Y?Y.width&&Y.height?this.ready?(Q=this.viewpoint,M.setExtent(Q,Q,Y,this.size,{constraints:this.constraints}),this.viewpoint=Q):(this._set("extent",Y),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):D.error("#extent","invalid extent size"):D.error("#center",`incompatible spatialReference ${JSON.stringify(Q.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},
{key:"graphicsTileStore",get:function(){return new P(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){const Q=this._normalizeInput(this.center),Y=this._normalizeInput(this.viewpoint),ha=this._normalizeInput(this.extent),{scale:da,constraints:ka}=this;let qa=this.zoom;if(this.get("map.initialViewProperties.viewpoint")||ha)return!1;ka.effectiveLODs||(qa=-1);return Q&&(0!==da||-1!==qa)||Y&&z.isSome(Y.targetGeometry)&&("extent"===Y.targetGeometry.type||Y.scale)?!1:!0}},{key:"padding",
get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(Q){this.ready?(this.state.padding=Q,this._set("padding",this.state.padding)):this._set("padding",Q)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(Q){if(!isNaN(Q))if(this.ready){var Y=this.viewpoint;M.rotateTo(Y,Y,Q);this.viewpoint=Y}else this._set("rotation",Q)}},{key:"scale",
get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(Q){if(Q&&!isNaN(Q))if(this.ready){var Y=this.viewpoint;M.scaleTo(Y,Y,Q);this.viewpoint=Y}else{this._set("scale",Q);this._set("zoom",-1);if(Q=this._get("extent"))this._set("extent",null),this._set("center",Q.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&
(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(Q=>!Q.destroyed&&!("layerViews"in Q)&&!0===Q.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const Q=this.state.paddedViewState;return Q&&Q.viewpoint.clone()},set:function(Q){if(null!=Q){var Y=this._normalizeInput(Q);Y?this.ready?(Q=new n({targetGeometry:new J,scale:0,rotation:0}),M.copy(Q,Y),this.constraints.constrain(Q,
this.state.paddedViewState.viewpoint),this.state.viewpoint=Q,this.frameTask.requestFrame(),this._set("viewpoint",Q)):(this._set("viewpoint",Y),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!Q.scale||isNaN(Q.scale)?D.error("#viewpoint",`invalid scale value of ${Q.scale}`):z.isNone(Q.targetGeometry)?D.error("#viewpoint","geometry not defined"):D.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(Q.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},
{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(Q){if(null!=Q){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",Q);this._set("scale",0);var Y=this._get("extent");Y&&(this._set("extent",null),this._set("center",Y.center))}this.constraints.effectiveLODs&&(Y=this.viewpoint,M.scaleTo(Y,Y,this.constraints.zoomToScale(Q)),this.viewpoint=Y,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}}}]);return O}(w.PopupView(r));
k.__decorate([m.property()],f.prototype,"_stationaryTimer",void 0);k.__decorate([m.property()],f.prototype,"_defaultsFromMapSettings",null);k.__decorate([m.property()],f.prototype,"animation",null);k.__decorate([m.property({readOnly:!0})],f.prototype,"animationManager",void 0);k.__decorate([m.property({value:null,type:J,dependsOn:["state.id","ready"]})],f.prototype,"center",null);k.__decorate([m.property({type:l})],f.prototype,"constraints",null);k.__decorate([m.property({value:null,type:H,dependsOn:["state.id",
"ready"]})],f.prototype,"extent",null);k.__decorate([m.property({readOnly:!0})],f.prototype,"featuresTilingScheme",void 0);k.__decorate([m.property()],f.prototype,"fullOpacity",void 0);k.__decorate([m.property({readOnly:!0})],f.prototype,"graphicsTileStore",null);k.__decorate([m.property()],f.prototype,"graphicsView",void 0);k.__decorate([m.property({type:H})],f.prototype,"initialExtent",void 0);k.__decorate([m.property({dependsOn:["map.initialViewProperties?.viewpoint","constraints.effectiveLODs",
"spatialReference"]})],f.prototype,"initialExtentRequired",null);k.__decorate([m.property()],f.prototype,"map",void 0);k.__decorate([m.property()],f.prototype,"labelManager",void 0);k.__decorate([m.property({value:{top:0,right:0,bottom:0,left:0},cast:C=>({top:0,right:0,bottom:0,left:0,...C})})],f.prototype,"padding",null);k.__decorate([m.property({type:Object})],f.prototype,"renderingOptions",void 0);k.__decorate([m.property()],f.prototype,"resizeAlign",void 0);k.__decorate([m.property({readOnly:!0,
dependsOn:["state.id"]})],f.prototype,"resolution",null);k.__decorate([m.property({value:0,type:Number,dependsOn:["state.id","ready"]})],f.prototype,"rotation",null);k.__decorate([m.property({value:0,type:Number,dependsOn:["state.id","ready"]})],f.prototype,"scale",null);k.__decorate([m.property({type:v,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.ready"]})],f.prototype,"spatialReference",void 0);k.__decorate([m.property({readOnly:!0})],f.prototype,"state",void 0);k.__decorate([m.property({dependsOn:["animation",
"navigating","resizing","_stationaryTimer"]})],f.prototype,"stationary",null);k.__decorate([m.property({readOnly:!0})],f.prototype,"supportsGround",void 0);k.__decorate([m.property({type:ba.Timeline,readOnly:!0})],f.prototype,"timeline",void 0);k.__decorate([m.property({readOnly:!0})],f.prototype,"type",void 0);k.__decorate([m.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],f.prototype,"updating",null);k.__decorate([m.property({value:null,
type:n,dependsOn:["state.id","ready"]})],f.prototype,"viewpoint",null);k.__decorate([m.property({value:-1,dependsOn:["state.id"]})],f.prototype,"zoom",null);return f=k.__decorate([e.subclass("esri.views.MapViewBase")],f)})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r){var t;f=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});n=t=function(q){function B(l){l=q.call(this,l)||this;l.dpi=96;l.format=null;l.origin=null;l.minScale=0;l.maxScale=0;l.size=null;l.spatialReference=null;return l}h._inheritsLoose(B,q);B.create=function(l=
{}){const {resolutionFactor:F=1,scales:K,size:R=256,spatialReference:W=e.WebMercator,numLODs:V=24}=l;if(!p.isValid(W)){l=[];if(K)for(var U=0;U<K.length;U++){var M=K[U];l.push({level:U,scale:M,resolution:M})}else for(U=5E-4,M=V-1;0<=M;M--)l.unshift({level:M,scale:U,resolution:U}),U*=2;return new t({dpi:96,lods:l,origin:new g(0,0,W),size:[R,R],spatialReference:W})}U=p.getInfo(W);l=l.origin?new g({x:l.origin.x,y:l.origin.y,spatialReference:W}):U?new g({x:U.origin[0],y:U.origin[1],spatialReference:W}):
new g({x:0,y:0,spatialReference:W});U=1/(39.37*I.getMetersPerUnitForSR(W)*96);M=[];if(K)for(var P=0;P<K.length;P++){var ba=K[P];M.push({level:P,scale:ba,resolution:ba*U})}else{var J=p.isGeographic(W)?512/R*5.916575275917094E8:256/R*5.91657527591555E8;P=Math.ceil(V/F);M.push({level:0,scale:J,resolution:J*U});for(ba=1;ba<P;ba++)J/=2**F,M.push({level:ba,scale:J,resolution:J*U})}return new t({dpi:96,lods:M,origin:l,size:[R,R],spatialReference:W})};var A=B.prototype;A.readOrigin=function(l,F){return g.fromJSON({spatialReference:F.spatialReference,
...l})};A.readSize=function(l,F){return[F.cols,F.rows]};A.writeSize=function(l,F){F.cols=l[0];F.rows=l[1]};A.zoomToScale=function(l){const F=this.scales;if(0>=l)return F[0];if(l>=F.length-1)return F[F.length-1];{const K=Math.floor(l);return F[K]/(F[K]/F[K+1])**(l-K)}};A.scaleToZoom=function(l){const F=this.scales,K=F.length-1;let R=0;for(;R<K;R++){const W=F[R],V=F[R+1];if(W<=l)break;if(V===l)return R+1;if(W>l&&V<l)return R+Math.log(W/l)/Math.log(W/V)}return R};A.snapScale=function(l,F=.95){l=this.scaleToZoom(l);
return l%Math.floor(l)>=F?this.zoomToScale(Math.ceil(l)):this.zoomToScale(Math.floor(l))};A.tileAt=function(l,F,K,R){var W=this.lodAt(l);if(!W)return null;let V;if("number"===typeof F)V=F,F=K;else{if(p.equals(F.spatialReference,this.spatialReference))V=F.x,F=F.y;else{R=w.project(F,this.spatialReference);if(x.isNone(R))return null;V=R.x;F=R.y}R=K}K=W.resolution*this.size[0];W=W.resolution*this.size[1];R||(R={id:null,level:0,row:0,col:0,extent:b.create()});R.level=l;R.row=Math.floor((this.origin.y-
F)/W+.001);R.col=Math.floor((V-this.origin.x)/K+.001);this.updateTileInfo(R);return R};A.updateTileInfo=function(l,F=0){var K=this.lodAt(l.level);K||1!==F||(F=this.lods[this.lods.length-1],F.level<l.level&&(K=F));if(K){var R=l.level-K.level;F=K.resolution*this.size[0]/2**R;K=K.resolution*this.size[1]/2**R;l.id=`${l.level}/${l.row}/${l.col}`;l.extent||(l.extent=b.create());l.extent[0]=this.origin.x+l.col*F;l.extent[1]=this.origin.y-(l.row+1)*K;l.extent[2]=l.extent[0]+F;l.extent[3]=l.extent[1]+K}};
A.upsampleTile=function(l){const F=this._upsampleLevels[l.level];if(!F||-1===F.parentLevel)return!1;l.level=F.parentLevel;l.row=Math.floor(l.row/F.factor+.001);l.col=Math.floor(l.col/F.factor+.001);this.updateTileInfo(l);return!0};A.getTileBounds=function(l,F){var {resolution:K}=this.lodAt(F.level);const R=K*this.size[0];K*=this.size[1];l[0]=this.origin.x+F.col*R;l[1]=this.origin.y-(F.row+1)*K;l[2]=l[0]+R;l[3]=l[1]+K;return l};A.lodAt=function(l){return this._levelToLOD&&this._levelToLOD[l]||null};
A.clone=function(){return t.fromJSON(this.write({}))};A._initializeUpsampleLevels=function(){const l=this.lods;this._upsampleLevels=[];let F=null;for(let K=0;K<l.length;K++){const R=l[K];this._upsampleLevels[R.level]={parentLevel:F?F.level:-1,factor:F?F.resolution/R.resolution:0};F=R}};h._createClass(B,[{key:"isWrappable",get:function(){const {spatialReference:l,origin:F}=this;if(l&&F){const K=p.getInfo(l);return l.isWrappable&&Math.abs(K.origin[0]-F.x)<=K.dx}return!1}},{key:"lods",set:function(l){let F=
0,K=0;const R=[];this._levelToLOD={};l&&(F=-Infinity,K=Infinity,l.forEach(W=>{R.push(W.scale);F=W.scale>F?W.scale:F;K=W.scale<K?W.scale:K;this._levelToLOD[W.level]=W}));this._set("scales",R);this._set("minScale",F);this._set("maxScale",K);this._set("lods",l);this._initializeUpsampleLevels()}}]);return B}(n.JSONSupport);k.__decorate([z.property({type:Number,json:{write:!0}})],n.prototype,"compressionQuality",void 0);k.__decorate([z.property({type:Number,json:{write:!0}})],n.prototype,"dpi",void 0);
k.__decorate([z.property({type:String,json:{read:f.read,write:f.write,origins:{"web-scene":{read:!1,write:!1}}}})],n.prototype,"format",void 0);k.__decorate([z.property({readOnly:!0})],n.prototype,"isWrappable",null);k.__decorate([z.property({type:g,json:{write:!0}})],n.prototype,"origin",void 0);k.__decorate([m.reader("origin")],n.prototype,"readOrigin",null);k.__decorate([z.property({type:[r],value:null,json:{write:!0}})],n.prototype,"lods",null);k.__decorate([z.property({readOnly:!0})],n.prototype,
"minScale",void 0);k.__decorate([z.property({readOnly:!0})],n.prototype,"maxScale",void 0);k.__decorate([z.property({readOnly:!0})],n.prototype,"scales",void 0);k.__decorate([z.property({cast:q=>Array.isArray(q)?q:"number"===typeof q?[q,q]:[256,256]})],n.prototype,"size",void 0);k.__decorate([m.reader("size",["rows","cols"])],n.prototype,"readSize",null);k.__decorate([c.writer("size",{cols:{type:u.Integer},rows:{type:u.Integer}})],n.prototype,"writeSize",null);k.__decorate([z.property({type:e,json:{write:!0}})],
n.prototype,"spatialReference",void 0);return n=t=k.__decorate([d.subclass("esri.layers.support.TileInfo")],n)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(h,k,f,n,x,I,z,G){var E;f=E=function(u){function m(d){d=u.call(this,
d)||this;d.cols=null;d.level=0;d.levelValue=null;d.origin=null;d.resolution=0;d.rows=null;d.scale=0;return d}h._inheritsLoose(m,u);m.prototype.clone=function(){return new E({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return m}(f.JSONSupport);k.__decorate([n.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"cols",void 0);k.__decorate([n.property({type:z.Integer,
json:{write:!0}})],f.prototype,"level",void 0);k.__decorate([n.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);k.__decorate([n.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"origin",void 0);k.__decorate([n.property({type:Number,json:{write:!0}})],f.prototype,"resolution",void 0);k.__decorate([n.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,
"rows",void 0);k.__decorate([n.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);return f=E=k.__decorate([G.subclass("esri.layers.support.LOD")],f)})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/has ../core/accessorSupport/set ../core/accessorSupport/decorators/subclass".split(" "),function(h,k,f,n,x,I,z,G,
E,u,m){h.PopupView=d=>{d=function(c){function g(){return c.apply(this,arguments)||this}k._inheritsLoose(g,c);var e=g.prototype;e.fetchPopupFeatures=function(){var b=k._asyncToGenerator(function*(p,w){yield this.when();const {location:r,queryArea:t,layerViewsAndGraphics:q,clientOnlyGraphics:B}=yield this._prepareFetchPopupFeatures(p,w);p=Promise.resolve(B);w=this._queryLayerPopupFeatures(t,q,w);const A=w.map(l=>l.promise);p=I.eachAlwaysValues([p,...A]).then(n.flatten);return{location:r,clientOnlyGraphics:B,
allGraphicsPromise:p,promisesPerLayerView:w}});return function(p,w){return b.apply(this,arguments)}}();e._queryLayerPopupFeatures=function(b,p,w){return p.map(({layerView:r,graphics:t})=>{t={clientGraphics:t,event:x.isSome(w)?w.event:null,signal:x.isSome(w)?w.signal:null,defaultPopupTemplateEnabled:x.isSome(w)?!!w.defaultPopupTemplateEnabled:!1};t=r.fetchPopupFeatures(b,t);return{layerView:r,promise:t}})};e._isValidPopupGraphic=function(b,p){return b&&!!b.getEffectivePopupTemplate(x.isSome(p)&&p.defaultPopupTemplateEnabled)};
e._prepareFetchPopupFeatures=function(){var b=k._asyncToGenerator(function*(p,w){const {clientGraphics:r,queryArea:t,location:q}=yield this._popupHitTestGraphics(p,w);p=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:B,clientOnlyGraphics:A}=this._graphicsPerFetchPopupLayerView(r,p);return{clientOnlyGraphics:A,layerViewsAndGraphics:B,queryArea:t,location:q}});return function(p,w){return b.apply(this,arguments)}}();e._popupHitTestGraphics=function(){var b=k._asyncToGenerator(function*(p,
w){const {results:r,mapPoint:t}=yield this.popupHitTest(p);p=r.filter(B=>this._isValidPopupGraphic(B.graphic,w));const q=p.length?p[0].mapPoint:null;return{clientGraphics:p.map(B=>B.graphic),queryArea:t,location:t||q}});return function(p,w){return b.apply(this,arguments)}}();e._getFetchPopupLayerViews=function(){const b=[];this.allLayerViews.forEach(p=>{this._isValidPopupLayerView(p)&&b.push(p)});x.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);
return b.reverse()};e._isValidPopupLayerView=function(b){return x.isSome(b)&&(!("layer"in b)||!b.suspended)&&"fetchPopupFeatures"in b};e._graphicsPerFetchPopupLayerView=function(b,p){const w=[],r=new Map;p=p.map(t=>{const q=[];"layer"in t?r.set(t.layer,q):r.set(t.graphics,q);return{layerView:t,graphics:q}});for(const t of b)(b=r.get(t.layer)||r.get(t.sourceLayer)||null)?b.push(t):w.push(t);return{layerViewsAndGraphics:p,clientOnlyGraphics:w}};return g}(d);return d=f.__decorate([m.subclass("esri.views.PopupView")],
d)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),function(h,
k,f,n,x,I,z,G,E,u,m,d,c,g,e){let b=function(){function p(w,r,t,q){const B=w.targetGeometry,A=r.targetGeometry;q?"string"===typeof q&&(q=c.parse(q)||c.easingFunctions.ease):q=c.easingFunctions.ease;this.easing=q;this.duration=t;this.sCenterX=B.x;this.sCenterY=B.y;this.sScale=w.scale;this.sRotation=w.rotation;this.tCenterX=A.x;this.tCenterY=A.y;this.tScale=r.scale;this.tRotation=r.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;
this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}p.prototype.applyRatio=function(w,r){var t=this.easing(r);let q,B;1<=r?(r=this.tCenterX,q=this.tCenterY,B=this.tRotation,t=this.tScale):(r=this.sCenterX+t*this.dCenterX,q=this.sCenterY+t*this.dCenterY,B=this.sRotation+t*this.dRotation,t=this.sScale+t*this.dScale);w.targetGeometry.x=r;w.targetGeometry.y=q;w.scale=t;w.rotation=B};return p}();f=function(p){function w(t){t=p.call(this,
t)||this;t.duration=200;t.transition=null;t.easing=c.easingFunctions.ease;t.view=null;t.viewpoint=null;t.viewpoint=new n({targetGeometry:new e,scale:0,rotation:0});t._updateTask=I.addFrameTask({postRender:t._postRender.bind(h._assertThisInitialized(t))});t._updateTask.pause();return t}h._inheritsLoose(w,p);var r=w.prototype;r.destroy=function(){this._updateTask.remove();this._updateTask=null};r.animate=function(t,q,B){this.stop();g.copy(this.viewpoint,q);this.transition=new b(this.viewpoint,t.target,
B&&B.duration||this.duration,B&&B.easing||this.easing);q=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};t.when(q,q);this._startTime=performance.now();this._updateTask.resume();return this.animation=t};r.animateContinous=function(t,q){this.stop();this.updateFunction=q;this.viewpoint=t;const B=new d({target:t.clone()});t=()=>
{this.animation===B&&this._updateTask&&(this.updateFunction=this.animation=null)};B.when(t,t);this._startTime=performance.now();this._updateTask.resume();return this.animation=B};r.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};r._postRender=function(t){var q=this.animation;q&&q.state!==d.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,t.deltaTime):(t=(performance.now()-this._startTime)/this.transition.duration,q=1<=t,this.transition.applyRatio(this.viewpoint,
t),q&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return w}(x);k.__decorate([z.property()],f.prototype,"animation",void 0);k.__decorate([z.property()],f.prototype,"duration",void 0);k.__decorate([z.property()],f.prototype,"transition",void 0);k.__decorate([z.property()],f.prototype,"easing",void 0);k.__decorate([z.property()],f.prototype,"view",void 0);k.__decorate([z.property()],f.prototype,"viewpoint",void 0);return f=k.__decorate([m.subclass("esri.views.2d.AnimationManager")],
f)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(h){function k(x,I,z,G){function E(b,p){var w;let r,t;r=b;for(w=0;8>w;w++){t=((d*r+m)*r+u)*r-b;if(Math.abs(t)<p)return r;var q=(3*d*r+2*m)*r+u;if(1E-6>Math.abs(q))break;r-=t/q}q=0;w=1;r=b;if(r<q)return q;if(r>w)return w;for(;q<w;){t=((d*r+m)*r+u)*r;if(Math.abs(t-b)<p)break;b>t?q=r:w=r;r=.5*(w-q)+q}return r}const u=3*x,m=3*(z-x)-u,d=1-u-m,c=3*I,g=3*(G-I)-c,e=1-c-g;return function(b,p=1E-6){b=E(b,p);return((e*b+g)*b+c)*b}}const f=
/^cubic-bezier\((.*)\)/,n={};n.ease=k(.25,.1,.25,1);n.linear=k(0,0,1,1);n.easeIn=n["ease-in"]=k(.42,0,1,1);n.easeOut=n["ease-out"]=k(0,0,.58,1);n.easeInOut=n["ease-in-out"]=k(.42,0,.58,1);h.easingFunctions=n;h.parse=function(x){let I=n[x]||null;!I&&(x=f.exec(x))&&(x=x[1].split(",").map(z=>parseFloat(z.trim())),4!==x.length||x.some(z=>isNaN(z))||(I=k.apply(k,x)));return I};h.unitBezier=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/Ellipsoid ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w){function r(S,ca,ja,na){return na&&ja&&!na.equals(ja)&&w.canProject(na,ja)&&na.isWebMercator?(na.isWebMercator?(ja=ca[1],89.99999<ja?ja=89.99999:-89.99999>ja&&(ja=-89.99999),ja=Math.sin(z.toRadian(ja)),S=u.set(S,z.toRadian(ca[0])*b.earth.radius,.5*b.earth.radius*Math.log((1+ja)/(1-ja)))):(ja=z.toDegree(ca[0]/b.earth.radius),S=u.set(S,ja-360*Math.floor((ja+180)/360),z.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-ca[1]/b.earth.radius))))),S):u.copy(S,ca)}function t(S){return S.wkid?
S:S.spatialReference||e.WGS84}function q(S,ca){return ca.type?u.set(S,ca.x,ca.y):u.copy(S,ca)}function B(S,ca){return Math.max(S.width/ca[0],S.height/ca[1])*P(S.spatialReference)}function A(S,ca,ja,na){return l.apply(this,arguments)}function l(){l=k._asyncToGenerator(function*(S,ca,ja,na){if(!S||Array.isArray(S)&&!S.length)return null;n.isCollection(S)&&(S=S.toArray());if(Array.isArray(S)&&S.length&&"object"===typeof S[0]){var ta=S.every(Ka=>"attributes"in Ka);var xa=S.some(Ka=>!Ka.geometry),za=S;
if(ta&&xa&&ca&&ca.allLayerViews){ta=new Map;for(var ya of S)S=ya.layer,xa=ta.get(S)||[],za=ya.attributes[S.objectIdField],null!=za&&xa.push(za),ta.set(S,xa);const Ka=[];ta.forEach((La,Xa)=>{const ib=ca.allLayerViews.find(Ya=>Ya.layer.id===Xa.id);if("queryFeatures"in ib){const Ya=Xa.createQuery();Ya.objectIds=La;Ya.returnGeometry=!0;Ka.push(ib.queryFeatures(Ya))}});ya=yield Promise.all(Ka);S=[];for(var Da of ya)if(Da&&Da.features&&Da.features.length)for(var Aa of Da.features)x.isSome(Aa.geometry)&&
S.push(Aa.geometry);za=S}for(const Ka of za)na=yield A(Ka,ca,ja,na);return na}if(Array.isArray(S)&&2===S.length&&"number"===typeof S[0]&&"number"===typeof S[1])ta=new g(S);else if(S instanceof c)ta=S;else if("geometry"in S)if(S.geometry)ta=S.geometry;else if(S.layer){const Ka=S.layer;Da=ca.allLayerViews.find(La=>La.layer.id===Ka.id);"queryFeatures"in Da&&(Aa=Ka.createQuery(),Aa.objectIds=[S.attributes[Ka.objectIdField]],Aa.returnGeometry=!0,Da=yield Da.queryFeatures(Aa),ta=x.get(Da,"features",0,"geometry"))}if(x.isNone(ta))return null;
Da="point"===ta.type?new d({xmin:ta.x,ymin:ta.y,xmax:ta.x,ymax:ta.y,spatialReference:ta.spatialReference}):ta.extent;if(!Da)return null;ja=w.project(Da,ja);return x.isNone(ja)?null:na=na?na.union(ja):ja});return l.apply(this,arguments)}function F(S){if(S&&(!Array.isArray(S)||"number"!==typeof S[0])&&("object"===typeof S||Array.isArray(S)&&"object"===typeof S[0])){if("layer"in S&&S.layer&&S.layer.minScale&&S.layer.maxScale){var ca=S.layer;return{min:ca.minScale,max:ca.maxScale}}if(Array.isArray(S)&&
S.length&&S.every(ja=>"layer"in ja)){let ja=ca=0;for(const na of S)(S=na.layer)&&S.minScale&&S.maxScale&&(ca=S.minScale<ca?S.minScale:ca,ja=S.maxScale>ja?S.maxScale:ja);return ca&&ja?{min:ca,max:ja}:null}}}function K(S,ca){return R.apply(this,arguments)}function R(){R=k._asyncToGenerator(function*(S,ca){if(!S||!ca)return new f({targetGeometry:new g,scale:0,rotation:0});var ja=ca.spatialReference;const {constraints:na,padding:ta,viewpoint:xa,size:za}=ca,ya=[ta?za[0]-ta.left-ta.right:za[0],ta?za[1]-
ta.top-ta.bottom:za[1]];let Da=null;S instanceof f?Da=S:S.viewpoint?Da=S.viewpoint:S.target&&"esri.Viewpoint"===S.target.declaredClass&&(Da=S.target);let Aa=null;if(Da&&Da.targetGeometry)Aa=Da.targetGeometry;else if(S instanceof d)Aa=S;else if(S||S&&("center"in S||"extent"in S||"target"in S))Aa=(yield A(S.center,ca,ja))||(yield A(S.extent,ca,ja))||(yield A(S.target,ca,ja))||(yield A(S,ca,ja));!Aa&&xa&&xa.targetGeometry?Aa=xa.targetGeometry:!Aa&&ca.extent&&(Aa=ca.extent);var Ka=t(Aa);ja||(ja=t(ca.spatialReference||
ca.extent||Aa));if(!w.canProject(Aa,ja)&&Ka&&!Ka.equals(ja))return null;var La=q(m.create(),Aa.center?Aa.center:Aa);Ka=new g(r(La,La,Ka,ja),ja);La=null;Da&&x.isSome(Da.targetGeometry)&&"point"===Da.targetGeometry.type?La=Da.scale:S.hasOwnProperty("scale")&&S.scale?La=S.scale:S.hasOwnProperty("zoom")&&-1!==S.zoom&&na&&na.effectiveLODs?La=na.zoomToScale(S.zoom):Array.isArray(Aa)||"point"===Aa.type||"extent"===Aa.type&&0===Aa.width&&0===Aa.height?(ja=w.project(ca.extent,ja),La=x.isSome(ja)?B(ja,ya):
ca.extent?B(ca.extent,ya):xa.scale):La=w.canProject(Aa.extent,ja)?B(w.project(Aa.extent,ja),ya):B(Aa.extent,ya);if(ca=F(S))ca.min&&ca.min>La?La=ca.min:ca.max&&ca.max<La&&(La=ca.max);ca=0;Da?ca=Da.rotation:S.hasOwnProperty("rotation")?ca=S.rotation:xa&&(ca=xa.rotation);S=new f({targetGeometry:Ka,scale:La,rotation:ca});na&&(S=na.fit(S),na.constrainByGeometry(S),na.rotationEnabled||(S.rotation=ca));return S});return R.apply(this,arguments)}function W(S,ca){const ja=S.targetGeometry,na=ca.targetGeometry;
ja.x=na.x;ja.y=na.y;ja.spatialReference=na.spatialReference;S.scale=ca.scale;S.rotation=ca.rotation;return S}function V(S,ca,ja){return ja?u.set(S,.5*(ca[0]-ja.right+ja.left),.5*(ca[1]-ja.bottom+ja.top)):u.scale(S,ca,.5)}function U(S,ca,ja,na){O(S,ca,ja,na);return G.invert(S,S)}function M(S){var ca=S.scale;S=S.targetGeometry;S=x.isSome(S)&&p.isValid(S.spatialReference)?1/(39.37*I.getMetersPerUnitForSR(S.spatialReference)*96):1;return ca*S}function P(S){return p.isValid(S)?39.37*I.getMetersPerUnitForSR(S)*
96:1}function ba(S){return S.isWrappable?(S=p.getInfo(S),S.valid[1]-S.valid[0]):0}const J=180/Math.PI,H=function(){const S=m.create();return function(ca,ja,na){const ta=ja.targetGeometry;q(S,ta);ja=.5*M(ja);ca.xmin=S[0]-ja*na[0];ca.ymin=S[1]-ja*na[1];ca.xmax=S[0]+ja*na[0];ca.ymax=S[1]+ja*na[1];ca.spatialReference=ta.spatialReference;return ca}}(),v=function(){const S=m.create();return function(ca,ja,na){return u.sub(ca,u.scale(ca,ja,.5),V(S,ja,na))}}(),D=function(){const S=E.create(),ca=m.create();
return function(ja,na,ta,xa){const za=M(na);na=z.toRadian(na.rotation)||0;u.set(ca,za,za);G.fromScaling(S,ca);G.rotate(S,S,na);G.translate(S,S,v(ca,ta,xa));G.translate(S,S,[0,xa.top-xa.bottom]);return u.set(ja,S[4],S[5])}}(),C=function(){const S=m.create(),ca=m.create(),ja=m.create();return function(na,ta,xa,za,ya,Da){u.negate(S,ta);u.scale(ca,xa,.5*Da);u.set(ja,1/za*Da,-1/za*Da);G.identity(na);G.translate(na,na,ca);ya&&G.rotate(na,na,ya);G.scale(na,na,ja);G.translate(na,na,S);return na}}(),O=function(){const S=
m.create();return function(ca,ja,na,ta){const xa=M(ja),za=z.toRadian(ja.rotation)||0;q(S,ja.targetGeometry);return C(ca,S,na,xa,za,ta)}}(),T=function(){const S=m.create();return function(ca,ja,na,ta){const xa=M(ja);q(S,ja.targetGeometry);return C(ca,S,na,xa,0,ta)}}(),Q=function(){const S=m.create(),ca=m.create(),ja=[0,0,0];return function(na,ta,xa){u.subtract(S,na,ta);u.normalize(S,S);u.subtract(ca,na,xa);u.normalize(ca,ca);u.cross(ja,S,ca);na=Math.acos(u.dot(S,ca)/(u.length(S)*u.length(ca)))*J;0>
ja[2]&&(na=-na);isNaN(na)&&(na=0);return na}}(),Y=function(){const S=m.create();return function(ca,ja,na,ta){const xa=ca.targetGeometry;W(ca,ja);D(S,ja,na,ta);xa.x+=S[0];xa.y+=S[1];return ca}}(),ha=function(){const S=m.create();return function(ca,ja,na,ta){const xa=ca.targetGeometry;W(ca,ja);D(S,ja,na,ta);xa.x-=S[0];xa.y-=S[1];return ca}}(),da=function(){const S=m.create();return function(ca,ja,na){W(ca,ja);ja=ca.targetGeometry;const ta=t(na),xa=t(ja);q(S,na);r(S,S,ta,xa);ja.x=S[0];ja.y=S[1];return ca}}(),
ka=function(){const S=m.create();return function(ca,ja,na,ta,xa){xa||(xa="center");u.sub(S,na,ta);u.scale(S,S,.5);na=S[0];ta=S[1];switch(xa){case "center":u.set(S,0,0);break;case "left":u.set(S,-na,0);break;case "top":u.set(S,0,ta);break;case "right":u.set(S,na,0);break;case "bottom":u.set(S,0,-ta);break;case "top-left":u.set(S,-na,ta);break;case "bottom-left":u.set(S,-na,-ta);break;case "top-right":u.set(S,na,ta);break;case "bottom-right":u.set(S,na,-ta)}sa(ca,ja,S);return ca}}(),qa=function(){const S=
m.create();return function(ca,ja,na,ta,xa){W(ca,ja);isNaN(na)||0===na||(ia(S,ta,ja,xa),ca.scale=ja.scale*na,ma(S,S,ca,xa),sa(ca,ca,u.set(S,S[0]-ta[0],ta[1]-S[1])));return ca}}(),pa=function(){const S=m.create();return function(ca,ja,na,ta,xa,za){W(ca,ja);isNaN(na)||0===na||(ia(S,xa,ja,za),ca.scale=ja.scale*na,ca.rotation+=ta,ma(S,S,ca,za),sa(ca,ca,u.set(S,S[0]-xa[0],xa[1]-S[1])));return ca}}(),ea=function(){const S=m.create(),ca=m.create();return function(ja,na,ta,xa,za,ya,Da){v(ca,ya,Da);u.add(S,
za,ca);return xa?pa(ja,na,ta,xa,S,ya):qa(ja,na,ta,S,ya)}}(),ia=function(){const S=E.create();return function(ca,ja,na,ta){return u.transformMat2d(ca,ja,U(S,na,ta,1))}}(),ma=function(){const S=E.create();return function(ca,ja,na,ta){return u.transformMat2d(ca,ja,O(S,na,ta,1))}}(),sa=function(){const S=m.create(),ca=E.create();return function(ja,na,ta){W(ja,na);const xa=M(na),za=ja.targetGeometry;G.fromRotation(ca,z.toRadian(na.rotation)||0);G.scale(ca,ca,m.fromValues(xa,xa));u.transformMat2d(S,ta,
ca);za.x+=S[0];za.y+=S[1];return ja}}();h.addPadding=Y;h.angleBetween=Q;h.centerAt=da;h.copy=W;h.create=K;h.createAsync=function(S,ca){return K(S,ca)};h.extentToScale=B;h.getAnchor=V;h.getExtent=H;h.getMatrix=C;h.getOuterSize=function(S,ca,ja){var na=z.toRadian(ca.rotation)||0;ca=Math.abs(Math.cos(na));na=Math.abs(Math.sin(na));return u.set(S,Math.round(ja[1]*na+ja[0]*ca),Math.round(ja[1]*ca+ja[0]*na))};h.getPaddingMapTranslation=D;h.getPaddingScreenTranslation=v;h.getResolution=M;h.getResolutionToScaleFactor=
P;h.getTransform=O;h.getTransformNoRotation=T;h.getWorldScreenWidth=function(S,ca){return Math.round(ba(S)/ca)};h.getWorldWidth=ba;h.padAndScaleAndRotateBy=ea;h.pixelSize=function(S){return M(S)};h.removePadding=ha;h.resize=ka;h.rotateBy=function(S,ca,ja){W(S,ca);S.rotation+=ja;return S};h.rotateTo=function(S,ca,ja){W(S,ca);S.rotation=ja;return S};h.scaleAndRotateBy=pa;h.scaleBy=qa;h.scaleTo=function(S,ca,ja){W(S,ca);S.scale=ja;return S};h.setExtent=function(S,ca,ja,na,ta){da(S,ca,ja.center);S.scale=
B(ja,na);ta&&ta.constraints&&ta.constraints.constrain(S);return S};h.toMap=ia;h.toScreen=ma;h.translateBy=sa;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(h,k){function f(l,F){l[0]=F[0];l[1]=F[1];l[2]=F[2];l[3]=F[3];l[4]=F[4];l[5]=F[5];return l}function n(l){l[0]=1;l[1]=0;l[2]=0;l[3]=1;l[4]=0;l[5]=0;return l}function x(l,F,K,R,W,V,U){l[0]=F;l[1]=K;l[2]=R;l[3]=W;l[4]=V;l[5]=U;return l}function I(l,F){const K=F[0],R=F[1],W=
F[2],V=F[3],U=F[4];F=F[5];let M=K*V-R*W;if(!M)return null;M=1/M;l[0]=V*M;l[1]=-R*M;l[2]=-W*M;l[3]=K*M;l[4]=(W*F-V*U)*M;l[5]=(R*U-K*F)*M;return l}function z(l){return l[0]*l[3]-l[1]*l[2]}function G(l,F,K){const R=F[0],W=F[1],V=F[2],U=F[3],M=F[4];F=F[5];const P=K[0],ba=K[1],J=K[2],H=K[3],v=K[4];K=K[5];l[0]=R*P+V*ba;l[1]=W*P+U*ba;l[2]=R*J+V*H;l[3]=W*J+U*H;l[4]=R*v+V*K+M;l[5]=W*v+U*K+F;return l}function E(l,F,K){const R=F[0],W=F[1],V=F[2],U=F[3],M=F[4];F=F[5];const P=Math.sin(K);K=Math.cos(K);l[0]=R*
K+V*P;l[1]=W*K+U*P;l[2]=R*-P+V*K;l[3]=W*-P+U*K;l[4]=M;l[5]=F;return l}function u(l,F,K){const R=F[1],W=F[2],V=F[3],U=F[4],M=F[5],P=K[0];K=K[1];l[0]=F[0]*P;l[1]=R*P;l[2]=W*K;l[3]=V*K;l[4]=U;l[5]=M;return l}function m(l,F,K){const R=F[0],W=F[1],V=F[2],U=F[3],M=F[4];F=F[5];const P=K[0];K=K[1];l[0]=R;l[1]=W;l[2]=V;l[3]=U;l[4]=R*P+V*K+M;l[5]=W*P+U*K+F;return l}function d(l,F){const K=Math.sin(F);F=Math.cos(F);l[0]=F;l[1]=K;l[2]=-K;l[3]=F;l[4]=0;l[5]=0;return l}function c(l,F){l[0]=F[0];l[1]=0;l[2]=0;l[3]=
F[1];l[4]=0;l[5]=0;return l}function g(l,F){l[0]=1;l[1]=0;l[2]=0;l[3]=1;l[4]=F[0];l[5]=F[1];return l}function e(l){return"mat2d("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+")"}function b(l){return Math.sqrt(l[0]**2+l[1]**2+l[2]**2+l[3]**2+l[4]**2+l[5]**2+1)}function p(l,F,K){l[0]=F[0]+K[0];l[1]=F[1]+K[1];l[2]=F[2]+K[2];l[3]=F[3]+K[3];l[4]=F[4]+K[4];l[5]=F[5]+K[5];return l}function w(l,F,K){l[0]=F[0]-K[0];l[1]=F[1]-K[1];l[2]=F[2]-K[2];l[3]=F[3]-K[3];l[4]=F[4]-K[4];l[5]=F[5]-K[5];return l}
function r(l,F,K){l[0]=F[0]*K;l[1]=F[1]*K;l[2]=F[2]*K;l[3]=F[3]*K;l[4]=F[4]*K;l[5]=F[5]*K;return l}function t(l,F,K,R){l[0]=F[0]+K[0]*R;l[1]=F[1]+K[1]*R;l[2]=F[2]+K[2]*R;l[3]=F[3]+K[3]*R;l[4]=F[4]+K[4]*R;l[5]=F[5]+K[5]*R;return l}function q(l,F){return l[0]===F[0]&&l[1]===F[1]&&l[2]===F[2]&&l[3]===F[3]&&l[4]===F[4]&&l[5]===F[5]}function B(l,F){const K=l[0],R=l[1],W=l[2],V=l[3],U=l[4];l=l[5];const M=F[0],P=F[1],ba=F[2],J=F[3],H=F[4];F=F[5];return Math.abs(K-M)<=k.EPSILON*Math.max(1,Math.abs(K),Math.abs(M))&&
Math.abs(R-P)<=k.EPSILON*Math.max(1,Math.abs(R),Math.abs(P))&&Math.abs(W-ba)<=k.EPSILON*Math.max(1,Math.abs(W),Math.abs(ba))&&Math.abs(V-J)<=k.EPSILON*Math.max(1,Math.abs(V),Math.abs(J))&&Math.abs(U-H)<=k.EPSILON*Math.max(1,Math.abs(U),Math.abs(H))&&Math.abs(l-F)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))}const A=Object.freeze({__proto__:null,copy:f,identity:n,set:x,invert:I,determinant:z,multiply:G,rotate:E,scale:u,translate:m,fromRotation:d,fromScaling:c,fromTranslation:g,str:e,frob:b,add:p,
subtract:w,multiplyScalar:r,multiplyScalarAndAdd:t,exactEquals:q,equals:B,mul:G,sub:w});h.add=p;h.copy=f;h.determinant=z;h.equals=B;h.exactEquals=q;h.frob=b;h.fromRotation=d;h.fromScaling=c;h.fromTranslation=g;h.identity=n;h.invert=I;h.mat2d=A;h.mul=G;h.multiply=G;h.multiplyScalar=r;h.multiplyScalarAndAdd=t;h.rotate=E;h.scale=u;h.set=x;h.str=e;h.sub=w;h.subtract=w;h.translate=m})},"esri/chunks/mat2df64":function(){define(["exports"],function(h){function k(){return[1,0,0,1,0,0]}function f(z){return[z[0],
z[1],z[2],z[3],z[4],z[5]]}function n(z,G,E,u,m,d){return[z,G,E,u,m,d]}function x(z,G){return new Float64Array(z,G,6)}const I=Object.freeze({__proto__:null,create:k,clone:f,fromValues:n,createView:x});h.clone=f;h.create=k;h.createView=x;h.fromValues=n;h.mat2df64=I})},"esri/chunks/vec2":function(){define(["exports","./common"],function(h,k){function f(C,O){C[0]=O[0];C[1]=O[1];return C}function n(C,O,T){C[0]=O;C[1]=T;return C}function x(C,O,T){C[0]=O[0]+T[0];C[1]=O[1]+T[1];return C}function I(C,O,T){C[0]=
O[0]-T[0];C[1]=O[1]-T[1];return C}function z(C,O,T){C[0]=O[0]*T[0];C[1]=O[1]*T[1];return C}function G(C,O,T){C[0]=O[0]/T[0];C[1]=O[1]/T[1];return C}function E(C,O){C[0]=Math.ceil(O[0]);C[1]=Math.ceil(O[1]);return C}function u(C,O){C[0]=Math.floor(O[0]);C[1]=Math.floor(O[1]);return C}function m(C,O,T){C[0]=Math.min(O[0],T[0]);C[1]=Math.min(O[1],T[1]);return C}function d(C,O,T){C[0]=Math.max(O[0],T[0]);C[1]=Math.max(O[1],T[1]);return C}function c(C,O){C[0]=Math.round(O[0]);C[1]=Math.round(O[1]);return C}
function g(C,O,T){C[0]=O[0]*T;C[1]=O[1]*T;return C}function e(C,O,T,Q){C[0]=O[0]+T[0]*Q;C[1]=O[1]+T[1]*Q;return C}function b(C,O){const T=O[0]-C[0];C=O[1]-C[1];return Math.sqrt(T*T+C*C)}function p(C,O){const T=O[0]-C[0];C=O[1]-C[1];return T*T+C*C}function w(C){const O=C[0];C=C[1];return Math.sqrt(O*O+C*C)}function r(C){const O=C[0];C=C[1];return O*O+C*C}function t(C,O){C[0]=-O[0];C[1]=-O[1];return C}function q(C,O){C[0]=1/O[0];C[1]=1/O[1];return C}function B(C,O){var T=O[0];const Q=O[1];T=T*T+Q*Q;
0<T&&(T=1/Math.sqrt(T),C[0]=O[0]*T,C[1]=O[1]*T);return C}function A(C,O){return C[0]*O[0]+C[1]*O[1]}function l(C,O,T){O=O[0]*T[1]-O[1]*T[0];C[0]=C[1]=0;C[2]=O;return C}function F(C,O,T,Q){const Y=O[0];O=O[1];C[0]=Y+Q*(T[0]-Y);C[1]=O+Q*(T[1]-O);return C}function K(C,O){O=O||1;const T=2*k.RANDOM()*Math.PI;C[0]=Math.cos(T)*O;C[1]=Math.sin(T)*O;return C}function R(C,O,T){const Q=O[0];O=O[1];C[0]=T[0]*Q+T[2]*O;C[1]=T[1]*Q+T[3]*O;return C}function W(C,O,T){const Q=O[0];O=O[1];C[0]=T[0]*Q+T[2]*O+T[4];C[1]=
T[1]*Q+T[3]*O+T[5];return C}function V(C,O,T){const Q=O[0];O=O[1];C[0]=T[0]*Q+T[3]*O+T[6];C[1]=T[1]*Q+T[4]*O+T[7];return C}function U(C,O,T){const Q=O[0];O=O[1];C[0]=T[0]*Q+T[4]*O+T[12];C[1]=T[1]*Q+T[5]*O+T[13];return C}function M(C,O,T,Q){const Y=O[0]-T[0];O=O[1]-T[1];const ha=Math.sin(Q);Q=Math.cos(Q);C[0]=Y*Q-O*ha+T[0];C[1]=Y*ha+O*Q+T[1];return C}function P(C,O){var T=C[0];C=C[1];const Q=O[0];O=O[1];let Y=T*T+C*C;0<Y&&(Y=1/Math.sqrt(Y));let ha=Q*Q+O*O;0<ha&&(ha=1/Math.sqrt(ha));T=(T*Q+C*O)*Y*ha;
return 1<T?0:-1>T?Math.PI:Math.acos(T)}function ba(C){return"vec2("+C[0]+", "+C[1]+")"}function J(C,O){return C[0]===O[0]&&C[1]===O[1]}function H(C,O){const T=C[0];C=C[1];const Q=O[0];O=O[1];return Math.abs(T-Q)<=k.EPSILON*Math.max(1,Math.abs(T),Math.abs(Q))&&Math.abs(C-O)<=k.EPSILON*Math.max(1,Math.abs(C),Math.abs(O))}function v(C,O,T,Q,Y){let ha=O[0]-T[0];T=O[1]-T[1];Y=(Q[0]*ha+Q[1]*T)*(Y-1);ha=Q[0]*Y;T=Q[1]*Y;C[0]=O[0]+ha;C[1]=O[1]+T;return C}const D=Object.freeze({__proto__:null,copy:f,set:n,
add:x,subtract:I,multiply:z,divide:G,ceil:E,floor:u,min:m,max:d,round:c,scale:g,scaleAndAdd:e,distance:b,squaredDistance:p,length:w,squaredLength:r,negate:t,inverse:q,normalize:B,dot:A,cross:l,lerp:F,random:K,transformMat2:R,transformMat2d:W,transformMat3:V,transformMat4:U,rotate:M,angle:P,str:ba,exactEquals:J,equals:H,projectAndScale:v,len:w,sub:I,mul:z,div:G,dist:b,sqrDist:p,sqrLen:r});h.add=x;h.angle=P;h.ceil=E;h.copy=f;h.cross=l;h.dist=b;h.distance=b;h.div=G;h.divide=G;h.dot=A;h.equals=H;h.exactEquals=
J;h.floor=u;h.inverse=q;h.len=w;h.length=w;h.lerp=F;h.max=d;h.min=m;h.mul=z;h.multiply=z;h.negate=t;h.normalize=B;h.projectAndScale=v;h.random=K;h.rotate=M;h.round=c;h.scale=g;h.scaleAndAdd=e;h.set=n;h.sqrDist=p;h.sqrLen=r;h.squaredDistance=p;h.squaredLength=r;h.str=ba;h.sub=I;h.subtract=I;h.transformMat2=R;h.transformMat2d=W;h.transformMat3=V;h.transformMat4=U;h.vec2=D})},"esri/chunks/vec2f64":function(){define(["exports"],function(h){function k(){return[0,0]}function f(b){return[b[0],b[1]]}function n(b,
p){return[b,p]}function x(b){const p=[0,0],w=Math.min(2,b.length);for(let r=0;r<w;++r)p[r]=b[r];return p}function I(b,p){return new Float64Array(b,p,2)}function z(){return[0,0]}function G(){return[1,1]}function E(){return[1,0]}function u(){return[0,1]}const m=[0,0],d=[1,1],c=[1,0],g=[0,1],e=Object.freeze({__proto__:null,create:k,clone:f,fromValues:n,fromArray:x,createView:I,zeros:z,ones:G,unitX:E,unitY:u,ZEROS:m,ONES:d,UNIT_X:c,UNIT_Y:g});h.ONES=d;h.UNIT_X=c;h.UNIT_Y=g;h.ZEROS=m;h.clone=f;h.create=
k;h.createView=I;h.fromArray=x;h.fromValues=n;h.ones=G;h.unitX=E;h.unitY=u;h.vec2f64=e;h.zeros=z})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/scheduling"],function(h,k){return function(){function f(x){this.view=x;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=
window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;if(this.updateEnabled){var {basemapView:I,graphicsView:z,labelManager:G,layerViews:E,state:{id:u}}=this.view;I.baseLayerViews.forEach(this._updateLayerView,this);E.forEach(this._updateLayerView,this);I.referenceLayerViews.forEach(this._updateLayerView,this);h.isSome(G)&&(G.lastUpdateId!==u&&(G.viewChange(),G.lastUpdateId=u),G.updateRequested&&G.processUpdate(this._updateParameters));
h.isSome(z)&&(z.lastUpdateId!==u&&(z.viewChange(),z.lastUpdateId=u),z.updateRequested&&z.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}}var n=f.prototype;n.destroy=function(){this.stop()};n.start=function(){this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};
this._stationaryHandle=this.view.watch("stationary",x=>{this.stationary=x;this.requestFrame()});this._frameTaskHandle=k.addFrameTask(this)};n.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};n.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};n.requestFrame=function(){this._frameTaskHandle&&
this._frameTaskHandle.resume()};n._updateLayerView=function(x){const I=this.view.state,z=x.lastUpdateId;if(null==z||!this.stationary&&!x.moving)x.moving=!0,x.moveStart();z!==I.id&&x.viewChange();this.stationary&&x.moving&&(x.moving=!1,x.moveEnd());x.lastUpdateId=I.id;x.updateRequested&&x.processUpdate(this._updateParameters);"layerViews"in x&&x.layerViews.forEach(this._updateLayerView,this)};return f}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error",
"../../core/maybe"],function(h,k,f,n){function x(){return Promise.all([new Promise((u,m)=>h(["../webgl"],u,m)),new Promise((u,m)=>h(["./mapViewDeps"],u,m))])}const I=u=>Object.freeze({__proto__:null,default:u}),z=()=>x().then(()=>new Promise((u,m)=>h(["./layers/TileLayerView2D"],d=>u(I(d)),m))),G=()=>x().then(()=>new Promise((u,m)=>h(["./layers/FeatureLayerView2D"],d=>u(I(d)),m))),E={"base-dynamic":()=>x().then(()=>new Promise((u,m)=>h(["./layers/BaseDynamicLayerView2D"],d=>u(I(d)),m))),"base-tile":z,
"bing-maps":z,csv:G,"geo-rss":()=>x().then(()=>new Promise((u,m)=>h(["./layers/GeoRSSLayerView2D"],d=>u(I(d)),m))),feature:G,geojson:G,graphics:()=>x().then(()=>new Promise((u,m)=>h(["./layers/GraphicsLayerView2D"],d=>u(I(d)),m))),group:()=>x().then(()=>new Promise((u,m)=>h(["./layers/GroupLayerView2D"],d=>u(I(d)),m))),imagery:()=>x().then(()=>new Promise((u,m)=>h(["./layers/ImageryLayerView2D"],d=>u(I(d)),m))),"imagery-tile":()=>x().then(()=>new Promise((u,m)=>h(["./layers/ImageryTileLayerView2D"],
d=>u(I(d)),m))),kml:()=>x().then(()=>new Promise((u,m)=>h(["./layers/KMLLayerView2D"],d=>u(I(d)),m))),"map-image":()=>x().then(()=>new Promise((u,m)=>h(["./layers/MapImageLayerView2D"],d=>u(I(d)),m))),"map-notes":()=>x().then(()=>new Promise((u,m)=>h(["./layers/MapNotesLayerView2D"],d=>u(I(d)),m))),"ogc-feature":()=>x().then(()=>new Promise((u,m)=>h(["./layers/OGCFeatureLayerView2D"],d=>u(I(d)),m))),"open-street-map":z,route:()=>x().then(()=>new Promise((u,m)=>h(["./layers/RouteLayerView2D"],d=>u(I(d)),
m))),stream:()=>x().then(()=>new Promise((u,m)=>h(["./layers/StreamLayerView2D"],d=>u(I(d)),m))),"subtype-group":()=>x().then(()=>new Promise((u,m)=>h(["./layers/SubtypeGroupLayerView2D"],d=>u(I(d)),m))),tile:z,"vector-tile":()=>x().then(()=>new Promise((u,m)=>h(["./layers/VectorTileLayerView2D"],d=>u(I(d)),m))),wcs:()=>x().then(()=>new Promise((u,m)=>h(["./layers/ImageryTileLayerView2D"],d=>u(I(d)),m))),"web-tile":z,wfs:G,wms:()=>x().then(()=>new Promise((u,m)=>h(["./layers/WMSLayerView2D"],d=>u(I(d)),
m))),wmts:()=>x().then(()=>new Promise((u,m)=>h(["./layers/WMTSLayerView2D"],d=>u(I(d)),m))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};k.layerView2DImporter={hasLayerViewModule:u=>n.isSome(E[u.type]),importLayerView:u=>{var m=E[u.type];if(!n.isSome(m))throw u=u.declaredClass?u.declaredClass.slice(u.declaredClass.lastIndexOf(".")+1):"Unknown",m=u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),
u=new f(`${m}:view-not-supported`,`${u} is not supported in 2D`),u;return m(u)}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Evented ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){f={base:null,key:"type",typeMap:{extent:g,polygon:e}};n=function(b){function p(){var r=b.apply(this,arguments)||this;r.lods=null;r.minScale=0;r.maxScale=0;r.minZoom=-1;r.maxZoom=-1;r.rotationEnabled=!0;r.snapToZoom=!0;return r}h._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)};w.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};w.canZoomInTo=
function(r){const t=this.effectiveMaxScale;return 0===t||r>=t};w.canZoomOutTo=function(r){const t=this.effectiveMinScale;return 0===t||r<=t};w.constrain=function(r,t){this._zoom.constrain(r,t);this._rotation.constrain(r,t);this._geometry.constrain(r,t);return r};w.constrainByGeometry=function(r){return this._geometry.constrain(r)};w.fit=function(r){return this._zoom.fit(r)};w.zoomToScale=function(r){return this._zoom.zoomToScale(r)};w.scaleToZoom=function(r){return this._zoom.scaleToZoom(r)};w.snapScale=
function(r){return this._zoom.snapToClosestScale(r)};w.snapToNextScale=function(r){return this._zoom.snapToNextScale(r)};w.snapToPreviousScale=function(r){return this._zoom.snapToPreviousScale(r)};h._createClass(p,[{key:"geometry",set:function(r){r?this._set("geometry",r):this._set("geometry",null)}},{key:"_defaultLODs",get:function(){var r,t,q;const B=null==(r=this.view)?void 0:null==(t=r.defaultsFromMap)?void 0:t.tileInfo;r=null==(q=this.view)?void 0:q.spatialReference;return B&&r&&B.spatialReference.equals(r)?
B.lods:null}},{key:"_geometry",get:function(){return new m.GeometryConstraint({geometry:this.geometry,spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new d({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const r=this._get("_zoom"),t=this.lods||this._defaultLODs,q=this.minZoom,B=this.maxZoom,A=this.minScale,l=this.maxScale,F=this.snapToZoom;return r&&r.lods===t&&r.minZoom===q&&r.maxZoom===B&&r.minScale===A&&r.maxScale===l&&r.snapToZoom===
F?r:new c({lods:t,minZoom:q,maxZoom:B,minScale:A,maxScale:l,snapToZoom:F})}}]);return p}(n.EventedAccessor);k.__decorate([x.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],n.prototype,"effectiveLODs",void 0);k.__decorate([x.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],n.prototype,"effectiveMinScale",void 0);k.__decorate([x.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],n.prototype,"effectiveMaxScale",void 0);k.__decorate([x.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],
n.prototype,"effectiveMinZoom",void 0);k.__decorate([x.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],n.prototype,"effectiveMaxZoom",void 0);k.__decorate([x.property({types:f,value:null})],n.prototype,"geometry",null);k.__decorate([x.property({type:[u]})],n.prototype,"lods",void 0);k.__decorate([x.property()],n.prototype,"minScale",void 0);k.__decorate([x.property()],n.prototype,"maxScale",void 0);k.__decorate([x.property()],n.prototype,"minZoom",void 0);k.__decorate([x.property()],n.prototype,
"maxZoom",void 0);k.__decorate([x.property()],n.prototype,"rotationEnabled",void 0);k.__decorate([x.property()],n.prototype,"snapToZoom",void 0);k.__decorate([x.property()],n.prototype,"view",void 0);k.__decorate([x.property()],n.prototype,"_defaultLODs",null);k.__decorate([x.property({type:m.GeometryConstraint})],n.prototype,"_geometry",null);k.__decorate([x.property({type:d})],n.prototype,"_rotation",null);k.__decorate([x.property({readOnly:!0,type:c})],n.prototype,"_zoom",null);return n=k.__decorate([E.subclass("esri.views.2d.MapViewConstraints")],
n)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near ../../../geometry/support/webMercatorUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){var b;const p=x.getLogger("esri.views.MapView");h.GeometryConstraint=b=function(w){function r(q){q=w.call(this,q)||this;q.geometry=null;q.spatialReference=null;return q}k._inheritsLoose(r,w);var t=r.prototype;t.constrain=function(q,B){if(I.isNone(this.normalizedGeometry))return q;B=q.targetGeometry;if("extent"===this.normalizedGeometry.type?c.extentContainsPoint(this.normalizedGeometry,B):c.polygonContainsPoint(this.normalizedGeometry,B))return q;({coordinate:B}=
g.nearestCoordinate(this.normalizedGeometry,B));if(!B)return q;q.targetGeometry=B;return q};t.clone=function(){var q,B;return new b({geometry:null==(q=this.geometry)?void 0:q.clone(),spatialReference:null==(B=this.spatialReference)?void 0:B.clone()})};k._createClass(r,[{key:"normalizedGeometry",get:function(){if(I.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(e.canProject(this.geometry,this.spatialReference))return e.project(this.geometry,
this.spatialReference);if(d.isLoaded())return d.project(this.geometry,this.spatialReference);p.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry});return null}return this.geometry}}]);return r}(n);f.__decorate([z.property({constructOnly:!0})],h.GeometryConstraint.prototype,"geometry",void 0);f.__decorate([z.property({readOnly:!0})],h.GeometryConstraint.prototype,
"normalizedGeometry",null);f.__decorate([z.property({constructOnly:!0})],h.GeometryConstraint.prototype,"spatialReference",void 0);h.GeometryConstraint=b=f.__decorate([m.subclass("esri.views.2d.constraints.GeometryConstraint")],h.GeometryConstraint);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(h,k,f,n,x){h.nearestCoordinate=function(I,z){const {spatialReference:G}=
z;z=[z.x,z.y];let E=Number.POSITIVE_INFINITY,u=0,m=0;const d=[0,0];I="extent"===I.type?[[[I.xmin,I.ymin],[I.xmin,I.ymax],[I.xmax,I.ymax],[I.xmax,I.ymin],[I.xmin,I.ymin]]]:I.rings;for(const c of I)for(I=0;I<c.length-1;I++){n.projectPointOnLine(d,z,c,I);const g=f.distance(z,d);g<E&&(E=g,u=d[0],m=d[1])}return{coordinate:new x({x:u,y:m,spatialReference:G}),distance:E}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G){var E;f=E=function(u){function m(){var c=u.apply(this,arguments)||this;c.enabled=!0;c.rotationEnabled=!0;return c}h._inheritsLoose(m,u);var d=m.prototype;d.constrain=function(c,g){if(!this.enabled||!g)return c;this.rotationEnabled||(c.rotation=g.rotation);return c};d.clone=function(){return new E({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return m}(f);k.__decorate([n.property()],f.prototype,"enabled",void 0);k.__decorate([n.property()],f.prototype,"rotationEnabled",
void 0);return f=E=k.__decorate([G.subclass("esri.views.2d.constraints.RotationConstraint")],f)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(h,k,f,n,x,I,z,G){var E;f=E=function(u){function m(c){c=
u.call(this,c)||this;c._lodByScale={};c._scales=[];c.effectiveLODs=null;c.effectiveMinZoom=-1;c.effectiveMaxZoom=-1;c.effectiveMinScale=0;c.effectiveMaxScale=0;c.lods=null;c.minZoom=-1;c.maxZoom=-1;c.minScale=0;c.maxScale=0;c.snapToZoom=!0;return c}h._inheritsLoose(m,u);var d=m.prototype;d.initialize=function(){let {lods:c,minScale:g,maxScale:e,minZoom:b,maxZoom:p}=this,w=-1,r=-1,t=!1,q=!1;0!==g&&0!==e&&g<e&&([g,e]=[e,g]);if(c&&c.length){c=c.map(A=>A.clone());c.sort((A,l)=>l.scale-A.scale);c.forEach((A,
l)=>A.level=l);for(const A of c){!t&&0<g&&g>=A.scale&&(w=A.level,t=!0);!q&&0<e&&e>=A.scale&&(r=B?B.level:-1,q=!0);var B=A}-1===b&&(b=0===g?0:w);-1===p&&(p=0===e?c.length-1:r);b=Math.max(b,0);b=Math.min(b,c.length-1);p=Math.max(p,0);p=Math.min(p,c.length-1);b>p&&([b,p]=[p,b]);g=c[b].scale;e=c[p].scale;c.splice(0,b);c.splice(p-b+1,c.length);c.forEach((A,l)=>{this._lodByScale[A.scale]=A;this._scales[l]=A.scale});this._set("effectiveLODs",c);this._set("effectiveMinZoom",b);this._set("effectiveMaxZoom",
p)}this._set("effectiveMinScale",g);this._set("effectiveMaxScale",e)};d.constrain=function(c,g){if(g&&c.scale===g.scale)return c;var e=this.effectiveMinScale;const b=this.effectiveMaxScale,p=c.targetGeometry,w=g&&g.targetGeometry,r=0!==e&&c.scale>e;if(0!==b&&c.scale<b||r)e=r?e:b,w&&(g=(e-g.scale)/(c.scale-g.scale),p.x=w.x+(p.x-w.x)*g,p.y=w.y+(p.y-w.y)*g),c.scale=e;this.snapToZoom&&this.effectiveLODs&&(c.scale=this._getClosestScale(c.scale));return c};d.fit=function(c){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(c,
null);const g=this.scaleToZoom(c.scale);c.scale=this.zoomToScale(.99<Math.abs(g-Math.floor(g))?Math.round(g):Math.floor(g));return c};d.zoomToScale=function(c){if(!this.effectiveLODs)return 0;c-=this.effectiveMinZoom;c=Math.max(0,c);const g=this._scales;if(0>=c)return g[0];if(c>=g.length)return g[g.length-1];const e=Math.round(c);return g[e]+(e-c)*(g[Math.round(c-.5)]-g[e])};d.scaleToZoom=function(c){if(!this.effectiveLODs)return-1;const g=this._scales;let e,b;if(c>=g[0])return this.effectiveMinZoom;
if(c<=g[g.length-1])return this.effectiveMaxZoom;for(let p=0;p<g.length-1;p++){e=g[p];b=g[p+1];if(b===c)return p+this.effectiveMinZoom+1;if(e>c&&b<c)return p+this.effectiveMinZoom+1-(c-b)/(e-b)}};d.snapToClosestScale=function(c){if(!this.effectiveLODs)return c;c=this.scaleToZoom(c);return this.zoomToScale(Math.round(c))};d.snapToNextScale=function(c,g=.5){if(!this.effectiveLODs)return c*g;c=Math.round(this.scaleToZoom(c));return this.zoomToScale(c+1)};d.snapToPreviousScale=function(c,g=2){if(!this.effectiveLODs)return c*
g;c=Math.round(this.scaleToZoom(c));return this.zoomToScale(c-1)};d.clone=function(){return new E({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};d._getClosestScale=function(c){if(this._lodByScale[c])return this._lodByScale[c].scale;c=this._scales.reduce((g,e)=>Math.abs(e-c)<=Math.abs(g-c)?e:g,this._scales[0]);return this._lodByScale[c].scale};return m}(f);k.__decorate([n.property({readOnly:!0})],f.prototype,"effectiveLODs",void 0);k.__decorate([n.property({readOnly:!0})],
f.prototype,"effectiveMinZoom",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"effectiveMinScale",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);k.__decorate([n.property()],f.prototype,"lods",void 0);k.__decorate([n.property()],f.prototype,"minZoom",void 0);k.__decorate([n.property()],f.prototype,"maxZoom",void 0);k.__decorate([n.property()],f.prototype,"minScale",
void 0);k.__decorate([n.property()],f.prototype,"maxScale",void 0);k.__decorate([n.property()],f.prototype,"snapToZoom",void 0);return f=E=k.__decorate([G.subclass("esri.views.2d.constraints.ZoomConstraint")],f)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){let c=function(g){function e(){var b=g.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}h._inheritsLoose(e,g);return e}(f);k.__decorate([n.property()],c.prototype,"left",void 0);k.__decorate([n.property()],c.prototype,"top",void 0);k.__decorate([n.property()],c.prototype,"right",void 0);k.__decorate([n.property()],c.prototype,"bottom",void 0);c=k.__decorate([G.subclass("esri.views.2d.PaddedViewState.Padding")],c);f=function(g){function e(...b){var p=
g.call(this,...b)||this;p.paddedViewState=new d;p._updateContent=(()=>{const w=u.create();return()=>{var r=p._get("size");const t=p._get("padding");if(r&&t){var q=p.paddedViewState;E.set(w,t.left+t.right,t.top+t.bottom);E.subtract(w,r,w);E.copy(q.size,w);if(r=q.viewpoint)p.viewpoint=r}}})();p.watch(["size","padding"],p._updateContent,!0);p.padding=new c;p.size=[0,0];return p}h._inheritsLoose(e,g);h._createClass(e,[{key:"padding",set:function(b){this._set("padding",b||new c)}},{key:"viewpoint",set:function(b){if(b){const p=
b.clone();this.paddedViewState.viewpoint=b;m.addPadding(p,b,this._get("size"),this._get("padding"));b=this._viewpoint2D;const w=p.targetGeometry;b.center[0]=w.x;b.center[1]=w.y;b.rotation=p.rotation;b.scale=p.scale;b.spatialReference=w.spatialReference;this._update()}}}]);return e}(d);k.__decorate([n.property()],f.prototype,"paddedViewState",void 0);k.__decorate([n.property({type:c})],f.prototype,"padding",null);k.__decorate([n.property()],f.prototype,"viewpoint",null);return f=k.__decorate([G.subclass("esri.views.2d.PaddedViewState")],
f)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A){var l;const F=[0,0];f=l=function(K){function R(V){V=K.call(this,V)||this;V._viewpoint2D={center:r.create(),rotation:0,scale:0,spatialReference:null};V.center=[0,0];V.extent=new B;V.id=0;V.inverseTransform=g.create();V.resolution=0;V.rotation=0;V.scale=0;V.transform=g.create();V.transformNoRotation=g.create();V.displayMat3=b.create();V.displayViewMat3=b.create();V.viewMat3=b.create();V.viewMat2d=c.create();V.worldScreenWidth=0;V.size=[0,0];return V}
h._inheritsLoose(R,K);var W=R.prototype;W.copy=function(V){const U=this.size,M=this.viewpoint;M&&U?(this.viewpoint=q.copy(M,V.viewpoint),this._set("size",p.copy(U,V.size))):(this.viewpoint=V.viewpoint.clone(),this._set("size",[V.size[0],V.size[1]]));this._set("pixelRatio",V.pixelRatio);return this};W.clone=function(){return new l({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};W.toMap=function(V,U,M){if(t.isVec2(U))return p.transformMat2d(V,U,this.inverseTransform);
F[0]=U;F[1]=M;return p.transformMat2d(V,F,this.inverseTransform)};W.toScreen=function(V,U,M){if(t.isVec2(U))return p.transformMat2d(V,U,this.transform);F[0]=U;F[1]=M;return p.transformMat2d(V,F,this.transform)};W.toScreenNoRotation=function(V,U,M){if(t.isVec2(U))return p.transformMat2d(V,U,this.transformNoRotation);F[0]=U;F[1]=M;return p.transformMat2d(V,F,this.transformNoRotation)};W.getScreenTransform=function(V,U){const {center:M}=this._viewpoint2D,P=this._get("pixelRatio")||1,ba=this._get("size");
q.getMatrix(V,M,ba,U,0,P);return V};W._update=function(){const {center:V,spatialReference:U,scale:M,rotation:P}=this._viewpoint2D,ba=this._get("pixelRatio")||1,J=this._get("size"),H=new n({targetGeometry:new A(V[0],V[1],U),scale:M,rotation:P});this._set("viewpoint",H);if(J&&U&&M){this.resolution=q.getResolution(H);this.rotation=P;this.scale=M;this.spatialReference=U;p.copy(this.center,V);e.set(this.displayMat3,0!==J[0]?2/J[0]:0,0,0,0,0!==J[1]?-2/J[1]:0,0,-1,1,1);var v=e.identity(this.viewMat3),D=
w.fromValues(J[0]/2,J[1]/2),C=w.fromValues(-J[0]/2,-J[1]/2),O=m.toRadian(P);e.translate(v,v,D);e.rotate(v,v,O);e.translate(v,v,C);e.multiply(this.displayViewMat3,this.displayMat3,v);v=d.identity(this.viewMat2d);d.translate(v,v,D);d.rotate(v,v,O);d.translate(v,v,C);q.getExtent(this.extent,H,J);q.getTransform(this.transform,H,J,ba);d.invert(this.inverseTransform,this.transform);q.getTransformNoRotation(this.transformNoRotation,H,J,ba);this.worldScreenWidth=q.getWorldScreenWidth(this.spatialReference,
this.resolution);this._set("id",this.id+1);return this}};h._createClass(R,[{key:"pixelRatio",set:function(V){this._set("pixelRatio",V);this._update()}},{key:"size",set:function(V){this._set("size",V);this._update()}},{key:"viewpoint",set:function(V){if(V){const U=this._viewpoint2D,M=V.targetGeometry;U.center[0]=M.x;U.center[1]=M.y;U.rotation=V.rotation;U.scale=V.scale;U.spatialReference=M.spatialReference}this._update()}}]);return R}(x.JSONSupport);k.__decorate([I.property({readOnly:!0})],f.prototype,
"id",void 0);k.__decorate([I.property({value:1,json:{write:!0}})],f.prototype,"pixelRatio",null);k.__decorate([I.property({json:{write:!0}})],f.prototype,"size",null);k.__decorate([I.property({type:n,json:{write:!0}})],f.prototype,"viewpoint",null);return f=l=k.__decorate([u.subclass("esri.views.2d.ViewState")],f)})},"esri/chunks/mat2df32":function(){define(["exports"],function(h){function k(){const E=new Float32Array(6);E[0]=1;E[3]=1;return E}function f(E){const u=new Float32Array(6);u[0]=E[0];u[1]=
E[1];u[2]=E[2];u[3]=E[3];u[4]=E[4];u[5]=E[5];return u}function n(E,u,m,d,c,g){const e=new Float32Array(6);e[0]=E;e[1]=u;e[2]=m;e[3]=d;e[4]=c;e[5]=g;return e}function x(E,u){return new Float32Array(E,u,6)}function I(E,u,m,d){const c=u[d];u=u[d+1];E[d]=m[0]*c+m[2]*u+m[4];E[d+1]=m[1]*c+m[3]*u+m[5]}function z(E,u,m,d=0,c=0,g=2){for(c=c||u.length/g;d<c;d++)I(E,u,m,d*g)}const G=Object.freeze({__proto__:null,create:k,clone:f,fromValues:n,createView:x,transform:I,transformMany:z});h.clone=f;h.create=k;h.createView=
x;h.fromValues=n;h.mat2df32=G;h.transform=I;h.transformMany=z})},"esri/chunks/mat3":function(){define(["exports","./common"],function(h,k){function f(J,H){J[0]=H[0];J[1]=H[1];J[2]=H[2];J[3]=H[4];J[4]=H[5];J[5]=H[6];J[6]=H[8];J[7]=H[9];J[8]=H[10];return J}function n(J,H){J[0]=H[0];J[1]=H[1];J[2]=H[2];J[3]=H[3];J[4]=H[4];J[5]=H[5];J[6]=H[6];J[7]=H[7];J[8]=H[8];return J}function x(J,H,v,D,C,O,T,Q,Y,ha){J[0]=H;J[1]=v;J[2]=D;J[3]=C;J[4]=O;J[5]=T;J[6]=Q;J[7]=Y;J[8]=ha;return J}function I(J){J[0]=1;J[1]=
0;J[2]=0;J[3]=0;J[4]=1;J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function z(J,H){if(J===H){const v=H[1],D=H[2],C=H[5];J[1]=H[3];J[2]=H[6];J[3]=v;J[5]=H[7];J[6]=D;J[7]=C}else J[0]=H[0],J[1]=H[3],J[2]=H[6],J[3]=H[1],J[4]=H[4],J[5]=H[7],J[6]=H[2],J[7]=H[5],J[8]=H[8];return J}function G(J,H){const v=H[0],D=H[1],C=H[2],O=H[3],T=H[4],Q=H[5],Y=H[6],ha=H[7];H=H[8];const da=H*T-Q*ha,ka=-H*O+Q*Y,qa=ha*O-T*Y;let pa=v*da+D*ka+C*qa;if(!pa)return null;pa=1/pa;J[0]=da*pa;J[1]=(-H*D+C*ha)*pa;J[2]=(Q*D-C*T)*pa;J[3]=ka*
pa;J[4]=(H*v-C*Y)*pa;J[5]=(-Q*v+C*O)*pa;J[6]=qa*pa;J[7]=(-ha*v+D*Y)*pa;J[8]=(T*v-D*O)*pa;return J}function E(J,H){const v=H[0],D=H[1],C=H[2],O=H[3],T=H[4],Q=H[5],Y=H[6],ha=H[7];H=H[8];J[0]=T*H-Q*ha;J[1]=C*ha-D*H;J[2]=D*Q-C*T;J[3]=Q*Y-O*H;J[4]=v*H-C*Y;J[5]=C*O-v*Q;J[6]=O*ha-T*Y;J[7]=D*Y-v*ha;J[8]=v*T-D*O;return J}function u(J){const H=J[3],v=J[4],D=J[5],C=J[6],O=J[7],T=J[8];return J[0]*(T*v-D*O)+J[1]*(-T*H+D*C)+J[2]*(O*H-v*C)}function m(J,H,v){const D=H[0],C=H[1],O=H[2],T=H[3],Q=H[4],Y=H[5],ha=H[6],
da=H[7];H=H[8];const ka=v[0],qa=v[1],pa=v[2],ea=v[3],ia=v[4],ma=v[5],sa=v[6],S=v[7];v=v[8];J[0]=ka*D+qa*T+pa*ha;J[1]=ka*C+qa*Q+pa*da;J[2]=ka*O+qa*Y+pa*H;J[3]=ea*D+ia*T+ma*ha;J[4]=ea*C+ia*Q+ma*da;J[5]=ea*O+ia*Y+ma*H;J[6]=sa*D+S*T+v*ha;J[7]=sa*C+S*Q+v*da;J[8]=sa*O+S*Y+v*H;return J}function d(J,H,v){const D=H[0],C=H[1],O=H[2],T=H[3],Q=H[4],Y=H[5],ha=H[6],da=H[7];H=H[8];const ka=v[0];v=v[1];J[0]=D;J[1]=C;J[2]=O;J[3]=T;J[4]=Q;J[5]=Y;J[6]=ka*D+v*T+ha;J[7]=ka*C+v*Q+da;J[8]=ka*O+v*Y+H;return J}function c(J,
H,v){const D=H[0],C=H[1],O=H[2],T=H[3],Q=H[4],Y=H[5],ha=H[6],da=H[7];H=H[8];const ka=Math.sin(v);v=Math.cos(v);J[0]=v*D+ka*T;J[1]=v*C+ka*Q;J[2]=v*O+ka*Y;J[3]=v*T-ka*D;J[4]=v*Q-ka*C;J[5]=v*Y-ka*O;J[6]=ha;J[7]=da;J[8]=H;return J}function g(J,H,v){const D=v[0],C=v[1];v=v[2];J[0]=D*H[0];J[1]=D*H[1];J[2]=D*H[2];J[3]=C*H[3];J[4]=C*H[4];J[5]=C*H[5];J[6]=v*H[6];J[7]=v*H[7];J[8]=v*H[8];return J}function e(J,H,v){const D=v[0];v=v[1];J[0]=D*H[0];J[1]=D*H[1];J[2]=D*H[2];J[3]=v*H[3];J[4]=v*H[4];J[5]=v*H[5];return J}
function b(J,H){J[0]=1;J[1]=0;J[2]=0;J[3]=0;J[4]=1;J[5]=0;J[6]=H[0];J[7]=H[1];J[8]=1;return J}function p(J,H){const v=Math.sin(H);H=Math.cos(H);J[0]=H;J[1]=v;J[2]=0;J[3]=-v;J[4]=H;J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function w(J,H){J[0]=H[0];J[1]=0;J[2]=0;J[3]=0;J[4]=H[1];J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function r(J,H){J[0]=H[0];J[1]=H[1];J[2]=0;J[3]=H[2];J[4]=H[3];J[5]=0;J[6]=H[4];J[7]=H[5];J[8]=1;return J}function t(J,H){var v=H[0],D=H[1],C=H[2];H=H[3];var O=v+v,T=D+D;const Q=C+C;v*=O;const Y=
D*O;D*=T;const ha=C*O,da=C*T;C*=Q;O*=H;T*=H;H*=Q;J[0]=1-D-C;J[3]=Y-H;J[6]=ha+T;J[1]=Y+H;J[4]=1-v-C;J[7]=da-O;J[2]=ha-T;J[5]=da+O;J[8]=1-v-D;return J}function q(J,H){const v=H[0],D=H[1],C=H[2],O=H[4],T=H[5],Q=H[6],Y=H[8],ha=H[9];H=H[10];const da=H*T-Q*ha,ka=-H*O+Q*Y,qa=ha*O-T*Y;var pa=v*da+D*ka+C*qa;if(!pa)return null;pa=1/pa;J[0]=da*pa;J[1]=(-H*D+C*ha)*pa;J[2]=(Q*D-C*T)*pa;J[3]=ka*pa;J[4]=(H*v-C*Y)*pa;J[5]=(-Q*v+C*O)*pa;J[6]=qa*pa;J[7]=(-ha*v+D*Y)*pa;J[8]=(T*v-D*O)*pa;return J}function B(J,H){const v=
H[0],D=H[1],C=H[2],O=H[3],T=H[4],Q=H[5],Y=H[6],ha=H[7];var da=H[8],ka=H[9],qa=H[10],pa=H[11];const ea=H[12],ia=H[13],ma=H[14];H=H[15];const sa=v*Q-D*T,S=v*Y-C*T,ca=v*ha-O*T,ja=D*Y-C*Q,na=D*ha-O*Q,ta=C*ha-O*Y,xa=da*ia-ka*ea,za=da*ma-qa*ea;da=da*H-pa*ea;const ya=ka*ma-qa*ia;ka=ka*H-pa*ia;qa=qa*H-pa*ma;pa=sa*qa-S*ka+ca*ya+ja*da-na*za+ta*xa;if(!pa)return null;pa=1/pa;J[0]=(Q*qa-Y*ka+ha*ya)*pa;J[1]=(Y*da-T*qa-ha*za)*pa;J[2]=(T*ka-Q*da+ha*xa)*pa;J[3]=(C*ka-D*qa-O*ya)*pa;J[4]=(v*qa-C*da+O*za)*pa;J[5]=(D*
da-v*ka-O*xa)*pa;J[6]=(ia*ta-ma*na+H*ja)*pa;J[7]=(ma*ca-ea*ta-H*S)*pa;J[8]=(ea*na-ia*ca+H*sa)*pa;return J}function A(J,H,v){J[0]=2/H;J[1]=0;J[2]=0;J[3]=0;J[4]=-2/v;J[5]=0;J[6]=-1;J[7]=1;J[8]=1;return J}function l(J){return"mat3("+J[0]+", "+J[1]+", "+J[2]+", "+J[3]+", "+J[4]+", "+J[5]+", "+J[6]+", "+J[7]+", "+J[8]+")"}function F(J){return Math.sqrt(J[0]**2+J[1]**2+J[2]**2+J[3]**2+J[4]**2+J[5]**2+J[6]**2+J[7]**2+J[8]**2)}function K(J,H,v){J[0]=H[0]+v[0];J[1]=H[1]+v[1];J[2]=H[2]+v[2];J[3]=H[3]+v[3];
J[4]=H[4]+v[4];J[5]=H[5]+v[5];J[6]=H[6]+v[6];J[7]=H[7]+v[7];J[8]=H[8]+v[8];return J}function R(J,H,v){J[0]=H[0]-v[0];J[1]=H[1]-v[1];J[2]=H[2]-v[2];J[3]=H[3]-v[3];J[4]=H[4]-v[4];J[5]=H[5]-v[5];J[6]=H[6]-v[6];J[7]=H[7]-v[7];J[8]=H[8]-v[8];return J}function W(J,H,v){J[0]=H[0]*v;J[1]=H[1]*v;J[2]=H[2]*v;J[3]=H[3]*v;J[4]=H[4]*v;J[5]=H[5]*v;J[6]=H[6]*v;J[7]=H[7]*v;J[8]=H[8]*v;return J}function V(J,H,v,D){J[0]=H[0]+v[0]*D;J[1]=H[1]+v[1]*D;J[2]=H[2]+v[2]*D;J[3]=H[3]+v[3]*D;J[4]=H[4]+v[4]*D;J[5]=H[5]+v[5]*
D;J[6]=H[6]+v[6]*D;J[7]=H[7]+v[7]*D;J[8]=H[8]+v[8]*D;return J}function U(J,H){return J[0]===H[0]&&J[1]===H[1]&&J[2]===H[2]&&J[3]===H[3]&&J[4]===H[4]&&J[5]===H[5]&&J[6]===H[6]&&J[7]===H[7]&&J[8]===H[8]}function M(J,H){const v=J[0],D=J[1],C=J[2],O=J[3],T=J[4],Q=J[5],Y=J[6],ha=J[7];J=J[8];const da=H[0],ka=H[1],qa=H[2],pa=H[3],ea=H[4],ia=H[5],ma=H[6],sa=H[7];H=H[8];return Math.abs(v-da)<=k.EPSILON*Math.max(1,Math.abs(v),Math.abs(da))&&Math.abs(D-ka)<=k.EPSILON*Math.max(1,Math.abs(D),Math.abs(ka))&&Math.abs(C-
qa)<=k.EPSILON*Math.max(1,Math.abs(C),Math.abs(qa))&&Math.abs(O-pa)<=k.EPSILON*Math.max(1,Math.abs(O),Math.abs(pa))&&Math.abs(T-ea)<=k.EPSILON*Math.max(1,Math.abs(T),Math.abs(ea))&&Math.abs(Q-ia)<=k.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ia))&&Math.abs(Y-ma)<=k.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ma))&&Math.abs(ha-sa)<=k.EPSILON*Math.max(1,Math.abs(ha),Math.abs(sa))&&Math.abs(J-H)<=k.EPSILON*Math.max(1,Math.abs(J),Math.abs(H))}function P(J){const H=k.EPSILON,v=J[0],D=J[1],C=J[2],O=J[3],T=J[4],
Q=J[5],Y=J[6],ha=J[7];J=J[8];return Math.abs(1-(v*v+O*O+Y*Y))<=H&&Math.abs(1-(D*D+T*T+ha*ha))<=H&&Math.abs(1-(C*C+Q*Q+J*J))<=H}const ba=Object.freeze({__proto__:null,fromMat4:f,copy:n,set:x,identity:I,transpose:z,invert:G,adjoint:E,determinant:u,multiply:m,translate:d,rotate:c,scale:g,scaleByVec2:e,fromTranslation:b,fromRotation:p,fromScaling:w,fromMat2d:r,fromQuat:t,normalFromMat4Legacy:q,normalFromMat4:B,projection:A,str:l,frob:F,add:K,subtract:R,multiplyScalar:W,multiplyScalarAndAdd:V,exactEquals:U,
equals:M,isOrthoNormal:P,mul:m,sub:R});h.add=K;h.adjoint=E;h.copy=n;h.determinant=u;h.equals=M;h.exactEquals=U;h.frob=F;h.fromMat2d=r;h.fromMat4=f;h.fromQuat=t;h.fromRotation=p;h.fromScaling=w;h.fromTranslation=b;h.identity=I;h.invert=G;h.isOrthoNormal=P;h.mat3=ba;h.mul=m;h.multiply=m;h.multiplyScalar=W;h.multiplyScalarAndAdd=V;h.normalFromMat4=B;h.normalFromMat4Legacy=q;h.projection=A;h.rotate=c;h.scale=g;h.scaleByVec2=e;h.set=x;h.str=l;h.sub=R;h.subtract=R;h.translate=d;h.transpose=z})},"esri/chunks/mat3f32":function(){define(["exports"],
function(h){function k(){const z=new Float32Array(9);z[0]=1;z[4]=1;z[8]=1;return z}function f(z){const G=new Float32Array(9);G[0]=z[0];G[1]=z[1];G[2]=z[2];G[3]=z[3];G[4]=z[4];G[5]=z[5];G[6]=z[6];G[7]=z[7];G[8]=z[8];return G}function n(z,G,E,u,m,d,c,g,e){const b=new Float32Array(9);b[0]=z;b[1]=G;b[2]=E;b[3]=u;b[4]=m;b[5]=d;b[6]=c;b[7]=g;b[8]=e;return b}function x(z,G){return new Float32Array(z,G,9)}const I=Object.freeze({__proto__:null,create:k,clone:f,fromValues:n,createView:x});h.clone=f;h.create=
k;h.createView=x;h.fromValues=n;h.mat3f32=I})},"esri/chunks/vec2f32":function(){define(["exports"],function(h){function k(){return new Float32Array(2)}function f(e){const b=new Float32Array(2);b[0]=e[0];b[1]=e[1];return b}function n(e,b){const p=new Float32Array(2);p[0]=e;p[1]=b;return p}function x(e,b){return new Float32Array(e,b,2)}function I(){return k()}function z(){return n(1,1)}function G(){return n(1,0)}function E(){return n(0,1)}const u=k(),m=z(),d=G(),c=E(),g=Object.freeze({__proto__:null,
create:k,clone:f,fromValues:n,createView:x,zeros:I,ones:z,unitX:G,unitY:E,ZEROS:u,ONES:m,UNIT_X:d,UNIT_Y:c});h.ONES=m;h.UNIT_X=d;h.UNIT_Y=c;h.ZEROS=u;h.clone=f;h.create=k;h.createView=x;h.fromValues=n;h.ones=z;h.unitX=G;h.unitY=E;h.vec2f32=g;h.zeros=I})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(h){function k(n){return n instanceof Float32Array&&2<=n.length}function f(n){return Array.isArray(n)&&2<=n.length}h.isVec2=function(n){return k(n)||f(n)};h.isVec2f32=k;
h.isVec2f64=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(h,k,f,n,x,I,z,G,E,u){function m(b,
p){b.length=0;p.forEach(w=>b.push(w));return b}const d=new Set,c=[],g=new Map,e=[0,0];f=function(b){function p(r){r=b.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}h._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){const {concurrency:r,process:t}=this;this._queue=new u.QueueProcessor({concurrency:r,process:(q,B)=>{q=this._keyToItem.get(q);return t(q,{signal:B})},peeker:q=>q.values().next().value})};w.destroy=function(){this.clear();
this._queue.destroy();this._queue=null};w.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};w.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};w.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};w.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};w.pause=function(){this._queue.pause()};w.push=function(r,t){const q=r.key.id+"-"+t;if(this.has(q))return this.get(q);
t=this._queue.push(q);const B=()=>{this._keyToItem.delete(q);this.notifyChange("updating")};this._keyToItem.set(q,r);t.then(B,B);this.notifyChange("updating");return t};w.reset=function(){this._queue.reset();this.notifyChange("updating")};w.resume=function(){this._queue.resume()};w._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const t=this.tileInfoView;let q=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;r.forEach(R=>{R=this._keyToItem.get(R);const W=this.tileInfoView.getTileScale(R.key);
g.has(W)||(g.set(W,[]),q=Math.max(W,q),B=Math.min(W,B));g.get(W).push(R.key);d.add(W)});let A=this.state.scale;g.has(A)||(m(c,d),c.sort((R,W)=>R-W),A=c.reduce((R,W)=>Math.abs(W-A)<Math.abs(R-A)?W:R,c[0]));A=Math.min(A,q);A=Math.max(A,B);r=g.get(A);const l=t.getClosestInfoForScale(A),F=l.getColumnForX(this.state.center[0]),K=l.getRowForY(this.state.center[1]);r.sort((R,W)=>{const V=l.denormalizeCol(R.col,R.world),U=l.denormalizeCol(W.col,W.world);return Math.sqrt((F-V)*(F-V)+(K-R.row)*(K-R.row))-Math.sqrt((F-
U)*(F-U)+(K-W.row)*(K-W.row))});d.clear();g.clear();return r[0].id};w._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const t=this.tileInfoView,q=this.state.center;let B=Number.POSITIVE_INFINITY,A=null;r.forEach(l=>{l=this._keyToItem.get(l);t.getTileCoords(e,l.key);const F=E.distance(e,q);F<B&&(B=F,A=l.key)});return A.id};h._createClass(p,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return p}(f);k.__decorate([n.property({constructOnly:!0})],f.prototype,"concurrency",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,"process",void 0);k.__decorate([n.property()],f.prototype,"state",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,"strategy",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,"tileInfoView",void 0);k.__decorate([n.property({readOnly:!0})],
f.prototype,"updating",null);return f=k.__decorate([G.subclass("esri.views.2d.tiling.PagedTileQueue")],f)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(h,k,f,n,x,I){let z=function(E,u){this.item=E;this.controller=u;this.promise=null},G=function(){function E(m){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;
this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;m.concurrency&&(this.concurrency=m.concurrency);this._queue=new x(m.peeker);this.process=m.process;const d=m.scheduler;m.priority&&f.isSome(d)&&(this._task=d.registerTask(m.priority,this))}var u=E.prototype;u.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};u.abort=function(m){(m=this._controllers.get(m))&&m.abort()};u.clear=function(){this._queue.clear();
const m=[];this._controllers.forEach(d=>m.push(d));this._controllers.clear();m.forEach(d=>d.abort());this._processingItems.clear();this._cancelNext()};u.forEach=function(m){this._deferreds.forEach((d,c)=>m(c))};u.get=function(m){return(m=this._deferreds.get(m))?m.promise:void 0};u.isOngoing=function(m){return this._processingItems.has(m)};u.has=function(m){return this._deferreds.has(m)};u.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};u.push=function(m,d){const c=this.get(m);
if(c)return c;const g=new AbortController;let e=null;d&&(e=n.onAbort(d,()=>g.abort()));const b=()=>{p.remove();f.isSome(e)&&e.remove();this._deferreds.delete(m);this._controllers.delete(m);this._queue.remove(m);this._processingItems.delete(m);this._scheduleNext()},p=n.onAbortOrThrow(g.signal,()=>{const r=this._processingItems.get(m);r&&r.controller.abort();b();w.reject(n.createAbortError())}),w=n.createDeferred();this._deferreds.set(m,w);this._controllers.set(m,g);w.promise.then(b,b);this._queue.push(m);
this._scheduleNext();return w.promise};u.last=function(){return this._queue.last()};u.peek=function(){return this._queue.peek()};u.popLast=function(){return this._queue.popLast()};u.reset=function(){const m=[];this._processingItems.forEach(d=>m.push(d));this._processingItems.clear();for(const d of m)this._queue.push(d.item),d.controller.abort();this._scheduleNext()};u.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};u.takeAll=function(){const m=[];for(;this._queue.length;)m.push(this._queue.pop());
this.clear();return m};u.runTask=function(m){for(;!m.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),m.madeProgress()};u._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=I.schedule(()=>{this._schedule=null;this._next()}))};u._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};u._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};u._processResult=function(m,d){this._canProcessFulfillment(m)&&(this._scheduleNext(),this._deferreds.get(m.item).resolve(d))};u._processError=function(m,d){this._canProcessFulfillment(m)&&(this._scheduleNext(),this._deferreds.get(m.item).reject(d))};u._canProcessFulfillment=function(m){return this._deferreds.get(m.item)&&this._processingItems.get(m.item)===m?!0:!1};u._process=function(m){if(!f.isNone(m)){var d=new AbortController,c=new z(m,d);this._processingItems.set(m,c);try{var g=
this.process(m,d.signal)}catch(e){this._processError(c,e)}n.isPromiseLike(g)?(c.promise=g,g.then(e=>this._processResult(c,e),e=>this._processError(c,e))):this._processResult(c,g)}};k._createClass(E,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:m=>this.runTask(m)}}}]);return E}();h.QueueProcessor=G;Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(h,k,f,n,x,I){const z=new x("0/0/0/0");let G=function(){function u(d,c,g,e,b,p,w,r){this.x=d;this.ymin=c;this.ymax=g;this.invM=e;this.leftAdjust=b;this.rightAdjust=p;this.leftBound=w;this.rightBound=r}u.create=function(d,c){d[1]>c[1]&&([d,c]=[c,d]);const [g,e]=d,
[b,p]=c;d=b-g;c=p-e;c=0!==c?d/c:0;const w=(Math.ceil(e)-e)*c,r=(Math.floor(e)-e)*c;return new u(g,Math.floor(e),Math.ceil(p),c,0>d?w:r,0>d?r:w,0>d?b:g,0>d?g:b)};var m=u.prototype;m.incrRow=function(){this.x+=this.invM};m.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};m.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return u}();const E=[[0,0],[0,0],[0,0],[0,0]];return function(){function u(d,c=null){this.tileInfo=d;this.fullExtent=c;
this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const g=d.lods.slice();g.sort(function(b,p){return p.scale-b.scale});const e=this._lodInfos=g.map(b=>f.create(d,b,c));g.forEach((b,p)=>{this._infoByLevel[b.level]=e[p];this._infoByScale[b.scale]=e[p];this.scales[p]=b.scale},this);this._wrap=d.isWrappable}var m=u.prototype;m.getLODInfoAt=function(d){return this._infoByLevel["number"===typeof d?d:d.level]};m.getTileBounds=function(d,c,g=!1){z.set(c);return(c=this._infoByLevel[z.level])?
c.getTileBounds(d,z,g):d};m.getTileCoords=function(d,c,g=!1){z.set(c);return(c=this._infoByLevel[z.level])?c.getTileCoords(d,z,g):d};m.getTileCoverage=function(d,c=192,g="closest"){g="closest"===g?this.getClosestInfoForScale(d.scale):this.getSmallestInfoForScale(d.scale);const e=n.pool.acquire(g),b=this._wrap;var p=Infinity;let w=-Infinity;const r=e.spans;E[0][0]=E[0][1]=E[1][1]=E[3][0]=-c;E[1][0]=E[2][0]=d.size[0]+c;E[2][1]=E[3][1]=d.size[1]+c;for(t of E)d.toMap(t,t),t[0]=g.getColumnForX(t[0]),t[1]=
g.getRowForY(t[1]);d=[];var t=3;for(c=0;4>c;c++)E[c][1]===E[t][1]?t=c:(t=G.create(E[c],E[t]),p=Math.min(t.ymin,p),w=Math.max(t.ymax,w),void 0===d[t.ymin]&&(d[t.ymin]=[]),d[t.ymin].push(t),t=c);if(null==p||null==w||100<w-p)return null;for(c=[];p<w;){null!=d[p]&&(c=c.concat(d[p]));t=Infinity;var q=-Infinity;for(var B=c.length-1;0<=B;B--){var A=c[B];t=Math.min(t,A.getLeftCol());q=Math.max(q,A.getRightCol())}t=Math.floor(t);q=Math.floor(q);if(p>=g.first[1]&&p<=g.last[1])if(b)if(g.size[0]<g.worldSize[0])for(B=
Math.floor(q/g.worldSize[0]),A=Math.floor(t/g.worldSize[0]);A<=B;A++)r.push(new I(p,Math.max(g.getFirstColumnForWorld(A),t),Math.min(g.getLastColumnForWorld(A),q)));else r.push(new I(p,t,q));else t>g.last[0]||q<g.first[0]||(t=Math.max(t,g.first[0]),q=Math.min(q,g.last[0]),r.push(new I(p,t,q)));p+=1;for(t=c.length-1;0<=t;t--)q=c[t],q.ymax>=p?q.incrRow():c.splice(t,1)}return e};m.getTileParentId=function(d){z.set(d);d=this._lodInfos.indexOf(this._infoByLevel[z.level])-1;if(0>d)return null;this._getTileIdAtLOD(z,
this._lodInfos[d],z);return z.id};m.getTileResolution=function(d){return(d=this._infoByLevel["object"===typeof d?d.level:d])?d.resolution:-1};m.getTileScale=function(d){return(d=this._infoByLevel[d.level])?d.scale:-1};m.intersects=function(d,c){z.set(c);c=this._infoByLevel[z.level];const g=d.lodInfo;if(g.resolution>c.resolution){this._getTileIdAtLOD(z,g,z);var e=g.denormalizeCol(z.col,z.world);for(var b of d.spans)if(b.row===z.row&&b.colFrom<=e&&b.colTo>=e)return!0}if(g.resolution<c.resolution){const [w,
r,t,q]=d.spans.reduce((B,A)=>{B[0]=Math.min(B[0],A.row);B[1]=Math.max(B[1],A.row);B[2]=Math.min(B[2],A.colFrom);B[3]=Math.max(B[3],A.colTo);return B},[Infinity,-Infinity,Infinity,-Infinity]);e=c.denormalizeCol(z.col,z.world);d=g.getColumnForX(c.getXForColumn(e));b=g.getRowForY(c.getYForRow(z.row));e=g.getColumnForX(c.getXForColumn(e+1))-1;c=g.getRowForY(c.getYForRow(z.row+1))-1;return!(d>q||e<t||b>r||c<w)}const p=g.denormalizeCol(z.col,z.world);return d.spans.some(w=>w.row===z.row&&w.colFrom<=p&&
w.colTo>=p)};m.normalizeBounds=function(d,c,g){d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];this._wrap&&(c=k.getInfo(this.tileInfo.spatialReference),g=-g*(c.valid[1]-c.valid[0]),d[0]+=g,d[2]+=g);return d};m.getSmallestInfoForScale=function(d){const c=this.scales;if(this._infoByScale[d])return this._infoByScale[d];if(d>c[0])return this._infoByScale[c[0]];for(let g=1;g<c.length-1;g++)if(d>c[g]+1E-6)return this._infoByScale[c[g-1]];return this._infoByScale[c[c.length-1]]};m.getClosestInfoForScale=function(d){const c=
this.scales;if(this._infoByScale[d])return this._infoByScale[d];d=c.reduce((g,e)=>Math.abs(e-d)<Math.abs(g-d)?e:g,c[0]);return this._infoByScale[d]};m.scaleToLevel=function(d){const c=this.scales;if(this._infoByScale[d])return this._infoByScale[d].level;for(let g=c.length-1;0<=g;g--)if(d<c[g])return g===c.length-1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[g]].level+(c[g]-d)/(c[g]-c[g+1]);return this._infoByScale[c[0]].level};m.scaleToZoom=function(d){return this.tileInfo.scaleToZoom(d)};
m._getTileIdAtLOD=function(d,c,g){const e=this._infoByLevel[g.level];d.set(g);if(c.resolution<e.resolution)return null;if(c.resolution===e.resolution)return d;d.level=c.level;d.col=Math.floor(g.col*e.resolution/c.resolution+.01);d.row=Math.floor(g.row*e.resolution/c.resolution+.01);return d};h._createClass(u,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return u}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(h,k,f){function n(I,z,G){I[0]=z;I[1]=G;return I}const x=new f("0/0/0/0");return function(){function I(G,E,u,m,d,c,g,e,b,p,w,r){this.level=G;this.resolution=E;this.scale=u;this.origin=m;this.first=d;this.last=c;this.size=g;this.norm=e;this.worldStart=b;this.worldEnd=p;this.worldSize=w;this.wrap=r}I.create=function(G,E,u=null){var m=k.getInfo(G.spatialReference);const d=E.origin||[G.origin.x,G.origin.y],c=[G.size[0]*E.resolution,G.size[1]*E.resolution],g=[-Infinity,-Infinity],
e=[Infinity,Infinity],b=[Infinity,Infinity];h.isSome(u)&&(n(g,Math.max(0,Math.floor((u.xmin-d[0])/c[0])),Math.max(0,Math.floor((d[1]-u.ymax)/c[1]))),n(e,Math.max(0,Math.floor((u.xmax-d[0])/c[0])),Math.max(0,Math.floor((d[1]-u.ymin)/c[1]))),n(b,e[0]-g[0]+1,e[1]-g[1]+1));const {cols:p,rows:w}=E;!u&&p&&w&&(n(g,p[0],w[0]),n(e,p[1],w[1]),n(b,p[1]-p[0]+1,w[1]-w[0]+1));let r;G.isWrappable?(G=[Math.ceil(Math.round((m.valid[1]-m.valid[0])/E.resolution)/G.size[0]),b[1]],m=[Math.floor((m.origin[0]-d[0])/c[0]),
g[1]],u=[G[0]+m[0]-1,e[1]],r=!0):(m=g,u=e,G=b,r=!1);return new I(E.level,E.resolution,E.scale,d,g,e,b,c,m,u,G,r)};var z=I.prototype;z.normalizeCol=function(G){if(!this.wrap)return G;const E=this.worldSize[0];return 0>G?E-1-Math.abs((G+1)%E):G%E};z.denormalizeCol=function(G,E){return this.wrap?this.worldSize[0]*E+G:G};z.getWorldForColumn=function(G){return this.wrap?Math.floor(G/this.worldSize[0]):0};z.getFirstColumnForWorld=function(G){return G*this.worldSize[0]+this.first[0]};z.getLastColumnForWorld=
function(G){return G*this.worldSize[0]+this.first[0]+this.size[0]-1};z.getColumnForX=function(G){return(G-this.origin[0])/this.norm[0]};z.getXForColumn=function(G){return this.origin[0]+G*this.norm[0]};z.getRowForY=function(G){return(this.origin[1]-G)/this.norm[1]};z.getYForRow=function(G){return this.origin[1]-G*this.norm[1]};z.getTileBounds=function(G,E,u=!1){x.set(E);var m=u?x.col:this.denormalizeCol(x.col,x.world),d=x.row;E=this.getXForColumn(m);u=this.getYForRow(d+1);m=this.getXForColumn(m+1);
d=this.getYForRow(d);G[0]=E;G[1]=u;G[2]=m;G[3]=d;return G};z.getTileCoords=function(G,E,u=!1){x.set(E);E=u?x.col:this.denormalizeCol(x.col,x.world);Array.isArray(G)?n(G,this.getXForColumn(E),this.getYForRow(x.row)):(G.x=this.getXForColumn(E),G.y=this.getYForRow(x.row));return G};return I}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(h,k){let f=function(){function n(I,z,G,E){this.set(I,z,G,E)}n.getId=function(I,
z,G,E){return"object"===typeof I?`${I.level}/${I.row}/${I.col}/${I.world}`:`${I}/${z}/${G}/${E}`};var x=n.prototype;x.acquire=function(I,z,G,E){this.set(I,z,G,E)};x.contains=function(I){const z=I.level-this.level;return this.row===I.row>>z&&this.col===I.col>>z&&this.world===I.world};x.equals=function(I){return this.level===I.level&&this.row===I.row&&this.col===I.col&&this.world===I.world};x.clone=function(){return new n(this)};x.release=function(){this.world=this.col=this.row=this.level=0};x.set=
function(I,z,G,E){if(null==I)this.world=this.col=this.row=this.level=0;else if("object"===typeof I)this.level=I.level||0,this.row=I.row||0,this.col=I.col||0,this.world=I.world||0;else if("string"===typeof I){const [u,m,d,c]=I.split("/");this.level=parseFloat(u);this.row=parseFloat(m);this.col=parseFloat(d);this.world=parseFloat(c)}else this.level=+I,this.row=+z,this.col=+G,this.world=+E||0;return this};x.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};x.getParentKey=
function(){return 0>=this.level?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)};x.getChildKeys=function(){const I=this.level+1,z=this.row<<1,G=this.col<<1,E=this.world;return[new n(I,z,G,E),new n(I,z,G+1,E),new n(I,z+1,G,E),new n(I,z+1,G+1,E)]};x.compareRowMajor=function(I){return this.row<I.row?-1:this.row>I.row?1:this.col<I.col?-1:this.col>I.col?1:0};h._createClass(n,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(I){this.set(I)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return n}();f.pool=new k(f,null,null,25,50);return f})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(h){let k=function(){function f(){this.spans=[]}var n=f.prototype;n.acquire=function(x){this.lodInfo=x};n.release=function(){this.lodInfo=null;this.spans.length=0};n.forEach=function(x,I){const {spans:z,lodInfo:G}=this,{level:E}=G;if(0!==z.length)for(const {row:u,
colFrom:m,colTo:d}of z)for(let c=m;c<=d;c++)x.call(I,E,u,G.normalizeCol(c),G.getWorldForColumn(c))};return f}();k.pool=new h(k);return k})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(h,k,f){this.row=h;this.colFrom=k;this.colTo=f}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(h,k,f,n,x,I,z,G,E,u){function m(b,p){b.length=0;p.forEach(w=>b.push(w));return b}const d=new Set,c=[],g=new Map,e=[0,0];f=function(b){function p(r){r=b.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}h._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){const {concurrency:r,process:t,strategy:q}=this;this._queue=new u.QueueProcessor({concurrency:r,process:(B,A)=>{B=this._keyToItem.get(B);return t(B,{signal:A})},peeker:"scale-first"===
q?B=>this._peekByScaleFirst(B):B=>this._peekByCenterFirst(B)})};w.destroy=function(){this.clear();this._queue.destroy();this._queue=null};w.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};w.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};w.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};w.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};w.pause=function(){this._queue.pause()};
w.push=function(r){const t=r.key.id;if(this._queue.has(t))return this._queue.get(t);const q=this._queue.push(t),B=()=>{this._keyToItem.delete(t);this.notifyChange("updating")};this._keyToItem.set(t,r);q.then(B,B);this.notifyChange("updating");return q};w.reset=function(){this._queue.reset()};w.resume=function(){this._queue.resume()};w._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const t=this.tileInfoView;let q=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;r.forEach(R=>
{R=this._keyToItem.get(R);const W=this.tileInfoView.getTileScale(R.key);g.has(W)||(g.set(W,[]),q=Math.max(W,q),B=Math.min(W,B));g.get(W).push(R.key);d.add(W)});let A=this.state.scale;g.has(A)||(m(c,d),c.sort((R,W)=>R-W),A=c.reduce((R,W)=>Math.abs(W-A)<Math.abs(R-A)?W:R,c[0]));A=Math.min(A,q);A=Math.max(A,B);r=g.get(A);const l=t.getClosestInfoForScale(A),F=l.getColumnForX(this.state.center[0]),K=l.getRowForY(this.state.center[1]);r.sort((R,W)=>{const V=l.denormalizeCol(R.col,R.world),U=l.denormalizeCol(W.col,
W.world);return Math.sqrt((F-V)*(F-V)+(K-R.row)*(K-R.row))-Math.sqrt((F-U)*(F-U)+(K-W.row)*(K-W.row))});d.clear();g.clear();return r[0].id};w._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const t=this.tileInfoView,q=this.state.center;let B=Number.POSITIVE_INFINITY,A=null;r.forEach(l=>{l=this._keyToItem.get(l);t.getTileCoords(e,l.key);const F=E.distance(e,q);F<B&&(B=F,A=l.key)});return A.id};h._createClass(p,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return p}(f);k.__decorate([n.property({constructOnly:!0})],f.prototype,"concurrency",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,"process",void 0);k.__decorate([n.property()],f.prototype,"state",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,"strategy",void 0);k.__decorate([n.property({constructOnly:!0})],f.prototype,
"tileInfoView",void 0);k.__decorate([n.property({readOnly:!0})],f.prototype,"updating",null);return f=k.__decorate([G.subclass("esri.views.2d.tiling.TileQueue")],f)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(h,k,f,n){const x=new n(0,0,0,0),I=new Map,z=[],G=[];return function(){function E(m){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=m.acquireTile;this.releaseTile=m.releaseTile;this.tileInfoView=m.tileInfoView;this.resampling=null==m.resampling||!!m.resampling;m.cachePolicy&&(this.cachePolicy=m.cachePolicy);m.coveragePolicy&&(this.coveragePolicy=m.coveragePolicy);null!=m.buffer&&(this.buffer=m.buffer);m.cacheSize&&(this._tileCache=new k(m.cacheSize,this.tileInfoView,d=>{this.releaseTile(d)}))}var u=E.prototype;u.destroy=function(){this.tileIndex.clear()};
u.update=function(m){const {resampling:d,tileIndex:c}=this,g=this.tileInfoView.getTileCoverage(m.state,this.buffer,this.coveragePolicy);G.length=0;z.length=0;I.clear();if(g){var {minScale:e,maxScale:b}=this.tileInfoView.tileInfo,{spans:p,lodInfo:w}=g,{level:r}=w,{scale:t,center:q,resolution:B}=m.state,A=!m.stationary&&t>this._previousScale;this._previousScale=t;this.tiles.length=0;if(!d&&(t>e||t<b))return this.tiles.length=0,I.clear(),c.forEach(W=>{this.releaseTile(W)}),c.clear(),G.length=0,z.length=
0,I.clear(),f.pool.release(g),!0;c.forEach(W=>W.visible=!0);var l=m=0;if(0<p.length)for(const {row:W,colFrom:V,colTo:U}of p)for(let M=V;M<=U;M++){m++;const P=x.set(r,W,w.normalizeCol(M),w.getWorldForColumn(M)).id;if(c.has(P)){var F=c.get(P);F.isReady?(I.set(P,F),l++):A||this._addParentTile(P,I)}else{if(this._tileCache&&this._tileCache.has(P)){if(F=this._tileCache.pop(P),this.tileIndex.set(P,F),F.isReady){I.set(P,F);l++;continue}}else F=this.acquireTile(x),this.tileIndex.set(P,F);A||this._addParentTile(P,
I)}}var K=l===m;c.forEach((W,V)=>{x.set(V);if(!I.has(V)){var U=this.tileInfoView.intersects(g,x),M="purge"===this.cachePolicy?x.level!==r:x.level>r;!U||!A&&K?!M&&U||z.push(V):W.isReady?M&&"purge"===this.cachePolicy&&this._hasReadyAncestor(x,r)?z.push(V):G.push(V):M&&z.push(V)}});for(var R of G)(m=c.get(R))&&m.isReady&&I.set(R,m);for(const W of z)R=c.get(W),this._tileCache?this._tileCache.add(R):this.releaseTile(R),c.delete(W);I.forEach(W=>this.tiles.push(W));c.forEach(W=>{I.has(W.key.id)||(W.visible=
!1)});this._tileCache&&this._tileCache.prune(r,q,B);f.pool.release(g);I.clear();return K}};u.clear=function(m=!0){const {tileIndex:d}=this;m&&d.forEach(c=>{this.releaseTile(c)});d.clear()};u.updateCacheSize=function(m){this._tileCache&&(this._tileCache.maxSize=m)};u._addParentTile=function(m,d){let c=null;for(;;){m=this.tileInfoView.getTileParentId(m);if(!m)break;if(this.tileIndex.has(m)){if((c=this.tileIndex.get(m))&&c.isReady){d.has(c.key.id)||d.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(m)&&
(c=this._tileCache.pop(m),this.tileIndex.set(m,c),c&&c.isReady)){d.has(c.key.id)||d.set(c.key.id,c);break}}};u._hasReadyAncestor=function(m,d){const c=h.create();this.tileInfoView.getTileBounds(c,m,!0);for(const g of this.tileIndex.values())if(g.isReady&&g.key.level>=d&&g.key.level<m.level){const e=h.create();this.tileInfoView.getTileBounds(e,g.key,!0);if(h.contains(e,c))return!0}return!1};return E}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(h){return function(){function k(n,
x,I){this.maxSize=n;this.tileInfoView=x;this.removedFunc=I;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var f=k.prototype;f.has=function(n){return this._tilePerId.has(n)};f.get=function(n){return this._tilePerId.get(n)};f.pop=function(n){const x=this._tilePerId.get(n);if(!x)return null;const I=this._tileKeysPerLevel[x.key.level];this._tilePerId["delete"](n);for(let z=0;z<I.length;z++)if(I[z].id===n){I.splice(z,1);break}x.visible=!0;return x};f.add=function(n){n.visible=!1;const x=n.key,I=x.id;
this._tilePerId.has(I)||(this._tilePerId.set(I,n),n=x.level,this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(x))};f.prune=function(n,x,I){let z=this._tilePerId.size;if(!(z<=this.maxSize)){for(var G=this._tileKeysPerLevel.length-1;z>this.maxSize&&0<=G;)G!==n&&(z=this._pruneAroundCenterTile(z,x,I,G)),G--;z>this.maxSize&&(z=this._pruneAroundCenterTile(z,x,I,n))}};f._pruneAroundCenterTile=function(n,x,I,z){z=this._tileKeysPerLevel[z];if(!z||0===z.length)return n;
const {size:G,origin:E}=this.tileInfoView.tileInfo,u=I*G[0],m=I*G[1],d=[0,0],c=[0,0];for(z.sort((g,e)=>{d[0]=E.x+u*(g.col+.5);d[1]=E.y-m*(g.row+.5);c[0]=E.x+u*(e.col+.5);c[1]=E.y-m*(e.row+.5);return h.squaredDistance(d,x)-h.squaredDistance(c,x)});0<z.length&&(I=z.pop(),this._removeTile(I.id),n--,n!==this.maxSize););return n};f._removeTile=function(n){const x=this._tilePerId.get(n);this.removedFunc&&this.removedFunc(x);this._tilePerId["delete"](n)};return k}()})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(h,k,f,n,x,I,z){const G={added:[],removed:[]},E=new Set,u=new z(0,0,0,0);return function(m){function d(g){var e=m.call(this)||this;e._tiles=new Map;e._index=n.rbush(9,f("esri-csp-restrictions")?b=>({minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);e.tiles=[];e.tileScheme=g;return e}h._inheritsLoose(d,m);var c=d.prototype;c.destroy=function(){this.clear()};c.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};c.has=function(g){return this._tiles.has(g)};c.get=function(g){return this._tiles.get(g)};c.boundsIntersections=function(g){return this._index.search({minX:g[0],minY:g[1],maxX:g[2],maxY:g[3]})};c.updateTiles=function(g){const e={added:[],removed:[]};for(const b of g.added)if(!this.has(b)){const p=new x.Tile(this.tileScheme,b);this._tiles.set(b,p);this._index.insert(p);e.added.push(p)}for(const b of g.removed)this.has(b)&&(g=this.get(b),this._tiles.delete(b),this._index.remove(g),
e.removed.push(g));this.tiles.length=0;this._tiles.forEach(b=>this.tiles.push(b));(e.added.length||e.removed.length)&&this.emit("update",e)};c.setViewState=function(g){if(g=this.tileScheme.getTileCoverage(g,0)){var {spans:e,lodInfo:b}=g,{level:p}=b;if(0<e.length)for(const {row:r,colFrom:t,colTo:q}of e)for(var w=t;w<=q;w++){const B=u.set(p,r,b.normalizeCol(w),b.getWorldForColumn(w)).id;E.add(B);if(!this.has(B)){const A=new x.Tile(this.tileScheme,B);this._tiles.set(B,A);this._index.insert(A);this.tiles.push(A);
G.added.push(A)}}for(p=this.tiles.length-1;0<=p;p--)w=this.tiles[p],E.has(w.id)||(this._tiles.delete(w.id),this.tiles.splice(p,1),this._index.remove(w),G.removed.push(w));(G.added.length||G.removed.length)&&this.emit("update",G);I.pool.release(g);E.clear();G.added.length=0;G.removed.length=0}};return d}(k)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(h,k){function f(e,b){if(!(this instanceof f))return new f(e,b);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));b&&("function"===typeof b?this.toBBox=b:this._initFormat(b));this.clear()}function n(e,b){x(e,0,e.children.length,b,e)}function x(e,b,p,w,r){r||(r=c(null));r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(var t;b<p;b++)t=e.children[b],I(r,e.leaf?w(t):t);return r}function I(e,b){e.minX=Math.min(e.minX,b.minX);e.minY=Math.min(e.minY,b.minY);e.maxX=Math.max(e.maxX,b.maxX);e.maxY=Math.max(e.maxY,b.maxY);return e}function z(e,b){return e.minX-b.minX}
function G(e,b){return e.minY-b.minY}function E(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function u(e){return e.maxX-e.minX+(e.maxY-e.minY)}function m(e,b){return e.minX<=b.minX&&e.minY<=b.minY&&b.maxX<=e.maxX&&b.maxY<=e.maxY}function d(e,b){return b.minX<=e.maxX&&b.minY<=e.maxY&&b.maxX>=e.minX&&b.maxY>=e.minY}function c(e){return{children:e,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function g(e,b,p,w,r){for(var t=[b,p],q;t.length;)p=t.pop(),b=t.pop(),p-b<=w||(q=
b+Math.ceil((p-b)/w/2)*w,k.quickselect(e,q,b,p,r),t.push(b,q,q,p))}f.prototype={all:function(){return this._all(this.data,[])},search:function(e){var b=this.data,p=[],w=this.toBBox;if(!d(e,b))return p;for(var r=[],t,q,B,A;b;){t=0;for(q=b.children.length;t<q;t++)B=b.children[t],A=b.leaf?w(B):B,d(e,A)&&(b.leaf?p.push(B):m(e,A)?this._all(B,p):r.push(B));b=r.pop()}return p},collides:function(e){var b=this.data,p=this.toBBox;if(!d(e,b))return!1;for(var w=[],r,t,q,B;b;){r=0;for(t=b.children.length;r<t;r++)if(q=
b.children[r],B=b.leaf?p(q):q,d(e,B)){if(b.leaf||m(e,B))return!0;w.push(q)}b=w.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var b=0,p=e.length;b<p;b++)this.insert(e[b]);return this}e=this._build(e.slice(),0,e.length-1,0);this.data.children.length?this.data.height===e.height?this._splitRoot(this.data,e):(this.data.height<e.height&&(b=this.data,this.data=e,e=b),this._insert(e,this.data.height-e.height-1,!0)):this.data=e;return this},insert:function(e){e&&
this._insert(e,this.data.height-1);return this},clear:function(){this.data=c([]);return this},remove:function(e,b){if(!e)return this;for(var p=this.data,w=this.toBBox(e),r=[],t=[],q,B,A,l;p||r.length;){p||(p=r.pop(),B=r[r.length-1],q=t.pop(),l=!0);if(p.leaf){a:{A=e;var F=p.children,K=b;if(K){for(var R=0;R<F.length;R++)if(K(A,F[R])){A=R;break a}A=-1}else A=F.indexOf(A)}if(-1!==A){p.children.splice(A,1);r.push(p);this._condense(r);break}}l||p.leaf||!m(p,w)?B?(q++,p=B.children[q],l=!1):p=null:(r.push(p),
t.push(q),q=0,B=p,p=p.children[0])}return this},toBBox:function(e){return e},compareMinX:z,compareMinY:G,toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,b){for(var p=[];e;)e.leaf?b.push.apply(b,e.children):p.push.apply(p,e.children),e=p.pop();return b},_build:function(e,b,p,w){var r=p-b+1,t=this._maxEntries;if(r<=t){var q=c(e.slice(b,p+1));n(q,this.toBBox);return q}w||(w=Math.ceil(Math.log(r)/Math.log(t)),t=Math.ceil(r/Math.pow(t,w-1)));q=c([]);q.leaf=
!1;q.height=w;r=Math.ceil(r/t);t=r*Math.ceil(Math.sqrt(t));var B;for(g(e,b,p,t,this.compareMinX);b<=p;b+=t){var A=Math.min(b+t-1,p);g(e,b,A,r,this.compareMinY);for(B=b;B<=A;B+=r){var l=Math.min(B+r-1,A);q.children.push(this._build(e,B,l,w-1))}}n(q,this.toBBox);return q},_chooseSubtree:function(e,b,p,w){for(var r,t,q,B,A,l,F,K;;){w.push(b);if(b.leaf||w.length-1===p)break;F=K=Infinity;r=0;for(t=b.children.length;r<t;r++)q=b.children[r],A=E(q),l=(Math.max(q.maxX,e.maxX)-Math.min(q.minX,e.minX))*(Math.max(q.maxY,
e.maxY)-Math.min(q.minY,e.minY))-A,l<K?(K=l,F=A<F?A:F,B=q):l===K&&A<F&&(F=A,B=q);b=B||b.children[0]}return b},_insert:function(e,b,p){var w=this.toBBox;p=p?e:w(e);w=[];var r=this._chooseSubtree(p,this.data,b,w);r.children.push(e);for(I(r,p);0<=b;)if(w[b].children.length>this._maxEntries)this._split(w,b),b--;else break;this._adjustParentBBoxes(p,w,b)},_split:function(e,b){var p=e[b],w=p.children.length,r=this._minEntries;this._chooseSplitAxis(p,r,w);w=this._chooseSplitIndex(p,r,w);w=c(p.children.splice(w,
p.children.length-w));w.height=p.height;w.leaf=p.leaf;n(p,this.toBBox);n(w,this.toBBox);b?e[b-1].children.push(w):this._splitRoot(p,w)},_splitRoot:function(e,b){this.data=c([e,b]);this.data.height=e.height+1;this.data.leaf=!1;n(this.data,this.toBBox)},_chooseSplitIndex:function(e,b,p){var w,r;var t=r=Infinity;for(w=b;w<=p-b;w++){var q=x(e,0,w,this.toBBox);var B=x(e,w,p,this.toBBox);var A=Math.max(0,Math.min(q.maxX,B.maxX)-Math.max(q.minX,B.minX))*Math.max(0,Math.min(q.maxY,B.maxY)-Math.max(q.minY,
B.minY));q=E(q)+E(B);if(A<t){t=A;var l=w;r=q<r?q:r}else A===t&&q<r&&(r=q,l=w)}return l},_chooseSplitAxis:function(e,b,p){var w=e.leaf?this.compareMinX:z,r=e.leaf?this.compareMinY:G,t=this._allDistMargin(e,b,p,w);b=this._allDistMargin(e,b,p,r);t<b&&e.children.sort(w)},_allDistMargin:function(e,b,p,w){e.children.sort(w);w=this.toBBox;var r=x(e,0,b,w),t=x(e,p-b,p,w),q=u(r)+u(t),B;for(B=b;B<p-b;B++){var A=e.children[B];I(r,e.leaf?w(A):A);q+=u(r)}for(B=p-b-1;B>=b;B--)A=e.children[B],I(t,e.leaf?w(A):A),
q+=u(t);return q},_adjustParentBBoxes:function(e,b,p){for(;0<=p;p--)I(b[p],e)},_condense:function(e){for(var b=e.length-1,p;0<=b;b--)0===e[b].children.length?0<b?(p=e[b-1].children,p.splice(p.indexOf(e[b]),1)):this.clear():n(e[b],this.toBBox)},_initFormat:function(e){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(e[0]));this.compareMinY=new Function("a","b",b.join(e[1]));this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+
"};")}};h.rbush=f})},"esri/chunks/quickselect":function(){define(["exports"],function(h){var k={exports:{}};(function(f){(function(n){n=n();void 0!==n&&(f.exports=n)})(function(){function n(z,G,E,u,m){for(;u>E;){if(600<u-E){var d=u-E+1,c=G-E+1,g=Math.log(d),e=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*e*(d-e)/d)*(0>c-d/2?-1:1);n(z,G,Math.max(E,Math.floor(G-c*e/d+g)),Math.min(u,Math.floor(G+(d-c)*e/d+g)),m)}d=z[G];c=E;e=u;x(z,E,G);for(0<m(z[u],d)&&x(z,E,u);c<e;){x(z,c,e);c++;for(e--;0>m(z[c],d);)c++;for(;0<
m(z[e],d);)e--}0===m(z[E],d)?x(z,E,e):(e++,x(z,e,u));e<=G&&(E=e+1);G<=e&&(u=e-1)}}function x(z,G,E){var u=z[G];z[G]=z[E];z[E]=u}function I(z,G){return z<G?-1:z>G?1:0}return function(z,G,E,u,m){n(z,G,E||0,u||z.length-1,m||I)}})})(k);h.quickselect=k.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(h,k,f,n,x,I,z){let G=function(){function E(m,d){this.key=new z(0,0,0,0);this.bounds=x.create();this.objectIds=new Set;this.key.set(d);d=m.getLODInfoAt(this.key);this.tileInfoView=m;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=d.resolution;this.scale=d.scale;this.level=d.level}var u=E.prototype;u.createChildTiles=function(){const m=this.key.getChildKeys(),d=f.acquire();for(let c=0;c<m.length;c++)d[c]=new E(this.tileInfoView,m[c]);return d};u.getQuantizationParameters=
function(){return I.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};k._createClass(E,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return n.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return E}();h.Tile=G;h.default=G;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(h){let k=function(){function f(){this._names=new Map}var n=f.prototype;n.begin=function(x){this._names.has(x)||(this._names.set(x,!1),-1!==x.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${x}.Start`))};n.end=function(x){this._names.has(x)&&!this._names.get(x)&&
(this._names.set(x,!0),performance.mark(`Esri.${x}.End`))};n.record=function(x){this._names.has(x)||(this._names.set(x,!0),performance.mark(`Esri.${x}`))};return f}();h.Timeline=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F,K,R,W){var V={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},U={zoomIn:["\x3d","+"],zoomOut:["-","_"]},M={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};f=function(P){function ba(){var H=P.apply(this,arguments)||this;H._handles=new n;return H}h._inheritsLoose(ba,P);var J=ba.prototype;J.initialize=function(){this._handles.add([x.whenNot(this.view,
"ready",()=>this._disconnect()),x.when(this.view,"ready",()=>this._connect())])};J.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};J._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};J._connect=function(){const H=new q.BrowserEventSource(this.view.surface,this.view.input);var v=[new K.ImmediateDoubleClick,new R.PointerClickHoldAndDrag,
new W.SingleAndDoubleClick,new F.Drag(this.view.navigation),new l.DoubleTapDrag];v=new B.InputManager({eventSource:H,recognizers:v});v.installHandlers("prevent-context-menu",[new A.PreventContextMenu],B.ViewEventPriorities.INTERNAL);v.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new e.GamepadNavigation(this.view),new r.MouseWheelZoom(this.view),new m.DoubleClickZoom(this.view),new m.DoubleClickZoom(this.view,["Ctrl"]),new c.DragPan(this.view,"primary"),new b.KeyPan(this.view,
V),new w.KeyZoom(this.view,U),new p.KeyRotate(this.view,M),new g.DragRotate(this.view,"secondary"),new d.DoubleTapDragZoom(this.view,"touch")],B.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(v);this._source=H;this._inputManager=v;x.init(this.view.navigation,"browserTouchPanEnabled",D=>{this._source.browserTouchPanningEnabled=!D})};h._createClass(ba,[{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return ba}(f);k.__decorate([I.property()],f.prototype,"view",void 0);
return f=k.__decorate([u.subclass("esri.views.2d.input.MapViewInputManager")],f)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(h,k,f,n){f=function(x){function I(z,G){var E=x.call(this,!0)||this;E.view=z;E.registerIncoming("double-click",G,u=>E._handleDoubleClick(u,G));return E}k._inheritsLoose(I,x);I.prototype._handleDoubleClick=function(z,G){n.eventMatchesPointerAction(z.data,
"primary")&&(z.stopPropagation(),G?this.view.mapViewNavigation.zoomOut([z.data.x,z.data.y]):this.view.mapViewNavigation.zoomIn([z.data.x,z.data.y]))};return I}(f.InputHandler);h.DoubleClickZoom=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/handlers/support":function(){define(["exports"],function(h){h.eventMatchesMousePointerAction=function(k,f){if("touch"===k.pointerType)return!1;switch(f){case "primary":return 0===k.button;case "secondary":return 2===k.button;case "tertiary":return 1===
k.button}};h.eventMatchesPointerAction=function(k,f){switch(f){case "primary":return"touch"===k.pointerType||0===k.button;case "secondary":return"touch"!==k.pointerType&&2===k.button;case "tertiary":return"touch"!==k.pointerType&&1===k.button}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(h,k,f,n){f=function(x){function I(z,
G,E){var u=x.call(this,!0)||this;u.view=z;u.pointerType=G;u.registerIncoming("double-tap-drag",E,m=>u._handleDoubleTapDrag(m));return u}k._inheritsLoose(I,x);I.prototype._handleDoubleTapDrag=function(z){var {data:G}=z,{pointerType:E}=G;if(E===this.pointerType){z.stopPropagation();var {action:u,delta:m}=G;({view:G}=this);({mapViewNavigation:z}=G);switch(u){case "begin":({scale:G}=G);this._currentScale=this._startScale=G;this._previousDelta=m;z.begin();break;case "update":if(this._previousDelta.y===
m.y)break;this._previousDelta=m;G=this._startScale*1.015**m.y;z.setViewpointImmediate(G/this._currentScale);this._currentScale=G;break;case "end":{({constraints:E}=G);const {effectiveLODs:d,snapToZoom:c}=E;c&&d?(G=E.snapScale(this._currentScale),G=(0<m.y?Math.max(G,E.snapToPreviousScale(this._startScale)):Math.min(G,E.snapToNextScale(this._startScale)))/this._currentScale,z.zoom(G)):z.end()}}}};return I}(n.InputHandler);h.DoubleTapDragZoom=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(h,k,f,n,x){n=function(I){function z(E,u,m){var d=I.call(this,!0)||this;d.view=E;d.pointerAction=u;d.registerIncoming("drag",m,g=>d._handleDrag(g));d.registerIncoming("pointer-down",()=>d.stopMomentumNavigation());const c=d.view.mapViewNavigation;d.dragEventSeparator=new f.DragEventSeparator({start:(g,e)=>{c.pan.begin(d.view,e.data);e.stopPropagation()},
update:(g,e)=>{c.pan.update(d.view,e.data);e.stopPropagation()},end:(g,e)=>{c.pan.end(d.view,e.data);e.stopPropagation()},condition:(g,e)=>1===g&&x.eventMatchesPointerAction(e.data,d.pointerAction)});return d}k._inheritsLoose(z,I);var G=z.prototype;G._handleDrag=function(E){const u=this.view.mapViewNavigation;u.pinch.zoomMomentum||u.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(E)};G.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};
return z}(n.InputHandler);h.DragPan=n;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(h){let k=function(){function f(x){this.callbacks=x;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var n=f.prototype;n.handle=function(x){const I=x.data,z=I.pointers.size;switch(I.action){case "start":this.currentCount=z;this.emitStart(x);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=
z;this.emitStart(x);break;case "update":this.emitUpdate(x);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=z;this.emitStart(x);break;case "end":this.emitEnd(x),this.currentCount=0}this.previousEvent=x};n.emitStart=function(x){this.startEvent=x;this.callbacks.condition(this.currentCount,x)&&this.callbacks.start(this.currentCount,x,this.startEvent)};n.emitUpdate=function(x){this.callbacks.condition(this.currentCount,x)&&this.callbacks.update(this.currentCount,
x,this.startEvent)};n.emitEnd=function(x){this.callbacks.condition(this.currentCount,x)&&this.callbacks.end(this.currentCount,x,this.startEvent);this.startEvent=null};return f}();h.DragEventSeparator=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(h,k,f,n,x){n=function(I){function z(G,
E,u){var m=I.call(this,!0)||this;m.view=G;m.pointerAction=E;const d=m.view.mapViewNavigation;m.dragEventSeparator=new f.DragEventSeparator({start:(c,g)=>{d.rotate.begin(m.view,g.data);g.stopPropagation()},update:(c,g)=>{d.rotate.update(m.view,g.data);g.stopPropagation()},end:(c,g)=>{d.rotate.end();g.stopPropagation()},condition:(c,g)=>1===c&&x.eventMatchesPointerAction(g.data,m.pointerAction)});m.registerIncoming("drag",u,c=>m.dragEventSeparator.handle(c));return m}k._inheritsLoose(z,I);return z}(n.InputHandler);
h.DragRotate=n;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(h,k,f,n,x,I,z,G){z=function(E){function u(d){var c=E.call(this,!0)||this;c.view=d;c.frameTask=null;c.watchHandles=new f;
c.currentDevice=null;c.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};c.handle=c.registerIncoming("gamepad",g=>c.handleEvent(g));c.handle.pause();return c}k._inheritsLoose(u,E);var m=u.prototype;m.onInstall=function(d){E.prototype.onInstall.call(this,d);this.watchHandles.add([x.init(this.view.navigation.gamepad,"enabled",c=>{c?(this.handle.resume(),this.frameTask||(this.frameTask=n.addFrameTask({update:g=>this.frameUpdate(g.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),
this.frameTask=null))})])};m.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);E.prototype.onUninstall.call(this)};m.handleEvent=function(d){const c=this.view.navigation.gamepad.device;c&&d.data.device!==c||this.currentDevice&&this.currentDevice!==d.data.device||("end"===d.data.action?(this.currentDevice=null,G.resetTransformation(this.transformation)):(this.currentDevice=d.data.device,G.extractTransformation(d.data,this.view.navigation.gamepad,
this.transformation)))};m.frameUpdate=function(d){const c=this.transformation;if(!G.isZeroTransformation(c)){var g=this.view.viewpoint.clone(),e=.7*this.view.navigation.gamepad.velocityFactor*d;I.translateBy(g,g,[c.translation[0]*e,-c.translation[1]*e]);e=this.view.size;I.scaleAndRotateBy(g,g,1+6E-4*c.translation[2]*d,this.view.constraints.rotationEnabled?.06*-c.heading*d:0,[e[0]/2,e[1]],e);d=this.view.constraints.constrain(g,this.view.viewpoint);this.view.viewpoint=d}};return u}(z.InputHandler);
h.GamepadNavigation=z;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(h,k){function f(n){let x=n*n;0>n&&(x*=-1);return x}h.extractTransformation=function(n,x,I){const z=n.state;n=n.device;x="forward-down"===x.tiltDirection?1:-1;"standard"===n.deviceType?(I.translation[0]=f(z.axes[0]),I.translation[1]=f(z.axes[1]),I.translation[2]=f(z.buttons[7])-f(z.buttons[6]),I.heading=f(z.axes[2]),I.tilt=
f(z.axes[3])):"spacemouse"===n.deviceType&&(I.translation[0]=1.2*f(z.axes[0]),I.translation[1]=1.2*f(z.axes[1]),I.translation[2]=2*-f(z.axes[2]),I.heading=1.2*f(z.axes[5]),I.tilt=1.2*f(z.axes[3]));I.tilt*=x;k.scale(I.translation,I.translation,1);return I};h.extractTransformationKeyboard=function(n,x){x.translation[0]=n[1]-n[0];x.translation[1]=n[3]-n[2];x.translation[2]=n[4]-n[5];x.heading=n[7]-n[6];x.tilt=n[8]-n[9];x.zoom=n[10]-n[11];return x};h.isZeroTransformation=function(n){return 0===n.translation[0]&&
0===n.translation[1]&&0===n.translation[2]&&0===n.heading&&0===n.tilt&&0===n.zoom};h.quadraticAccentuation=f;h.resetTransformation=function(n){n.translation[0]=0;n.translation[1]=0;n.translation[2]=0;n.heading=0;n.tilt=0;return n};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,k,f){f=function(n){function x(z,G,E){var u=n.call(this,!0)||this;
u.view=z;u.keys=G;u._pressed=!1;u._keyMap={[G.left]:"left",[G.right]:"right",[G.up]:"up",[G.down]:"down"};u.registerIncoming("key-down",E,m=>u._handleKeyDown(m));u.registerIncoming("key-up",E,m=>u._handleKeyUp(m));u.registerIncoming("blur",E,()=>u._handleBlur());return u}k._inheritsLoose(x,n);var I=x.prototype;I._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};I._handleKeyUp=function(z){this._handleKey(z,!1)};I._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};
I._handleKey=function(z,G){const E=this._keyMap[z.data.key];if(this._pressed=null!=E){if(G)switch(this.view.mapViewNavigation.begin(),E){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return x}(f.InputHandler);h.KeyPan=
f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,k,f){f=function(n){function x(z,G,E){var u=n.call(this,!0)||this;u.view=z;u.keys=G;u._pressed=!1;u._keyToDirection={[G.clockwiseOption1]:"clockwise",[G.clockwiseOption2]:"clockwise",[G.counterClockwiseOption1]:"counterClockwise",[G.counterClockwiseOption2]:"counterClockwise",[G.resetOption1]:"reset",
[G.resetOption2]:"reset"};u.registerIncoming("key-down",E,m=>u._handleKeyDown(m));u.registerIncoming("key-up",E,m=>u._handleKeyUp(m));u.registerIncoming("blur",E,()=>u._handleBlur());return u}k._inheritsLoose(x,n);var I=x.prototype;I._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};I._handleKeyUp=function(z){this._handleKey(z,!1)};I._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};I._handleKey=function(z,G){var E=z.modifiers;if(!(0<E.size&&
!E.has("Shift")||!this.view.constraints.rotationEnabled)&&(E=this._keyToDirection[z.data.key],this._pressed=null!=E)){if(G)switch(this.view.mapViewNavigation.begin(),E){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return x}(f.InputHandler);
h.KeyRotate=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(h,k,f,n){f=function(x){function I(G,E,u){var m=x.call(this,!0)||this;m.view=G;m.keys=E;m._keysToZoomAction={};m.registerIncoming("key-down",u,d=>m._handleKeyDown(d));E.zoomIn.forEach(d=>m._keysToZoomAction[d]=0);E.zoomOut.forEach(d=>m._keysToZoomAction[d]=1);
return m}k._inheritsLoose(I,x);var z=I.prototype;z._handleKeyDown=function(G){this._handleKey(G)};z._handleKey=function(G){var E=G.modifiers;if(!(0<E.size)||E.has("Shift"))if({key:E}=G.data,E in this._keysToZoomAction){E=this._keysToZoomAction[E];var {mapViewNavigation:u}=this.view,m=null;switch(E){case 0:m=u.zoomIn();break;case 1:m=u.zoomOut();break;default:return}u.begin();m.then(()=>u.end());G.stopPropagation()}};return I}(n.InputHandler);h.KeyZoom=f;Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,k,f){f=function(n){function x(I,z){var G=n.call(this,!0)||this;G.view=I;G._canZoom=!0;G.registerIncoming("mouse-wheel",z,E=>G._handleMouseWheel(E));return G}k._inheritsLoose(x,n);x.prototype._handleMouseWheel=function(I){if(this.view.navigation.mouseWheelZoomEnabled&&(I.preventDefault(),I.stopPropagation(),this._canZoom)){var z=this.view.mapViewNavigation,
{x:G,y:E,deltaY:u}=I.data;if(I=z.zoom(1/.6**(1/60*u),[G,E]))this._canZoom=!1,I.catch(()=>{}).then(()=>{this._canZoom=!0;z.end()})}};return x}(f.InputHandler);h.MouseWheelZoom=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(h,k,f,n){n=function(x){function I(G){var E=x.call(this,!0)||this;E.view=G;E.registerIncoming("drag",
m=>E._handleDrag(m));E.registerIncoming("pointer-down",()=>E.stopMomentumNavigation());const u=E.view.mapViewNavigation;E.dragEventSeparator=new f.DragEventSeparator({start:(m,d)=>{u.pinch.begin(E.view,d.data);d.stopPropagation()},update:(m,d)=>{u.pinch.update(E.view,d.data);d.stopPropagation()},end:(m,d)=>{u.pinch.end(E.view);d.stopPropagation()},condition:m=>2<=m});return E}k._inheritsLoose(I,x);var z=I.prototype;z._handleDrag=function(G){this.dragEventSeparator.handle(G)};z.stopMomentumNavigation=
function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return I}(n.InputHandler);h.PinchRotateAndZoom=n;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(h,k,f,n,x,I){const z=f("trident"),G=f("edge"),E=f("chrome"),u=f("ff"),m=f("safari");f=function(){function c(e,b){this.input=b;this._active=
{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=e;e.getAttribute("tabindex")||e.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,
"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new x.GamepadSource(e,this.input);this._gamepadSource.onEvent=p=>this._callback("gamepad",p)}var g=c.prototype;g.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)});this._gamepadSource&&(this._gamepadSource.destroy(),
this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};g.setPointerCapture=function(e,b){b?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))};g._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};g._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};g._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};g._releasePointerCaptureSafe=function(e){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(e)||this._element.releasePointerCapture(e)}catch(b){}};g._updateNormalizedPointerLikeEvent=function(e,b){e=I.createScreenPointFromNativeEvent(this._element,e);c.test.disableSubpixelCoordinates&&(e.x=Math.round(e.x),e.y=Math.round(e.y));b.x=e.x;b.y=e.y;return b};g._handleKey=function(e,b){const p=n.eventKey(b);
p&&"key-up"===e&&this._keyDownState.delete(p);b={native:b,key:p,repeat:p&&this._keyDownState.has(p)};p&&"key-down"===e&&this._keyDownState.add(b.key);this._callback(e,b)};g._handlePointer=function(e,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(e,b)};g._handlePointerPreventDefault=function(e,b){const p=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,
button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(e,p)};g._handleMouseWheel=function(e,b){let p=b.deltaY;switch(b.deltaMode){case 0:if(z||G)p=p/document.documentElement.clientHeight*600;break;case 1:p*=30;break;case 2:p*=900}z||G?p*=.7:E||m?p*=.6:u&&(p*=1.375);const w=Math.abs(p);100<w&&(p=p/w*200/(1+Math.exp(-.02*(w-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:p});this._callback(e,b)};g._handlePointerCaptureLost=function(e,
b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(e,b)};g._handleDefault=function(e,b){const p={native:b};b.preventDefault();this._callback(e,p)};g._preventAltKeyDefault=function(e){"Alt"===e.key&&e.preventDefault()};g._preventMultiTouchPanning=function(e){1<e.touches.length&&e.preventDefault()};k._createClass(c,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(e){this._browserTouchPanningEnabled=e;this._updateTouchAction();
this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(e){this._callback=e}},{key:"activeEvents",set:function(e){for(const b in this._active)e&&e.has(b)||(this._element.removeEventListener(d[b],this._active[b]),delete this._active[b]);e&&e.forEach(b=>{if(!this._active[b]&&d[b]){const p=(this._eventHandlers[b]||this._handleDefault).bind(this,b);this._element.addEventListener(d[b],p);this._active[b]=p}});this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}}]);return c}();f.test=
{disableSubpixelCoordinates:!1};const d={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};h.BrowserEventSource=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(h,k,f,n,x){let I=function(){function z(E,u){this.element=E;this.input=u;this._hasEventListeners=!1;this.onConnectGamepad=m=>{this.connectGamepad(m.gamepad)};this.onDisconnectGamepad=m=>{m=m.gamepad;const d=m.index,c=this.inputDevices[d];c&&(this.emitGamepadEvent(m,x.extractState(c),!1),this.inputDevices.splice(d,1),this.latestUpdate.splice(d,1),this.input.gamepad.devices.remove(c),
this.ensurePollingState())};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;E=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&E)this.forEachGamepad(m=>this.connectGamepad(m)),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState()}var G=z.prototype;G.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))};G.connectGamepad=function(E){const u=new n(E);"unknown"!==u.deviceType&&(this.inputDevices[E.index]=u,this.input.gamepad.devices.add(u));this.ensurePollingState()};G.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};G.startPolling=function(){null==this.frameTask&&(this.frameTask=f.addFrameTask({update:()=>this.readGamepadState()}))};G.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};G.readGamepadState=function(){const E=document.hasFocus(),u=this.element.contains(document.activeElement),m="document"===this.input.gamepad.enabledFocusMode&&!E||"view"===this.input.gamepad.enabledFocusMode&&!u;this.forEachGamepad(d=>{var c=this.inputDevices[d.index];if(c){var g=this.latestUpdate[d.index];c=x.extractState(c);var e=m||x.stateIdle(c);g&&(g.timestamp===d.timestamp||!g.active&&e||x.stateEqual(g.state,
c))||this.emitGamepadEvent(d,c,!e)}})};G.forEachGamepad=function(E){const u=window.navigator.getGamepads();for(let m=0;m<u.length;m++){const d=u[m];this.validate(d)&&E(d)}};G.emitGamepadEvent=function(E,u,m){var d=this.latestUpdate[E.index];if((d=d&&d.active)||m)this.latestUpdate[E.index]={timestamp:E.timestamp,state:u,active:m},this.callback&&this.callback({device:this.inputDevices[E.index],state:u,action:!d&&m?"start":d&&m?"update":"end"})};G.validate=function(E){if(!E||!E.connected)return!1;for(let u=
0;u<E.axes.length;u++)if(isNaN(E.axes[u]))return!1;return!0};k._createClass(z,[{key:"hasEventListeners",set:function(E){this._hasEventListeners!==E&&(this._hasEventListeners=E,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(E){this.callback=E}}]);return z}();h.GamepadSource=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(h){h.extractState=function(k){const f=k.native;return f?{buttons:f.buttons.map(n=>n.pressed?n.value?n.value:1:0),axes:f.axes.map(n=>{{var x=k.axisThreshold;const I=Math.abs(n);n=I<x?0:Math.sign(n)*(I-x)/(1-x)}return n})}:{buttons:[],axes:[]}};h.stateEqual=function(k,f){if(k.axes.length!==f.axes.length||k.buttons.length!==f.buttons.length)return!1;for(var n=0;n<k.axes.length;n++)if(k.axes[n]!==f.axes[n])return!1;for(n=0;n<k.buttons.length;n++)if(k.buttons[n]!==f.buttons[n])return!1;return!0};
h.stateIdle=function(k){for(var f=0;f<k.axes.length;f++)if(0!==k.axes[f])return!1;for(f=0;f<k.buttons.length;f++)if(0!==k.buttons[f])return!1;return!0};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(h,k,f){f=function(n){function x(){var I=n.call(this,!0)||this;I.registerIncoming("context-menu",z=>{z.data.native.preventDefault()});return I}k._inheritsLoose(x,
n);return x}(f.InputHandler);h.PreventContextMenu=f;h.default=f;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(h,k,f,n,x,I,z,G,E){z=function(u){function m(c=G.DefaultParameters.maximumDoubleClickDelay,g=G.DefaultParameters.maximumDoubleClickDistance,
e=G.DefaultParameters.maximumDoubleTouchDelay,b=G.DefaultParameters.maximumDoubleTouchDistance,p=f.default){var w=u.call(this,!1)||this;w.maximumDoubleClickDelay=c;w.maximumDoubleClickDistance=g;w.maximumDoubleTouchDelay=e;w.maximumDoubleTouchDistance=b;w._clock=p;w._doubleTapDragReady=!1;w._doubleTapDragActive=!1;w._dragStartCenter=x.createScreenPoint(0,0);w._pointerState=new Map;w._doubleTapDrag=w.registerOutgoing("double-tap-drag");w._dragEventSeparator=new I.DragEventSeparator({start:(r,t)=>w._dragStart(r,
t),update:(r,t)=>w._dragUpdate(t),end:(r,t)=>w._dragEnd(t)});w.registerIncoming("drag",r=>w._dragEventSeparator.handle(r));w.registerIncoming("pointer-down",r=>w._handlePointerDown(r));w.registerIncoming("pointer-up",()=>w._handlePointerUp());return w}k._inheritsLoose(m,u);var d=m.prototype;d.onUninstall=function(){this._pointerState.forEach(c=>{null!=c.doubleTapTimeout&&(c.doubleTapTimeout.remove(),c.doubleTapTimeout=null)})};d._clearPointerDown=function(c){const g=this._pointerState.get(c);g&&(g.doubleTapTimeout.remove(),
g.doubleTapTimeout=null,this._pointerState.delete(c),this.refreshHasPendingInputs())};d._createDoubleTapDragData=function(c,g,e){const {button:b,buttons:p,pointer:w,pointers:r,pointerType:t,timestamp:q}=e;return{action:c,delta:g,button:b,buttons:p,pointer:w,pointers:r,pointerType:t,timestamp:q}};d._dragStart=function(c,g){if(this._doubleTapDragReady&&1===c){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:e,modifiers:b}=g;({center:c}=e);this._dragStartCenter=c;c=this._createDoubleTapDragData("begin",
x.createScreenPoint(0,0),e);this._doubleTapDrag.emit(c,void 0,b);g.stopPropagation()}};d._dragUpdate=function(c){if(this._doubleTapDragActive){var {data:g,modifiers:e}=c,{center:b}=g;b=x.createScreenPoint(b.x-this._dragStartCenter.x,b.y-this._dragStartCenter.y);b=this._createDoubleTapDragData("update",b,g);this._doubleTapDrag.emit(b,void 0,e);c.stopPropagation()}};d._dragEnd=function(c){if(this._doubleTapDragActive){var {data:g,modifiers:e}=c,{center:b}=g;b=x.createScreenPoint(b.x-this._dragStartCenter.x,
b.y-this._dragStartCenter.y);b=this._createDoubleTapDragData("end",b,g);this._doubleTapDrag.emit(b,void 0,e);this._doubleTapDragActive=!1;c.stopPropagation()}};d._handlePointerDown=function(c){const {data:g}=c,e=this._pointerId(g),b=this._pointerState.get(e);var {pointerType:p}=g.native;b?(p="touch"===p?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(e),E.manhattanDistance(b.event.data,g)>p?this._storePointerDown(c):this._doubleTapDragReady=!0):this._storePointerDown(c)};
d._handlePointerUp=function(){this._doubleTapDragReady=!1};d._pointerId=function(c){({native:c}=c);const {pointerId:g,button:e,pointerType:b}=c;return"mouse"===b?`${g}:${e}`:`${b}`};d._storePointerDown=function(c){var {data:g}=c;const {pointerType:e}=g.native,b=this._pointerId(g);g=this._clock.setTimeout(()=>this._clearPointerDown(b),"touch"===e?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(b,{event:c,doubleTapTimeout:g});this.refreshHasPendingInputs()};k._createClass(m,
[{key:"hasPendingInputs",get:function(){return n.someMap(this._pointerState,c=>null!=c.doubleTapTimeout)}}]);return m}(z.InputHandler);h.DoubleTapDrag=z;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(h,k,f,n,x,I){const z={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};x=function(G){function E(m=z.maximumDoubleClickDelay,d=z.maximumDoubleClickDistance,c=z.maximumDoubleTouchDelay,g=z.maximumDoubleTouchDistance,e=f.default){var b=G.call(this,!1)||this;b.maximumDoubleClickDelay=m;b.maximumDoubleClickDistance=d;b.maximumDoubleTouchDelay=c;b.maximumDoubleTouchDistance=g;b._clock=e;b._pointerState=new Map;b._click=b.registerOutgoing("click");b._doubleClick=b.registerOutgoing("double-click");b.registerIncoming("immediate-click",b._handleImmediateClick.bind(k._assertThisInitialized(b)));
b.registerIncoming("pointer-drag",b._handlePointerDrag.bind(k._assertThisInitialized(b)));b.registerIncoming("drag",b._handleDrag.bind(k._assertThisInitialized(b)));return b}k._inheritsLoose(E,G);var u=E.prototype;u.onUninstall=function(){this._pointerState.forEach(m=>{null!=m.doubleClickTimeout&&(m.doubleClickTimeout.remove(),m.doubleClickTimeout=null)})};u._pointerId=function(m){m=m.native;return"mouse"===m.pointerType?`${m.pointerId}:${m.button}`:`${m.pointerType}`};u._handleImmediateClick=function(m){const d=
m.data,c=this._pointerId(d),g=this._pointerState.get(c);if(g){const e="touch"===d.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;I.manhattanDistance(g.event.data,d)>e?(this._clearDoubleClickTimeout(c,!0),this._startClick(m)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(g.event.data,void 0,g.event.modifiers))}else this._startClick(m)};u._startClick=function(m){const d=this._pointerId(m.data);this._pointerState.set(d,{event:m,doubleClickTimeout:this._clock.setTimeout(()=>
this._doubleClickTimeoutExceeded(d),"touch"===m.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};u._handlePointerDrag=function(m){m=this._pointerId(m.data.currentEvent);this._clearDoubleClickTimeout(m,!0)};u._handleDrag=function(m){m=this._pointerId(m.data.pointer);this._clearDoubleClickTimeout(m,!0)};u._clearDoubleClickTimeout=function(m,d){const c=this._pointerState.get(m);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=
null,d&&this._doubleClickTimeoutExceeded(m),this._pointerState.delete(m),this.refreshHasPendingInputs())};u._doubleClickTimeoutExceeded=function(m){const d=this._pointerState.get(m);this._click.emit(d.event.data,void 0,d.event.modifiers);d.doubleClickTimeout=null;this._pointerState.delete(m);this.refreshHasPendingInputs()};k._createClass(E,[{key:"hasPendingInputs",get:function(){return n.someMap(this._pointerState,m=>null!=m.doubleClickTimeout)}}]);return E}(x.InputHandler);h.DefaultParameters=z;
h.SingleAndDoubleClick=x;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(h,k){h.euclideanDistance=function(f,n){const x=n.x-f.x;f=n.y-f.y;return Math.sqrt(x*x+f*f)};h.fitCircleLSQ=function(f,n){n?(n.radius=0,n.center.x=0,n.center.y=0):n={radius:0,center:k.createScreenPoint()};if(0===f.length)return n;if(1===f.length)return n.center.x=f[0].x,n.center.y=f[0].y,n;if(2===f.length){const [b,p]=
f,[w,r]=[p.x-b.x,p.y-b.y];n.radius=Math.sqrt(w*w+r*r)/2;n.center.x=(b.x+p.x)/2;n.center.y=(b.y+p.y)/2;return n}let x=0,I=0;for(n=0;n<f.length;n++)x+=f[n].x,I+=f[n].y;x/=f.length;I/=f.length;var z=f.map(b=>b.x-x),G=f.map(b=>b.y-I);let E=n=0;var u=0,m=0,d=0,c=0,g=0;for(var e=0;e<z.length;e++){const b=z[e],p=G[e],w=b*b,r=p*p;n+=w;E+=r;u+=b*p;m+=w*b;d+=r*p;c+=b*r;g+=p*w}z=n;G=u;e=E;m=.5*(m+c);d=.5*(d+g);g=z*e-u*G;c=(m*e-d*G)/g;d=(z*d-u*m)/g;g=k.createScreenPoint(c+x,d+I);return{radius:Math.sqrt(c*c+d*
d+(n+E)/f.length),center:g}};h.manhattanDistance=function(f,n){return Math.abs(n.x-f.x)+Math.abs(n.y-f.y)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),function(h,k,f,n,x,I){function z(m){const d=[];m.forEach(c=>{d.push(f.createScreenPoint(c.event.x,c.event.y))});return I.fitCircleLSQ(d)}function G(m){const d=
z(m);let c=0;m.forEach(g=>{var e=u(g,d);for(e-=g.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=g.lastAngle+e;g.lastAngle=e;c+=e-g.initialAngle});c/=m.size||1;return{angle:c,radius:d.radius,center:d.center}}function E(m){const d=new Map;m.forEach((c,g)=>d.set(g,c.event));return d}function u(m,d){m=m.event;return Math.atan2(m.y-d.center.y,m.x-d.center.x)}x=function(m){function d(g){var e=m.call(this,!1)||this;e.navigationTouch=g;e.startStateModifiers=new Set;e.activePointerMap=new Map;
e.isDragging=!1;e.isCurrentDragSuppressed=!1;e.drag=e.registerOutgoing("drag");e.registerIncoming("pointer-drag",e.handlePointerDrag.bind(k._assertThisInitialized(e)));e.registerIncoming("pointer-up",e.handlePointerUpAndPointerLost.bind(k._assertThisInitialized(e)));e.registerIncoming("pointer-capture-lost",e.handlePointerUpAndPointerLost.bind(k._assertThisInitialized(e)));e.registerIncoming("pointer-cancel",e.handlePointerUpAndPointerLost.bind(k._assertThisInitialized(e)));return e}k._inheritsLoose(d,
m);var c=d.prototype;c.createPayload=function(g,e,b,p){return{action:g,pointerType:this.pointerType,button:this.mouseButton,buttons:e.buttons,timestamp:p,pointers:E(this.activePointerMap),pointer:e,angle:b.angle,radius:b.radius,center:b.center}};c.addPointer=function(g){var e=g.native.pointerId;const b=G(this.activePointerMap).angle;g={event:g,initialAngle:0,lastAngle:0};this.activePointerMap.set(e,g);e=u(g,z(this.activePointerMap));g.initialAngle=e;g.lastAngle=e;this.updatePointerAngles(b)};c.updatePointer=
function(g){if(!g||null!=g.x||null!=g.y){var e=this.activePointerMap.get(g.native.pointerId);e?e.event=g:this.addPointer(g)}};c.removePointer=function(g){const e=G(this.activePointerMap).angle;this.activePointerMap.delete(g);this.updatePointerAngles(e)};c.updatePointerAngles=function(g){const e=G(this.activePointerMap);this.activePointerMap.forEach(b=>{b.initialAngle=u(b,e)-g;b.lastAngle=u(b,e)-g})};c.emitEvent=function(g,e,b){const p=G(this.activePointerMap);this.drag.emit(this.createPayload(g,e,
p,b),void 0,this.startStateModifiers)};c.handlePointerUpAndPointerLost=function(g){const e=g.data.native.pointerId,b=n.Milliseconds(g.timestamp);this.activePointerMap.get(e)&&(1===this.activePointerMap.size?(this.updatePointer(g.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",g.data,b),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(e)):(this.removePointer(e),this.emitEvent("removed",g.data,n.Milliseconds(g.timestamp))))};c.handlePointerDrag=function(g){const e=g.data,
b=e.currentEvent,p=n.Milliseconds(g.timestamp);switch(e.action){case "start":case "update":this.isDragging?this.activePointerMap.has(b.native.pointerId)?(this.updatePointer(b),!this.isCurrentDragSuppressed&&this.emitEvent("update",b,p)):(this.addPointer(b),this.emitEvent("added",b,p),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(b),this.pointerType=g.data.startEvent.pointerType,this.mouseButton=g.data.startEvent.button,this.startStateModifiers=g.modifiers,this.isDragging=!0,
this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",b,p))}};k._createClass(d,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return d}(x.InputHandler);h.Button=void 0;(function(m){m[m.Left=0]="Left";m[m.Middle=1]="Middle";m[m.Right=2]="Right";m[m.Back=3]="Back";m[m.Forward=4]="Forward";m[m.Undefined=-1]="Undefined"})(h.Button||
(h.Button={}));h.Drag=x;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(h,k,f,n,x,I){n=function(z){function G(u=x.DefaultParameters.maximumDoubleClickDelay,m=x.DefaultParameters.maximumDoubleClickDistance,d=x.DefaultParameters.maximumDoubleTouchDelay,c=x.DefaultParameters.maximumDoubleTouchDistance,
g=f.default){var e=z.call(this,!1)||this;e.maximumDoubleClickDelay=u;e.maximumDoubleClickDistance=m;e.maximumDoubleTouchDelay=d;e.maximumDoubleTouchDistance=c;e._clock=g;e._pointerState=new Map;e._immediateDoubleClick=e.registerOutgoing("immediate-double-click");e.registerIncoming("pointer-down",e._handlePointerDown.bind(k._assertThisInitialized(e)));e.registerIncoming("pointer-up",b=>{e._handlePointerLoss(b,"pointer-up")});e.registerIncoming("pointer-capture-lost",b=>{e._handlePointerLoss(b,"pointer-capture-lost")});
e.registerIncoming("pointer-cancel",b=>{e._handlePointerLoss(b,"pointer-cancel")});return e}k._inheritsLoose(G,z);var E=G.prototype;E.onUninstall=function(){this._pointerState.forEach(u=>{u.immediateDoubleClick&&u.immediateDoubleClick.timeoutHandle.remove()});z.prototype.onUninstall.call(this)};E._handlePointerDown=function(u){u=u.data;const m=this._pointerId(u);this._pointerState.has(m)||(this._pointerState.set(m,{downButton:u.native.button,immediateDoubleClick:null}),this.startCapturingPointer(u.native))};
E._handlePointerLoss=function(u,m){const d=u.data;var c=this._pointerId(d);if((c=this._pointerState.get(c))&&"pointer-up"===m&&c.downButton===d.native.button)if(m=c.immediateDoubleClick){m.timeoutHandle.remove();const g="touch"===u.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;I.manhattanDistance(m,u.data)>g?this._startImmediateDoubleClick(u,c):(this._immediateDoubleClick.emit(u.data,void 0,m.modifiers),this._removeState(d))}else this._startImmediateDoubleClick(u,
c)};E._startImmediateDoubleClick=function(u,m){m.immediateDoubleClick={x:u.data.x,y:u.data.y,modifiers:u.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(u.data),"touch"===u.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};E._pointerId=function(u){u=u.native;return"mouse"===u.pointerType?`${u.pointerId}:${u.button}`:`${u.pointerType}`};E._removeState=function(u){const m=this._pointerId(u);this._pointerState.delete(m);this.stopCapturingPointer(u.native);
this.refreshHasPendingInputs()};return G}(n.InputHandler);h.ImmediateDoubleClick=n;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(h,k,f,n,x){const I={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};n=function(z){function G(u=I.maximumClickDelay,
m=I.movementUntilMouseDrag,d=I.movementUntilPenDrag,c=I.movementUntilTouchDrag,g=I.holdDelay,e=f.default){var b=z.call(this,!1)||this;b.maximumClickDelay=u;b.movementUntilMouseDrag=m;b.movementUntilPenDrag=d;b.movementUntilTouchDrag=c;b.holdDelay=g;b._clock=e;b._pointerState=new Map;b._pointerDrag=b.registerOutgoing("pointer-drag");b._immediateClick=b.registerOutgoing("immediate-click");b._pointerHold=b.registerOutgoing("hold");b.registerIncoming("pointer-down",b._handlePointerDown.bind(k._assertThisInitialized(b)));
b.registerIncoming("pointer-up",p=>{b._handlePointerLoss(p,"pointer-up")});b.registerIncoming("pointer-capture-lost",p=>{b._handlePointerLoss(p,"pointer-capture-lost")});b.registerIncoming("pointer-cancel",p=>{b._handlePointerLoss(p,"pointer-cancel")});b._moveHandle=b.registerIncoming("pointer-move",b._handlePointerMove.bind(k._assertThisInitialized(b)));b._moveHandle.pause();return b}k._inheritsLoose(G,z);var E=G.prototype;E.onUninstall=function(){this._pointerState.forEach(u=>{null!=u.holdTimeout&&
(u.holdTimeout.remove(),u.holdTimeout=null)});z.prototype.onUninstall.call(this)};E._handlePointerDown=function(u){const m=u.data,d=m.native.pointerId;var c=null;0===this._pointerState.size&&(c=this._clock.setTimeout(()=>{const g=this._pointerState.get(d);g&&(g.isDragging||(this._pointerHold.emit(g.previousEvent,void 0,u.modifiers),g.holdEmitted=!0),g.holdTimeout=null)},this.holdDelay));c={startEvent:m,previousEvent:m,startTimestamp:u.timestamp,isDragging:!1,downButton:m.native.button,holdTimeout:c,
modifiers:new Set};this._pointerState.set(d,c);this.startCapturingPointer(m.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(u)};E._createPointerDragData=function(u,m,d){return{action:u,startEvent:m.startEvent,previousEvent:m.previousEvent,currentEvent:d}};E._handlePointerMove=function(u){const m=u.data,d=this._pointerState.get(m.native.pointerId);if(d){if(d.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",d,m),void 0,d.modifiers);else{const c=
x.euclideanDistance(m,d.startEvent),g=this._getDragThreshold(m.native.pointerType);c>g&&this.startDragging(u)}d.previousEvent=m}};E._getDragThreshold=function(u){switch(u){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};E.startDragging=function(u){const m=u.data,d=m.native.pointerId;this._pointerState.forEach(c=>{null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null);c.isDragging||(c.modifiers=u.modifiers,
c.isDragging=!0,d===c.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",c,m)):this._pointerDrag.emit(this._createPointerDragData("start",c,c.previousEvent),u.timestamp))})};E._handlePointerLoss=function(u,m){const d=u.data,c=d.native.pointerId,g=this._pointerState.get(c);g&&(null!=g.holdTimeout&&(g.holdTimeout.remove(),g.holdTimeout=null),g.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",g,"pointer-up"===m?d:g.previousEvent),void 0,g.modifiers):
"pointer-up"===m&&g.downButton===d.native.button&&u.timestamp-g.startTimestamp<=this.maximumClickDelay&&!g.holdEmitted&&this._immediateClick.emit(d),this._pointerState.delete(c),this.stopCapturingPointer(d.native),0===this._pointerState.size&&this._moveHandle.pause())};return G}(n.InputHandler);h.DefaultParameters=I;h.PointerClickHoldAndDrag=n;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G,E){let u=0;n=function(m){function d(){var c=m.apply(this,arguments)||this;c.color=new f([0,255,255]);c.haloOpacity=1;c.fillOpacity=.25;return c}h._inheritsLoose(d,m);h._createClass(d,[{key:"version",get:function(){return u++}}]);return d}(n);k.__decorate([x.property({readOnly:!0})],n.prototype,"version",null);k.__decorate([x.property({type:f})],n.prototype,"color",void 0);k.__decorate([x.property({type:f})],n.prototype,"haloColor",void 0);k.__decorate([x.property()],n.prototype,
"haloOpacity",void 0);k.__decorate([x.property()],n.prototype,"fillOpacity",void 0);return n=k.__decorate([E.subclass("esri.views.2d.support.HighlightOptions")],n)})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(h,k,f,n,x,I,z,G){h.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});var E;null!=h.width&&null!=h.height?E=[h.width,h.height]:null==h.width&&null!=h.height?E=[h.height,h.height]:null!=h.width&&null==h.height?E=[h.width,h.width]:null==h.width&&null==
h.height&&(E=null);var u=f[0]-(n.left+n.right);f=f[1]-(n.top+n.bottom);h=h.area||{x:0,y:0,width:u,height:f};if(E){const m=E[0]/E[1];m>u/f?(u=h.width/m,h={x:h.x,y:Math.round(h.y+(h.height-u)/2),width:h.width,height:Math.round(u)}):(u=h.height*m,h={x:Math.round(h.x+(h.width-u)/2),y:h.y,width:Math.round(u),height:h.height})}else E=[h.width,h.height];E[0]>h.width?(k=Math.min(E[0]/h.width,k),E=E[0]/h.width/k):(k=1,E=E[0]/h.width);return{resolutionScale:k,cropArea:{x:Math.round((h.x+n.left)*k),y:Math.round((h.y+
n.top)*k),width:Math.round(h.width*k),height:Math.round(h.height*k)},outputScale:E,format:x,quality:I,children:z,rotation:G}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils"],function(h,k,f){function n(b,p){const {format:w,quality:r,rotation:t,disableDecorations:q}=b||{};var B=E(b,p.padding);var A=p.width-B.left-B.right;p=p.height-B.top-B.bottom;B={x:0,y:0,width:A,height:p};if(b&&b.area){null!=b.area.x&&(B.x=Math.floor(b.area.x));null!=
b.area.y&&(B.y=Math.floor(b.area.y));var l=null!=b.area.width?Math.floor(b.area.width):null,F=null!=b.area.height?Math.floor(b.area.height):null;B.width=A-B.x;B.height=p-B.y;null!=l&&null!=F?(B.width=Math.min(B.width,l),B.height=Math.min(B.height,F)):null==l&&null!=F?(l=Math.min(B.width,l),B.height*=l/B.width,B.width=l):null!=l&&null==F&&(l=Math.min(B.height,F),B.width*=l/B.height,B.height=l)}B=G(B,b);l=Math.floor(Math.max(B.x,0));F=Math.floor(Math.max(B.y,0));A={x:l,y:F,width:Math.floor(Math.min(B.width,
A-l)),height:Math.floor(Math.min(B.height,p-F))};p=A.width/A.height;B=B.width/B.height;B!==p&&(B>p?(p=Math.floor(A.width/B),A={x:A.x,y:Math.floor(A.y+(A.height-p)/2),width:A.width,height:p}):(p=Math.floor(A.height*B),A={x:Math.floor(A.x+(A.width-p)/2),y:A.y,width:p,height:A.height}));const {width:K,height:R}=z(b,A);p=u(w);B=g[p];B=f.clamp(null!=r?r:B,0,100);return{format:p,quality:B,area:A,width:K,height:R,rotation:t,disableDecorations:!!q,ignoreBackground:!(!b||!b.ignoreBackground),ignorePadding:!(!b||
!b.ignorePadding)}}function x(b,p){return b.toDataURL(c[p.format],p.quality/100)}function I(b,p,w){w||(m||(m=document.createElement("canvas"),m.width=1,m.height=1),w=m);return w.getContext("2d").createImageData(b,p)}function z(b,p){if(!b)return p;const w=b.width;b=b.height;if(null!=w&&null!=b)return{width:Math.floor(w),height:Math.floor(b)};if(null==w&&null==b)return p;p=p.width/p.height;return null==b?{width:Math.floor(w),height:Math.floor(w/p)}:{width:Math.floor(b*p),height:Math.floor(b)}}function G(b,
p){if(!p||null==p.width||null==p.height)return b;p=p.width/p.height;const w=b.width/b.height;if(w===p)return b;if(w<p)return p=Math.floor(b.height*p),b.x-=(p-b.width)/2,b.width=p,b;p=Math.floor(b.width/p);b.y-=(p-b.height)/2;b.height=p;return b}function E(b,p){return!p||b&&b.ignorePadding?e:p}function u(b){switch(b){case "png":case "jpg":case "jpeg":return b;case null:case void 0:return"png";default:return"png"}}let m=null,d=!0;const c={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},g={png:100,
jpg:98,jpeg:98},e={top:0,right:0,bottom:0,left:0};h.completeUserSettings=n;h.createEmptyImageData=function(b,p,w){if(!b||!p)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(b,p)}catch(r){d=!1}return I(b,p,w)};h.encodeResult=function(b,p,w,r){if(r.premultipliedAlpha){{var t=b.data;const B=t.length;for(let A=0;A<B;A+=4){var q=t[A+3];0<q&&(q/=255,t[A+0]/=q,t[A+1]/=q,t[A+2]/=q)}}}w.width=b.width;w.height=b.height;t=w.getContext("2d");t.putImageData(b,0,0);r.flipY&&
(t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore());b=t.getImageData(0,0,b.width,b.height);p=x(w,p);w.width=0;w.height=0;return{dataUrl:p,data:b}};h.getFormatAndQuality=function(b,p){b=u(b);const w=g[b];p=f.clamp(null!=p?p:w,0,100);return{format:b,quality:p}};h.getMaximumResolutionScale=function(b,p){return p/Math.max(b[0],b[1])};h.resampleHermite=function(b,p,w,r=0,t=0,q=b.width-r,B=b.height-t,A=!1){const {data:l}=b,{width:F,
height:K,data:R}=p;q/=F;B/=K;const W=Math.ceil(q/2),V=Math.ceil(B/2);b=b.width;for(let P=0;P<K;P++)for(let ba=0;ba<F;ba++){const J=4*(ba+(A?K-P-1:P)*F);let H=0,v=0,D=0,C=0,O=0,T=0;const Q=(P+.5)*B;for(let Y=Math.floor(P*B);Y<(P+1)*B;Y++){var U=Math.abs(Q-(Y+.5))/V;const ha=(ba+.5)*q;U*=U;for(let da=Math.floor(ba*q);da<(ba+1)*q;da++){var M=Math.abs(ha-(da+.5))/W;M=Math.sqrt(U+M*M);if(1<=M)continue;M=2*M*M*M-3*M*M+1;const ka=4*(r+da+(t+Y)*b);T+=M*l[ka+3];v+=M;!w&&255>l[ka+3]&&(M=M*l[ka+3]/255);D+=M*
l[ka];C+=M*l[ka+1];O+=M*l[ka+2];H+=M}}R[J]=D/H;R[J+1]=C/H;R[J+2]=O/H;R[J+3]=T/v}return p};h.screenshotSuperSampleSettings=function(b,p,w){if(!p)return b;const {framebufferWidth:r,framebufferHeight:t,pixelRatio:q,region:B}=b;p=E(b,w);w=p.left+p.right;const A=p.top+p.bottom,l=r-w,F=t-A,K=Math.min(8,Math.min((2048-w)/l,(2048-A)/F));return 1.5>K?b:{...b,framebufferWidth:Math.round(l*K)+w,framebufferHeight:Math.round(F*K)+A,pixelRatio:q*K,resample:{region:{x:Math.round((B.x-p.left)*K)+p.left,y:Math.round((B.y-
p.top)*K)+p.top,width:Math.round(B.width*K),height:Math.round(B.height*K)},width:r,height:t}}};h.toDataUrl=x;h.toRenderSettings=function(b,p){const w=n(b,p),r=w.area,t=w.width/r.width,q=E(w,p.padding),B=q.left+q.right,A=q.top+q.bottom;return{framebufferWidth:Math.floor((p.width-B)*t+B),framebufferHeight:Math.floor((p.height-A)*t+A),region:{x:Math.floor(r.x*t)+q.left,y:Math.floor(r.y*t)+q.top,width:w.width,height:w.height},format:w.format,quality:w.quality,rotation:w.rotation,pixelRatio:t,layers:b&&
b.layers?b.layers:[],disableDecorations:w.disableDecorations,ignoreBackground:w.ignoreBackground,ignorePadding:w.ignorePadding}};h.wrapImageData=function(b,p,w,r){if(!p||!w)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(b,p,w)}catch(t){d=!1}p=I(p,w,r);p.data.set(b,0);return p};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(h,k,f){const n=
{checkMajorWebPerformanceCaveat:!0};h.check=function(x){x={...n,...x};const I=f();return I.available?x.checkMajorWebPerformanceCaveat&&I.majorPerformanceCaveat?new k("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):I.supportsHighPrecisionFragment?I.supportsVertexShaderSamplers?I.supportsElementIndexUint?I.supportsStandardDerivatives?I.supportsInstancedArrays?
null:new k("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new k("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new k("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new k("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new k("webgl:high-precision-fragment-required",
"WebGL support for high precision fragment shaders is required but not supported."):new k("webgl:required","WebGL is required but not supported.")};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["../../core/maybe","./context-util"],function(h,k){function f(){const x={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,
supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var I=document.createElement("canvas");if(!I)return x;var z=k.createContext(I,1,{failIfMajorPerformanceCaveat:!0});h.isNone(z)&&(z=k.createContext(I,1),h.isSome(z)&&(x.majorPerformanceCaveat=!0));if(h.isNone(z))return x;I=z.getParameter(z.VERSION);if(!I)return x;if(I=I.match(/^WebGL\s+([\d.]*)/)){I=parseFloat(I[1]);x.available=.94<=I;if(I=z.getShaderPrecisionFormat(z.FRAGMENT_SHADER,z.HIGH_FLOAT))x.supportsHighPrecisionFragment=
0<I.precision;x.supportsVertexShaderSamplers=0<z.getParameter(z.MAX_VERTEX_TEXTURE_IMAGE_UNITS);x.supportsElementIndexUint=null!==z.getExtension("OES_element_index_uint");x.supportsStandardDerivatives=null!==z.getExtension("OES_standard_derivatives");x.supportsInstancedArrays=null!==z.getExtension("ANGLE_instanced_arrays");x.supportsTextureFloat=null!==z.getExtension("OES_texture_float");x.supportsColorBufferFloat=null!==z.getExtension("WEBGL_color_buffer_float")&&null!==z.getExtension("EXT_float_blend")}x.maxTextureSize=
z.getParameter(z.MAX_TEXTURE_SIZE);(z=document.createElement("canvas"))?(z=k.createContext(z,2),z=h.isSome(z)?!0:!1):z=!1;x.version=z?2:1;return x}let n;return function(){n||(n=f());return n}})},"esri/views/webgl/context-util":function(){define(["exports","../../core/maybe"],function(h,k){function f(x,I,z={}){I=1===I?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let G=null;for(const E of I){try{G=x.getContext(E,z)}catch(u){}if(G)break}return G}function n(x,I){(x=x.parentNode)&&
(x.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+I+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}h.createContext=f;h.createContextOrErrorHTML=function(x,I,z={}){if(!window.WebGLRenderingContext)return n(x,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),
null;I=f(x,I,z);k.isNone(I)&&n(x,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return I};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(h,k,f,n,x,I,z,G){n=function(E){function u(m){m=E.call(this,m)||this;m.components=["attribution","zoom"];return m}h._inheritsLoose(u,E);return u}(G);k.__decorate([f.property()],n.prototype,"components",void 0);return n=k.__decorate([z.subclass("esri.views.ui.2d.DefaultUI2D")],n)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){n.getLogger("esri.views.ui.DefaultUI");f=function(b){function p(r){r=b.call(this,r)||this;r._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};r.components=[];return r}h._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){this._handles.add([x.init(this,"components",this._componentsWatcher.bind(this)),x.init(this,"view",this._updateViewAwareWidgets.bind(this))])};w._add=function(r,
t,q,B){if("string"===typeof r&&this._defaultPositionLookup[r]){if(this._find(r))return;r=this._createComponent(r)}b.prototype._add.call(this,r,t,q,B)};w._removeComponents=function(r){r.forEach(t=>{if(t=this._find(t))this.remove(t),t.destroy()})};w._updateViewAwareWidgets=function(r){this.components.forEach(t=>{(t=(t=this._find(t))&&t.widget)&&void 0!==t.view&&(t.view=r)})};w._componentsWatcher=function(r,t){this._removeComponents(t);this._addComponents(r);this._adjustPadding(r)};w._adjustPadding=
function(r){-1!==r.indexOf("attribution")||this._isOverridden("padding")||({top:r}=this.padding,this.padding=r)};w._addComponents=function(r){this.initialized&&r.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))};w._createComponent=function(r){const t=this._createWidget(r);if(t)return new u({id:r,node:t})};w._createWidget=function(r){if("attribution"===r)return this._createAttribution();if("compass"===r)return this._createCompass();if("navigation-toggle"===r)return this._createNavigationToggle();
if("zoom"===r)return this._createZoom()};w._createAttribution=function(){return new d({view:this.view})};w._createCompass=function(){return new c({view:this.view})};w._createNavigationToggle=function(){return new g({view:this.view})};w._createZoom=function(){return new e({view:this.view})};return p}(m);k.__decorate([I.property()],f.prototype,"components",void 0);return f=k.__decorate([E.subclass("esri.views.ui.DefaultUI")],f)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G,E){f=function(u){function m(){var c=u.apply(this,arguments)||this;c.widget=null;return c}h._inheritsLoose(m,u);var d=m.prototype;d.destroy=function(){this.widget&&this.widget.destroy();this.node=null};d.castNode=function(c){if(!c)return this._set("widget",null),null;if("string"===typeof c||c&&"nodeType"in c)return this._set("widget",null),n.byId(c);c&&"function"===typeof c.render&&!c.domNode&&(c.domNode=document.createElement("div"));this._set("widget",c);return c.domNode};
h._createClass(m,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(c){const g=this._get("node");c!==g&&(c&&c.classList.add("esri-component"),g&&g.classList.remove("esri-component"),this._set("node",c))}}]);return m}(f);k.__decorate([x.property({dependsOn:[]})],f.prototype,"id",null);k.__decorate([x.property()],f.prototype,"node",null);k.__decorate([G.cast("node")],f.prototype,"castNode",null);k.__decorate([x.property({readOnly:!0})],f.prototype,
"widget",void 0);return f=k.__decorate([E.subclass("esri.views.ui.Component")],f)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Component ../../widgets/support/widgetUtils".split(" "),function(h,
k,f,n,x,I,z,G,E,u,m,d,c){function g(w){const r="object"===typeof w&&null!==w&&Object.getPrototypeOf(w);return null!==r&&r!==Object.prototype||!("component"in w||"index"in w||"position"in w)?null:w}function e(w,{top:r,bottom:t,left:q,right:B}){w.style.top=r;w.style.bottom=t;w.style.left=q;w.style.right=B}const b={left:0,top:0,bottom:0,right:0},p={bottom:30,top:15,right:15,left:15};n=function(w){function r(q){q=w.call(this,q)||this;q._cornerNameToContainerLookup={};q._positionNameToContainerLookup=
{};q._components=[];q._componentToKey=new Map;q._handles=new x;q.view=null;q._initContainers();return q}h._inheritsLoose(r,w);var t=r.prototype;t.initialize=function(){this._handles.add([I.init(this,"view.padding, container",this._applyViewPadding.bind(this)),I.init(this,"padding",this._applyUIPadding.bind(this))])};t.destroy=function(){this.container=null;for(const q of this._components)q.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};t.castPadding=function(q){return"number"===
typeof q?{bottom:q,top:q,right:q,left:q}:{...p,...q}};t.add=function(q,B){let A,l;if(Array.isArray(q))q.forEach(K=>this.add(K,B));else{var F=g(q);F&&({index:A,position:B,component:q,key:l}=F);B&&"object"===typeof B&&({index:A,key:l,position:B}=B);!q||B&&!this._isValidPosition(B)||this._add(q,B,A,l)}};t.remove=function(q,B){if(q){if(Array.isArray(q))return q.map(F=>this.remove(F,B));var A=this._find(q);if(A){var l=this._componentToKey;if(!l.has(q)||l.get(q)===B)return l=this._components.indexOf(A),
A.node.parentNode&&A.node.parentNode.removeChild(A.node),this._componentToKey.delete(q),this._components.splice(l,1)[0]}}};t.empty=function(q){if(Array.isArray(q))return q.map(B=>this.empty(B)).reduce((B,A)=>B.concat(A));q=q||"manual";return"manual"===q?Array.prototype.slice.call(this._manualContainer.children).filter(B=>!B.classList.contains("esri-ui-corner")).map(B=>this.remove(B)):this._isValidPosition(q)?Array.prototype.slice.call(this._cornerNameToContainerLookup[q].children).map(this.remove,
this):null};t.move=function(q,B){Array.isArray(q)&&q.forEach(F=>this.move(F,B));if(q){var A=g(q)||g(B);if(A){var l=A.index;B=A.position;q=A.component||q}(!B||this._isValidPosition(B))&&(q=this.remove(q))&&this.add(q,{position:B,index:l})}};t.find=function(q){return q?(q=this._findById(q))&&(q.widget||q.node):null};t.getPosition=function(q){for(const B in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[B].contains(q))return B;return null};t._add=function(q,B,A,l){q instanceof
d||(q=new d({node:q}));this._place({component:q,position:B,index:A});this._components.push(q);l&&this._componentToKey.set(q,l)};t._find=function(q){return q?q instanceof d?this._findByComponent(q):"string"===typeof q?this._findById(q):this._findByNode(q.domNode||q):null};t._getViewPadding=function(){return this.get("view.padding")||b};t._attachContainers=function(q){q.appendChild(this._innerContainer);q.appendChild(this._manualContainer)};t._initContainers=function(){var q=document.createElement("div");
q.classList.add("esri-ui-inner-container");q.classList.add("esri-ui-corner-container");const B=document.createElement("div");B.classList.add("esri-ui-inner-container");B.classList.add("esri-ui-manual-container");const A=document.createElement("div");A.classList.add("esri-ui-top-left");A.classList.add("esri-ui-corner");q.appendChild(A);const l=document.createElement("div");l.classList.add("esri-ui-top-right");l.classList.add("esri-ui-corner");q.appendChild(l);const F=document.createElement("div");
F.classList.add("esri-ui-bottom-left");F.classList.add("esri-ui-corner");q.appendChild(F);const K=document.createElement("div");K.classList.add("esri-ui-bottom-right");K.classList.add("esri-ui-corner");q.appendChild(K);this._innerContainer=q;this._manualContainer=B;q=c.isRTL();this._cornerNameToContainerLookup={"top-left":A,"top-right":l,"bottom-left":F,"bottom-right":K,"top-leading":q?l:A,"top-trailing":q?A:l,"bottom-leading":q?K:F,"bottom-trailing":q?F:K};this._positionNameToContainerLookup={manual:B,
...this._cornerNameToContainerLookup}};t._isValidPosition=function(q){return!!this._positionNameToContainerLookup[q]};t._place=function(q){const B=q.component,A=q.index;q=this._positionNameToContainerLookup[q.position||"manual"];var l=-1<A,F=B.widget;F&&!F._started&&"function"===typeof F.postMixInProperties&&"function"===typeof F.buildRendering&&"function"===typeof F.postCreate&&"function"===typeof F.startup&&B.widget.startup();l?(l=Array.prototype.slice.call(q.children),0===A?q.firstChild?f.insertBefore(B.node,
q.firstChild):q.appendChild(B.node):A>=l.length?q.appendChild(B.node):f.insertBefore(B.node,l[A])):q.appendChild(B.node)};t._applyViewPadding=function(){const q=this.container;q&&e(q,this._toPxPosition(this._getViewPadding()))};t._applyUIPadding=function(){const q=this._innerContainer;q&&e(q,this._toPxPosition(this.padding))};t._toPxPosition=function(q){return{top:this._toPxUnit(q.top),left:this._toPxUnit(q.left),right:this._toPxUnit(q.right),bottom:this._toPxUnit(q.bottom)}};t._toPxUnit=function(q){return 0===
q?"0":q+"px"};t._findByComponent=function(q){let B=null,A;this._components.some(l=>{(A=l===q)&&(B=l);return A});return B};t._findById=function(q){let B=null,A;this._components.some(l=>{(A=l.id===q)&&(B=l);return A});return B};t._findByNode=function(q){let B=null,A;this._components.some(l=>{(A=l.node===q)&&(B=l);return A});return B};h._createClass(r,[{key:"container",set:function(q){const B=this._get("container");q!==B&&(q&&(q.classList.add("esri-ui"),q.classList.add(c.getCalciteThemeClass()),this._attachContainers(q)),
B&&(B.classList.remove("esri-ui"),e(B,{top:"",bottom:"",left:"",right:""}),f.empty(B)),this._set("container",q))}},{key:"height",get:function(){const q=this.get("view.height")||0;if(0===q)return q;const B=this._getViewPadding();return Math.max(q-(B.top+B.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(q){q?this._override("padding",q):this._clearOverride("padding")}},{key:"width",get:function(){const q=this.get("view.width")||0;if(0===q)return q;const B=this._getViewPadding();
return Math.max(q-(B.left+B.right),0)}}]);return r}(n.EventedAccessor);k.__decorate([z.property()],n.prototype,"container",null);k.__decorate([z.property()],n.prototype,"height",null);k.__decorate([z.property({value:p})],n.prototype,"padding",null);k.__decorate([u.cast("padding")],n.prototype,"castPadding",null);k.__decorate([z.property()],n.prototype,"view",void 0);k.__decorate([z.property()],n.prototype,"width",null);return n=k.__decorate([m.subclass("esri.views.ui.UI")],n)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e,b){x=function(p){function w(t,q){t=p.call(this,t,q)||this;t._isOpen=!1;t._attributionTextOverflowed=!1;t._prevSourceNodeHeight=0;t.iconClass="esri-icon-description";t.itemDelimiter=" | ";t.label=void 0;t.messages=null;t.view=null;t.viewModel=new m;return t}h._inheritsLoose(w,p);var r=w.prototype;r.initialize=function(){this.own(f.on(this,"viewModel.items","change",()=>this.scheduleRender()))};r.render=function(){return e.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",
{["esri-attribution--open"]:this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};r.renderPoweredBy=function(){return e.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",e.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};r.renderSourcesNode=function(){const t=this._isOpen,q=this._isInteractive,B=q?0:-1,{attributionText:A}=this,l=q?"button":void 0;return e.tsx("div",
{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:t,["esri-interactive"]:q}),innerHTML:A,role:l,tabIndex:B})};r._afterSourcesNodeCreate=function(t){this._prevSourceNodeHeight=t.clientWidth};r._afterSourcesNodeUpdate=function(t){let q=!1;const {clientHeight:B,clientWidth:A,scrollWidth:l}=t;t=l>=A;const F=this._attributionTextOverflowed!==t;this._attributionTextOverflowed=t;
F&&(q=!0);this._isOpen&&(t=B<this._prevSourceNodeHeight,this._prevSourceNodeHeight=B,t&&(this._isOpen=!1,q=!0));q&&this.scheduleRender()};r._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};h._createClass(w,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((t,q)=>{-1===t.indexOf(q.text)&&t.push(q.text);return t},[]).join(this.itemDelimiter)}}]);return w}(u);
k.__decorate([G.property()],x.prototype,"_isOpen",void 0);k.__decorate([G.property()],x.prototype,"_isInteractive",null);k.__decorate([G.property()],x.prototype,"_attributionTextOverflowed",void 0);k.__decorate([G.property()],x.prototype,"_prevSourceNodeHeight",void 0);k.__decorate([G.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],x.prototype,"attributionText",null);k.__decorate([G.property()],x.prototype,"iconClass",void 0);k.__decorate([G.property()],x.prototype,"itemDelimiter",
void 0);k.__decorate([G.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],x.prototype,"label",void 0);k.__decorate([G.property(),c.messageBundle("esri/widgets/Attribution/t9n/Attribution")],x.prototype,"messages",void 0);k.__decorate([n.aliasOf("viewModel.view")],x.prototype,"view",void 0);k.__decorate([G.property({type:m})],x.prototype,"viewModel",void 0);k.__decorate([d.accessibleHandler()],x.prototype,"_toggleState",null);return x=k.__decorate([E.subclass("esri.widgets.Attribution")],
x)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){function b(t,q){return t&&"copyright"in t&&(!q||"function"===typeof t.originOf&&"user"===t.originOf("copyright"))}function p(t,q){return t.length!==q.length||t.some((B,A)=>B.text!==q[A].text)}function w(t,q,B){B&&q&&(t.find(A=>A.layerView===q&&A.text===B)||t.push({text:B,layerView:q}))}const r=[];f=function(t){function q(A){var l=t.call(this,A)||this;l.clear=()=>{l._fetchedAttributionData.clear();l._pendingAttributions.clear();l.handles.remove("suspension");
l.notifyChange("state")};l._pendingAttributions=new Set;l._fetchedAttributionData=new Map;l.items=new x;l.view=null;l._allLayerViewsChange=F=>{l.handles.remove("suspension");const K=l.get("view.allLayerViews");K&&l.handles.add(K.map(R=>R.watch(["suspended","attributionVisible"],l._updateAttributionItems)),"suspension");F&&F.removed&&F.removed.forEach(R=>{l._pendingAttributions.delete(R);l._fetchedAttributionData.delete(R)});l._updateAttributionItems()};l._updateAttributionItems=()=>{const F=l.get("view.allLayerViews");
r.length=0;F?(F.forEach(K=>{if(!K.suspended&&K.get("layer.attributionVisible")){var R=K.layer;if(b(R,"user"))w(r,K,R.copyright);else if(R.hasAttributionData)if(l._fetchedAttributionData.has(K)){var W=l._fetchedAttributionData.get(K);W?w(r,K,l._getDynamicAttribution(W,l.view,R)):b(R)&&w(r,K,R.copyright)}else l._fetchAttributionData(K);else(W=R.get("portalItem.accessInformation"))?w(r,K,W):w(r,K,R.copyright)}}),p(l.items,r)&&(l.items.removeAll(),l.items.addMany(r)),r.length=0,l.notifyChange("state")):
l.clear()};l.handles.add([z.on(h._assertThisInitialized(l),"view.allLayerViews","change",l._allLayerViewsChange,l._allLayerViewsChange,l.clear),z.whenTrue(h._assertThisInitialized(l),"view.stationary",()=>l._updateAttributionItems())]);return l}h._inheritsLoose(q,t);var B=q.prototype;B.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};B._fetchAttributionData=function(){var A=h._asyncToGenerator(function*(l){if(!this._pendingAttributions.has(l)){this._pendingAttributions.add(l);
var F=yield n.result(l.layer.fetchAttributionData());this._pendingAttributions.has(l)&&(F=F.ok?this._createContributionIndex(F.value,"bing-maps"===l.layer.type):null,this._pendingAttributions.delete(l),this._fetchedAttributionData.set(l,F));this._updateAttributionItems()}});return function(l){return A.apply(this,arguments)}}();B._createContributionIndex=function(A,l){A=A.contributors;const F={};if(!A)return F;for(let V=0;V<A.length;V++){const U=A[V];var K=U.coverageAreas;if(!K)return;for(const M of K){var R=
M.bbox,W=M.zoomMin-(l&&M.zoomMin?1:0);K=M.zoomMax-(l&&M.zoomMax?1:0);for(R={extent:g.geographicToWebMercator({xmin:R[1],ymin:R[0],xmax:R[3],ymax:R[2],spatialReference:e.WGS84}),attribution:U.attribution||"",score:null!=M.score?M.score:100,id:V};W<=K;W++)F[W]=F[W]||[],F[W].push(R)}}F.maxKey=Math.max.apply(null,Object.keys(F));return F};B._getDynamicAttribution=function(A,l,F){const {extent:K,scale:R}=l;F=F.tileInfo.scaleToZoom(R);F=Math.min(A.maxKey,Math.round(F));if(!K||null==F||-1>=F)return"";A=
A[F];const W=g.project(K.center.clone().normalize(),l.spatialReference),V={};return A?A.filter(U=>{const M=!V[U.id]&&W&&c.extentContainsPoint(U.extent,W);M&&(V[U.id]=!0);return M}).sort((U,M)=>M.score-U.score||U.objectId-M.objectId).map(U=>U.attribution).join(", "):""};h._createClass(q,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return q}(I.HandleOwner);k.__decorate([G.property({readOnly:!0,type:x})],f.prototype,"items",
void 0);k.__decorate([G.property({readOnly:!0})],f.prototype,"state",null);k.__decorate([G.property()],f.prototype,"view",void 0);return f=k.__decorate([d.subclass("esri.widgets.Attribution.AttributionViewModel")],f)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){n=function(b){function p(r,t){r=b.call(this,r,t)||this;r.goToOverride=null;r.iconClass="esri-icon-locate-circled";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new u;return r}h._inheritsLoose(p,b);var w=p.prototype;w.reset=function(){return this.viewModel.reset()};w.render=function(){const {orientation:r,state:t}=this.viewModel;var q="disabled"===t,B="compass"===("rotation"===t?"rotation":"compass");const A=q?-1:0;q={["esri-disabled"]:q,["esri-interactive"]:!q};
B={["esri-icon-compass"]:B,["esri-icon-dial"]:!B};const {messages:l}=this;return g.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",q),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:A,"aria-label":l.reset,title:l.reset},g.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",B),styles:this._toRotationTransform(r)}),g.tsx("span",{class:"esri-icon-font-fallback-text"},l.reset))};w._reset=function(){this.viewModel.reset()};w._toRotationTransform=
function(r){return{transform:`rotateZ(${r.z}deg)`}};return p}(E);k.__decorate([f.aliasOf("viewModel.goToOverride")],n.prototype,"goToOverride",void 0);k.__decorate([z.property()],n.prototype,"iconClass",void 0);k.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],n.prototype,"label",void 0);k.__decorate([z.property(),d.messageBundle("esri/widgets/Compass/t9n/Compass")],n.prototype,"messages",void 0);k.__decorate([f.aliasOf("viewModel.view")],n.prototype,"view",void 0);
k.__decorate([z.property({type:u})],n.prototype,"viewModel",void 0);k.__decorate([m.accessibleHandler()],n.prototype,"_reset",null);return n=k.__decorate([G.subclass("esri.widgets.Compass")],n)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m){f=function(d){function c(e){e=d.call(this,e)||this;e._handles=new n;e.orientation={x:0,y:0,z:0};e.view=null;e._updateForCamera=e._updateForCamera.bind(h._assertThisInitialized(e));e._updateForRotation=e._updateForRotation.bind(h._assertThisInitialized(e));e._updateRotationWatcher=e._updateRotationWatcher.bind(h._assertThisInitialized(e));return e}h._inheritsLoose(c,d);var g=c.prototype;g.initialize=function(){this._handles.add(x.init(this,"view",this._updateRotationWatcher))};
g.destroy=function(){this._handles.destroy();this.view=this._handles=null};g.reset=function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}};g._updateForRotation=function(e){void 0!==e&&null!==e&&(this.orientation={z:e})};g._updateForCamera=function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})};g._updateRotationWatcher=function(e){this._handles.removeAll();e&&("2d"===e.type?this._handles.add(x.init(this,"view.rotation",this._updateForRotation)):
this._handles.add(x.init(this,"view.camera",this._updateForCamera)))};h._createClass(c,[{key:"canShowNorth",get:function(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return c}(m.GoToMixin(f));k.__decorate([I.property({readOnly:!0})],f.prototype,"canShowNorth",null);k.__decorate([I.property()],f.prototype,"orientation",void 0);k.__decorate([I.property({readOnly:!0})],
f.prototype,"state",null);k.__decorate([I.property()],f.prototype,"view",void 0);return f=k.__decorate([u.subclass("esri.widgets.CompassViewModel")],f)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){n=function(b){function p(r,t){r=b.call(this,r,t)||this;r.iconClass="esri-icon-pan2";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new u;return r}h._inheritsLoose(p,b);var w=p.prototype;w.toggle=function(){return this.viewModel.toggle()};w.render=function(){const r="disabled"===this.get("viewModel.state");var t="pan"===this.get("viewModel.navigationMode");const q={["esri-navigation-toggle__button--active"]:t};t={["esri-navigation-toggle__button--active"]:!t};
const B=r?-1:0,A=this.messages.toggle;return g.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:r,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:B,"aria-label":A,title:A},g.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",q)},g.tsx("span",{class:"esri-icon-pan"})),g.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",t)},g.tsx("span",{class:"esri-icon-rotate"})))};w._toggle=function(){this.toggle()};h._createClass(p,[{key:"layout",set:function(r){"horizontal"!==r&&(r="vertical");this._set("layout",r)}}]);return p}(E);k.__decorate([z.property()],n.prototype,"iconClass",void 0);k.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],n.prototype,"label",void 0);k.__decorate([z.property({value:"vertical"})],n.prototype,"layout",null);k.__decorate([z.property(),
d.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],n.prototype,"messages",void 0);k.__decorate([f.aliasOf("viewModel.view")],n.prototype,"view",void 0);k.__decorate([z.property({type:u})],n.prototype,"viewModel",void 0);k.__decorate([m.accessibleHandler()],n.prototype,"_toggle",null);return n=k.__decorate([G.subclass("esri.widgets.NavigationToggle")],n)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G,E,u){f=function(m){function d(g){g=m.call(this,g)||this;g._handles=new n;g.navigationMode="pan";g.view=null;return g}h._inheritsLoose(d,m);var c=d.prototype;c.initialize=function(){this._handles.add(x.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};c.destroy=function(){this._handles.destroy();this.view=this._handles=null};c.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};
c._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};h._createClass(d,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return d}(f);k.__decorate([I.property({readOnly:!0})],f.prototype,"state",null);k.__decorate([I.property()],f.prototype,"navigationMode",void 0);k.__decorate([I.property()],f.prototype,"view",void 0);return f=k.__decorate([u.subclass("esri.widgets.NavigationToggleViewModel")],
f)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(h,k,f,n,x,I,z,G,E,u,m,d,c,g,e){n=function(b){function p(r,
t){r=b.call(this,r,t)||this;r.iconClass="esri-icon-zoom-in-magnifying-glass";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new e;return r}h._inheritsLoose(p,b);var w=p.prototype;w.initialize=function(){this._zoomInButton=new g({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new g({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};w.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=
null};w.render=function(){const r=this.viewModel,t={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===r.state&&r.canZoomIn;this._zoomOutButton.enabled="ready"===r.state&&r.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return c.tsx("div",{class:this.classes("esri-zoom esri-widget",t)},this._zoomInButton.render(),this._zoomOutButton.render())};w.zoomIn=function(){return this.viewModel.zoomIn()};w.zoomOut=
function(){return this.viewModel.zoomOut()};h._createClass(p,[{key:"layout",set:function(r){"horizontal"!==r&&(r="vertical");this._set("layout",r)}}]);return p}(E);k.__decorate([z.property()],n.prototype,"iconClass",void 0);k.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],n.prototype,"label",void 0);k.__decorate([z.property({value:"vertical"})],n.prototype,"layout",null);k.__decorate([z.property(),m.messageBundle("esri/widgets/Zoom/t9n/Zoom")],n.prototype,"messages",
void 0);k.__decorate([f.aliasOf("viewModel.view")],n.prototype,"view",void 0);k.__decorate([z.property({type:e})],n.prototype,"viewModel",void 0);return n=k.__decorate([G.subclass("esri.widgets.Zoom")],n)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../../core/Logger ../support/jsxFactory ../support/widgetUtils".split(" "),
function(h,k,f,n,x,I,z,G,E,u,m,d){n=function(c){function g(){var b=c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}h._inheritsLoose(g,c);var e=g.prototype;e.render=function(){const b=this.enabled?0:-1,p={[this.iconClass]:!!this.iconClass};return m.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:b,
title:this.title},m.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",p)}),m.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};e._triggerAction=function(){this.action.call(this)};return g}(G);k.__decorate([f.property()],n.prototype,"action",void 0);k.__decorate([f.property()],n.prototype,"enabled",void 0);k.__decorate([f.property()],n.prototype,"iconClass",void 0);k.__decorate([f.property()],n.prototype,"title",void 0);k.__decorate([E.accessibleHandler()],
n.prototype,"_triggerAction",null);return n=k.__decorate([z.subclass("esri.widgets.IconButton")],n)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(h,k,f,n,x,I,
z,G,E,u,m){f=function(d){function c(e){e=d.call(this,e)||this;e.canZoomIn=!1;e.canZoomOut=!1;return e}h._inheritsLoose(c,d);var g=c.prototype;g.destroy=function(){this.view=null};g.zoomIn=function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():n.ignoreAbortErrors(e.goTo({zoomFactor:2}))}};g.zoomOut=function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():n.ignoreAbortErrors(e.goTo({zoomFactor:.5}))}};h._createClass(c,[{key:"state",
get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new u({view:e}):"3d"===e.type&&(this._zoomConditions=new m({view:e})):this._zoomConditions=null;this._set("view",e)}}]);return c}(f);k.__decorate([x.property()],f.prototype,"_zoomConditions",void 0);k.__decorate([x.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],f.prototype,"canZoomIn",void 0);k.__decorate([x.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],f.prototype,"canZoomOut",void 0);k.__decorate([x.property({readOnly:!0})],f.prototype,"state",null);k.__decorate([x.property()],f.prototype,"view",null);return f=k.__decorate([E.subclass("esri.widgets.Zoom.ZoomViewModel")],f)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G){f=function(E){function u(){return E.apply(this,arguments)||this}h._inheritsLoose(u,E);h._createClass(u,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const m=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||m>d}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const m=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");
return 0===d||m<d}}]);return u}(f);k.__decorate([n.property({readOnly:!0})],f.prototype,"canZoomIn",null);k.__decorate([n.property({readOnly:!0})],f.prototype,"canZoomOut",null);k.__decorate([n.property()],f.prototype,"view",void 0);return f=k.__decorate([G.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,k,f,n,x,I,z,G){f=function(E){function u(){return E.apply(this,arguments)||this}h._inheritsLoose(u,E);h._createClass(u,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return u}(f);k.__decorate([n.property({readOnly:!0})],f.prototype,"canZoomIn",null);k.__decorate([n.property({readOnly:!0})],f.prototype,"canZoomOut",null);k.__decorate([n.property()],f.prototype,"view",void 0);return f=k.__decorate([G.subclass("esri.widgets.Zoom.ZoomConditions3D")],
f)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(h,k,f,n,x,I,z,G){var E;n=E=function(u){function m(d){d=u.call(this,d)||this;d.color=new f([0,0,0,1]);return d}h._inheritsLoose(m,u);m.prototype.clone=function(){return new E(x.clone({color:this.color}))};
return m}(n.JSONSupport);k.__decorate([I.property({type:f,json:{write:!0}})],n.prototype,"color",void 0);return n=E=k.__decorate([G.subclass("esri.webmap.background.ColorBackground")],n)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/watchUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./BreakpointsOwner ./DOMContainer ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(h,
k,f,n,x,I,z,G,E,u,m,d,c,g,e,b,p,w,r,t,q,B,A,l,F,K,R,W){function V(){return U.apply(this,arguments)}function U(){U=k._asyncToGenerator(function*(){const [,{GraphicsView2D:Q,GraphicContainer:Y,LabelManager:ha,MapViewNavigation:da,MagnifierView2D:ka,Stage:qa}]=yield Promise.all([new Promise((pa,ea)=>h(["./webgl"],pa,ea)),new Promise((pa,ea)=>h(["./2d/mapViewDeps"],pa,ea))]);v=Q;D=Y;C=ha;O=da;T=ka;H=qa});return U.apply(this,arguments)}function M(Q){const Y=Q.getObjectId();if(Y){var ha,da,ka,qa;return`${null!=
(ha=null!=(da=null==(ka=Q.layer)?void 0:ka.uid)?da:null==(qa=Q.sourceLayer)?void 0:qa.uid)?ha:"MapView"}/${Y}`}return`"MapView/${Q.uid}`}function P(Q,Y,ha,da,ka){return qa=>{if(qa instanceof n){if(qa.layer===Q)null==ka?void 0:ka();else{var pa=Q.allLayerViews.find(ea=>ea.layer===qa.layer);pa&&(null==da?void 0:da(pa))}ha(M(qa))}else(pa=Q.allLayerViews.find(ea=>ea.layer===qa))&&Y(pa)}}function ba(Q,Y){if(Q)if(E.isIterable(Q))for(const ha of Q)if(E.isIterable(ha))for(const da of ha)Y(da);else Y(ha);else Y(Q)}
const J=u.getLogger("esri.views.MapView");let H,v,D,C,O,T;u=function(Q){function Y(da){var ka=Q.call(this,da)||this;ka._magnifierView=null;ka._stage=null;ka._resolveWhenReady=[];ka.rootLayerViews=new I({getCollections:()=>{var qa,pa;return[null==(qa=ka.basemapView)?void 0:qa.baseLayerViews,ka.layerViews,null==(pa=ka.basemapView)?void 0:pa.referenceLayerViews]},getChildrenFunction:()=>null});ka.floors=new x;ka.graphicsView=null;ka.highlightOptions=new B;ka.inputManager=new q({view:k._assertThisInitialized(ka)});
ka.mapViewNavigation=null;ka.supersampleScreenshotsEnabled=!1;ka.ui=new R;ka.rendering=!1;c.initialize();return ka}k._inheritsLoose(Y,Q);var ha=Y.prototype;ha.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};ha.toMap=function(da){return F.isSupportedScreenPointEvent(da)?(da=F.createScreenPointFromSupportedEvent(this,da),Q.prototype.toMap.call(this,da)):Q.prototype.toMap.call(this,da)};ha.hitTest=function(){var da=k._asyncToGenerator(function*(ka,
qa){const pa=F.isSupportedScreenPointEvent(ka)?F.createScreenPointFromSupportedEvent(this,ka):ka;if(!this.ready||isNaN(pa.x)||isNaN(pa.y))return{screenPoint:pa,results:[]};let ea=new Set,ia=!1,ma=null,sa=null;null!=qa&&qa.include?ba(qa.include,P(this,ca=>ea.add(ca),ca=>{ma||(ma=new Set);ma.add(ca)},ca=>ea.add(ca),()=>ia=!0)):(ia=!0,ea=new Set(this.allLayerViews));null!=qa&&qa.exclude&&ba(qa.exclude,P(this,ca=>ea.delete(ca),ca=>{sa||(sa=new Set);sa.add(ca)}));ka=this.allLayerViews.filter(ca=>!ca.suspended&&
ea.has(ca)).reverse();const S=this.toMap(pa);ka=(yield Promise.all([ia?this.graphicsView.hitTest(S):null,...ka.map(ca=>ca.hitTest(S,pa))])).filter(m.isSome).flat();ma&&(ka=ka.filter(ca=>ma.has(M(ca))));sa&&(ka=ka.filter(ca=>!sa.has(M(ca))));return{screenPoint:pa,results:ka.map(ca=>({mapPoint:S,graphic:ca}))}});return function(ka,qa){return da.apply(this,arguments)}}();ha.takeScreenshot=function(da){da=da||{};const ka=this.supersampleScreenshotsEnabled?Math.min(4,l.getMaximumResolutionScale(this.size,
Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let qa;da.layers?(qa=[],da.layers.forEach(ia=>{const ma=this.allLayerViews.find(sa=>sa.layer.id===ia.id);ma&&"container"in ma&&ma.container&&qa.push(ma.container)})):qa=this._stage.children;const {format:pa,quality:ea}=l.getFormatAndQuality(da.format,da.quality);da=A(da,ka,this.size,this.padding,pa,ea,qa,da.rotation);return this._stage.takeScreenshot(da)};ha.on=function(da,ka,qa,pa){return(qa=this.inputManager&&this.viewEvents.on(da,
ka,qa,pa))?qa:Q.prototype.on.call(this,da,ka)};ha.hasEventListener=function(da){return Q.prototype.hasEventListener.call(this,da)||this.viewEvents.hasHandler(da)};ha.whenLayerView=function(da){return Q.prototype.whenLayerView.call(this,da)};ha.graphicChanged=function(da){this.graphicsView&&this.graphicsView.graphicUpdateHandler(da)};ha.whenReady=function(){return new Promise(da=>{this.ready?da(this):this._resolveWhenReady.push(da)})};ha.forceDOMReadyCycle=function(){this.forceReadyCycle()};ha.validate=
function(){let da=K.check({checkMajorWebPerformanceCaveat:!1});G("safari")&&9>G("safari")&&(da=new z("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")}));return m.isSome(da)?(J.warn("#validate()",da.message),Promise.reject(da)):V()};ha._startup=function(){this.timeline.begin("MapView Startup");Q.prototype._startup.call(this);this.graphics.owner=this;const da=new H(this.surface,{canvas:this.renderCanvas,
supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});var ka=new v({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new D(this.featuresTilingScheme)});const qa=new O({view:this,animationManager:this.animationManager}),pa=new C({view:this});this._magnifierView=new T;this._magnifierView.magnifier=
this.magnifier;this._stage=da;this.frameTask.graphicsView=ka;this._set("graphicsView",ka);this._set("mapViewNavigation",qa);this._set("labelManager",pa);this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),da.on("post-render",()=>this._set("rendering",da.renderRequested)),da.on("will-render",()=>this._set("rendering",da.renderRequested)),da.on("webgl-error",ea=>this.fatalError=ea.error),d.init(this,"stationary",ea=>da.stationary=ea,!0),d.init(this,"state.id",()=>da.state=
this.state,!0),d.init(this,"background",ea=>{da.background=ea;this._magnifierView.background=ea},!0),d.init(this,"magnifier",ea=>this._magnifierView.magnifier=ea,!0),d.init(this,"renderingOptions",ea=>da.renderingOptions=ea,!0),d.init(this,"highlightOptions",()=>da.highlightOptions=this.highlightOptions,!0)],"map-view");da.state=this.state;this._updateStageChildren();ka=this._resolveWhenReady;this._resolveWhenReady=[];ka.forEach(ea=>ea(this));this.timeline.end("MapView Startup")};ha._teardown=function(){this.handles.remove("map-view");
this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;Q.prototype._teardown.call(this)};ha._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(da=>{this._stage.addChild(da.container)});
this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};k._createClass(Y,[{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(da){void 0===da?this._clearOverride("background"):this._override("background",da)}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||
!this.mapViewNavigation.interacting)}}]);return Y}(w.BreakpointsOwner(r.DOMContainer(t)));f.__decorate([g.property({type:W})],u.prototype,"background",null);f.__decorate([g.property()],u.prototype,"floors",void 0);f.__decorate([g.property()],u.prototype,"graphicsView",void 0);f.__decorate([g.property({type:B})],u.prototype,"highlightOptions",void 0);f.__decorate([g.property({readOnly:!0})],u.prototype,"inputManager",void 0);f.__decorate([g.property({readOnly:!0})],u.prototype,"resourceManager",null);
f.__decorate([g.property({readOnly:!0})],u.prototype,"textureManager",null);f.__decorate([g.property({readOnly:!0})],u.prototype,"mapViewNavigation",void 0);f.__decorate([g.property({type:Boolean})],u.prototype,"navigating",null);f.__decorate([g.property({type:Boolean,constructOnly:!0})],u.prototype,"supersampleScreenshotsEnabled",void 0);f.__decorate([g.property({type:R})],u.prototype,"ui",void 0);f.__decorate([g.property({readOnly:!0})],u.prototype,"rendering",void 0);f.__decorate([g.property({constructOnly:!0})],
u.prototype,"renderCanvas",void 0);f.__decorate([g.property({constructOnly:!0})],u.prototype,"deactivatedWebGLExtensions",void 0);f.__decorate([g.property({constructOnly:!0})],u.prototype,"debugWebGLExtensions",void 0);return u=f.__decorate([p.subclass("esri.views.MapView")],u)});