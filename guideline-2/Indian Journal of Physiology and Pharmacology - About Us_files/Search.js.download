// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetUtils".split(" "),function(n,a,
b,m,f,B,r,A,x,e,g,d,p,t){m=function(M){function H(u,y){u=M.call(this,u,y)||this;u.messages=null;u.showMoreResultsOpen=!1;u.viewModel=null;return u}n._inheritsLoose(H,M);var G=H.prototype;G.render=function(){return p.tsx("div",{class:"esri-search-result-renderer esri-widget"},p.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),
this.renderMoreResults()))};G.renderMoreResults=function(){return p.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};G.renderSearchResultName=function(){var u;const y=null==(u=this.viewModel)?void 0:u.selectedResult;return p.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},y&&y.name||"")};G.renderMoreResultsLists=function(){var u,y=null==(u=this.viewModel)?void 0:u.results;
({resultCount:u}=this.viewModel);if(2>u)return null;y=y.map(N=>this.renderMoreResultsList(N));return p.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},y)};G.renderMoreResultsButton=function(){const {messages:u}=this,{resultCount:y}=this.viewModel;return 2>y?null:p.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},p.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,
onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?u.hideMoreResults:u.showMoreResults))};G.renderMoreResultsHeader=function(u,y){return p.tsx("div",{key:`esri-search-result-renderer__header-${y}`,class:"esri-search-result-renderer__more-results-list-header"},u)};G.renderMoreResultsList=function(u){var y,N;const {results:K}=u;var W=K.length;const Y=!!W,aa=null==(y=this.viewModel)?void 0:y.selectedResult;y=1===W&&K[0]===aa;W=this._getSourceName(u.source,
u.sourceIndex);W=1<(null==(N=this.viewModel)?void 0:N.results.length)&&!y?this.renderMoreResultsHeader(W,u.sourceIndex):null;N=Y&&K.map((Z,F)=>this.renderMoreResultsListItem(Z,F));N=Y&&!y?p.tsx("ul",{key:`esri-search-result-renderer__list-${u.sourceIndex}`},N):null;return Y?p.tsx("div",{key:`esri-search-result-renderer__results-${u.sourceIndex}`},W,N):null};G.renderMoreResultsListItem=function(u,y){const N=this.get("viewModel.selectedResult");return u!==N?p.tsx("li",{key:`esri-search-result-renderer__list-item-${y}`},
p.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":u,onclick:this._selectResultClick,onkeydown:this._selectResultClick},u.name)):null};G._showMoreResultsClick=function(u){u.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(u=this.get("viewModel.view.popup"))&&u.reposition()};G._selectResultClick=function(u){u.preventDefault();u=u.currentTarget["data-result"];this.viewModel&&this.viewModel.select(u)};G._getSourceName=function(u,y){return y===x.ALL_INDEX?
this.messages.all:u.name};return H}(A);a.__decorate([b.property(),g.messageBundle("esri/widgets/Search/t9n/Search")],m.prototype,"messages",void 0);a.__decorate([b.property()],m.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],m.prototype,"viewModel",void 0);a.__decorate([e.accessibleHandler()],m.prototype,"_showMoreResultsClick",null);a.__decorate([e.accessibleHandler()],m.prototype,"_selectResultClick",null);return m=a.__decorate([r.subclass("esri.widgets.Search.SearchResultRenderer")],
m)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/deprecate ../../core/Error ../../core/Evented ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g,d,p,t,M,H,G,u,y,N,K,W,Y,aa,Z,F,k,w,l,I,z,D,E,Q,S,L,O,V,X){function P(da,ba){return da.hasOwnProperty(ba)&&null!=da[ba]&&""!==da[ba]}const T=M.getLogger("esri.widgets.Search.SearchViewModel"),ea=x.ofType({key:da=>da.layer?"layer":"locator",base:z,typeMap:{layer:l,locator:I}}),ia=aa.WGS84,fa=/<(?:.|\s)*?>/g;r=function(da){function ba(c){c=da.call(this,c)||this;c._handles=new p;c._gotoController=null;c._searching=null;c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new ea;c.defaultSymbols={point:new O({url:b.getAssetUrl(t("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),polyline:new V({color:[130,130,130,1],width:2}),polygon:new X({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=
k.getDefault();c.resultCount=null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=null;c.sources=new ea;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}n._inheritsLoose(ba,da);var J=ba.prototype;J.initialize=function(){var c=this;const h=function(){var q=n._asyncToGenerator(function*(){const v=yield F.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=
v;c.defaultPopupTemplate=new B({title:v.searchResult,content:"{Match_addr}"})});return function(){return q.apply(this,arguments)}}();h();this._handles.add([u.on(this,["defaultSources","sources"],"change",()=>this.notifyChange("allSources")),u.init(this,["includeDefaultSources","view","portal"],()=>this._update()),Z.onLocaleChange(h)])};J.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};J.clear=function(){this.searchTerm=""};J.clearGraphics=function(){this._removeHighlight();
this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};J.search=function(c,h){this.emit("search-start");this.clearGraphics();const q=this._createSuggestionForSearch(c);this._searching=c=this.when().then(()=>this._getResultsFromSources(q,h).then(v=>{var C;if(null!=(C=H.unwrap(null==h?void 0:h.signal))&&C.aborted)return null;const R={activeSourceIndex:this.activeSourceIndex,searchTerm:q.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(R,
v,q);v=this._getFirstResult(R.results);C=(q.location&&v?v.name:q.text).replace(fa,"");this._set("searchTerm",C);(q.key&&"number"===typeof q.sourceIndex||q.location)&&this._set("selectedSuggestion",q);this._set("results",R.results);this._set("resultCount",R.results.reduce((U,ca)=>U+ca.results.length,0));this.emit("search-complete",R);return this._selectFirstResult(v).then(()=>R)})).then(v=>{this._clearSearching();return v},v=>{this._clearSearching();throw v;});this.notifyChange("state");return c};
J.searchNearby=function(c){if(!this.locationEnabled){var h=new g("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});T.error(h);return Promise.reject(h)}this._searching=h=Q.getCurrentPosition().then(q=>Q.positionToPoint({position:q,view:this.view},c)).then(q=>this.search(q,c));this.notifyChange("state");h.catch(()=>{}).then(()=>this._clearSearching());return h};J.select=function(c){this.clearGraphics();if(!c){var h=new g("select:missing-parameter",
"Cannot select without a searchResult.",{searchResult:c});T.error(h);return Promise.reject(h)}const {view:q}=this,v=P(c,"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),C=this.allSources.getItemAt(v);if(!C)return h=new g("select:missing-source","Cannot select without a source.",{source:C}),T.error(h),Promise.reject(h);h=C instanceof l?this._getLayerSourcePopupTemplate(C):C.popupTemplate;const R=C.resultSymbol||this._getDefaultSymbol(c),U=P(C,"resultGraphicEnabled")?C.resultGraphicEnabled:
this.resultGraphicEnabled,ca=P(C,"autoNavigate")?C.autoNavigate:this.autoNavigate,ha=P(C,"popupEnabled")?C.popupEnabled:this.popupEnabled,pa=ha?h||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ja}=c;if(!ja)return h=new g("select:missing-feature","Cannot select without a feature.",{feature:ja}),T.error(h),Promise.reject(h);const {attributes:sa,geometry:qa,layer:ta,sourceLayer:ua}=ja,na=D.getPointFromGeometry(qa);h={layerViewQuery:this._getLayerView(ja),elevationQuery:q&&H.isSome(na)?
D.getPointWithElevation(na,q).catch(()=>na):Promise.resolve(na)};return G.eachAlways(h).then(ka=>{const la=ka.layerViewQuery.value,va=ka.elevationQuery.value;R instanceof L&&(R.text=c.name);ka=q&&ca?c.target||c.extent:null;return(H.isSome(ka)?this._goToSearchResult(ka):Promise.resolve()).then(()=>{var oa;const ma=la?ja:new f({geometry:qa,symbol:R,attributes:sa,layer:ta,sourceLayer:ua,popupTemplate:pa}),ra=ha&&(null==(oa=this.view)?void 0:oa.popup);(oa=ra&&ma.getEffectivePopupTemplate(ra.defaultPopupTemplateEnabled))&&
q.popup.open({features:[ma],location:va});la&&w.highlightsSupported(la)&&!oa&&this._highlightFeature({graphic:ma,layerView:la});!la&&U&&q&&q.graphics.push(ma);this._setResultFloor(c);this._set("selectedResult",c);this._set("resultGraphic",ma);this.emit("select-result",{result:c,source:C,sourceIndex:v});return c})})};J.suggest=function(c,h,q){const v=c||this.searchTerm;this.emit("suggest-start",{searchTerm:v});return this._suggestTimer(h,q).then(()=>this._suggestImmediate(v,q).then(C=>{this._set("suggestions",
C.results);this._set("suggestionCount",C.results.reduce((R,U)=>R+U.results.length,0));this.emit("suggest-complete",C);return C}))};J.when=function(){var c=n._asyncToGenerator(function*(){yield u.whenFalseOnce(this,"updating")});return function(){return c.apply(this,arguments)}}();J._update=function(){var c=n._asyncToGenerator(function*(){const {portal:h,view:q}=this;if(this.includeDefaultSources){var v=this._updatingPromise=G.eachAlways([null==h?void 0:h.load(),null==q?void 0:q.when()]);if(this.destroyed)return;
this.notifyChange("updating");yield v;if(v!==this._updatingPromise)return}this._updatingPromise=null;this.notifyChange("updating");v=u.whenOnce(this,"messages");this.destroyed||(this._handles.add(v),yield v,this._updateDefaultSources())});return function(){return c.apply(this,arguments)}}();J._clearSearching=function(){this._searching=null;this.notifyChange("state")};J._convertHelperServices=function(){var c,h;const q=null==(c=this.portal)?void 0:null==(h=c.helperServices)?void 0:h.geocode;return q?
q.map(v=>{if(!1!==v.placefinding){var C=m.apiKey&&E.isArcGISWorldGeocoder(v.url)?{url:E.meteredArcGISLocatorUrl}:null;v=I.fromJSON({...v,...C});C=v.url;(E.isArcGISWorldGeocoder(C)||E.isProxiedArcGISWorldGeocoder(C)||E.isMeteredArcGISWorldGeocoder(C))&&v.set({singleLineFieldName:"SingleLine",outFields:v.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:v.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof v.defaultZoomScale?v.defaultZoomScale:2500});if(v.singleLineFieldName)return v}}).filter(Boolean):
[]};J._getLayerSources=function(c,h){var q;const v=null==(q=this.view)?void 0:q.map;return c.map(C=>{const R=v.findLayerById(C.id);if(R){C=this._getLayerJSON(C);var U=l.fromJSON(C);U.placeholder=h;this._getLayer(R,C).then(ca=>{U.layer=ca});return U}}).filter(Boolean).toArray()};J._getTableSources=function(c,h){var q;const v=null==(q=this.view)?void 0:q.map;return c.map(C=>{const R=v.findTableById(C.id);if(R){C=this._getLayerJSON(C);var U=l.fromJSON(C);U.placeholder=h;this._getLayer(R,C).then(ca=>
{U.layer=ca});return U}}).filter(Boolean).toArray()};J._convertApplicationProperties=function(){var c,h,q;const v=null==(c=this.view)?void 0:c.map;c=null==v?void 0:null==(h=v.applicationProperties)?void 0:null==(q=h.viewing)?void 0:q.search;if(!c)return[];const {enabled:C,hintText:R,layers:U,tables:ca}=c;if(!C)return[];h=this._getLayerSources(U,R);q=this._getTableSources(ca,R);return[...h,...q]};J._getSubLayer=function(c,h){return c.load().then(()=>{if(!c.allSublayers)return Promise.reject();const q=
c.allSublayers.find(v=>v.id===h.subLayer);return q?q.createFeatureLayer():Promise.reject()})};J._getBuildingSubLayer=function(){var c=n._asyncToGenerator(function*(h,q){yield h.load();h=h.allSublayers.find(v=>v.id===q.subLayer);if("building-component"!==(null==h?void 0:h.type))return Promise.reject();yield h.load();if(null==h.associatedLayer)return Promise.reject();yield h.associatedLayer.load();return h});return function(h,q){return c.apply(this,arguments)}}();J._getLayer=function(c,h){return"feature"===
c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,h).catch(()=>{const q=new g("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});T.error(q);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,h):Promise.resolve(null)};J._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};J._updateDefaultSources=function(){const {defaultSources:c,
includeDefaultSources:h}=this;c.removeAll();h&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]);this.notifyChange("allSources")};J._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};J._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};
J._closePopup=function(){var c;const h=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=this);if(h&&c){var {selectedFeature:q}=h;q&&q===c&&h.close()}};J._suggestTimer=function(c,h){return G.after(null!=c?c:this.suggestionDelay,null,h&&h.signal)};J._createLocationForSearch=function(c){return c instanceof f?D.getPointFromGeometry(c.geometry):c instanceof Y?c:Array.isArray(c)&&2===c.length?new Y({longitude:c[0],latitude:c[1]}):null};J._createSuggestionForSearch=function(c){if(c&&P(c,"key")&&P(c,
"text")&&P(c,"sourceIndex"))return c;const h=this._createLocationForSearch(c),q="string"===typeof c?c:this.searchTerm,{selectedSuggestion:v,selectedResult:C}=this,R=(c=!c&&v&&C)&&v.location;return c&&v.key===C.key&&v.sourceIndex===C.sourceIndex||R?v:{location:H.unwrap(h),text:h?"":q,sourceIndex:null,key:null}};J._getFirstResult=function(c){let h=null;c&&c.some(q=>{({results:q}=q);q=q[0];const v=!!q;v&&(h=q);return v});return h};J._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):
Promise.resolve(null)};J._suggestImmediate=function(c,h){return this.when().then(()=>this._getSuggestionsFromSources(c,h)).then(q=>{var v;if(null!=(v=H.unwrap(null==h?void 0:h.signal))&&v.aborted)return null;v={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(v,q);return v})};J._formatSourceResponse=function(c,h,q){const v=h&&h.value||[];h=h&&h.error;const C=this.allSources.getItemAt(q);h?(c.errors.push({sourceIndex:q,source:C,
error:h}),T.error(h),c.numErrors++):(c.results.push({sourceIndex:q,source:C,results:v}),c.numResults+=v.length)};J._formatResponse=function(c,h,q){if(h)if(-1===c.activeSourceIndex){const v=q&&P(q,"sourceIndex")&&-1!==q.sourceIndex?q.sourceIndex:void 0;h.forEach((C,R)=>{this._formatSourceResponse(c,C,void 0!==v?v:R)})}else this._formatSourceResponse(c,h[0],c.activeSourceIndex)};J._getResultsFromSources=function(c,h){var {allSources:q}=this;const v=!c.location&&P(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,
C=[];if(!q.length)return q=new g("search:no-sources-defined","At least one source is required.",{allSources:q}),T.error(q),Promise.reject(q);-1===v?q.forEach((R,U)=>{C.push(this._getResultsFromSource(c,U,h))}):C.push(this._getResultsFromSource(c,v,h));return G.eachAlways(C)};J._getSuggestionsFromSources=function(c,h){const {allSources:q,activeSourceIndex:v}=this,C=[];if(!q.length){const R=new g("suggest:no-sources-defined","At least one source is required.",{allSources:q});T.error(R);return Promise.reject(R)}-1===
v?q.forEach((R,U)=>{C.push(this._getSuggestionsFromSource(c,U,h))}):C.push(this._getSuggestionsFromSource(c,v,h));return G.eachAlways(C)};J._getResultsFromSource=function(c,h,q){var v;const C=this.allSources.getItemAt(h),{location:R=null}=c,U=(null==(v=this.view)?void 0:v.spatialReference)||ia;v=P(C,"maxResults")?C.maxResults:this.maxResults;const ca=C instanceof l&&P(C,"exactMatch")?C.exactMatch:!1,{view:ha}=this;return C.getResults({view:ha,sourceIndex:h,location:R,suggestResult:c,spatialReference:U,
exactMatch:ca,maxResults:v},q)};J._getSuggestionsFromSource=function(c,h,q){const v=this.allSources.getItemAt(h);var C=P(v,"suggestionsEnabled")?v.suggestionsEnabled:this.suggestionsEnabled,R=c.length,U=P(v,"minSuggestCharacters")?v.minSuggestCharacters:this.minSuggestCharacters;if(C&&c.trim()&&R>=U){var ca;C=(null==(ca=this.view)?void 0:ca.spatialReference)||ia;ca=P(v,"maxSuggestions")?v.maxSuggestions:this.maxSuggestions;({view:R}=this);U=v instanceof l&&P(v,"exactMatch")?v.exactMatch:!1;return v.getSuggestions({view:R,
sourceIndex:h,suggestTerm:c,spatialReference:C,maxSuggestions:ca,exactMatch:U},q)}return Promise.resolve(null)};J._getLayerSourcePopupTemplate=function(c){const {layer:h}=c;if(h)return P(c,"popupTemplate")?c.popupTemplate:h.popupTemplate};J._getSourceIndexOfResult=function(c){let h=null;this.results.some(q=>q.results.some(v=>v===c?(h=q.sourceIndex,!0):!1));return h};J._goToSearchResult=function(){var c=n._asyncToGenerator(function*(h){const q=!!h;this._abortGoTo();const v=new AbortController;this._gotoController=
v;yield this.callGoTo({target:{target:h},options:{animate:q,signal:v.signal}});this._gotoController=null});return function(h){return c.apply(this,arguments)}}();J._getDefaultSymbol=function(c){var h;const {defaultSymbols:q}=this;c=null==(h=c.feature)?void 0:h.geometry;if(!H.isSome(c))return null;if((h=this._get("defaultSymbol"))&&("point"===c.type||"multipoint"===c.type))return h;switch(c.type){case "point":case "multipoint":return q.point;case "polyline":return q.polyline;case "extent":case "polygon":return q.polygon;
default:return null}};J._removeHighlight=function(){this._handles.remove("highlight")};J._getLayerView=function(){var c=n._asyncToGenerator(function*(h){const {view:q}=this;if(!h||!q||"building-component"===h.layer.type||"subtype-sublayer"===h.layer.type)return Promise.resolve(null);({layer:h}=h);yield q.when();return q.whenLayerView(h)});return function(h){return c.apply(this,arguments)}}();J._highlightFeature=function(c){const {graphic:h,layerView:q}=c,{attributes:v,layer:C}=h;({objectIdField:c}=
C);c=q.highlight(v&&v[c]||h);this._handles.add(c,"highlight")};J._setResultFloor=function(c){var h,q,v;const {view:C}=this,R=null==(h=c.feature)?void 0:h.attributes;(c=null==(q=c.feature)?void 0:q.sourceLayer)&&"floorInfo"in c&&null!=c&&null!=(v=c.floorInfo)&&v.floorField&&R&&C.emit("select-result-floor",R[c.floorInfo.floorField])};n._createClass(ba,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==
this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){void 0===c?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:h,includeDefaultSources:q}=this,v="function"===typeof q?q.call(null,{sources:c,defaultSources:h}):
q?h.concat(c):c,C=this._get("allSources")||new ea;C.removeAll();C.addMany(v.filter(Boolean));return C}},{key:"defaultSymbol",get:function(){e.deprecatedProperty(T,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});return this._get("defaultSymbol")},set:function(c){e.deprecatedProperty(T,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});this._set("defaultSymbol",c)}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||Q.supported()},set:function(c){if(void 0===
c)this._clearOverride("locationEnabled");else{var h=Q.supported();if(c&&!h){const q=new g("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});T.error(q)}this._override("locationEnabled",c&&h)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:h,allPlaceholder:q}=this;if(-1===h)return q;const v=c.getItemAt(h);return v?v.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",
c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return ba}(S.GoToMixin(d.EventedMixin(A)));r.ALL_INDEX=-1;a.__decorate([y.property({readOnly:!0,value:null})],r.prototype,"activeSource",null);a.__decorate([y.property()],
r.prototype,"activeSourceIndex",null);a.__decorate([y.property()],r.prototype,"allPlaceholder",null);a.__decorate([y.property({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],r.prototype,"allSources",null);a.__decorate([y.property()],r.prototype,"autoNavigate",void 0);a.__decorate([y.property()],r.prototype,"autoSelect",void 0);a.__decorate([y.property()],r.prototype,"defaultPopupTemplate",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"defaultSources",
void 0);a.__decorate([y.property()],r.prototype,"defaultSymbol",null);a.__decorate([y.property()],r.prototype,"defaultSymbols",void 0);a.__decorate([y.property()],r.prototype,"includeDefaultSources",void 0);a.__decorate([y.property()],r.prototype,"locationEnabled",null);a.__decorate([y.property()],r.prototype,"maxInputLength",void 0);a.__decorate([y.property()],r.prototype,"maxResults",void 0);a.__decorate([y.property()],r.prototype,"maxSuggestions",void 0);a.__decorate([y.property()],r.prototype,
"messages",void 0);a.__decorate([y.property()],r.prototype,"minSuggestCharacters",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"placeholder",null);a.__decorate([y.property()],r.prototype,"popupEnabled",void 0);a.__decorate([y.property({type:B})],r.prototype,"popupTemplate",void 0);a.__decorate([y.property({type:k})],r.prototype,"portal",void 0);a.__decorate([y.property()],r.prototype,"resultCount",void 0);a.__decorate([y.property()],r.prototype,"resultGraphicEnabled",void 0);a.__decorate([y.property({readOnly:!0})],
r.prototype,"resultGraphic",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"results",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"selectedSuggestion",void 0);a.__decorate([y.property()],r.prototype,"searchAllEnabled",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"selectedResult",void 0);a.__decorate([y.property()],r.prototype,"searchTerm",null);a.__decorate([y.property({type:ea})],r.prototype,"sources",void 0);a.__decorate([y.property({readOnly:!0,dependsOn:["allSources.length",
"updating"]})],r.prototype,"state",null);a.__decorate([y.property()],r.prototype,"suggestionDelay",void 0);a.__decorate([y.property()],r.prototype,"suggestionCount",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"suggestions",void 0);a.__decorate([y.property()],r.prototype,"suggestionsEnabled",void 0);a.__decorate([y.property({readOnly:!0})],r.prototype,"updating",null);a.__decorate([y.property()],r.prototype,"view",void 0);a.__decorate([y.property()],r.prototype,"clear",null);return r=
a.__decorate([W.subclass("esri.widgets.Search.SearchViewModel")],r)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(n,a){n.extractSafeScaleBounds=function(b){let {minScale:m,maxScale:f}=b;return{minScale:m||0,maxScale:f||0}};n.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};n.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};n.scaleBoundsPredicate=function(b,m,f){return a.isNone(b)||b>f&&(0===m||
b<m)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(n,a,b,m,f,B,r,A){var x;f=x=function(e){function g(p){var t=e.call(this,p)||this;t.displayField=null;t.exactMatch=
null;t.orderByFields=null;t.searchFields=null;t.searchTemplate=null;t.suggestionTemplate=null;t.getResults=(M,H)=>A.getResults({source:n._assertThisInitialized(t),...M},H);t.getSuggestions=(M,H)=>A.getSuggestions({source:n._assertThisInitialized(t),...M},H);return t}n._inheritsLoose(g,e);var d=g.prototype;d.clone=function(){return new x({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?
b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,
zoomScale:this.zoomScale})};d._getFirstStringField=function(){var p,t;return null!=(p=null==(t=this.layer.fieldsIndex.fields.find(M=>"string"===M.type))?void 0:t.name)?p:""};d._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};d._getSearchFieldsString=function(){const {layer:p,searchFields:t}=this;return p.loaded?`: ${(t||[this._getDisplayField()]).map(M=>{const H=p.getField(M);return H&&H.alias||M}).join(", ")}`:""};d._getLayerTitle=function(){var {layer:p}=
this;if(p&&({title:p}=p,p))return`${p}${this._getSearchFieldsString()}`};n._createClass(g,[{key:"layer",set:function(p){this._set("layer",p);p&&p.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(p){void 0===p?this._clearOverride("name"):this._override("name",p)}}]);return g}(r);a.__decorate([m.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],f.prototype,"displayField",void 0);a.__decorate([m.property({json:{read:{source:"field.exactMatch"},
write:{target:"field.exactMatch"}}})],f.prototype,"exactMatch",void 0);a.__decorate([m.property({value:null})],f.prototype,"layer",null);a.__decorate([m.property()],f.prototype,"name",null);a.__decorate([m.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);a.__decorate([m.property()],f.prototype,"searchFields",void 0);a.__decorate([m.property()],f.prototype,"searchTemplate",void 0);a.__decorate([m.property()],f.prototype,"suggestionTemplate",void 0);return f=x=a.__decorate([B.subclass("esri.widgets.Search.LayerSearchSource")],
f)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(n,a,b,m,f,B,r,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.autoNavigate=null;d.filter=null;d.getResults=null;d.getSuggestions=null;
d.maxResults=null;d.maxSuggestions=null;d.minSuggestCharacters=null;d.outFields=null;d.placeholder="";d.popupEnabled=null;d.popupTemplate=null;d.prefix="";d.resultGraphicEnabled=null;d.resultSymbol=null;d.suggestionsEnabled=null;d.suffix="";d.withinViewEnabled=!1;d.zoomScale=null;return d}n._inheritsLoose(g,e);return g}(b.IdentifiableMixin(m.JSONSupport));a.__decorate([f.property()],b.prototype,"autoNavigate",void 0);a.__decorate([f.property()],b.prototype,"filter",void 0);a.__decorate([f.property()],
b.prototype,"getResults",void 0);a.__decorate([f.property()],b.prototype,"getSuggestions",void 0);a.__decorate([f.property()],b.prototype,"maxResults",void 0);a.__decorate([f.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([f.property()],b.prototype,"outFields",void 0);a.__decorate([f.property()],b.prototype,"placeholder",void 0);a.__decorate([f.property()],b.prototype,"popupEnabled",void 0);a.__decorate([f.property()],
b.prototype,"popupTemplate",void 0);a.__decorate([f.property()],b.prototype,"prefix",void 0);a.__decorate([f.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([f.property()],b.prototype,"resultSymbol",void 0);a.__decorate([f.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property()],b.prototype,"suffix",void 0);a.__decorate([f.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([f.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([x.subclass("esri.widgets.Search.SearchSource")],
b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),function(n,a,b,m,f,B,r,A,x,e,g,d){function p(z,D){const {filter:E,withinViewEnabled:Q}=z;z=D&&D.extent;return E&&E.geometry||(Q&&z?z:void 0)}function t(z){return M.apply(this,
arguments)}function M(){M=a._asyncToGenerator(function*(z){z&&(yield z.load())});return M.apply(this,arguments)}function H(z){var D,E,Q;return null!=(D=null==z?void 0:null==(E=z.capabilities)?void 0:null==(Q=E.query)?void 0:Q.supportsPagination)?D:!1}function G(z){var D,E,Q,S;return null!=(D=null==z?void 0:null==(E=z.fieldsIndex)?void 0:null==(Q=E.fields)?void 0:null==(S=Q.find(L=>"string"===L.type))?void 0:S.name)?D:""}function u(z,D){return z&&D?D.every(E=>!!z.getField(E)):!1}function y(z,D,E){let Q=
null;({codedValues:z}=z);z&&z.some(S=>{var L=S.name;L=E?L:L.toLowerCase();return(E?D:D.toLowerCase())===L?(Q=S.code.toString(),!0):!1});return Q}function N(z,D){return(D=D&&D.where)?`(${z}) AND (${D})`:z}function K({currentTerm:z,field:D,filter:E,exactMatch:Q,url:S,type:L}){var O=D.type;D=D.name;if("string"===O||"date"===O||"global-id"===O){if(O=S=w.test(S))a:{for(O=0;O<z.length;O++)if(255<z.charCodeAt(O)){O=!0;break a}O=!1}O=O?"N":"";if(Q&&"search"===L)return N(`${D} = ${O}'${z}'`,E);L=S?D:`UPPER(${D})`;
z=S?z:z.toUpperCase();return N(`${L} LIKE ${O}${Q?`'${z}%'`:`'%${z}%'`}`,E)}return"oid"===O||"small-integer"===O||"integer"===O||"single"===O||"double"===O?(Q=Number(z),isNaN(Q)?null:N(`${D} = ${Q}`,E)):N(`${D} = ${z}`,E)}function W({searchTerm:z,layer:D,searchFields:E,filter:Q,exactMatch:S,type:L}){const {definitionExpression:O,url:V}=D;let X="";z&&E&&E.forEach(P=>{var T=D.getField(P);P=((P="function"===typeof D.getFieldDomain&&D.getFieldDomain(P))&&"coded-value"===P.type?y(P,z,S):null)||z||null;
null!==P&&(T=K({currentTerm:P,field:T,filter:Q,exactMatch:S,url:V,type:L}))&&(X+=X?` OR (${T})`:`(${T})`)});return O?`(${O}) AND (${X})`:X}function Y(z,D){let E=null;({codedValues:z}=z);z&&z.length&&z.some(Q=>Q.code===D?(E=Q.name,!0):!1);return E}function aa(z,D){return z[Object.keys(z).find(E=>E.toLowerCase()===D.toLowerCase())]}function Z(z,D,E){const Q=z.sourceLayer,{attributes:S}=z;z="function"===typeof Q.getFieldDomain&&Q.getFieldDomain(E);return D?g.substitute(D,S):E&&S?(D=Q.getField(E),E=aa(S,
E),null==E?"":z&&"coded-value"===z.type?Y(z,E):"date"===(null==D?void 0:D.type)?d.formatDate(new Date(E)):"number"===typeof E?E.toString():"string"!==typeof E?"":E.trim()):""}function F(z,D,E,Q){return z.features.map(S=>{var L=S.sourceLayer,{attributes:O}=S;({objectIdField:L}=L);O=O[L];return S={text:Z(S,D.suggestionTemplate,Q),key:O,sourceIndex:E}})}function k(z,D,E,Q,S,L,O){return z.features.map(V=>{{var X=V.clone();var P=V.sourceLayer;P=(P=P&&P.objectIdField)&&V.attributes[P];const ea=Z(V,E.searchTemplate,
S);var T=e.createExtentFromGeometry(X.geometry,D,L);T="number"===typeof O?e.scaleExtent(f.clone(T),D,O):T;V=V.clone();r.isSome(T)&&(V.geometry=x.fromExtent(T));X={extent:T,target:V,feature:X,key:P,name:ea,sourceIndex:Q}}return X})}const w=/https?:\/\/services.*\.arcgis\.com/i,l=/(?:\{([^}]+)\})/g,I=B.getLogger("esri.widgets.Search.support.layerSearchUtils");n.getResults=function(z,D){const {exactMatch:E=!1,location:Q,maxResults:S,spatialReference:L,source:O,sourceIndex:V,suggestResult:X,view:P}=z,
{layer:T,filter:ea,zoomScale:ia}=O,fa=P&&P.scale,da=p(O,P),ba=D&&D.signal;return t(T).then(()=>{const J=T.popupTemplate;return J?J.getRequiredFields(T.fieldsIndex):null}).then(J=>{var c,h,q;const {objectIdField:v,returnZ:C}=T,R=O.displayField||O.layer.displayField||G(O.layer);if(!T.getField(R))throw I.error("invalid-field: displayField is invalid."),new m("getResults():invalid-field","displayField is invalid.");J=J&&J.length?J:[R];var U=(J=O.outFields||J)&&-1!==J.indexOf("*");-1!==J.indexOf(v)||U||
J.push(v);null!=(c=T.floorInfo)&&c.floorField&&J.push(T.floorInfo.floorField);if(!U&&!u(T,J))throw I.error("invalid-field: outField is invalid."),new m("getResults():invalid-field","outField is invalid.");c=T.createQuery();({orderByFields:U}=O);U&&(c.orderByFields=U);L&&(c.outSpatialReference=L,U=1/A.getMetersPerUnitForSR(L))&&(c.maxAllowableOffset=U);U="mesh"===T.geometryType||"multipatch"===T.geometryType;const ca=(null==(h=T.capabilities)?void 0:null==(q=h.data)?void 0:q.supportsZ)&&!U;c.returnZ=
ca&&!1!==C;c.returnGeometry=!0;c.multipatchOption=U?"xyFootprint":null;J&&(c.outFields=J);if(Q)c.geometry=Q;else if(X.key)c.objectIds=[X.key];else{h=O.searchFields||[R];if(!u(T,h))throw I.error("invalid-field: search field is invalid."),new m("getResults():invalid-field","search field is invalid.");H(T)&&(c.num=S);da&&(c.geometry=da);if(!X.text.trim())return[];const {prefix:ha="",suffix:pa=""}=O;q=`${ha}${X.text}${pa}`.replace(/'/g,"''");h=W({searchTerm:q,layer:T,searchFields:h,filter:ea,exactMatch:E,
type:"search"});if(!h)return[];c.where=h}return T.queryFeatures(c,{signal:ba}).then(ha=>k(ha,P,O,V,R,fa,ia))})};n.getSuggestions=function(z,D){const {source:E,spatialReference:Q,view:S,suggestTerm:L,maxSuggestions:O,sourceIndex:V,exactMatch:X}=z,{layer:P,filter:T}=E,ea=D&&D.signal,ia=p(E,S);return t(P).then(()=>{if(!H(P))return[];const fa=E.displayField||E.layer.displayField||G(E.layer);var da=E.searchFields||[fa];const ba=[];E.suggestionTemplate?E.suggestionTemplate.replace(l,(C,R)=>{ba.push(R);
return C}):ba.push(fa);var J=ba&&-1!==ba.indexOf("*");-1!==ba.indexOf(P.objectIdField)||J||ba.push(P.objectIdField);var c=!!P.getField(fa);J=J||u(P,ba);const h=u(P,da);if(!c)throw I.error("invalid-field: displayField is invalid."),new m("getSuggestions():invalid-field","displayField is invalid.");if(!J)throw I.error("invalid-field: outField is invalid."),new m("getSuggestions():invalid-field","outField is invalid.");if(!h)throw I.error("invalid-field: search field is invalid."),new m("getSuggestions():invalid-field",
"search field is invalid.");c=P.createQuery();({orderByFields:J}=E);J&&(c.orderByFields=J);c.outSpatialReference=Q;c.returnGeometry=!1;c.num=O;c.outFields=ba;ia&&(c.geometry=ia);if(!L.trim())return[];const {prefix:q="",suffix:v=""}=E;J=`${q}${L}${v}`.replace(/'/g,"''");da=W({searchTerm:J,layer:P,searchFields:da,filter:T,exactMatch:X,type:"suggest"});if(!da)return[];c.where=da;return P.queryFeatures(c,{signal:ea}).then(C=>F(C,E,V,fa))})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),
function(n,a,b,m,f,B,r){function A(e,g,d){const p=e.hasZ?e.z:void 0;return g&&g.map?(d?B.getExtentForScale(g,d):g.extent).clone().centerAt(e).set({zmax:p,zmin:p}):new r({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:p,zmax:p})}const x=m.getLogger("esri.widgets.Search.support.geometryUtils");n.createExtentFromGeometry=function(e,g,d){if(f.isNone(e))return null;if("extent"===e.type)return e;if("multipoint"===e.type||"polygon"===e.type||"polyline"===e.type)return e.extent;
if("point"===e.type)return A(e,g,d)};n.getPointFromGeometry=function(e){if(f.isNone(e))return null;switch(e.type){case "point":return e;case "extent":return e.center;case "polygon":return e.centroid;case "multipoint":return e.getPoint(0);case "polyline":return e.getPoint(0,0)}return null};n.getPointWithElevation=function(e,g){var d,p;if(!g)return x.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!e)return x.error("missing-parameter: point is missing."),
Promise.reject(new b("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===g.type)return Promise.resolve(e);const t=null==g?void 0:null==(d=g.map)?void 0:d.ground;return t&&t.layers.length?t.queryElevation(e,{cache:null==(p=g.basemapTerrain)?void 0:p.elevationQueryCache}).then(M=>M.geometry):Promise.resolve(e)};n.scaleExtent=function(e,g,d){return f.isNone(e)||f.isNone(g)?null:A(e.center,g,d)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/deprecate ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g){var d;const p=f.getLogger("esri.widgets.Search.LocatorSearchSource");f=d=function(t){function M(H){var G=t.call(this,H)||this;G.apiKey=null;G.categories=null;G.countryCode=null;G.defaultZoomScale=null;G.localSearchDisabled=!1;G.locationType=null;G.name="";G.placeholder="";G.searchTemplate="";G.singleLineFieldName=null;G.suggestionsEnabled=null;G.url=null;G.zoomScale=null;G.getResults=(u,y)=>g.getResults({source:n._assertThisInitialized(G),...u},y);G.getSuggestions=
(u,y)=>g.getSuggestions({source:n._assertThisInitialized(G),...u},y);return G}n._inheritsLoose(M,t);M.prototype.clone=function(){return new d({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?m.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,
resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?m.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};n._createClass(M,[{key:"locator",get:function(){b.deprecatedProperty(p,"locator",{replacement:"url",
version:"4.22"});return this._get("locator")},set:function(H){b.deprecatedProperty(p,"locator",{replacement:"url",version:"4.22"});this._set("url",H.url);this._set("locator",H)}}]);return M}(e);a.__decorate([B.property()],f.prototype,"apiKey",void 0);a.__decorate([B.property()],f.prototype,"categories",void 0);a.__decorate([B.property()],f.prototype,"countryCode",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"defaultZoomScale",void 0);a.__decorate([B.property()],f.prototype,"localSearchDisabled",
void 0);a.__decorate([B.property({type:x,json:{read:!1,write:!1}})],f.prototype,"locator",null);a.__decorate([B.property()],f.prototype,"locationType",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"name",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"placeholder",void 0);a.__decorate([B.property()],f.prototype,"searchTemplate",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"singleLineFieldName",void 0);a.__decorate([B.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],f.prototype,"suggestionsEnabled",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"url",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"zoomScale",void 0);return f=d=a.__decorate([A.subclass("esri.widgets.Search.LocatorSearchSource")],f)})},"esri/tasks/Locator":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../rest/locator/addressToLocations ../rest/locator/addressesToLocations ../rest/locator/locationToAddress ../rest/locator/suggestLocations ./Task".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g,d,p){m=function(t){function M(G){G=t.call(this,G)||this;G.outSpatialReference=null;G.url=null;return G}n._inheritsLoose(M,t);var H=M.prototype;H.addressToLocations=function(G,u){!G.outSpatialReference&&this.outSpatialReference&&(G.outSpatialReference=this.outSpatialReference);return x.addressToLocations(this.url,G,{...this.requestOptions,...u})};H.suggestLocations=function(G,u){return d.suggestLocations(this.url,G,{...this.requestOptions,...u})};H.addressesToLocations=
function(G,u){!G.outSpatialReference&&this.outSpatialReference&&(G.outSpatialReference=this.outSpatialReference);return e.addressesToLocations(this.url,G,{...this.requestOptions,...u})};H.locationToAddress=function(G,u){!G.outSpatialReference&&this.outSpatialReference&&(G.outSpatialReference=this.outSpatialReference);return g.locationToAddress(this.url,G,{...this.requestOptions,...u})};return M}(p);a.__decorate([b.property({type:A})],m.prototype,"outSpatialReference",void 0);a.__decorate([b.property()],
m.prototype,"url",void 0);return m=a.__decorate([r.subclass("esri.tasks.Locator")],m)})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),function(n,a,b,m,f,B,r){function A(){A=a._asyncToGenerator(function*(e,g,d){g=r.from(g);e=m.parseUrl(e);const {address:p,...t}=g.toJSON();g=m.encode({...e.query,...p,...t,f:"json"});d=m.asValidOptions(g,
d);return b(`${e.path}/findAddressCandidates`,d).then(x)});return A.apply(this,arguments)}function x({data:e}){if(!e)return[];const {candidates:g,spatialReference:d}=e;return g?g.map(p=>{if(p){var {extent:t,location:M}=p,H=t?f.isValidExtent(t):!0;if(f.isValidLocation(M)&&H)return t&&(t.spatialReference=d),M.spatialReference=d,B.fromJSON(p)}}):[]}n.addressToLocations=function(e,g,d){return A.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/locator/utils":function(){define(["exports"],
function(n){n.isValidExtent=function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};n.isValidLocation=function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y};n.normalizeExtent=function(a){return a?a.shiftCentralMeridian():null};n.normalizePoint=function(a){return a?a.clone().normalize():null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(n,a,b,m,f,B,r,A,x,e){b=function(g){function d(p){p=g.call(this,p)||this;p.address=null;p.attributes=null;p.extent=null;p.location=null;p.score=null;return p}n._inheritsLoose(d,g);return d}(b.JSONSupport);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([m.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([m.property({type:x,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([m.property({type:e,
json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([m.property({type:Number,json:{write:!0}})],b.prototype,"score",void 0);return b=a.__decorate([A.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g,d,p){b=function(t){function M(H){H=t.call(this,H)||this;H.address=null;H.apiKey=null;H.categories=null;H.countryCode=null;H.forStorage=null;H.location=null;H.locationType=null;H.magicKey=null;H.maxLocations=null;H.outFields=null;H.outSpatialReference=null;H.searchExtent=null;return H}n._inheritsLoose(M,t);return M}(m.JSONSupport);a.__decorate([f.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,M)=>{M.category=t?t.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(t,M)=>{M.location=t?t.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([f.property({type:[String],json:{write:{writer:(t,M)=>{M.outFields=t?t.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(t,M)=>{t=t?t.shiftCentralMeridian():null;M.searchExtent=t}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([x.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(n){n.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/rest/locator/addressesToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/AddressesToLocationsParameters".split(" "),function(n,a,b,m,f,B){function r(){r=a._asyncToGenerator(function*(x,e,g){e=B.from(e);x=m.parseUrl(x);e={...e.toJSON(),f:"json"};e=m.encode({...x.query,...e});g=m.asValidOptions(e,g);return b(`${x.path}/geocodeAddresses`,g).then(A)});return r.apply(this,arguments)}
function A(x){({data:x}=x);if(!x)return[];const {locations:e,spatialReference:g}=x;return e?e.map(d=>{const {location:p}=d;p&&(p.spatialReference=g);return f.fromJSON(d)}):[]}n.addressesToLocations=function(x,e,g){return r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(n,a,b,m,f,B,r,A,x,e){b=function(g){function d(p){p=g.call(this,p)||this;p.addresses=null;p.categories=null;p.countryCode=null;p.locationType=null;p.outSpatialReference=null;return p}n._inheritsLoose(d,g);return d}(m.JSONSupport);a.__decorate([f.property({type:[Object],json:{read:{reader:g=>g&&g.records?g.records.map(d=>d.attributes):null},write:{writer:(g,d)=>{const p=[];Array.isArray(g)&&g.forEach(t=>{p.push({attributes:t})});d.addresses={records:p}}}}})],b.prototype,"addresses",void 0);
a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:g=>g?g.split(","):null},write:{target:"category",writer:(g,d)=>{d.category=g?g.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:e,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([x.subclass("esri.rest.support.AddressesToLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(n,a,b,m,f,B){function r(){r=a._asyncToGenerator(function*(x,e,g){e=B.from(e);x=m.parseUrl(x);e={...e.toJSON(),
f:"json"};e=m.encode({...x.query,...e});g=m.asValidOptions(e,g);return b(`${x.path}/reverseGeocode`,g).then(A)});return r.apply(this,arguments)}function A({data:x}){if(x){var {address:e,location:g}=x;return f.fromJSON({address:e&&e.Match_addr||"",attributes:e||{},location:g,score:100})}}n.locationToAddress=function(x,e,g){return r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g,d){b=function(p){function t(M){M=p.call(this,M)||this;M.apiKey=null;M.location=null;M.locationType=null;M.outSpatialReference=null;return M}n._inheritsLoose(t,p);return t}(m.JSONSupport);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(p,t)=>{p=p?p.clone().normalize():null;t.location="undefined"!==typeof p?p:null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([x.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(n,a,b,
m,f,B){function r(){r=a._asyncToGenerator(function*(x,e,g){x=m.parseUrl(x);e=B.from(e);e={...e.toJSON(),f:"json"};e=m.encode({...x.query,...e});g=m.asValidOptions(e,g);return b(`${x.path}/suggest`,g).then(A)});return r.apply(this,arguments)}function A(x){({data:x}=x);if(!x)return[];({suggestions:x}=x);return x?x.map(e=>new f(e)):[]}n.suggestLocations=function(x,e,g){return r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,m,f,B,r,A){b=function(x){function e(g){g=x.call(this,g)||this;g.isCollection=null;g.magicKey=null;g.text=null;return g}n._inheritsLoose(e,x);return e}(b.JSONSupport);a.__decorate([m.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([A.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(n,a,b,m,f,B,r,A,x,e,g,d,p){b=function(t){function M(H){H=
t.call(this,H)||this;H.apiKey=null;H.categories=null;H.countryCode=null;H.location=null;H.maxSuggestions=null;H.outSpatialReference=null;H.searchExtent=null;H.text=null;return H}n._inheritsLoose(M,t);return M}(m.JSONSupport);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,M)=>{M.category=t?t.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(t,M)=>{M.location=t?t.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(t,M)=>{t=t?t.shiftCentralMeridian():
null;M.searchExtent=JSON.stringify(t)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([x.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g){function d(u,y){if(y.localSearchDisabled)return null;y=null==u?void 0:u.scale;return"number"===typeof y&&3E5>=y?u.get("extent.center"):null}function p(u,y){const {source:N,spatialReference:K,location:W,sourceIndex:Y,view:aa}=u,{apiKey:Z,url:F,zoomScale:k,defaultZoomScale:w}=N,l=aa&&aa.scale;u=y&&y.signal;y=new x;y.location=W;Z&&(y.apiKey=Z);K&&(y.outSpatialReference=K);return B.locationToAddress(F,y,{signal:u}).then(I=>G([I],{sourceIndex:Y,scale:l,view:aa,zoomScale:k,
defaultZoomScale:w}))}function t(u,y){const {filter:N,withinViewEnabled:K}=u;u=y&&y.extent;return(y=g.createExtentFromGeometry(N&&N.geometry,y,y&&y.scale))||(K&&u?u:void 0)}function M(u,y){const {source:N,suggestResult:K,spatialReference:W,view:Y,maxResults:aa,sourceIndex:Z}=u,F=N&&N.zoomScale,k=N&&N.defaultZoomScale;if(!K.text.trim())return Promise.resolve(null);u=`${!K.key&&N.prefix?N.prefix:""}${K.text}${!K.key&&N.suffix?N.suffix:""}`;const w=new A,{apiKey:l,url:I}=N,z=Y&&Y.scale;var D=t(N,Y);
y=y&&y.signal;l&&(w.apiKey=l);if(!I)return Promise.resolve(null);N.categories&&(w.categories=N.categories);N.locationType&&(w.locationType=N.locationType);W&&(w.outSpatialReference=W);const E=d(Y,N);E&&(w.location=E);w.maxLocations=aa;D&&(w.searchExtent=b.unwrap(D));N.countryCode&&(w.countryCode=N.countryCode);({key:D}=K);const Q=`${D}`;D&&(w.magicKey=Q);w.address={};w.address[N.singleLineFieldName||"Single Line Input"]=u;N.outFields&&(w.outFields=N.outFields);return f.addressToLocations(I,w,{signal:y}).then(S=>
G(S,{key:Q,scale:z,sourceIndex:Z,view:Y,zoomScale:F,defaultZoomScale:k}))}function H(u,y){return u.map(N=>({text:N.text,key:N.magicKey,sourceIndex:y}))}function G(u,y){return u.filter(Boolean).map(N=>{{const {key:Y,scale:aa,sourceIndex:Z,view:F,zoomScale:k,defaultZoomScale:w}=y,{attributes:l,extent:I,location:z,address:D}=N;N=new a({geometry:z,attributes:l});var K=I||z,W=g.createExtentFromGeometry(K,F,aa);K="number"===typeof k?g.scaleExtent(W,F,k):"number"===typeof w&&"point"===K.type?g.scaleExtent(W,
F,w):W;W=z?`${z.x},${z.y}`:"";W=D||W;const E=N.clone();b.isSome(K)&&(E.geometry=m.fromExtent(K));N={extent:K,feature:N,target:E,key:Y,name:W,sourceIndex:Z}}return N})}n.getLocation=d;n.getResults=function(u,y){return u.location?p(u,y):M(u,y)};n.getSuggestions=function(u,y){const {source:N,spatialReference:K,view:W,suggestTerm:Y,maxSuggestions:aa,sourceIndex:Z}=u;u=new e;const {apiKey:F,url:k}=N,w=t(N,W);y=y&&y.signal;if(!k)return Promise.resolve(null);F&&(u.apiKey=F);N.categories&&(u.categories=N.categories);
K&&(u.outSpatialReference=K);const l=d(W,N);l&&(u.location=l);if(!Y.trim())return Promise.resolve(null);const {prefix:I="",suffix:z=""}=N;u.text=`${I}${Y}${z}`;w&&(u.searchExtent=b.unwrap(w));u.maxSuggestions=aa;N.countryCode&&(u.countryCode=N.countryCode);return r.suggestLocations(k,u,{signal:y}).then(D=>H(D,Z))};n.isArcGISWorldGeocoder=function(u){return u?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(u):!1};n.isMeteredArcGISWorldGeocoder=function(u){return u?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(u):
!1};n.isProxiedArcGISWorldGeocoder=function(u){return u?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(u):!1};n.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../core/unitUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/support/GeneralizeParameters ../../tasks/operations/generalize ../../rest/support/LengthsParameters ../../tasks/operations/lengths ../../rest/support/OffsetParameters ../../tasks/operations/offset ../../rest/geometryService/project ../../rest/support/RelationParameters ../../tasks/operations/relation ../../rest/support/TrimExtendParameters ../../tasks/operations/trimExtend ../../rest/support/ProjectParameters".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g,d,p,t,M,H,G,u,y,N,K,W,Y,aa,Z,F,k,w,l,I,z){function D(L,O,V){if(!O)return Promise.resolve(L);const X=O.spatialReference;return X.isWGS84?Promise.resolve(L):X.isWebMercator?Promise.resolve(r.geographicToWebMercator(L)):E(V).then(P=>{if(!P)throw new b("geometry-service:missing-url","Geometry service URL is missing");const T=new z({geometries:[L],outSpatialReference:X});return F.project(P,T,V).then(ea=>ea[0])})}function E(L){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const O=A.getDefault();return O.load(L).catch(()=>{}).then(()=>O.get("helperServices.geometry.url"))}const Q=f.getLogger("esri.widgets.support.geolocationUtils"),S={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};n.getCurrentPosition=function(L){L||(L=S);return new Promise((O,V)=>{setTimeout(()=>V(new b("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(O,V,L)})};n.positionToPoint=function(L,O){const {position:V,view:X}=L;L=
V&&V.coords||{};L={accuracy:L.accuracy,altitude:L.altitude,altitudeAccuracy:L.altitudeAccuracy,heading:L.heading,latitude:L.latitude,longitude:L.longitude,speed:L.speed};L=V?{coords:L,timestamp:V.timestamp}:V;L=(L=L&&L.coords)?new B({longitude:L.longitude,latitude:L.latitude,z:L.altitude||null,spatialReference:{wkid:4326}}):null;return D(L,X,O)};n.supported=function(){var L;(L=m("esri-geolocation"))||Q.warn("geolocation-unsupported","Geolocation unsupported.");L&&((L=window.isSecureContext)||Q.warn("insecure-context",
"Geolocation requires a secure origin."));return L};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(n,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n.conversionTypeKebabDict=a;n.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,
UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,
UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,
UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",
UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,m,f,B,r,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.deviationUnit=null;d.geometries=null;d.maxDeviation=null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([m.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([m.property({type:Number,json:{write:!0}})],
b.prototype,"maxDeviation",void 0);b=a.__decorate([A.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=r.ensureType(b);return b})},"esri/tasks/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const m=new a.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});n.generalizeToRESTParameters=
function(f){const {geometries:B,deviationUnit:r,maxDeviation:A}=f.toJSON();f={maxDeviation:A};B&&B.length&&(f.geometries=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B}),f.sr=JSON.stringify(B[0].spatialReference));m.write(r,f,"deviationUnit");return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g){b=function(d){function p(t){t=d.call(this,t)||this;t.calculationType=null;t.geodesic=null;t.lengthUnit=null;t.polylines=null;return t}n._inheritsLoose(p,d);return p}(m.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([f.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([f.property({type:[g],
json:{read:{reader:d=>d?d.map(p=>e.fromJSON(p)):null},write:{writer:(d,p)=>{p.polylines=d.map(t=>t.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([x.subclass("esri.rest.support.LengthsParameters")],b);b.from=A.ensureType(b);return b})},"esri/tasks/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});n.lengthsToRESTParameters=function(m){const {polylines:f,lengthUnit:B,geodesic:r,calculationType:A}=
m.toJSON(),x={};x.polylines=JSON.stringify(f);m=m.polylines[0].spatialReference;x.sr=m.wkid?m.wkid:JSON.stringify(m.toJSON());B&&(x.lengthUnit=B);r&&(x.geodesic=r);A&&(x.calculationType=b.toJSON(A));return x};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,m,f,B,r,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.bevelRatio=null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([m.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([m.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([m.property({type:Number,
json:{write:!0}})],b.prototype,"offsetDistance",void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([A.subclass("esri.rest.support.OffsetParameters")],b);b.from=r.ensureType(b);return b})},"esri/tasks/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const m=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",
esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),f=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});n.offsetToRESTParameters=function(B){const {geometries:r,bevelRatio:A,offsetDistance:x,offsetHow:e,offsetUnit:g}=B.toJSON();B={bevelRatio:A,offsetDistance:x};r&&r.length&&(B.geometries=JSON.stringify({geometryType:b.getJsonType(r[0]),geometries:r}),B.sr=JSON.stringify(r[0].spatialReference));e&&(B.offsetHow=m.toJSON(e));
g&&(B.offsetUnit=f.toJSON(g));return B};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(n,a,b,m,f,B,r,A){function x(){x=a._asyncToGenerator(function*(g,d,p){d=e(d);g=B.parseUrl(g);const t={...g.query,f:"json",...d.toJSON()},M=d.outSpatialReference,
H=f.getJsonType(d.geometries[0]);d=B.asValidOptions(t,p);return b(g.path+"/project",d).then(({data:{geometries:G}})=>r.decodeGeometries(G,H,M))});return x.apply(this,arguments)}const e=m.ensureType(A);n.project=function(g,d,p){return x.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(n,a){n.decodeGeometries=function(b,m,f){const B=a.getGeometryType(m);return b.map(r=>
{r=B.fromJSON(r);r.spatialReference=f;return r})};n.encodeGeometries=function(b){return{geometryType:a.getJsonType(b[0]),geometries:b.map(m=>m.toJSON())}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,m,f,B,r,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.geometries=null;d.outSpatialReference=null;d.transformation=null;d.transformForward=null;return d}n._inheritsLoose(g,e);g.prototype.toJSON=function(){const d=this.geometries.map(function(M){return M.toJSON()}),p=this.geometries[0],t={};t.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());t.inSR=p.spatialReference.wkid||JSON.stringify(p.spatialReference.toJSON());t.geometries=JSON.stringify({geometryType:x.getJsonType(p),
geometries:d});this.transformation&&(t.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(t.transformForward=this.transformForward);return t};return g}(b.JSONSupport);a.__decorate([m.property()],b.prototype,"geometries",void 0);a.__decorate([m.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([m.property()],b.prototype,"transformation",void 0);a.__decorate([m.property()],b.prototype,"transformForward",
void 0);return b=a.__decorate([A.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,m,f,B,r,A,x){b=function(e){function g(d){d=
e.call(this,d)||this;d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([m.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries1=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries1",void 0);a.__decorate([m.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries2=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries2",
void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([A.subclass("esri.rest.support.RelationParameters")],b);b.from=r.ensureType(b);return b})},"esri/tasks/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const m=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",
esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});n.relationToRESTParameters=function(f){const {geometries1:B,geometries2:r,
relation:A,relationParameter:x}=f.toJSON();f={};if(B&&B.length){f.geometries1=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B});const e=B[0].spatialReference;f.sr=e.wkid?e.wkid:JSON.stringify(e)}r&&0<r.length&&(f.geometries2=JSON.stringify({geometryType:b.getJsonType(r[0]),geometries:r}));A&&(f.relation=m.toJSON(A));x&&(f.relationParam=x);return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,m,f,B,r,A,x,e,g){b=function(d){function p(t){t=d.call(this,t)||this;t.extendHow="default-curve-extension";t.polylines=null;t.trimExtendTo=null;return t}n._inheritsLoose(p,d);return p}(m.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([f.property({type:[g],json:{read:{reader:d=>d?d.map(p=>e.fromJSON(p)):null},write:{writer:(d,p)=>{p.polylines=d.map(t=>t.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([f.property({json:{read:{reader:d=>
d?e.fromJSON(d):null},write:{writer:(d,p)=>{p.trimExtendTo=d.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([x.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=A.ensureType(b);return b})},"esri/tasks/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});n.trimExtendToRESTParameters=
function(m){const {extendHow:f,polylines:B,trimExtendTo:r}=m.toJSON();m={};m.extendHow=b.toJSON(f);B&&B.length&&(m.polylines=JSON.stringify(B),m.sr=JSON.stringify(B[0].spatialReference));r&&(m.trimExtendTo=JSON.stringify(r));return m};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,m,f,B,r,A){n.GoToMixin=x=>{x=function(e){function g(...d){d=e.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}a._inheritsLoose(g,e);g.prototype.callGoTo=function(d){const {view:p}=this;return this.goToOverride?this.goToOverride(p,d):p.goTo(d.target,d.options)};return g}(x);b.__decorate([m.property()],x.prototype,"goToOverride",void 0);b.__decorate([m.property()],x.prototype,"view",void 0);return x=b.__decorate([A.subclass("esri.widgets.support.GoTo")],x)};Object.defineProperty(n,
"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(n,
a,b,m,f,B,r,A,x,e,g,d,p,t,M,H,G,u,y,N,K,W){const Y=/<[a-z/][\s\S]*>/i;b=function(aa){function Z(k,w){var l=aa.call(this,k,w)||this;l._activeMenuItemIndex=-1;l._handles=new f;l._inputNode=null;l._menuItemCount=0;l._sourceMenuButtonNode=null;l._sourceListNode=null;l._suggestionListNode=null;l._searchResultRenderer=new M;l._locateFailed=null;l._container=null;l.activeMenu="none";l.activeSource=null;l.activeSourceIndex=null;l.allPlaceholder=null;l.allSources=null;l.autoNavigate=null;l.autoSelect=null;
l.defaultSources=null;l.disabled=!1;l.goToOverride=null;l.iconClass="esri-icon-search";l.includeDefaultSources=null;l.label=void 0;l.locationEnabled=null;l.maxResults=null;l.maxSuggestions=null;l.messages=null;l.messagesCommon=null;l.minSuggestCharacters=null;l.popupEnabled=null;l.popupTemplate=null;l.portal=null;l.resultGraphic=null;l.resultGraphicEnabled=null;l.results=null;l.searchAllEnabled=null;l.searchTerm=null;l.selectedResult=null;l.sources=null;l.suggestions=null;l.suggestionsEnabled=null;
l.view=null;l.viewModel=new H;l._clearActiveMenu=()=>{l.activeMenu="none"};l._removeActiveMenu=I=>{var z;(I=I.relatedTarget)&&null!=(z=l._container)&&z.contains(I)||l._clearActiveMenu()};l.own(r.watch(n._assertThisInitialized(l),"searchTerm",I=>{(I&&"warning"===l.activeMenu||!I&&!l.get("viewModel.selectedSuggestion.location"))&&l._clearActiveMenu()}),r.on(n._assertThisInitialized(l),"viewModel.allSources","change",()=>l._watchSourceChanges()),r.init(n._assertThisInitialized(l),"activeMenu",()=>l._resetActiveMenuItemIndex()),
r.init(n._assertThisInitialized(l),"viewModel.defaultPopupTemplate",I=>{I&&(I.content=l._renderSearchResultsContent.bind(n._assertThisInitialized(l)))}));return l}n._inheritsLoose(Z,aa);var F=Z.prototype;F.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};F.clear=function(){};F.focus=function(){var k;null==
(k=this._inputNode)?void 0:k.focus();this.emit("search-focus")};F.blur=function(){var k;null==(k=this._inputNode)?void 0:k.blur();this.emit("search-blur")};F.search=function(k){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const w=new AbortController,{signal:l}=w;this._searchController=w;return this.viewModel.search(k,{signal:l}).catch(I=>{if(this._searchController===w)return this._clearActiveMenu(),this._searchController=null,I}).then(I=>{if(this._searchController===w)return this.activeMenu=
I.numResults?"none":"warning",this._searchController=null,I})};F.suggest=function(k){this._cancelSuggest();const w=new AbortController,{signal:l}=w;this._suggestController=w;return this.viewModel.suggest(k,null,{signal:l}).then(I=>{if(this._suggestController===w)return this._suggestController=null,I.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),I}).catch(()=>{if(this._suggestController===w)return this._suggestController=null})};F.render=function(){const {state:k}=this.viewModel;
return K.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===k,["esri-widget--disabled"]:this.disabled})},"loading"===k?this.renderLoader():this.renderContainer())};F.renderSubmitButton=function(){const {messages:k}=this;return K.tsx("button",{"aria-label":k.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:k.searchButtonTitle},K.tsx("span",
{"aria-hidden":"true",class:"esri-icon-search"}))};F.renderWarningMenu=function(){return K.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},K.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};F.renderSourceMenuButton=function(){const {messages:k,activeMenu:w,sourceMenuId:l,sourceMenuButtonId:I}=this,{activeSourceIndex:z,allSources:D}=this.viewModel;return 1<D.length?K.tsx("button",{id:I,key:"esri-search__source-menu-button",
bind:this,"aria-label":k.searchIn,title:k.searchIn,"aria-haspopup":"true","aria-expanded":("source"===w).toString(),"aria-controls":l,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:G.storeNode,"data-node-ref":"_sourceMenuButtonNode"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),K.tsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),
K.tsx("span",{class:"esri-search__source-name"},this._getSourceName(z))):null};F.renderSourcesList=function(){const {allSources:k,searchAllEnabled:w}=this.viewModel,{_activeMenuItemIndex:l,activeMenu:I,sourceMenuId:z,sourceMenuButtonId:D}=this,E="source"===I&&-1<l?this._buildId("source-item",l):null;return 1<k.length?K.tsx("ul",{"aria-activedescendant":E,"aria-labelledby":D,id:z,role:"menu",bind:this,afterCreate:G.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,
"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},w?this.renderSource(H.ALL_INDEX):null,k.map((Q,S)=>this.renderSource(S)).toArray()):null};F.renderSourcesMenu=function(){const {allSources:k}=this.viewModel;return 1<k.length?K.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};F.renderLoader=function(){const {messages:k,messagesCommon:w}=this;return K.tsx("div",{class:"esri-widget__loader",key:"base-loader"},
K.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),K.tsx("span",{class:"esri-icon-font-fallback-text"},k.searchButtonTitle),K.tsx("span",{class:"esri-widget__loader-text"},w.loading))};F.renderContainer=function(){const {allSources:k,state:w}=this.viewModel,{activeMenu:l}=this;return K.tsx("div",{tabIndex:-1,afterCreate:I=>{this._container=I;I.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:I=>{I.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<
k.length,["esri-search--loading"]:"loading"===w,["esri-search--searching"]:"searching"===w,["esri-search--warning"]:"warning"===l,["esri-search--sources"]:"source"===l,["esri-search--show-suggestions"]:"suggestion"===l},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};F.renderClearButton=function(){return this.searchTerm?K.tsx("button",{bind:this,class:this.classes("esri-search__clear-button",
"esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};F.renderLocationGroup=function(){const {messages:k,locationEnabled:w,displayedSearchTerm:l}=this,I="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return w&&!l?K.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list",
"esri-search__suggestions-list","esri-search__suggestions-list--current-location")},K.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",I?"esri-menu__list-item--focus":null)},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",k.useCurrentLocation)):
null};F.renderInput=function(){const {activeMenu:k,locationEnabled:w,displayedSearchTerm:l,messages:I,suggestionsMenuId:z,inputId:D,_activeMenuItemIndex:E}=this,{maxInputLength:Q,placeholder:S,searchTerm:L,suggestionCount:O}=this.viewModel,V=!!(w&&!l||O),X="suggestion"===k&&-1<E?this._buildId("suggestion-item",E):null;return K.tsx("input",{"aria-activedescendant":X,"aria-autocomplete":"list","aria-expanded":(V&&"suggestion"===k).toString(),"aria-controls":V?z:null,"aria-haspopup":"listbox","aria-label":I.searchButtonTitle,
bind:this,placeholder:S,maxlength:Q,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:L,id:D,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:G.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:L?"":S})};F.renderForm=function(){return K.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,
role:"search"},this.renderInput())};F.renderSuggestList=function(k){const {sourceIndex:w}=k,l=k.results;return k.results.length?K.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${w}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},l.map(I=>this.renderSuggestion(I,this._menuItemCount++))):null};F.renderSuggestionsGroup=function(){const {suggestions:k}=this.viewModel;return k?k.map(w=>[this.renderSuggestionHeader(w),this.renderSuggestList(w)]):null};F.renderSuggestionsMenu=
function(){const {displayedSearchTerm:k,locationEnabled:w,suggestionsMenuId:l,inputId:I}=this,{suggestionCount:z}=this.viewModel;this._menuItemCount=0;return w&&!k||z?K.tsx("div",{id:l,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":I,bind:this,afterCreate:G.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};F.renderInputContainer=function(){return K.tsx("div",
{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};F.renderSuggestionHeader=function(k){const {allSources:w,activeSourceIndex:l}=this.viewModel,{sourceIndex:I}=k,z=1<w.length&&l===H.ALL_INDEX;return k.results.length&&z?K.tsx("div",{key:`esri-search__suggestion-header-${I}`,class:"esri-menu__header"},this._getSourceName(I)):null};F.renderSuggestion=function(k,w){const {_activeMenuItemIndex:l,messages:I}=
this;var {searchTerm:z}=this.viewModel;if(z){var {text:D}=k;D=D||I.untitledResult;const E=[];if(Y.test(D))E.push(K.tsx("div",{innerHTML:D}));else{D=this._splitResult(D,z);const Q=z.toLowerCase();D.forEach((S,L)=>{S&&S.length&&(S.toLowerCase()===Q?E.push(K.tsx("strong",{key:L},S)):E.push(S))})}z="suggestion"===this.activeMenu&&l===w;return K.tsx("li",{bind:this,id:this._buildId("suggestion-item",w),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===w).toString(),onclick:this._handleSuggestionClick,
key:`esri-search__suggestion_${w}`,"data-suggestion":k,role:"option",class:this.classes("esri-menu__list-item",z?"esri-menu__list-item--focus":null)},E)}};F.renderSource=function(k){const {activeSourceIndex:w,searchAllEnabled:l}=this.viewModel,I={["esri-menu__list-item--active"]:k===w,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&k===(l?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return K.tsx("li",{bind:this,key:`esri-search__source-${k}`,id:this._buildId("source-item",l?
k+1:k),"aria-checked":(k===w).toString(),onclick:this._handleSourceClick,"data-source-index":k,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",I)},this._getSourceName(k))};F.renderNoResultsWarning=function(k){const {messages:w}=this;k=k?W.substitute(w.noResultsFoundForValue,{value:`"${k}"`}):w.noResultsFound;return K.tsx("div",{key:"esri-search__no_results"},K.tsx("div",{class:"esri-search__warning-header"},w.noResults),K.tsx("div",{class:"esri-search__warning-text"},
k))};F.renderEmptySearchWarning=function(){const {messages:k}=this;return K.tsx("div",{key:"esri-search__empty-search"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),K.tsx("span",{class:"esri-search__no-value-text"},k.emptyValue))};F.renderLocateWarning=function(){const {messages:k}=this;return K.tsx("div",{key:"esri-search__locate-error"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),K.tsx("span",{class:"esri-search__no-value-text"},k.locateError))};
F.renderWarning=function(){var k;const {displayedSearchTerm:w,_locateFailed:l}=this,{viewModel:I}=this;return l?this.renderLocateWarning():null!=(k=I.selectedSuggestion)&&k.location||w?this.renderNoResultsWarning(w):this.renderEmptySearchWarning()};F._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};F._buildId=function(k,w){return`${this.id}-${k}${void 0===w?"":`-${w}`}`};F._watchSourceChanges=function(){const {_handles:k,viewModel:{allSources:w}}=this;k.remove("sources");w.forEach(l=>
k.add(r.watch(l,"name",()=>this.scheduleRender()),"sources"))};F._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var k;null==(k=this._sourceListNode)?void 0:k.focus()}};F._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};F._handleSearchButtonClick=function(){this.search()};F._handleSuggestionClick=function(k){if(k=k.currentTarget["data-suggestion"])this._focus(),this.search(k)};
F._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};F._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const k=new AbortController,{signal:w}=k;this._searchController=k;this.viewModel.searchNearby({signal:w}).catch(()=>{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};F._handleSourceClick=function(k){this._setSourceFromMenuItem(k.currentTarget)};F._setSourceFromMenuItem=function(k){var w;k&&
(this.viewModel.activeSourceIndex=k["data-source-index"],this._clearActiveMenu(),null==(w=this._sourceMenuButtonNode)?void 0:w.focus())};F._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};F._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};F._handleInputKeyup=function(k){var w,l=m.eventKey(k);if(!k.ctrlKey&&!k.metaKey&&"Copy"!==l&&"ArrowLeft"!==l&&"ArrowRight"!==
l&&"Shift"!==l)if("Tab"===l||"Escape"===l||k.shiftKey&&"Tab"===l)this._cancelSuggest(),"Escape"===l&&this._clearActiveMenu();else{var I="Home"===l||"End"===l||"ArrowUp"===l||"ArrowDown"===l;if("Enter"===l&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var z=null==(w=this._suggestionListNode)?void 0:w.getElementsByTagName("li");if(null!=z&&z.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(I){k.preventDefault();this._cancelSuggest();this.handleItemNavigation(l,z,this._suggestionListNode);
return}k=z[this._activeMenuItemIndex];if("Enter"===l&&k){(l=k["data-suggestion"])?(this._focus(),this.search(l)):k["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};F.handleItemNavigation=function(k,w,l){const I=this._activeMenuItemIndex;"Home"===k&&(this._activeMenuItemIndex=0);"End"===k&&(this._activeMenuItemIndex=w.length-1);"ArrowUp"===k&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?w.length-1:this._activeMenuItemIndex-1);
"ArrowDown"===k&&(this._activeMenuItemIndex=this._activeMenuItemIndex===w.length-1?0:this._activeMenuItemIndex+1);I!==this._activeMenuItemIndex&&G.keepMenuItemWithinView(w[this._activeMenuItemIndex],l)};F._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};F._openSuggestionMenu=function(){this.activeMenu="suggestion"};F._handleInputPaste=function(k){k=k.target;this.viewModel.searchTerm!==k.value&&(this.viewModel.searchTerm=k.value);this.viewModel.searchTerm&&
this.suggest()};F._handleSourceMenuKeydown=function(k){const w=m.eventKey(k);G.isActivationKey(w)?(k.preventDefault(),k=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(k)):"ArrowUp"!==w&&"ArrowDown"!==w&&"End"!==w&&"Home"!==w||k.preventDefault()};F._handleSourceMenuKeyup=function(k){var w;const l=m.eventKey(k),I="ArrowUp"===l||"ArrowDown"===l||"End"===l||"Home"===l;I&&k.preventDefault();if("Escape"===l){var z;this._clearActiveMenu();null==(z=
this._sourceMenuButtonNode)?void 0:z.focus()}else(k=null==(w=this._sourceListNode)?void 0:w.getElementsByTagName("li"))&&0!==k.length&&I&&("source"!==this.activeMenu&&(this.activeMenu="source"),this.handleItemNavigation(l,k,this._sourceListNode.parentElement))};F._focus=function(k){this.focus();k&&(this.activeMenu=k)};F._formSubmit=function(k){k.preventDefault();-1===this._activeMenuItemIndex&&this.search()};F._getSourceName=function(k){const {messages:w}=this;var {allSources:l}=this.viewModel;l=
l.getItemAt(k);return k===H.ALL_INDEX?w.all:l?l.name||w.untitledSource:w.untitledSource};F._splitResult=function(k,w){w=B.escapeRegExpString(w);return k.replace(new RegExp(`(^|)(${w})(|$)`,"ig"),"$1|$2|$3").split("|")};F._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};n._createClass(Z,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},
{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);return Z}(t);a.__decorate([d.property()],b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([d.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([d.property({readOnly:!0})],b.prototype,
"inputId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"suggestionsMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([d.property()],b.prototype,"activeMenu",void 0);a.__decorate([A.aliasOf("viewModel.activeSource")],b.prototype,"activeSource",void 0);a.__decorate([A.aliasOf("viewModel.activeSourceIndex")],b.prototype,"activeSourceIndex",void 0);a.__decorate([A.aliasOf("viewModel.allPlaceholder")],
b.prototype,"allPlaceholder",void 0);a.__decorate([A.aliasOf("viewModel.allSources")],b.prototype,"allSources",void 0);a.__decorate([A.aliasOf("viewModel.autoNavigate")],b.prototype,"autoNavigate",void 0);a.__decorate([A.aliasOf("viewModel.autoSelect")],b.prototype,"autoSelect",void 0);a.__decorate([A.aliasOf("viewModel.defaultSources")],b.prototype,"defaultSources",void 0);a.__decorate([d.property()],b.prototype,"disabled",void 0);a.__decorate([A.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",
void 0);a.__decorate([d.property()],b.prototype,"iconClass",void 0);a.__decorate([A.aliasOf("viewModel.includeDefaultSources")],b.prototype,"includeDefaultSources",void 0);a.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);a.__decorate([A.aliasOf("viewModel.locationEnabled")],b.prototype,"locationEnabled",void 0);a.__decorate([A.aliasOf("viewModel.maxResults")],b.prototype,"maxResults",void 0);a.__decorate([A.aliasOf("viewModel.maxSuggestions")],
b.prototype,"maxSuggestions",void 0);a.__decorate([d.property(),u.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([d.property(),u.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);a.__decorate([A.aliasOf("viewModel.minSuggestCharacters")],b.prototype,"minSuggestCharacters",void 0);a.__decorate([A.aliasOf("viewModel.popupEnabled")],b.prototype,"popupEnabled",void 0);a.__decorate([A.aliasOf("viewModel.popupTemplate")],b.prototype,"popupTemplate",
void 0);a.__decorate([A.aliasOf("viewModel.portal")],b.prototype,"portal",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphic")],b.prototype,"resultGraphic",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphicEnabled")],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([A.aliasOf("viewModel.results")],b.prototype,"results",void 0);a.__decorate([A.aliasOf("viewModel.searchAllEnabled")],b.prototype,"searchAllEnabled",void 0);a.__decorate([A.aliasOf("viewModel.searchTerm")],b.prototype,
"searchTerm",void 0);a.__decorate([A.aliasOf("viewModel.selectedResult")],b.prototype,"selectedResult",void 0);a.__decorate([A.aliasOf("viewModel.sources")],b.prototype,"sources",void 0);a.__decorate([A.aliasOf("viewModel.suggestions")],b.prototype,"suggestions",void 0);a.__decorate([A.aliasOf("viewModel.suggestionsEnabled")],b.prototype,"suggestionsEnabled",void 0);a.__decorate([A.aliasOf("viewModel.view")],b.prototype,"view",void 0);a.__decorate([N.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),
d.property({type:H})],b.prototype,"viewModel",void 0);a.__decorate([A.aliasOf("viewModel.clear")],b.prototype,"clear",null);return b=a.__decorate([p.subclass("esri.widgets.Search")],b)});