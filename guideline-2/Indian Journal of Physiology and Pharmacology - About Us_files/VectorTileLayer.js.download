// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/serviceTileInfoProperty ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(k,u,p,b,g,h,e,
c,n,f,m,t,G){k.ArcGISCachedService=C=>{C=function(E){function B(){var F=E.apply(this,arguments)||this;F.copyright=null;F.minScale=0;F.maxScale=0;F.spatialReference=null;F.tileInfo=null;F.tilemapCache=null;return F}u._inheritsLoose(B,E);var N=B.prototype;N.readMinScale=function(F,L){return null!=L.minLOD&&null!=L.maxLOD?F:0};N.readMaxScale=function(F,L){return null!=L.minLOD&&null!=L.maxLOD?F:0};N.readTilemapCache=function(F,L){return L.capabilities&&-1<L.capabilities.indexOf("Tilemap")?new t.TilemapCache({layer:this}):
null};u._createClass(B,[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return B}(C);p.__decorate([g.property({json:{read:{source:"copyrightText"}}})],C.prototype,"copyright",void 0);p.__decorate([g.property()],C.prototype,"minScale",void 0);p.__decorate([n.reader("service","minScale")],C.prototype,"readMinScale",null);p.__decorate([g.property()],C.prototype,"maxScale",void 0);p.__decorate([n.reader("service","maxScale")],C.prototype,"readMaxScale",null);p.__decorate([g.property({type:G})],
C.prototype,"spatialReference",void 0);p.__decorate([g.property({readOnly:!0})],C.prototype,"supportsBlankTile",null);p.__decorate([g.property(m.serviceTileInfoProperty)],C.prototype,"tileInfo",void 0);p.__decorate([g.property()],C.prototype,"tilemapCache",void 0);p.__decorate([n.reader("service","tilemapCache",["capabilities"])],C.prototype,"readTilemapCache",null);p.__decorate([g.property()],C.prototype,"version",void 0);return C=p.__decorate([f.subclass("esri.layers.mixins.ArcGISCachedService")],
C)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(k,u){function p(g,h,e,c){if(!g)return null;const {minScale:n,maxScale:f,minLOD:m,maxLOD:t}=h;if(null!=m&&null!=t)return c&&c.ignoreMinMaxLOD?u.fromJSON(g):u.fromJSON({...g,lods:g.lods.filter(({level:G})=>null!=G&&G>=m&&G<=t)});if(0!==n&&0!==f){const G=n?Math.round(1E4*n)/1E4:Infinity,C=f?Math.round(1E4*f)/1E4:-Infinity;return u.fromJSON({...g,lods:g.lods.filter(E=>
{E=Math.round(1E4*E.scale)/1E4;return E<=G&&E>=C})})}return u.fromJSON(g)}const b={type:u,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:p}}}}};k.readServiceTileInfo=p;k.serviceTileInfoProperty=b;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(k,u,p,b,g,h,e,c,n,f,m,t,G,C,E,B,N,F,L){var D;p=new p.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});b=D=function(A){function r(x){x=A.call(this,x)||this;x.dpi=96;x.format=null;x.origin=null;x.minScale=0;x.maxScale=0;x.size=null;x.spatialReference=null;return x}k._inheritsLoose(r,A);r.create=function(x=
{}){const {resolutionFactor:z=1,scales:y,size:I=256,spatialReference:J=E.WebMercator,numLODs:M=24}=x;if(!N.isValid(J)){x=[];if(y)for(var P=0;P<y.length;P++){var R=y[P];x.push({level:P,scale:R,resolution:R})}else for(P=5E-4,R=M-1;0<=R;R--)x.unshift({level:R,scale:P,resolution:P}),P*=2;return new D({dpi:96,lods:x,origin:new C(0,0,J),size:[I,I],spatialReference:J})}P=N.getInfo(J);x=x.origin?new C({x:x.origin.x,y:x.origin.y,spatialReference:J}):P?new C({x:P.origin[0],y:P.origin[1],spatialReference:J}):
new C({x:0,y:0,spatialReference:J});P=1/(39.37*h.getMetersPerUnitForSR(J)*96);R=[];if(y)for(var Z=0;Z<y.length;Z++){var X=y[Z];R.push({level:Z,scale:X,resolution:X*P})}else{var V=N.isGeographic(J)?512/I*5.916575275917094E8:256/I*5.91657527591555E8;Z=Math.ceil(M/z);R.push({level:0,scale:V,resolution:V*P});for(X=1;X<Z;X++)V/=2**z,R.push({level:X,scale:V,resolution:V*P})}return new D({dpi:96,lods:R,origin:x,size:[I,I],spatialReference:J})};var w=r.prototype;w.readOrigin=function(x,z){return C.fromJSON({spatialReference:z.spatialReference,
...x})};w.readSize=function(x,z){return[z.cols,z.rows]};w.writeSize=function(x,z){z.cols=x[0];z.rows=x[1]};w.zoomToScale=function(x){const z=this.scales;if(0>=x)return z[0];if(x>=z.length-1)return z[z.length-1];{const y=Math.floor(x);return z[y]/(z[y]/z[y+1])**(x-y)}};w.scaleToZoom=function(x){const z=this.scales,y=z.length-1;let I=0;for(;I<y;I++){const J=z[I],M=z[I+1];if(J<=x)break;if(M===x)return I+1;if(J>x&&M<x)return I+Math.log(J/x)/Math.log(J/M)}return I};w.snapScale=function(x,z=.95){x=this.scaleToZoom(x);
return x%Math.floor(x)>=z?this.zoomToScale(Math.ceil(x)):this.zoomToScale(Math.floor(x))};w.tileAt=function(x,z,y,I){var J=this.lodAt(x);if(!J)return null;let M;if("number"===typeof z)M=z,z=y;else{if(N.equals(z.spatialReference,this.spatialReference))M=z.x,z=z.y;else{I=F.project(z,this.spatialReference);if(g.isNone(I))return null;M=I.x;z=I.y}I=y}y=J.resolution*this.size[0];J=J.resolution*this.size[1];I||(I={id:null,level:0,row:0,col:0,extent:B.create()});I.level=x;I.row=Math.floor((this.origin.y-
z)/J+.001);I.col=Math.floor((M-this.origin.x)/y+.001);this.updateTileInfo(I);return I};w.updateTileInfo=function(x,z=0){var y=this.lodAt(x.level);y||1!==z||(z=this.lods[this.lods.length-1],z.level<x.level&&(y=z));if(y){var I=x.level-y.level;z=y.resolution*this.size[0]/2**I;y=y.resolution*this.size[1]/2**I;x.id=`${x.level}/${x.row}/${x.col}`;x.extent||(x.extent=B.create());x.extent[0]=this.origin.x+x.col*z;x.extent[1]=this.origin.y-(x.row+1)*y;x.extent[2]=x.extent[0]+z;x.extent[3]=x.extent[1]+y}};
w.upsampleTile=function(x){const z=this._upsampleLevels[x.level];if(!z||-1===z.parentLevel)return!1;x.level=z.parentLevel;x.row=Math.floor(x.row/z.factor+.001);x.col=Math.floor(x.col/z.factor+.001);this.updateTileInfo(x);return!0};w.getTileBounds=function(x,z){var {resolution:y}=this.lodAt(z.level);const I=y*this.size[0];y*=this.size[1];x[0]=this.origin.x+z.col*I;x[1]=this.origin.y-(z.row+1)*y;x[2]=x[0]+I;x[3]=x[1]+y;return x};w.lodAt=function(x){return this._levelToLOD&&this._levelToLOD[x]||null};
w.clone=function(){return D.fromJSON(this.write({}))};w._initializeUpsampleLevels=function(){const x=this.lods;this._upsampleLevels=[];let z=null;for(let y=0;y<x.length;y++){const I=x[y];this._upsampleLevels[I.level]={parentLevel:z?z.level:-1,factor:z?z.resolution/I.resolution:0};z=I}};k._createClass(r,[{key:"isWrappable",get:function(){const {spatialReference:x,origin:z}=this;if(x&&z){const y=N.getInfo(x);return x.isWrappable&&Math.abs(y.origin[0]-z.x)<=y.dx}return!1}},{key:"lods",set:function(x){let z=
0,y=0;const I=[];this._levelToLOD={};x&&(z=-Infinity,y=Infinity,x.forEach(J=>{I.push(J.scale);z=J.scale>z?J.scale:z;y=J.scale<y?J.scale:y;this._levelToLOD[J.level]=J}));this._set("scales",I);this._set("minScale",z);this._set("maxScale",y);this._set("lods",x);this._initializeUpsampleLevels()}}]);return r}(b.JSONSupport);u.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);u.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);
u.__decorate([e.property({type:String,json:{read:p.read,write:p.write,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"format",void 0);u.__decorate([e.property({readOnly:!0})],b.prototype,"isWrappable",null);u.__decorate([e.property({type:C,json:{write:!0}})],b.prototype,"origin",void 0);u.__decorate([m.reader("origin")],b.prototype,"readOrigin",null);u.__decorate([e.property({type:[L],value:null,json:{write:!0}})],b.prototype,"lods",null);u.__decorate([e.property({readOnly:!0})],b.prototype,
"minScale",void 0);u.__decorate([e.property({readOnly:!0})],b.prototype,"maxScale",void 0);u.__decorate([e.property({readOnly:!0})],b.prototype,"scales",void 0);u.__decorate([e.property({cast:A=>Array.isArray(A)?A:"number"===typeof A?[A,A]:[256,256]})],b.prototype,"size",void 0);u.__decorate([m.reader("size",["rows","cols"])],b.prototype,"readSize",null);u.__decorate([G.writer("size",{cols:{type:f.Integer},rows:{type:f.Integer}})],b.prototype,"writeSize",null);u.__decorate([e.property({type:E,json:{write:!0}})],
b.prototype,"spatialReference",void 0);return b=D=u.__decorate([t.subclass("esri.layers.support.TileInfo")],b)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(k,u,p,b,g,h,e,c){var n;p=n=function(f){function m(t){t=f.call(this,
t)||this;t.cols=null;t.level=0;t.levelValue=null;t.origin=null;t.resolution=0;t.rows=null;t.scale=0;return t}k._inheritsLoose(m,f);m.prototype.clone=function(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return m}(p.JSONSupport);u.__decorate([b.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],p.prototype,"cols",void 0);u.__decorate([b.property({type:e.Integer,
json:{write:!0}})],p.prototype,"level",void 0);u.__decorate([b.property({type:String,json:{write:!0}})],p.prototype,"levelValue",void 0);u.__decorate([b.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],p.prototype,"origin",void 0);u.__decorate([b.property({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0);u.__decorate([b.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],p.prototype,
"rows",void 0);u.__decorate([b.property({type:Number,json:{write:!0}})],p.prototype,"scale",void 0);return p=n=u.__decorate([c.subclass("esri.layers.support.LOD")],p)})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(k,u,p,b,g,h,e,c,n,f,m,t,G,C,E,B,N,F,L,D){var A;const r=c.getLogger("esri.layers.support.TilemapCache");k.TilemapCache=A=function(w){function x(y){y=w.call(this,y)||this;y._pendingTilemapRequests={};y._availableLevels={};y.levels=5;y.cacheByteSize=2097152;y.request=b;y._prefetchingEnabled=!0;return y}u._inheritsLoose(x,w);var z=x.prototype;z.initialize=function(){this._tilemapCache=new n(this.cacheByteSize);this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?",
"layer.customParameters?"],()=>this._initializeTilemapDefinition()),C.init(this,"layer.tileInfo.lods",y=>this._initializeAvailableLevels(y),!0)]);this._initializeTilemapDefinition()};z.castLevels=function(y){return 2>=y?(r.error("Minimum levels for Tilemap is 3, but got ",y),3):y};z.fetchTilemap=function(y,I,J,M){if(!this._availableLevels[y])return Promise.reject(new h("tilemap-cache:level-unavailable",`Level ${y} is unavailable in the service`));const P=this._tmpTilemapDefinition;if(y=this._tilemapFromCache(y,
I,J,P))return Promise.resolve(y);const R=M&&M.signal;M={...M,signal:null};return new Promise((Z,X)=>{m.onAbort(R,()=>X(m.createAbortError()));const V=D.tilemapDefinitionId(P);let aa=this._pendingTilemapRequests[V];if(!aa){aa=D.Tilemap.fromDefinition(P,M).then(K=>{this._tilemapCache.put(V,K,K.byteSize);return K});const T=()=>delete this._pendingTilemapRequests[V];this._pendingTilemapRequests[V]=aa;aa.then(T,T)}aa.then(Z,X)})};z.getAvailability=function(y,I,J){return this._availableLevels[y]?(y=this._tilemapFromCache(y,
I,J,this._tmpTilemapDefinition))?y.getAvailability(I,J):"unknown":"unavailable"};z.fetchAvailability=function(y,I,J,M){return this._availableLevels[y]?this.fetchTilemap(y,I,J,M).catch(P=>P).then(P=>{if(P instanceof D.Tilemap)return P=P.getAvailability(I,J),"unavailable"===P?Promise.reject(new h("tile-map:tile-unavailable","Tile is not available",{level:y,row:I,col:J})):P;if(m.isAbortError(P))throw P;return"unknown"}):Promise.reject(new h("tilemap-cache:level-unavailable",`Level ${y} is unavailable in the service`))};
z.fetchAvailabilityUpsample=function(y,I,J,M,P){M.level=y;M.row=I;M.col=J;const R=this.layer.tileInfo;R.updateTileInfo(M);const Z=this.fetchAvailability(y,I,J,P).catch(X=>{if(m.isAbortError(X))throw X;if(R.upsampleTile(M))return this.fetchAvailabilityUpsample(M.level,M.row,M.col,M);throw X;});this._fetchAvailabilityUpsamplePrefetch(M.id,y,I,J,P,Z);return Z};z._fetchAvailabilityUpsamplePrefetch=function(){var y=u._asyncToGenerator(function*(I,J,M,P,R,Z){if(this._prefetchingEnabled){var X=`prefetch-${I}`;
if(!this.handles.has(X)){var V=new AbortController;Z.then(()=>V.abort(),()=>V.abort());var aa=!1;this.handles.add({remove(){aa||(aa=!0,V.abort())}},X);yield t.waitTicks(10,V.signal).catch(()=>{});aa||(aa=!0,this.handles.remove(X));if(!m.isAborted(V))for(I={id:I,level:J,row:M,col:P},R={...R,signal:V.signal},J=this.layer.tileInfo,M=0;A._prefetches.length<A._maxPrefetch&&J.upsampleTile(I);++M){const T=this.fetchAvailability(I.level,I.row,I.col,R);A._prefetches.push(T);P=()=>{A._prefetches.removeUnordered(T)};
T.then(P,P)}}}});return function(I,J,M,P,R,Z){return y.apply(this,arguments)}}();z._initializeTilemapDefinition=function(){var y;if(this.layer.parsedUrl){var {parsedUrl:I,apiKey:J,customParameters:M}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:I.path,query:G.objectToQuery({...I.query,...M,token:null!=J?J:null==(y=I.query)?void 0:y.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,
col:0}}};z._tilemapFromCache=function(y,I,J,M){M.level=y;M.row=I-I%this.size;M.col=J-J%this.size;y=D.tilemapDefinitionId(M);return this._tilemapCache.get(y)};z._initializeAvailableLevels=function(y){this._availableLevels={};y&&y.forEach(I=>this._availableLevels[I.level]=!0)};u._createClass(x,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const y=this;return{get prefetchingEnabled(){return y._prefetchingEnabled},set prefetchingEnabled(I){y._prefetchingEnabled=I},hasTilemap(I,
J,M){return!!y._tilemapFromCache(I,J,M,y._tmpTilemapDefinition)}}}}]);return x}(e.HandleOwnerMixin(g));k.TilemapCache._maxPrefetch=4;k.TilemapCache._prefetches=new f({initialSize:A._maxPrefetch});p.__decorate([E.property({constructOnly:!0,type:Number})],k.TilemapCache.prototype,"levels",void 0);p.__decorate([F.cast("levels")],k.TilemapCache.prototype,"castLevels",null);p.__decorate([E.property({readOnly:!0,type:Number})],k.TilemapCache.prototype,"size",null);p.__decorate([E.property({constructOnly:!0,
type:Number})],k.TilemapCache.prototype,"cacheByteSize",void 0);p.__decorate([E.property({constructOnly:!0})],k.TilemapCache.prototype,"layer",void 0);p.__decorate([E.property({constructOnly:!0})],k.TilemapCache.prototype,"request",void 0);k.TilemapCache=A=p.__decorate([L.subclass("esri.layers.support.TilemapCache")],k.TilemapCache);Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error",
"../../core/lang"],function(k,u,p,b,g){function h(c){if("vector-tile"===c.service.type)var n=`${c.service.url}/tilemap/${c.level}/${c.row}/${c.col}/${c.width}/${c.height}`;else n=c.service.tileServers,n=`${n&&n.length?n[c.row%n.length]:c.service.url}/tilemap/${c.level}/${c.row}/${c.col}/${c.width}/${c.height}`;(c=c.service.query)&&(n=`${n}?${c}`);return n}let e=function(){function c(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var n=c.prototype;
n.getAvailability=function(f,m){if("unknown"!==this._allAvailability)return this._allAvailability;f=(f-this.location.top)*this.location.width+(m-this.location.left);m=f>>3;const t=this._tileAvailabilityBitSet;return 0>m||m>t.length?"unknown":t[m]&1<<f%8?"available":"unavailable"};n._updateFromData=function(f){let m=!0,t=!0;const G=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let C=0;for(let E=0;E<f.length;E++){const B=E%8;f[E]?(t=!1,G[C]|=1<<B):m=!1;7===B&&++C}t?this._allAvailability=
"unavailable":m?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=G,this.byteSize+=G.length)};c.fromDefinition=function(f,m){const t=f.service.request||u,{row:G,col:C,width:E,height:B}=f,N={query:{f:"json"}};m=m?{...N,...m}:N;return t(h(f),m).then(F=>F.data).catch(F=>{if(F&&F.details&&422===F.details.httpStatus)return{location:{top:G,left:C,width:E,height:B},valid:!0,data:p.constant(E*B,0)};throw F;}).then(F=>{if(F.location&&(F.location.top!==G||F.location.left!==
C||F.location.width!==E||F.location.height!==B))throw new b("tilemap:location-mismatch","Tilemap response for different location than requested",{response:F,definition:{top:G,left:C,width:E,height:B}});return c.fromJSON(F)})};c.fromJSON=function(f){c.validateJSON(f);const m=new c;m.location=Object.freeze(g.clone(f.location));m._updateFromData(f.data);return Object.freeze(m)};c.validateJSON=function(f){if(!f||!f.location)throw new b("tilemap:missing-location","Location missing from tilemap response");
if(!1===f.valid)throw new b("tilemap:invalid","Tilemap response was marked as invalid");if(!f.data)throw new b("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(f.data))throw new b("tilemap:data-mismatch","Data must be an array of numbers");if(f.data.length!==f.location.width*f.location.height)throw new b("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return c}();k.Tilemap=e;k.default=e;k.tilemapDefinitionId=function(c){return`${c.level}/${c.row}/${c.col}/${c.width}/${c.height}`};
Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(k){let u=null;k.checkWebPSupport=function(p){if(u)return u;const b={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};
return u=new Promise(g=>{const h=new Image;h.onload=()=>{h.onload=h.onerror=null;g(0<h.width&&0<h.height)};h.onerror=()=>{h.onload=h.onerror=null;g(!1)};h.src="data:image/webp;base64,"+b[p]})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/SpriteSource":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../request","../../core/Error","../../core/Logger","../../core/urlUtils"],function(k,u,p,b,g){const h=b.getLogger("esri.layers.support.SpriteSource");return function(){function e(n,
f,m,t){this.baseURL=n;this.devicePixelRatio=f;this.maxTextureSize=m;this._spriteImageFormat=t;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}var c=e.prototype;c.getSpriteInfo=function(n){return this._spritesData[n]};c.load=function(){var n=k._asyncToGenerator(function*(f){if(this.baseURL){this.loadStatus="loading";try{yield this._loadSprites(f),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"});return function(f){return n.apply(this,
arguments)}}();c._loadSprites=function(n){this._isRetina=1.15<this.devicePixelRatio?!0:!1;const f=g.urlToObject(this.baseURL),m=f.query?"?"+g.objectToQuery(f.query):"",t=this._isRetina?"@2x":"",G=`${f.path}${t}.${this._spriteImageFormat}${m}`;return Promise.all([u(`${f.path}${t}.json${m}`,n),u(G,{responseType:"image",...n})]).then(([C,E])=>{var B=Object.keys(C.data);if(!B||0===B.length||1===B.length&&"_ssl"===B[0]||!E||!E.data)return this._spritesData=this.image=null,this.width=this.height=0,Promise.resolve(null);
this._spritesData=C.data;C=E.data;E=Math.max(this.maxTextureSize,4096);if(C.width>E||C.height>E)throw C=`Sprite resource for style ${f.path} is bigger than the maximum allowed of ${E} pixels}`,h.error(C),new p("SpriteSource",C);this.width=C.width;this.height=C.height;E=document.createElement("canvas");B=E.getContext("2d");E.width=C.width;E.height=C.height;B.drawImage(C,0,0,C.width,C.height);C=B.getImageData(0,0,C.width,C.height);C=new Uint8Array(C.data);for(B=0;B<C.length;B+=4)E=C[B+3]/255,C[B]*=
E,C[B+1]*=E,C[B+2]*=E;this.image=C})};k._createClass(e,[{key:"spriteNames",get:function(){const n=[];for(const f in this._spritesData)n.push(f);n.sort();return n}}]);return e}()})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(k,u,p,b,g,h,e){function c(){c=u._asyncToGenerator(function*(F,
L){const D={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[A,r]="string"===typeof F?[F,null]:[null,F.jsonUrl];yield m(D,"esri",F,r,L);F={layerDefinition:D.validatedSource,url:A,serviceUrl:D.sourceUrl,style:D.style,styleUrl:D.styleUrl,spriteUrl:D.style.sprite&&f(D.styleBase,D.style.sprite),spriteFormat:D.spriteFormat,glyphsUrl:D.style.glyphs&&f(D.styleBase,D.style.glyphs),sourceNameToSource:D.sourceNameToSource,
primarySourceName:D.primarySourceName};n(F.spriteUrl);n(F.glyphsUrl);return F});return c.apply(this,arguments)}function n(F){F&&(F=h.getOrigin(F),N&&!N.includes(F)&&N.push(F))}function f(...F){let L=void 0;for(let D=0;D<F.length;++D)h.isProtocolRelative(F[D])?L&&(L=L.split("://")[0]+":"+F[D].trim()):L=h.isAbsolute(F[D])?F[D]:h.join(L,F[D]);return h.removeTrailingSlash(L)}function m(F,L,D,A,r){return t.apply(this,arguments)}function t(){t=u._asyncToGenerator(function*(F,L,D,A,r){g.throwIfAborted(r);
let w,x;if("string"===typeof D){D=h.normalize(D);n(D);var z=yield b(D,{...r,responseType:"json",query:{f:"json",...null==r?void 0:r.query}});z.ssl&&(w&&(w=w.replace(/^http:/i,"https:")),x&&(x=x.replace(/^http:/i,"https:")));x=w=D}else z={data:D},w=D.jsonUrl||null,x=A;z=z.data;return z.sources?(F.styleUrl=w||null,G(F,z,x,r)):z.sources?Promise.reject("You must specify the URL or the JSON for a service or for a style."):F.sourceUrl?E(F,z,x,!1,L,r):(F.sourceUrl=w||null,E(F,z,x,!0,L,r))});return t.apply(this,
arguments)}function G(F,L,D,A){return C.apply(this,arguments)}function C(){C=u._asyncToGenerator(function*(F,L,D,A){D=D?h.removeFile(D):h.appBaseUrl;F.styleBase=D;F.style=L;F.styleUrl&&n(F.styleUrl);L["sprite-format"]&&"webp"===L["sprite-format"].toLowerCase()&&(F.spriteFormat="webp");const r=[];if(L.sources&&L.sources.esri){const w=L.sources.esri;w.url?yield m(F,"esri",f(D,w.url),void 0,A):r.push(m(F,"esri",w,D,A))}for(const w of Object.keys(L.sources))"esri"!==w&&"vector"===L.sources[w].type&&(L.sources[w].url?
r.push(m(F,w,f(D,L.sources[w].url),void 0,A)):L.sources[w].tiles&&r.push(m(F,w,L.sources[w],D,A)));yield Promise.all(r)});return C.apply(this,arguments)}function E(F,L,D,A,r,w){return B.apply(this,arguments)}function B(){B=u._asyncToGenerator(function*(F,L,D,A,r,w){D=D?h.removeTrailingSlash(D)+"/":h.appBaseUrl;if(L.hasOwnProperty("tileInfo"))var x=L;else{var z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
y=78271.51696400007,I=2.958287637957775E8,J=[],M=L.hasOwnProperty("minzoom")?+L.minzoom:0,P=L.hasOwnProperty("maxzoom")?+L.maxzoom:22;for(let R=0;R<=P;R++)R>=M&&J.push({level:R,scale:I,resolution:y}),y/=2,I/=2;for(x of L.tiles)n(f(D,x));x={capabilities:"TilesOnly",initialExtent:z,fullExtent:z,minScale:0,maxScale:0,tiles:L.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:J,spatialReference:{wkid:102100}}}}z=new e(r,h.addQueryParameters(D,
null==w?void 0:w.query),x);if(!A&&F.primarySourceName in F.sourceNameToSource){y=F.sourceNameToSource[F.primarySourceName];if(!y.isCompatibleWith(z))return Promise.resolve();null!=z.fullExtent&&(null!=y.fullExtent?y.fullExtent.union(z.fullExtent):y.fullExtent=z.fullExtent.clone());y.tileInfo.lods.length<z.tileInfo.lods.length&&(y.tileInfo=z.tileInfo)}A?(F.sourceBase=D,F.source=L,F.validatedSource=x,F.primarySourceName=r,F.sourceUrl&&n(F.sourceUrl)):n(D);F.sourceNameToSource[r]=z;if(!F.style)return null==
L.defaultStyles?Promise.reject():"string"===typeof L.defaultStyles?m(F,"",f(D,L.defaultStyles,"root.json"),void 0,w):m(F,"",L.defaultStyles,f(D,"root.json"),w)});return B.apply(this,arguments)}const N=p.defaults&&p.defaults.io.corsEnabledServers;k.loadMetadata=function(F,L){return c.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest".split(" "),
function(k,u,p,b,g,h,e,c){return function(){function n(m,t,G){this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=m;this.sourceUrl=t;m=p.urlToObject(this.sourceUrl);t=u.clone(G);var C=t.tiles;if(m)for(var E=0;E<C.length;E++){var B=p.urlToObject(C[E]);B&&(p.isAbsolute(B.path)||(B.path=p.join(m.path,B.path)),C[E]=p.addQueryParameters(B.path,{...m.query,...B.query}))}this.tileServers=C;E=G.capabilities&&G.capabilities.split(",").map(N=>N.toLowerCase().trim());C=!0===(null==G?
void 0:G.exportTilesAllowed);E=!0===(null==E?void 0:E.includes("tilemap"));B=C&&G.hasOwnProperty("maxExportTilesCount")?G.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:C,supportsTileMap:E},exportTiles:C?{maxExportTilesCount:+B}:null};this.tileInfo=g.readServiceTileInfo(t.tileInfo,t,null,{ignoreMinMaxLOD:!0});t=G.tileMap?p.addQueryParameters(p.join(m.path,G.tileMap),m.query):null;E?(this.type="vector-tile",this.tilemap=new c(new h.TilemapCache({layer:{parsedUrl:m,tileInfo:this.tileInfo,
type:"vector-tile",tileServers:this.tileServers}}),t)):t&&(this.tilemap=new e(t));this.fullExtent=b.fromJSON(G.fullExtent)}var f=n.prototype;f.getRefKey=function(){var m=k._asyncToGenerator(function*(t,G){var C,E;return null!=(C=null==(E=this.tilemap)?void 0:E.dataKey(t,G))?C:t});return function(t,G){return m.apply(this,arguments)}}();f.getSourceTileUrl=function(m,t,G){return this.tileServers[t%this.tileServers.length].replace(/\{z\}/gi,m.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,
G.toString())};f.isCompatibleWith=function(m){var t=this.tileInfo;m=m.tileInfo;if(!t.spatialReference.equals(m.spatialReference)||!t.origin.equals(m.origin)||Math.round(t.dpi)!==Math.round(m.dpi))return!1;t=t.lods;m=m.lods;const G=Math.min(t.length,m.length);for(let C=0;C<G;C++){const E=t[C],B=m[C];if(E.level!==B.level||Math.round(E.scale)!==Math.round(B.scale))return!1}return!0};return n}()})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(k,u,p,b){return function(){function g(e){this.url=e}var h=g.prototype;h.fetchTileIndex=function(){var e=k._asyncToGenerator(function*(){this._tileIndexPromise||(this._tileIndexPromise=u(this.url).then(c=>c.data.index));return this._tileIndexPromise});return function(){return e.apply(this,arguments)}}();h.dataKey=function(){var e=k._asyncToGenerator(function*(c,n){const f=yield this.fetchTileIndex();p.throwIfAborted(n);
return this._getIndexedDataKey(f,c)});return function(c,n){return e.apply(this,arguments)}}();h._getIndexedDataKey=function(e,c){const n=[c];if(0>c.level||0>c.row||0>c.col||0<c.row>>c.level||0<c.col>>c.level)return null;for(;0!==c.level;)c=new b(c.level-1,c.row>>1,c.col>>1,c.world),n.push(c);c=n.pop();let f,m;if(1===e)return c;for(;n.length;)if(f=n.pop(),m=(f.col&1)+((f.row&1)<<1),e){if(0===e[m]){c=null;break}if(1===e[m]){c=f;break}c=f;e=e[m]}return c};return g}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/ObjectPool"],function(k,u){let p=function(){function b(h,e,c,n){this.set(h,e,c,n)}b.getId=function(h,e,c,n){return"object"===typeof h?`${h.level}/${h.row}/${h.col}/${h.world}`:`${h}/${e}/${c}/${n}`};var g=b.prototype;g.acquire=function(h,e,c,n){this.set(h,e,c,n)};g.contains=function(h){const e=h.level-this.level;return this.row===h.row>>e&&this.col===h.col>>e&&this.world===h.world};g.equals=function(h){return this.level===h.level&&this.row===h.row&&this.col===h.col&&this.world===h.world};
g.clone=function(){return new b(this)};g.release=function(){this.world=this.col=this.row=this.level=0};g.set=function(h,e,c,n){if(null==h)this.world=this.col=this.row=this.level=0;else if("object"===typeof h)this.level=h.level||0,this.row=h.row||0,this.col=h.col||0,this.world=h.world||0;else if("string"===typeof h){const [f,m,t,G]=h.split("/");this.level=parseFloat(f);this.row=parseFloat(m);this.col=parseFloat(t);this.world=parseFloat(G)}else this.level=+h,this.row=+e,this.col=+c,this.world=+n||0;
return this};g.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};g.getParentKey=function(){return 0>=this.level?null:new b(this.level-1,this.row>>1,this.col>>1,this.world)};g.getChildKeys=function(){const h=this.level+1,e=this.row<<1,c=this.col<<1,n=this.world;return[new b(h,e,c,n),new b(h,e,c+1,n),new b(h,e+1,c,n),new b(h,e+1,c+1,n)]};g.compareRowMajor=function(h){return this.row<h.row?-1:this.row>h.row?1:this.col<h.col?-1:this.col>h.col?1:0};k._createClass(b,[{key:"key",
get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(h){this.set(h)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return b}();p.pool=new u(p,null,null,25,50);return p})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(k,u,p,b){return function(){function g(e,
c){this._tilemap=e;this._tileIndexUrl=c}var h=g.prototype;h.fetchTileIndex=function(){var e=k._asyncToGenerator(function*(c){this._tileIndexPromise||(this._tileIndexPromise=u(this._tileIndexUrl,{query:{...null==c?void 0:c.query}}).then(n=>n.data.index));return this._tileIndexPromise});return function(c){return e.apply(this,arguments)}}();h.dataKey=function(e,c){const {level:n,row:f,col:m}=e,t=new b(e);return this._tilemap.fetchAvailabilityUpsample(n,f,m,t,c).then(()=>{t.world=e.world;return t}).catch(G=>
{if(p.isAbortError(G))throw G;return null})};return g}()})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(k,u){return function(){function p(g,h){this.lockedSchemaPixelSize=g;this.isGCS=h}var b=p.prototype;b.getLevelRowColumn=function(g){return this.isGCS?[g[0],g[1]>>1,g[2]>>1]:256===this.lockedSchemaPixelSize&&0<g[0]?[g[0]-1,g[1]>>1,g[2]>>1]:g};b.adjustLevel=function(g){return this.isGCS?g:256===
this.lockedSchemaPixelSize?0<g?g-1:0:g};b.getShift=function(g,h){let e=0,c=0;if(256===this.lockedSchemaPixelSize||this.isGCS)g[2]%2&&(e=h),g[1]%2&&(c=h);return[e,c]};b.getScale=function(g){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===g)return 1;return 2};p.create256x256CompatibleTileInfo=function(g){if(!g)return null;if(256===g.size[0]&&256===g.size[1])return g;const h=g.spatialReference.isGeographic,e=[],c=g.lods.length;for(let n=0;n<c;n++){const f=
g.lods[n];e.push(new k({level:f.level,scale:f.scale,resolution:h?f.resolution:2*f.resolution}))}return new u({size:[256,256],dpi:g.dpi,format:g.format,compressionQuality:g.compressionQuality,origin:g.origin,spatialReference:g.spatialReference,lods:e})};p.create512x512CompatibleTileInfo=function(g){if(!g||256===g.size[0]||256===g.size[1])return null;const h=[],e=g.lods.length;for(let c=0;c<e;c++){const n=g.lods[c];h.push(new k({level:n.level,scale:n.scale,resolution:.5*n.resolution}))}return new u({size:[512,
512],dpi:g.dpi,format:g.format,compressionQuality:g.compressionQuality,origin:g.origin,spatialReference:g.spatialReference,lods:h})};return p}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../layers/support/TileInfo"],function(k,u){k.areSchemasOverlapping=function(p,b){if(p===b)return!0;if(!p&&null!=b||null!=p&&!b||!p.spatialReference.equals(b.spatialReference)||p.dpi!==b.dpi)return!1;var g=p.origin;const h=b.origin;if(1E-6<=Math.abs(g.x-h.x)||1E-6<=
Math.abs(g.y-h.y))return!1;p.lods[0].scale>b.lods[0].scale?(g=p,p=b):g=b;for(b=g.lods[0].scale;b>=p.lods[p.lods.length-1].scale-1E-6;b/=2)if(1E-6>Math.abs(b-p.lods[0].scale))return!0;return!1};k.unionTileInfos=function(p,b){if(p===b)return p;if(!p&&null!=b)return b;if(null!=p&&!b)return p;const g=p.size[0],h=p.format,e=p.dpi,c={x:p.origin.x,y:p.origin.y},n=p.spatialReference.toJSON();var f=p.lods[0].scale>b.lods[0].scale?p.lods[0]:b.lods[0];p=(p.lods[p.lods.length-1].scale<=b.lods[b.lods.length-1].scale?
p.lods[p.lods.length-1]:b.lods[b.lods.length-1]).scale;b=[];let m=f.scale;f=f.resolution;let t=0;for(;m>p;)b.push({level:t,resolution:f,scale:m}),t++,m/=2,f/=2;return new u({size:[g,g],dpi:e,format:h||"pbf",origin:c,lods:b,spatialReference:n})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleLayer"],function(k){return function(){function u(b){this._style=b;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName=
{};this._runningId=0;b.layers||(b.layers=[]);this.version=parseFloat(b.version);if(this.layers=b.layers.map((g,h,e)=>this._create(g,h,e)))for(let g=0;g<this.layers.length;g++)b=this.layers[g],this._layerByName[b.id]=b,this._uidToLayer.set(b.uid,b),0===b.type&&this.backgroundBucketIds.push(b.id);this._identifyRefLayers()}var p=u.prototype;p.isPainterDataDriven=function(b){return(b=this._layerByName[b])?b.isPainterDataDriven():!1};p.getStyleLayerId=function(b){return b>=this.layers.length?null:this.layers[b].id};
p.getStyleLayerByUID=function(b){b=this._uidToLayer.get(b);return null!=b?b:null};p.getStyleLayerIndex=function(b){return(b=this._layerByName[b])?this.layers.indexOf(b):-1};p.setStyleLayer=function(b,g){if(b&&b.id){var h=this._style;null!=g&&g>=this.layers.length&&(g=this.layers.length-1);var e=!0,c;if(c=this._layerByName[b.id]){const n=this.layers.indexOf(c);g||(g=n);g===n?(e=!1,c=u._recreateLayer(b,c),this.layers[g]=c,h.layers[g]=b):(this.layers.splice(n,1),h.layers.splice(n,1),c=this._create(b,
g,this.layers),this.layers.splice(g,0,c),h.layers.splice(g,0,b))}else c=this._create(b,g,this.layers),!g||g>=this.layers.length?(this.layers.push(c),h.layers.push(b)):(this.layers.splice(g,0,c),h.layers.splice(g,0,b));this._layerByName[b.id]=c;this._uidToLayer.set(c.uid,c);e&&this._recomputeZValues();this._identifyRefLayers()}};p.getStyleLayer=function(b){return(b=this._layerByName[b])?{type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,
layout:b.layout,paint:b.paint}:null};p.deleteStyleLayer=function(b){const g=this._layerByName[b];g&&(delete this._layerByName[b],this._uidToLayer.delete(g.uid),b=this.layers.indexOf(g),this.layers.splice(b,1),this._style.layers.splice(b,1),this._recomputeZValues(),this._identifyRefLayers())};p.getLayerById=function(b){return this._layerByName[b]};p.getLayoutProperties=function(b){return(b=this._layerByName[b])?b.layout:null};p.getPaintProperties=function(b){return(b=this._layerByName[b])?b.paint:
null};p.setPaintProperties=function(b,g){if(b=this._layerByName[b]){var h=u._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:g},b),e=this.layers.indexOf(b);this.layers[e]=h;this._style.layers[e].paint=g;this._layerByName[b.id]=h;this._uidToLayer.set(b.uid,h)}};p.setLayoutProperties=function(b,g){if(b=this._layerByName[b]){var h=u._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,
minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:g,paint:b.paint},b),e=this.layers.indexOf(b);this.layers[e]=h;this._style.layers[e].layout=g;this._layerByName[b.id]=h;this._uidToLayer.set(b.uid,h)}};p.setStyleLayerVisibility=function(b,g){if(b=this._layerByName[b]){var h=b.layout||{};h.visibility=g;g=u._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:h,paint:b.paint},b);var e=this.layers.indexOf(b);
this.layers[e]=g;this._style.layers[e].layout=h;this._layerByName[b.id]=g;this._uidToLayer.set(b.uid,g)}};p.getStyleLayerVisibility=function(b){var g;b=this._layerByName[b];if(!b)return"none";b=b.layout;return null!=(g=null==b?void 0:b.visibility)?g:"visible"};p._recomputeZValues=function(){const b=this.layers,g=1/(b.length+1);for(let h=0;h<b.length;h++)b[h].z=1-(1+h)*g};p._identifyRefLayers=function(){const b=[],g=[];let h=0;for(const m of this.layers){const t=m.layout;if(1===m.type){var e,c=m,n=
m.source+"|"+m.sourceLayer;n+=null!=(e="|"+(null==t?void 0:t.visibility))?e:"";n+="|"+m.minzoom;n+="|"+m.maxzoom;n+="|"+JSON.stringify(m.filter);if(c.hasDataDrivenFill||c.hasDataDrivenOutline)n+="|"+h;b.push({key:n,layer:m})}else if(2===m.type){var f;c=m;n=m.source+"|"+m.sourceLayer;n+=null!=(f="|"+(null==t?void 0:t.visibility))?f:"";n+="|"+m.minzoom;n+="|"+m.maxzoom;n+="|"+JSON.stringify(m.filter);n+="|"+(void 0!==t?t["line-cap"]:"");n+="|"+(void 0!==t?t["line-join"]:"");c.hasDataDrivenLine&&(n+=
"|"+h);g.push({key:n,layer:m})}++h}this._assignRefLayers(b);this._assignRefLayers(g)};p._assignRefLayers=function(b){b.sort((f,m)=>f.key<m.key?-1:f.key>m.key?1:0);let g,h;const e=b.length;for(let f=0;f<e;f++){const m=b[f];if(m.key===g)m.layer.refLayerId=h;else if(g=m.key,h=m.layer.id,1===m.layer.type){if(!m.layer.getPaintProperty("fill-outline-color"))for(var c=f+1;c<e;c++){var n=b[c];if(n.key===g){if(n.layer.getPaintProperty("fill-outline-color")){b[f]=n;b[c]=m;h=n.layer.id;break}}else break}}else if(2===
m.layer.type)for(c=m.layer,n=f+1;n<e;n++){const t=b[n];if(t.key!==g)break;const G=t.layer;if(c.canUseThinTessellation&&!G.canUseThinTessellation||!c.canUseThinTessellation&&(G.getPaintProperty("line-pattern")||G.getPaintProperty("line-dasharray")))c=G,b[f]=t,b[n]=m,h=t.layer.id}}};p._create=function(b,g,h){g=1-1/(h.length+1)*(1+g);h=this._runningId++;switch(b.type){case "background":return new k.BackgroundStyleLayer(0,b,g,h);case "fill":return new k.FillStyleLayer(1,b,g,h);case "line":return new k.LineStyleLayer(2,
b,g,h);case "symbol":return new k.SymbolStyleLayer(3,b,g,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new k.CircleStyleLayer(4,b,g,h)}throw Error("Unknown vector tile layer");};u._recreateLayer=function(b,g){switch(b.type){case "background":return new k.BackgroundStyleLayer(0,b,g.z,g.uid);case "fill":return new k.FillStyleLayer(1,b,g.z,g.uid);case "line":return new k.LineStyleLayer(2,b,g.z,g.uid);case "symbol":return new k.SymbolStyleLayer(3,b,g.z,g.uid);
case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new k.CircleStyleLayer(4,b,g.z,g.uid)}};return u}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(k,
u,p,b,g,h,e,c,n,f,m){let t=function(){function D(r,w,x,z){this.type=r;this.typeName=w.type;this.id=w.id;this.source=w.source;this.sourceLayer=w["source-layer"];this.minzoom=w.minzoom;this.maxzoom=w.maxzoom;this.filter=w.filter;this.layout=w.layout;this.paint=w.paint;this.z=x;this.uid=z;switch(r){case 0:this._layoutDefinition=n.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=n.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=n.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=n.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=n.StyleDefinition.lineLayoutDefinition;this._paintDefinition=n.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=n.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=n.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=n.StyleDefinition.circleLayoutDefinition,this._paintDefinition=n.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}var A=D.prototype;A.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=c.createFilter(this.filter)};A.getLayoutProperty=function(r){return this._layoutProperties[r]};A.getPaintProperty=function(r){return this._paintProperties[r]};A.getLayoutValue=function(r,w,x){let z;const y=this._layoutProperties[r];y&&(z=y.getValue(w,x));void 0===z&&(z=this._layoutDefinition[r]["default"]);return z};A.getPaintValue=
function(r,w,x){let z;const y=this._paintProperties[r];y&&(z=y.getValue(w,x));void 0===z&&(z=this._paintDefinition[r]["default"]);return z};A.isPainterDataDriven=function(){const r=this._paintProperties;if(r)for(const w in r)if(r[w].isDataDriven)return!0;return!1};A._parseLayout=function(r){const w={};for(const x in r){const z=this._layoutDefinition[x];z&&(w[x]=new f(z,r[x]))}return w};A._parsePaint=function(r){const w={};for(const x in r){const z=this._paintDefinition[x];z&&(w[x]=new f(z,r[x]))}return w};
A.computeAttributesKey=function(r,w,x,z){let y=0,I=0;for(const J of w){w=3;if(!J||J!==z){const {isLayout:M,isOptional:P}=x[J];w=M?this.getLayoutProperty(J):this.getPaintProperty(J);w=null!=w&&w.interpolator?2:null!=w&&w.isDataDriven?1:P&&!w?3:0}I|=w<<y;y+=2}return I<<3|r};return D}(),G=function(D){function A(r,w,x,z){r=D.call(this,r,w,x,z)||this;r.backgroundMaterial=new p.VTLBackgroundMaterial(r.computeAttributesKey(0,p.VTLBackgroundMaterial.ATTRIBUTES,p.VTLBackgroundMaterial.ATTRIBUTES_INFO));return r}
u._inheritsLoose(A,D);return A}(t),C=function(D){function A(r,w,x,z){r=D.call(this,r,w,x,z)||this;w=r.getPaintProperty("fill-color");x=r.getPaintProperty("fill-opacity");z=r.getPaintProperty("fill-pattern");r.hasDataDrivenColor=null==w?void 0:w.isDataDriven;r.hasDataDrivenOpacity=null==x?void 0:x.isDataDriven;r.hasDataDrivenFill=r.hasDataDrivenColor||r.hasDataDrivenOpacity||(null==z?void 0:z.isDataDriven);x=r.getPaintProperty("fill-outline-color");r.outlineUsesFillColor=!x;r.hasDataDrivenOutlineColor=
null==x?void 0:x.isDataDriven;r.hasDataDrivenOutline=x?x.isDataDriven:w?w.isDataDriven:!1;r.hasDataDrivenOutline=(x?r.hasDataDrivenOutlineColor:r.hasDataDrivenColor)||r.hasDataDrivenOpacity;r.fillMaterial=new g.VTLFillMaterial(r.computeAttributesKey(1,g.VTLFillMaterial.ATTRIBUTES,g.VTLFillMaterial.ATTRIBUTES_INFO));r.outlineMaterial=new g.VTLOutlineMaterial(r.computeAttributesKey(2,r.outlineUsesFillColor?g.VTLOutlineMaterial.ATTRIBUTES_FILL:g.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,r.outlineUsesFillColor?
g.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:g.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),r.outlineUsesFillColor);return r}u._inheritsLoose(A,D);return A}(t),E=function(D){function A(r,w,x,z){var y,I,J,M,P,R,Z,X,V;r=D.call(this,r,w,x,z)||this;w=r.getPaintProperty("line-pattern");r.lineMaterial=new h.VTLLineMaterial(r.computeAttributesKey(3,h.VTLLineMaterial.ATTRIBUTES,h.VTLLineMaterial.ATTRIBUTES_INFO,w?"line-dasharray":""));r.hasDataDrivenLine=(null==(y=r.getPaintProperty("line-blur"))?void 0:y.isDataDriven)||
(null==(I=r.getPaintProperty("line-color"))?void 0:I.isDataDriven)||(null==(J=r.getPaintProperty("line-gap-width"))?void 0:J.isDataDriven)||(null==(M=r.getPaintProperty("line-offset"))?void 0:M.isDataDriven)||(null==(P=r.getPaintProperty("line-opacity"))?void 0:P.isDataDriven)||(null==(R=r.getPaintProperty("line-pattern"))?void 0:R.isDataDriven)||(null==(Z=r.getPaintProperty("line-dasharray"))?void 0:Z.isDataDriven)||(null==(X=r.getLayoutProperty("line-cap"))?void 0:X.isDataDriven)||(null==(V=r.getPaintProperty("line-width"))?
void 0:V.isDataDriven);r.canUseThinTessellation=!1;!r.hasDataDrivenLine&&(y=r.getPaintProperty("line-width"),!y||"number"===typeof y&&.5*y<m.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(y=r.getPaintProperty("line-offset"),!y||"number"===typeof y&&0===y)&&(r.canUseThinTessellation=!0);return r}u._inheritsLoose(A,D);A.prototype.getDashKey=function(r,w){switch(w){case 0:w="Butt";break;case 1:w="Round";break;case 2:w="Square";break;default:w="Butt"}return`dasharray-[${r.toString()}]-${w}`};return A}(t),B=function(D){function A(r,
w,x,z){var y,I,J,M,P,R,Z,X,V,aa,T,K;r=D.call(this,r,w,x,z)||this;r.iconMaterial=new e.VTLIconMaterial(r.computeAttributesKey(4,e.VTLIconMaterial.ATTRIBUTES,e.VTLIconMaterial.ATTRIBUTES_INFO));r.textMaterial=new e.VTLTextMaterial(r.computeAttributesKey(6,e.VTLTextMaterial.ATTRIBUTES,e.VTLTextMaterial.ATTRIBUTES_INFO));r.hasDataDrivenIcon=(null==(y=r.getPaintProperty("icon-color"))?void 0:y.isDataDriven)||(null==(I=r.getPaintProperty("icon-halo-blur"))?void 0:I.isDataDriven)||(null==(J=r.getPaintProperty("icon-halo-color"))?
void 0:J.isDataDriven)||(null==(M=r.getPaintProperty("icon-halo-width"))?void 0:M.isDataDriven)||(null==(P=r.getPaintProperty("icon-opacity"))?void 0:P.isDataDriven)||(null==(R=r.getLayoutProperty("icon-size"))?void 0:R.isDataDriven);r.hasDataDrivenText=(null==(Z=r.getPaintProperty("text-color"))?void 0:Z.isDataDriven)||(null==(X=r.getPaintProperty("text-halo-blur"))?void 0:X.isDataDriven)||(null==(V=r.getPaintProperty("text-halo-color"))?void 0:V.isDataDriven)||(null==(aa=r.getPaintProperty("text-halo-width"))?
void 0:aa.isDataDriven)||(null==(T=r.getPaintProperty("text-opacity"))?void 0:T.isDataDriven)||(null==(K=r.getLayoutProperty("text-size"))?void 0:K.isDataDriven);return r}u._inheritsLoose(A,D);return A}(t),N=function(D){function A(r,w,x,z){r=D.call(this,r,w,x,z)||this;r.circleMaterial=new b.VTLCircleMaterial(r.computeAttributesKey(5,b.VTLCircleMaterial.ATTRIBUTES,b.VTLCircleMaterial.ATTRIBUTES_INFO));return r}u._inheritsLoose(A,D);return A}(t),F=function(){function D(A,r,w){var x,z,y,I,J;this.allowOverlap=
A.getLayoutValue("icon-allow-overlap",r);this.ignorePlacement=A.getLayoutValue("icon-ignore-placement",r);this.keepUpright=A.getLayoutValue("icon-keep-upright",r);this.optional=A.getLayoutValue("icon-optional",r);this.rotationAlignment=A.getLayoutValue("icon-rotation-alignment",r);2===this.rotationAlignment&&(this.rotationAlignment=w?0:1);w=A.getLayoutProperty("icon-anchor");null!=(x=w)&&x.isDataDriven?this._anchorProp=w:this.anchor=A.getLayoutValue("icon-anchor",r);w=A.getLayoutProperty("icon-offset");
null!=(z=w)&&z.isDataDriven?this._offsetProp=w:this.offset=A.getLayoutValue("icon-offset",r);w=A.getLayoutProperty("icon-padding");null!=(y=w)&&y.isDataDriven?this._paddingProp=w:this.padding=A.getLayoutValue("icon-padding",r);w=A.getLayoutProperty("icon-rotate");null!=(I=w)&&I.isDataDriven?this._rotateProp=w:this.rotate=A.getLayoutValue("icon-rotate",r);w=A.getLayoutProperty("icon-size");null!=(J=w)&&J.isDataDriven?this._sizeProp=w:this.size=A.getLayoutValue("icon-size",r)}D.prototype.update=function(A,
r){this._anchorProp&&(this.anchor=this._anchorProp.getValue(A,r));this._offsetProp&&(this.offset=this._offsetProp.getValue(A,r));this._paddingProp&&(this.padding=this._paddingProp.getValue(A,r));this._rotateProp&&(this.rotate=this._rotateProp.getValue(A,r));this._sizeProp&&(this.size=this._sizeProp.getValue(A,r))};return D}(),L=function(){function D(A,r,w){var x,z,y,I,J,M,P,R,Z,X,V;this.allowOverlap=A.getLayoutValue("text-allow-overlap",r);this.ignorePlacement=A.getLayoutValue("text-ignore-placement",
r);this.keepUpright=A.getLayoutValue("text-keep-upright",r);this.optional=A.getLayoutValue("text-optional",r);this.rotationAlignment=A.getLayoutValue("text-rotation-alignment",r);2===this.rotationAlignment&&(this.rotationAlignment=w?0:1);w=A.getLayoutProperty("text-anchor");null!=(x=w)&&x.isDataDriven?this._anchorProp=w:this.anchor=A.getLayoutValue("text-anchor",r);w=A.getLayoutProperty("text-justify");null!=(z=w)&&z.isDataDriven?this._justifyProp=w:this.justify=A.getLayoutValue("text-justify",r);
w=A.getLayoutProperty("text-letter-spacing");null!=(y=w)&&y.isDataDriven?this._letterSpacingProp=w:this.letterSpacing=A.getLayoutValue("text-letter-spacing",r);w=A.getLayoutProperty("text-line-height");null!=(I=w)&&I.isDataDriven?this._lineHeightProp=w:this.lineHeight=A.getLayoutValue("text-line-height",r);w=A.getLayoutProperty("text-max-angle");null!=(J=w)&&J.isDataDriven?this._maxAngleProp=w:this.maxAngle=A.getLayoutValue("text-max-angle",r);w=A.getLayoutProperty("text-max-width");null!=(M=w)&&
M.isDataDriven?this._maxWidthProp=w:this.maxWidth=A.getLayoutValue("text-max-width",r);w=A.getLayoutProperty("text-offset");null!=(P=w)&&P.isDataDriven?this._offsetProp=w:this.offset=A.getLayoutValue("text-offset",r);w=A.getLayoutProperty("text-padding");null!=(R=w)&&R.isDataDriven?this._paddingProp=w:this.padding=A.getLayoutValue("text-padding",r);w=A.getLayoutProperty("text-rotate");null!=(Z=w)&&Z.isDataDriven?this._rotateProp=w:this.rotate=A.getLayoutValue("text-rotate",r);w=A.getLayoutProperty("text-size");
null!=(X=w)&&X.isDataDriven?this._sizeProp=w:this.size=A.getLayoutValue("text-size",r);w=A.getLayoutProperty("text-writing-mode");null!=(V=w)&&V.isDataDriven?this._writingModeProp=w:this.writingMode=A.getLayoutValue("text-writing-mode",r)}D.prototype.update=function(A,r){this._anchorProp&&(this.anchor=this._anchorProp.getValue(A,r));this._justifyProp&&(this.justify=this._justifyProp.getValue(A,r));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(A,r));this._lineHeightProp&&
(this.lineHeight=this._lineHeightProp.getValue(A,r));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(A,r));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(A,r));this._offsetProp&&(this.offset=this._offsetProp.getValue(A,r));this._paddingProp&&(this.padding=this._paddingProp.getValue(A,r));this._rotateProp&&(this.rotate=this._rotateProp.getValue(A,r));this._sizeProp&&(this.size=this._sizeProp.getValue(A,r));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(A,
r))};return D}();k.BackgroundStyleLayer=G;k.CircleStyleLayer=N;k.FillStyleLayer=C;k.IconLayout=F;k.LineStyleLayer=E;k.StyleLayer=t;k.SymbolStyleLayer=B;k.TextLayout=L;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial"],function(k,u,p){p=function(b){function g(e){return b.call(this,e)||this}u._inheritsLoose(g,b);var h=g.prototype;h.geometryInfo=
function(){return g.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return g.ATTRIBUTES};h.attributesInfo=function(){return g.ATTRIBUTES_INFO};return g}(p.VTLMaterial);p.ATTRIBUTES=[];p.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}];p.ATTRIBUTES_INFO={};k.VTLBackgroundMaterial=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/maybe","../MemoryBuffer"],function(k,u,p,b){let g=function(){function c(f){this._locations=new Map;this._key=f}var n=c.prototype;n.defines=function(){return[]};n.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};n.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};n.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};n.getEncodingInfos=
function(){this._propertyEncodingInfo||this._buildAttributesInfo();return this._propertyEncodingInfo};n.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};n.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};n.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};n.setDataUniforms=function(f,m,t,G,C){var E=this.getUniforms();for(const B of E){const {name:N,type:F,getValue:L}=
B;E=L(t,m,G,C);if(null!==E)switch(F){case "float":f.setUniform1f(N,E);break;case "vec2":f.setUniform2fv(N,E);break;case "vec4":f.setUniform4fv(N,E)}}};n.encodeAttributes=function(f,m,t,G){const C=this.attributesInfo(),E=this.getEncodingInfos(),B=[];let N=0,F=0;for(const A of Object.keys(E)){var L,D=E[A];const {type:r,precisionFactor:w,isLayout:x}=C[A],z=x?t.getLayoutProperty(A):t.getPaintProperty(A),y=null==(L=z.interpolator)?void 0:L.getInterpolationRange(m);let I=0;for(const J of D){const {offset:M,
bufferElementsToAdd:P}=J;if(0<P){for(D=0;D<P;D++)B.push(0);N+=F;F=J.bufferElementsToAdd}D=null!=G?G:z.getValue(y?y[I]:m,f);switch(r){case 0:case 1:B[N]|=this._encodeByte(D*(w||1),8*M);break;case 2:case 3:B[N]|=this._encodeShort(D*(w||1),8*M);break;case 4:case 5:B[N]|=this._encodeByte(D*(w||1),8*M);B[N]|=this._encodeByte(D*(w||1),8*M+8);break;case 6:case 7:B[N]|=this._encodeShort(D*(w||1),8*M);B[N]|=this._encodeShort(D*(w||1),8*M+16);break;case 8:case 9:B[N]|=this._encodeByte(D*(w||1),8*M);B[N]|=this._encodeByte(D*
(w||1),8*M+8);B[N]|=this._encodeByte(D*(w||1),8*M+16);B[N]|=this._encodeByte(D*(w||1),8*M+24);break;case 10:B[N]=this._encodeColor(D);break;case 11:case 12:this._encodePattern(N,B,D);break;default:throw Error("Unsupported encoding type");}I++}}return B};n.getAtributeState=function(f){const m=3+2*f;f=0|this._bit(m);return f|=this._bit(m+1)<<1};n._buildAttributesInfo=function(){const f=[],m={};var t={},G=-1;const C=this.attributesInfo();var E=this.attributes();let B=-1;for(const D of E){B++;E=this.getAtributeState(B);
if(0===E||3===E)continue;var N=C[D];const A=[];m[D]=A;N=N.type;for(let r=0;r<E;r++){const {dataType:w,bytesPerElement:x,count:z,normalized:y}=c._encodingInfo[N],I=x*z;let J=t[w];var F=0;!J||4<J.count+z?(G++,J={dataIndex:G,count:0,offset:0},4!==z&&(t[w]=J),f.push({location:-1,name:"a_data_"+G,count:z,type:w,normalized:y}),F=Math.ceil(Math.max(I/4,1))):(F=f[J.dataIndex],F.count+=z,F=Math.ceil(Math.max(F.count*x/4,1))-Math.ceil(Math.max(J.offset/4,1)));A.push({dataIndex:J.dataIndex,offset:J.offset,bufferElementsToAdd:F});
J.offset+=I;J.count+=z}}for(const D of f)switch(D.type){case 5120:case 5121:D.count=4;case 5122:case 5123:D.count+=D.count%2}this._buildVertexBufferLayout(f);t=0;G=this._layoutInfo.geometry;for(var L of G)this._locations.set(L.name,t++);if(L=this._layoutInfo.opacity)for(const D of L)this._locations.set(D.name,t++);this._buildShaderInfo(f,m);this._propertyEncodingInfo=m};n._buildVertexBufferLayout=function(f){const m={};var t=this.geometryInfo();let G=t[0].stride;if(0===f.length)m.geometry=t;else{const C=
[];let E=G;for(const B of f)G+=h(B.type)*B.count;for(const B of t)t={...B},t.stride=G,C.push(t);for(const B of f)C.push({name:B.name,count:B.count,type:B.type,offset:E,stride:G,normalized:B.normalized||!1,divisor:0}),E+=h(B.type)*B.count;m.geometry=C}this.opacityInfo()&&(m.opacity=this.opacityInfo());this._layoutInfo=m;this._stride=G};n._buildShaderInfo=function(f,m){let t="\n",G="\n";const C=[];for(var E of f)t+=`attribute ${this._getType(E.count)} ${E.name};\n`;var B=this.attributes();f=this.attributesInfo();
E=-1;for(const L of B){E++;const {name:D,type:A,precisionFactor:r,isLayout:w}=f[L];B=r&&1!==r?` * ${1/r}`:"";const {bytesPerElement:x,count:z}=c._encodingInfo[A];var N=y=>`a_data_${y.dataIndex}${e(z,y.offset,x)}`;switch(this.getAtributeState(E)){case 0:B=this._getType(z);var F=`u_${D}`;C.push({name:F,type:B,getValue:(y,I,J,M)=>{J=w?y.getLayoutValue(L,I):y.getPaintValue(L,I);if(11===A){y=y.getDashKey(J,y.getLayoutValue("line-cap",I));M=M.getMosaicItemPosition(y,!1);if(p.isNone(M))return null;const {tl:P,
br:R}=M;return[P[0],R[1],R[0],P[1]]}if(12===A){M=M.getMosaicItemPosition(J,-1===L.indexOf("line-"));if(p.isNone(M))return null;const {tl:P,br:R}=M;return[P[0],R[1],R[0],P[1]]}return 10===A?(M=J[3],[M*J[0],M*J[1],M*J[2],M]):J}});t+=`uniform ${B} ${F};\n`;G+=`${B} ${D} = ${F};\n`;break;case 1:F=N(m[L][0]);G+=`${this._getType(z)} ${D} = ${F}${B};\n`;break;case 2:{F=`u_t_${D}`;C.push({name:F,type:"float",getValue:(I,J,M,P)=>(w?I.getLayoutProperty(L):I.getPaintProperty(L)).interpolator.interpolationUniformValue(M,
J)});t+=`uniform float ${F};\n`;const y=N(m[L][0]);N=N(m[L][1]);G+=`${this._getType(z)} ${D} = mix(${y}${B}, ${N}${B}, ${F});\n`}}}this._shaderHeader=t;this._shaderMain=G;this._uniforms=C};n._bit=function(f){return(this._key&1<<f)>>f};n._getType=function(f){switch(f){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};n._encodeColor=function(f){const m=255*f[3];return b.i8888to32(f[0]*m,f[1]*m,f[2]*m,m)};n._encodePattern=function(f,m,t){if(t&&
t.rect){var G=t.rect,C=t.width;t=t.height;m[f]=this._encodeShort(G.x+2,0);m[f]|=this._encodeShort(G.y+2+t,16);m[f+1]=this._encodeShort(G.x+2+C,0);m[f+1]|=this._encodeShort(G.y+2,16)}};n._encodeByte=function(f,m){return(f&255)<<m};n._encodeShort=function(f,m){return(f&65535)<<m};u._createClass(c,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);return c}();g._encodingInfo={[0]:{dataType:5120,bytesPerElement:1,count:1,normalized:!1},[1]:{dataType:5121,bytesPerElement:1,
count:1,normalized:!1},[2]:{dataType:5122,bytesPerElement:2,count:1,normalized:!1},[3]:{dataType:5123,bytesPerElement:2,count:1,normalized:!1},[4]:{dataType:5120,bytesPerElement:1,count:2,normalized:!1},[5]:{dataType:5121,bytesPerElement:1,count:2,normalized:!1},[6]:{dataType:5122,bytesPerElement:2,count:2,normalized:!1},[7]:{dataType:5123,bytesPerElement:2,count:2,normalized:!1},[8]:{dataType:5120,bytesPerElement:1,count:4,normalized:!1},[9]:{dataType:5121,bytesPerElement:1,count:4,normalized:!1},
[10]:{dataType:5121,bytesPerElement:1,count:4,normalized:!0},[11]:{dataType:5123,bytesPerElement:2,count:4,normalized:!1},[12]:{dataType:5123,bytesPerElement:2,count:4,normalized:!1}};const h=c=>{switch(c){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1}},e=(c,n,f)=>{n/=f;if(1===c)switch(n){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===c)switch(n){case 0:return".xy";case 1:return".yz";
case 2:return".zw"}else if(3===c)switch(n){case 0:return".xyz";case 1:return".yzw"}return""};k.VTLMaterial=g;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function u(b){this._array=[];0>=b&&console.error("strideInBytes must be positive!");this._stride=b}var p=u.prototype;p.reset=function(){this.array.length=0};p.toBuffer=function(){return(new Uint32Array(this._array)).buffer};
u.i1616to32=function(b,g){return 65535&b|g<<16};u.i8888to32=function(b,g,h,e){return b&255|(g&255)<<8|(h&255)<<16|e<<24};u.i8816to32=function(b,g,h){return b&255|(g&255)<<8|h<<16};k._createClass(u,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return u}()})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial"],function(k,u,p){p=function(b){function g(e){return b.call(this,e)||this}u._inheritsLoose(g,b);var h=g.prototype;h.geometryInfo=function(){return g.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return g.ATTRIBUTES};h.attributesInfo=function(){return g.ATTRIBUTES_INFO};return g}(p.VTLMaterial);p.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");
p.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}];p.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:1},"circle-color":{name:"color",type:10},"circle-opacity":{name:"opacity",type:1,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:1,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:10},"circle-stroke-opacity":{name:"stroke_opacity",type:1,precisionFactor:100},"circle-blur":{name:"blur",type:1,precisionFactor:32}};
k.VTLCircleMaterial=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial"],function(k,u,p){let b=function(g){function h(c){return g.call(this,c)||this}u._inheritsLoose(h,g);var e=h.prototype;e.geometryInfo=function(){return h.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return h.ATTRIBUTES};e.attributesInfo=function(){return h.ATTRIBUTES_INFO};
return h}(p.VTLMaterial);b.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];b.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}];b.ATTRIBUTES_INFO={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100},"fill-pattern":{name:"tlbr",type:12,isOptional:!0}};p=function(g){function h(c,n){c=g.call(this,c)||this;c.usefillColor=n;return c}u._inheritsLoose(h,g);var e=h.prototype;e.geometryInfo=function(){return h.GEOMETRY_LAYOUT};
e.opacityInfo=function(){return null};e.attributes=function(){return this.usefillColor?h.ATTRIBUTES_FILL:h.ATTRIBUTES_OUTLINE};e.attributesInfo=function(){return this.usefillColor?h.ATTRIBUTES_INFO_FILL:h.ATTRIBUTES_INFO_OUTLINE};return h}(p.VTLMaterial);p.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];p.ATTRIBUTES_FILL=["fill-color","fill-opacity"];p.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,
normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}];p.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}};p.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}};k.VTLFillMaterial=b;k.VTLOutlineMaterial=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial"],function(k,u,p){p=function(b){function g(e){return b.call(this,e)||this}u._inheritsLoose(g,b);var h=g.prototype;h.geometryInfo=function(){return g.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return g.ATTRIBUTES};h.attributesInfo=function(){return g.ATTRIBUTES_INFO};return g}(p.VTLMaterial);p.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");
p.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_extrude_offset",count:4,type:5120,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_dir_normal",count:4,type:5120,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:12,stride:16,normalized:!1,divisor:0}];p.ATTRIBUTES_INFO={"line-width":{name:"width",type:1,precisionFactor:2},"line-gap-width":{name:"gap_width",type:1,precisionFactor:2},"line-offset":{name:"offset",
type:0,precisionFactor:2},"line-color":{name:"color",type:10},"line-opacity":{name:"opacity",type:1,precisionFactor:100},"line-blur":{name:"blur",type:1,precisionFactor:4},"line-pattern":{name:"tlbr",type:12,isOptional:!0},"line-dasharray":{name:"tlbr",type:11,isOptional:!0}};k.VTLLineMaterial=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial"],
function(k,u,p){const b=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}],g=[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}];let h=function(e){function c(f){return e.call(this,f)||this}
u._inheritsLoose(c,e);var n=c.prototype;n.geometryInfo=function(){return b};n.opacityInfo=function(){return g};n.attributes=function(){return c.ATTRIBUTES};n.attributesInfo=function(){return c.ATTRIBUTES_INFO};return c}(p.VTLMaterial);h.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");h.ATTRIBUTES_INFO={"icon-color":{name:"color",type:10},"icon-opacity":{name:"opacity",type:1,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:10},
"icon-halo-width":{name:"halo_width",type:1,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"icon-size":{name:"size",type:1,precisionFactor:32,isLayout:!0}};p=function(e){function c(f){return e.call(this,f)||this}u._inheritsLoose(c,e);var n=c.prototype;n.geometryInfo=function(){return b};n.opacityInfo=function(){return g};n.attributes=function(){return c.ATTRIBUTES};n.attributesInfo=function(){return c.ATTRIBUTES_INFO};return c}(p.VTLMaterial);p.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");
p.ATTRIBUTES_INFO={"text-color":{name:"color",type:10},"text-opacity":{name:"opacity",type:1,precisionFactor:100},"text-halo-color":{name:"halo_color",type:10},"text-halo-width":{name:"halo_width",type:1,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"text-size":{name:"size",type:1,isLayout:!0}};k.VTLIconMaterial=h;k.VTLTextMaterial=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression",
"../expression/types"],function(k,u){return function(){function p(b){this._expression=b}p.prototype.filter=function(b,g){if(!this._expression)return!0;try{return this._expression.evaluate(b,g)}catch(h){return console.log(h.message),!0}};p.createFilter=function(b){if(!b)return null;this.isLegacyFilter(b)&&(b=this.convertLegacyFilter(b));try{const g=k.createExpression(b,null,u.BooleanType);return new p(g)}catch(g){return console.log(g.message),null}};p.isLegacyFilter=function(b){if(!Array.isArray(b)||
0===b.length)return!0;switch(b[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===b.length&&"string"===typeof b[1]&&!Array.isArray(b[2]);case "in":return 3<=b.length&&"string"===typeof b[1]&&!Array.isArray(b[2]);case "!in":return!0;case "any":case "all":for(let g=1;g<b.length;g++)if(!this.isLegacyFilter(b[1]))return!1;return!0;case "none":return!0;case "has":return 2===b.length&&("$id"===b[1]||"$type"===b[1]);case "!has":return!0;default:return!1}};
p.convertLegacyFilter=function(b){if(!Array.isArray(b)||0===b.length)return!0;const g=b[0];if(1===b.length)return"any"!==g;switch(g){case "\x3d\x3d":return p.convertComparison("\x3d\x3d",b[1],b[2]);case "!\x3d":return p.negate(p.convertComparison("\x3d\x3d",b[1],b[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return p.convertComparison(g,b[1],b[2]);case "in":return p.convertIn(b[1],b.slice(2));case "!in":return p.negate(p.convertIn(b[1],b.slice(2)));case "any":case "all":case "none":return p.convertCombining(g,
b.slice(1));case "has":return p.convertHas(b[1]);case "!has":return p.negate(p.convertHas(b[1]));default:throw Error("Unexpected legacy filter.");}};p.convertComparison=function(b,g,h){switch(g){case "$type":return[b,["geometry-type"],h];case "$id":return[b,["id"],h];default:return[b,["get",g],h]}};p.convertIn=function(b,g){switch(b){case "$type":return["in",["geometry-type"],["literal",g]];case "$id":return["in",["id"],["literal",g]];default:return["in",["get",b],["literal",g]]}};p.convertHas=function(b){switch(b){case "$type":return!0;
case "$id":return["has-id"];default:return["has",b]}};p.convertCombining=function(b,g){return[b].concat(g.map(this.convertLegacyFilter))};p.negate=function(b){return["!",b]};return p}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../unitBezier ../GeometryUtils ./types".split(" "),function(k,u,p,b,g,h,e){function c(l,a,d){var q=typeof l;if("string"===
q||"boolean"===q||"number"===q||null===l){if(d)switch(d.kind){case "string":"string"!==q&&(l=da.toString(l));break;case "number":"number"!==q&&(l=da.toNumber(l));break;case "color":l=da.toColor(l)}l=["literal",l]}if(!Array.isArray(l)||0===l.length)throw Error("Expression must be a non empty array");q=l[0];if("string"!==typeof q)throw Error("First element of expression must be a string");const v=ka[q];if(void 0===v)throw Error(`Invalid expression operator "${q}"`);if(!v)throw Error(`Unimplemented expression operator "${q}"`);
return v.parse(l,a,d)}let n=function(){function l(d){this.parent=d;this.vars={}}var a=l.prototype;a.add=function(d,q){this.vars[d]=q};a.get=function(d){return this.vars[d]?this.vars[d]:this.parent?this.parent.get(d):null};return l}(),f=function(){function l(){this.type=e.ValueType}l.parse=function(a){if(1<a.length)throw Error('"id" does not expect arguments');return new l};l.prototype.evaluate=function(a,d){return null==a?void 0:a.id};return l}(),m=function(){function l(){this.type=e.StringType}l.parse=
function(a){if(1<a.length)throw Error('"geometry-type" does not expect arguments');return new l};l.prototype.evaluate=function(a,d){if(!a)return null;switch(a.type){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";default:return null}};return l}(),t=function(){function l(){this.type=e.ObjectType}l.parse=function(a){if(1<a.length)throw Error('"properties" does not expect arguments');return new l};l.prototype.evaluate=function(a,d){return null==a?void 0:a.values};return l}(),G=
function(){function l(){this.type=e.NumberType}l.parse=function(a){if(1<a.length)throw Error('"zoom" does not expect arguments');return new l};l.prototype.evaluate=function(a,d){return d};return l}(),C=function(){function l(a,d,q){this.lhs=a;this.rhs=d;this.compare=q;this.type=e.BooleanType}l.parse=function(a,d,q){if(3!==a.length&&4!==a.length)throw Error(`"${a[0]}" expects 2 or 3 arguments`);if(4===a.length)throw Error(`"${a[0]}" collator not supported`);return new l(c(a[1],d),c(a[2],d),q)};l.prototype.evaluate=
function(a,d){return this.compare(this.lhs.evaluate(a,d),this.rhs.evaluate(a,d))};return l}(),E=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return C.parse(d,q,(v,H)=>v===H)};return a}(C),B=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return C.parse(d,q,(v,H)=>v!==H)};return a}(C),N=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,
q){return C.parse(d,q,(v,H)=>v<H)};return a}(C),F=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return C.parse(d,q,(v,H)=>v<=H)};return a}(C),L=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return C.parse(d,q,(v,H)=>v>H)};return a}(C),D=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return C.parse(d,q,(v,H)=>v>=H)};return a}(C),
A=function(){function l(a){this.arg=a;this.type=e.BooleanType}l.parse=function(a,d){if(2!==a.length)throw Error('"!" expects 1 argument');return new l(c(a[1],d))};l.prototype.evaluate=function(a,d){return!this.arg.evaluate(a,d)};return l}(),r=function(){function l(a){this.args=a;this.type=e.BooleanType}l.parse=function(a,d){const q=[];for(let v=1;v<a.length;v++)q.push(c(a[v],d));return new l(q)};l.prototype.evaluate=function(a,d){for(const q of this.args)if(!q.evaluate(a,d))return!1;return!0};return l}(),
w=function(){function l(a){this.args=a;this.type=e.BooleanType}l.parse=function(a,d){const q=[];for(let v=1;v<a.length;v++)q.push(c(a[v],d));return new l(q)};l.prototype.evaluate=function(a,d){for(const q of this.args)if(q.evaluate(a,d))return!0;return!1};return l}(),x=function(){function l(a){this.args=a;this.type=e.BooleanType}l.parse=function(a,d){const q=[];for(let v=1;v<a.length;v++)q.push(c(a[v],d));return new l(q)};l.prototype.evaluate=function(a,d){for(const q of this.args)if(q.evaluate(a,
d))return!1;return!0};return l}(),z=function(){function l(a,d,q){this.type=a;this.args=d;this.fallback=q}l.parse=function(a,d,q){if(4>a.length)throw Error('"case" expects at least 3 arguments');if(1===a.length%2)throw Error('"case" expects an odd number of arguments');let v;const H=[];for(let Q=1;Q<a.length-1;Q+=2){const Y=c(a[Q],d),S=c(a[Q+1],d,q);v||(v=S.type);H.push({condition:Y,output:S})}a=c(a[a.length-1],d,q);v||(v=a.type);return new l(v,H,a)};l.prototype.evaluate=function(a,d){for(const q of this.args)if(q.condition.evaluate(a,
d))return q.output.evaluate(a,d);return this.fallback.evaluate(a,d)};return l}(),y=function(){function l(a,d){this.type=a;this.args=d}l.parse=function(a,d){if(2>a.length)throw Error('"coalesce" expects at least 1 argument');let q;const v=[];for(let H=1;H<a.length;H++){const Q=c(a[H],d);q||(q=Q.type);v.push(Q)}return new l(q,v)};l.prototype.evaluate=function(a,d){for(const q of this.args){const v=q.evaluate(a,d);if(null!==v)return v}return null};return l}(),I=function(){function l(a,d,q,v,H){this.type=
a;this.input=d;this.labels=q;this.outputs=v;this.fallback=H}l.parse=function(a,d){if(3>a.length)throw Error('"match" expects at least 3 arguments');if(0===a.length%2)throw Error('"case" expects an even number of arguments');let q;const v=c(a[1],d),H=[],Q={};let Y;for(let ca=2;ca<a.length-1;ca+=2){var S=a[ca];Array.isArray(S)||(S=[S]);for(const ea of S){S=typeof ea;if("string"!==S&&"number"!==S)throw Error('"match" requires string or number literal as labels');if(!Y)Y=S;else if(S!==Y)throw Error('"match" requires labels to have the same type');
Q[ea]=H.length}S=c(a[ca+1],d);q||(q=S.type);H.push(S)}return new l(q,v,Q,H,c(a[a.length-1],d))};l.prototype.evaluate=function(a,d){const q=this.input.evaluate(a,d);return(this.outputs[this.labels[q]]||this.fallback).evaluate(a,d)};return l}(),J=function(){function l(d,q,v,H,Q){this.operator=d;this.type=q;this.interpolation=v;this.input=H;this.stops=Q}l.parse=function(d,q,v){const H=d[0];if(5>d.length)throw Error(`"${H}" expects at least 4 arguments`);const Q=d[1];if(!Array.isArray(Q)||0===Q.length)throw Error(`"${Q}" is not a valid interpolation`);
switch(Q[0]){case "linear":if(1!==Q.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==Q.length||"number"!==typeof Q[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==Q.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var Y=1;5>Y;Y++){var S=Q[Y];if("number"!==typeof S||0>S||1<S)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");
}break;default:throw Error(`"${d[0]}" unknown interpolation type "${Q[0]}"`);}if(1!==d.length%2)throw Error(`"${H}" expects an even number of arguments`);Y=c(d[2],q,e.NumberType);let ca;"interpolate-hcl"===H||"interpolate-lab"===H?ca=e.ColorType:v&&"value"!==v.kind&&(ca=v);v=[];for(S=3;S<d.length;S+=2){const ea=d[S];if("number"!==typeof ea)throw Error(`"${H}" requires stop inputs as literal numbers`);if(v.length&&v[v.length-1][0]>=ea)throw Error(`"${H}" requires strictly ascending stop inputs`);const la=
c(d[S+1],q,ca);ca||(ca=la.type);v.push([ea,la])}if(ca&&ca!==e.ColorType&&ca!==e.NumberType&&("array"!==ca.kind||ca.itemType!==e.NumberType))throw Error(`"${H}" cannot interpolate type ${e.typeToString(ca)}`);return new l(H,ca,Q,Y,v)};var a=l.prototype;a.evaluate=function(d,q){var v=this.stops;if(1===v.length)return v[0][1].evaluate(d,q);var H=this.input.evaluate(d,q);if(H<=v[0][0])return v[0][1].evaluate(d,q);if(H>=v[v.length-1][0])return v[v.length-1][1].evaluate(d,q);let Q=0;for(;++Q<v.length&&
!(H<v[Q][0]););const Y=l.interpolationRatio(this.interpolation,H,v[Q-1][0],v[Q][0]);H=v[Q-1][1].evaluate(d,q);const S=v[Q][1].evaluate(d,q);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(H)&&Array.isArray(S))return H.map((ca,ea)=>h.interpolate(ca,S[ea],Y));if("color"===this.type.kind&&H instanceof p&&S instanceof p)return H=new p(H),d=new p(S),new p([h.interpolate(H.r,d.r,Y),h.interpolate(H.g,d.g,Y),h.interpolate(H.b,d.b,Y),h.interpolate(H.a,d.a,Y)]);if("number"===this.type.kind&&
"number"===typeof H&&"number"===typeof S)return h.interpolate(H,S,Y);throw Error(`"${this.operator}" cannot interpolate type ${e.typeToString(this.type)}`);}if("interpolate-hcl"===this.operator)return d=b.toLCH(H),q=b.toLCH(S),v=q.h-d.h,d=b.toRGB({h:d.h+Y*(180<v||-180>v?v-360*Math.round(v/360):v),c:h.interpolate(d.c,q.c,Y),l:h.interpolate(d.l,q.l,Y)}),new p({a:h.interpolate(H.a,S.a,Y),...d});if("interpolate-lab"===this.operator)return d=b.toLAB(H),q=b.toLAB(S),d=b.toRGB({l:h.interpolate(d.l,q.l,Y),
a:h.interpolate(d.a,q.a,Y),b:h.interpolate(d.b,q.b,Y)}),new p({a:h.interpolate(H.a,S.a,Y),...d});throw Error(`Unexpected operator "${this.operator}"`);};a.interpolationUniformValue=function(d,q){const v=this.stops;if(1===v.length||d>=v[v.length-1][0])return 0;let H=0;for(;++H<v.length&&!(d<v[H][0]););return l.interpolationRatio(this.interpolation,q,v[H-1][0],v[H][0])};a.getInterpolationRange=function(d){const q=this.stops;if(1===q.length)return d=q[0][0],[d,d];var v=q[q.length-1][0];if(d>=v)return[v,
v];for(v=0;++v<q.length&&!(d<q[v][0]););return[q[v-1][0],q[v][0]]};l.interpolationRatio=function(d,q,v,H){let Q=0;"linear"===d[0]?Q=l.exponentialInterpolationRatio(q,1,v,H):"exponential"===d[0]?Q=l.exponentialInterpolationRatio(q,d[1],v,H):"cubic-bezier"===d[0]&&(Q=g.unitBezier(d[1],d[2],d[3],d[4])(l.exponentialInterpolationRatio(q,1,v,H),1E-5));0>Q?Q=0:1<Q&&(Q=1);return Q};l.exponentialInterpolationRatio=function(d,q,v,H){H-=v;if(0===H)return 0;d-=v;return 1===q?d/H:(q**d-1)/(q**H-1)};return l}(),
M=function(){function l(a,d,q){this.type=a;this.input=d;this.stops=q}l.parse=function(a,d){if(5>a.length)throw Error('"step" expects at least 4 arguments');if(1!==a.length%2)throw Error('"step" expects an even number of arguments');const q=c(a[1],d,e.NumberType);let v;const H=[];H.push([-Infinity,c(a[2],d)]);for(let Q=3;Q<a.length;Q+=2){const Y=a[Q];if("number"!==typeof Y)throw Error('"step" requires stop inputs as literal numbers');if(H.length&&H[H.length-1][0]>=Y)throw Error('"step" requires strictly ascending stop inputs');
const S=c(a[Q+1],d);v||(v=S.type);H.push([Y,S])}return new l(v,q,H)};l.prototype.evaluate=function(a,d){const q=this.stops;if(1===q.length)return q[0][1].evaluate(a,d);const v=this.input.evaluate(a,d);let H=0;for(;++H<q.length&&!(v<q[H][0]););return this.stops[H-1][1].evaluate(a,d)};return l}(),P=function(){function l(a,d){this.type=a;this.output=d}l.parse=function(a,d,q){if(4>a.length)throw Error('"let" expects at least 3 arguments');if(1===a.length%2)throw Error('"let" expects an odd number of arguments');
const v=new n(d);for(let H=1;H<a.length-1;H+=2){const Q=a[H];if("string"!==typeof Q)throw Error(`"let" requires a string to define variable names - found ${Q}`);v.add(Q,c(a[H+1],d))}a=c(a[a.length-1],v,q);return new l(a.type,a)};l.prototype.evaluate=function(a,d){return this.output.evaluate(a,d)};return l}(),R=function(){function l(a,d){this.type=a;this.output=d}l.parse=function(a,d,q){if(2!==a.length||"string"!==typeof a[1])throw Error('"var" requires just one literal string argument');d=d.get(a[1]);
if(!d)throw Error(`${a[1]} must be defined before being used in a "var" expression`);return new l(q||e.ValueType,d)};l.prototype.evaluate=function(a,d){return this.output.evaluate(a,d)};return l}(),Z=function(){function l(a,d,q){this.type=a;this.index=d;this.array=q}l.parse=function(a,d){if(3!==a.length)throw Error('"at" expects 2 arguments');const q=c(a[1],d,e.NumberType);a=c(a[2],d);return new l(a.type.itemType,q,a)};l.prototype.evaluate=function(a,d){const q=this.index.evaluate(a,d);a=this.array.evaluate(a,
d);if(0>q||q>=a.length)throw Error('"at" index out of bounds');if(q!==Math.floor(q))throw Error('"at" index must be an integer');return a[q]};return l}(),X=function(){function l(a,d){this.key=a;this.obj=d;this.type=e.ValueType}l.parse=function(a,d){let q;switch(a.length){case 2:return q=c(a[1],d),new l(q);case 3:return q=c(a[1],d),a=c(a[2],d),new l(q,a);default:throw Error('"get" expects 1 or 2 arguments');}};l.prototype.evaluate=function(a,d){const q=this.key.evaluate(a,d);return this.obj?this.obj.evaluate(a,
d)[q]:null==a?void 0:a.values[q]};return l}(),V=function(){function l(a,d){this.key=a;this.obj=d;this.type=e.BooleanType}l.parse=function(a,d){let q;switch(a.length){case 2:return q=c(a[1],d),new l(q);case 3:return q=c(a[1],d),a=c(a[2],d),new l(q,a);default:throw Error('"has" expects 1 or 2 arguments');}};l.prototype.evaluate=function(a,d){const q=this.key.evaluate(a,d);return this.obj?(a=this.obj.evaluate(a,d),q in a):!(null==a||!a.values[q])};return l}(),aa=function(){function l(a,d){this.key=a;
this.vals=d;this.type=e.BooleanType}l.parse=function(a,d){if(3!==a.length)throw Error('"in" expects 2 arguments');return new l(c(a[1],d),c(a[2],d))};l.prototype.evaluate=function(a,d){const q=this.key.evaluate(a,d);return-1!==this.vals.evaluate(a,d).indexOf(q)};return l}(),T=function(){function l(a,d,q){this.item=a;this.array=d;this.from=q;this.type=e.NumberType}l.parse=function(a,d){if(3>a.length||4<a.length)throw Error('"index-of" expects 3 or 4 arguments');const q=c(a[1],d),v=c(a[2],d);return 4===
a.length?(a=c(a[3],d,e.NumberType),new l(q,v,a)):new l(q,v)};l.prototype.evaluate=function(a,d){const q=this.item.evaluate(a,d),v=this.array.evaluate(a,d);if(this.from){a=this.from.evaluate(a,d);if(a!==Math.floor(a))throw Error('"index-of" index must be an integer');return v.indexOf(q,a)}return v.indexOf(q)};return l}(),K=function(){function l(a){this.arg=a;this.type=e.NumberType}l.parse=function(a,d){if(2!==a.length)throw Error('"length" expects 2 arguments');a=c(a[1],d);return new l(a)};l.prototype.evaluate=
function(a,d){a=this.arg.evaluate(a,d);if("string"===typeof a||Array.isArray(a))return a.length;throw Error('"length" expects string or array');};return l}(),O=function(){function l(a,d,q,v){this.type=a;this.array=d;this.from=q;this.to=v}l.parse=function(a,d){if(3>a.length||4<a.length)throw Error('"slice" expects 2 or 3 arguments');const q=c(a[1],d),v=c(a[2],d,e.NumberType);if(v.type!==e.NumberType)throw Error('"slice" index must return a number');if(4===a.length){a=c(a[3],d,e.NumberType);if(a.type!==
e.NumberType)throw Error('"slice" index must return a number');return new l(q.type,q,v,a)}return new l(q.type,q,v)};l.prototype.evaluate=function(a,d){const q=this.array.evaluate(a,d);if(!Array.isArray(q)&&"string"!==typeof q)throw Error('"slice" input must be an array or a string');const v=this.from.evaluate(a,d);if(0>v||v>=q.length)throw Error('"slice" index out of bounds');if(v!==Math.floor(v))throw Error('"slice" index must be an integer');if(this.to){a=this.to.evaluate(a,d);if(0>a||a>=q.length)throw Error('"slice" index out of bounds');
if(a!==Math.floor(a))throw Error('"slice" index must be an integer');return q.slice(v,a)}return q.slice(v)};return l}(),U=function(){function l(){this.type=e.BooleanType}l.parse=function(a){if(1!==a.length)throw Error('"has-id" expects no arguments');return new l};l.prototype.evaluate=function(a,d){return a&&void 0!==a.id};return l}(),W=function(){function l(a,d){this.args=a;this.calculate=d;this.type=e.NumberType}l.parse=function(a,d,q){a=a.slice(1).map(v=>c(v,d));return new l(a,q)};l.prototype.evaluate=
function(a,d){let q;this.args&&(q=this.args.map(v=>v.evaluate(a,d)));return this.calculate(q)};return l}(),fa=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){switch(d.length){case 2:return W.parse(d,q,v=>-v[0]);case 3:return W.parse(d,q,v=>v[0]-v[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return a}(W),ha=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return W.parse(d,
q,v=>{let H=1;for(const Q of v)H*=Q;return H})};return a}(W),ma=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){if(3===d.length)return W.parse(d,q,v=>v[0]/v[1]);throw Error('"/" expects 2 arguments');};return a}(W),na=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){if(3===d.length)return W.parse(d,q,v=>v[0]%v[1]);throw Error('"%" expects 2 arguments');};return a}(W),oa=function(l){function a(){return l.apply(this,
arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){if(3===d.length)return W.parse(d,q,v=>v[0]**v[1]);throw Error('"^" expects 1 or 2 arguments');};return a}(W),pa=function(l){function a(){return l.apply(this,arguments)||this}u._inheritsLoose(a,l);a.parse=function(d,q){return W.parse(d,q,v=>{let H=0;for(const Q of v)H+=Q;return H})};return a}(W),ba=function(){function l(a,d){this.args=a;this.calculate=d;this.type=e.NumberType}l.parse=function(a,d){const q=a.slice(1).map(v=>c(v,d));return new l(q,
l.ops[a[0]])};l.prototype.evaluate=function(a,d){let q;this.args&&(q=this.args.map(v=>v.evaluate(a,d)));return this.calculate(q)};return l}();ba.ops={abs:l=>Math.abs(l[0]),acos:l=>Math.acos(l[0]),asin:l=>Math.asin(l[0]),atan:l=>Math.atan(l[0]),ceil:l=>Math.ceil(l[0]),cos:l=>Math.cos(l[0]),e:()=>Math.E,floor:l=>Math.floor(l[0]),ln:l=>Math.log(l[0]),ln2:()=>Math.LN2,log10:l=>Math.log(l[0])/Math.LN10,log2:l=>Math.log(l[0])/Math.LN2,max:l=>Math.max(...l),min:l=>Math.min(...l),pi:()=>Math.PI,round:l=>
Math.round(l[0]),sin:l=>Math.sin(l[0]),sqrt:l=>Math.sqrt(l[0]),tan:l=>Math.tan(l[0])};let qa=function(){function l(a){this.args=a;this.type=e.StringType}l.parse=function(a,d){return new l(a.slice(1).map(q=>c(q,d)))};l.prototype.evaluate=function(a,d){return this.args.map(q=>q.evaluate(a,d)).join("")};return l}(),ja=function(){function l(a,d){this.arg=a;this.calculate=d;this.type=e.StringType}l.parse=function(a,d){if(2!==a.length)throw Error(`${a[0]} expects 1 argument`);d=c(a[1],d);return new l(d,
l.ops[a[0]])};l.prototype.evaluate=function(a,d){return this.calculate(this.arg.evaluate(a,d))};return l}();ja.ops={downcase:l=>l.toLowerCase(),upcase:l=>l.toUpperCase()};let ra=function(){function l(d){this.args=d;this.type=e.ColorType}l.parse=function(d,q){if(4!==d.length)throw Error('"rgb" expects 3 arguments');d=d.slice(1).map(v=>c(v,q));return new l(d)};var a=l.prototype;a.evaluate=function(d,q){const v=this._validate(this.args[0].evaluate(d,q)),H=this._validate(this.args[1].evaluate(d,q));d=
this._validate(this.args[2].evaluate(d,q));return new p({r:v,g:H,b:d})};a._validate=function(d){if("number"!==typeof d||0>d||255<d)throw Error(`${d}: invalid color component`);return Math.round(d)};return l}(),sa=function(){function l(d){this.args=d;this.type=e.ColorType}l.parse=function(d,q){if(5!==d.length)throw Error('"rgba" expects 4 arguments');d=d.slice(1).map(v=>c(v,q));return new l(d)};var a=l.prototype;a.evaluate=function(d,q){const v=this._validate(this.args[0].evaluate(d,q)),H=this._validate(this.args[1].evaluate(d,
q)),Q=this._validate(this.args[2].evaluate(d,q));d=this._validateAlpha(this.args[3].evaluate(d,q));return new p({r:v,g:H,b:Q,a:d})};a._validate=function(d){if("number"!==typeof d||0>d||255<d)throw Error(`${d}: invalid color component`);return Math.round(d)};a._validateAlpha=function(d){if("number"!==typeof d||0>d||1<d)throw Error(`${d}: invalid alpha color component`);return d};return l}(),ta=function(){function l(a){this.color=a;this.type=e.arrayType(e.NumberType,4)}l.parse=function(a,d){if(2!==
a.length)throw Error('"to-rgba" expects 1 argument');a=c(a[1],d);return new l(a)};l.prototype.evaluate=function(a,d){return(new p(this.color.evaluate(a,d))).toRgba()};return l}(),ia=function(){function l(a,d){this.type=a;this.args=d}l.parse=function(a,d){var q=a[0];if(2>a.length)throw Error(`${q} expects at least one argument`);let v=1,H;if("array"===q){if(2<a.length){switch(a[1]){case "string":H=e.StringType;break;case "number":H=e.NumberType;break;case "boolean":H=e.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');
}v++}else H=e.ValueType;if(3<a.length){var Q=a[2];if(null!==Q&&("number"!==typeof Q||0>Q||Q!==Math.floor(Q)))throw Error('"array" length argument must be a positive integer literal');v++}H=e.arrayType(H,Q)}else switch(q){case "string":H=e.StringType;break;case "number":H=e.NumberType;break;case "boolean":H=e.BooleanType;break;case "object":H=e.ObjectType}for(q=[];v<a.length;v++)Q=c(a[v],d),q.push(Q);return new l(H,q)};l.prototype.evaluate=function(a,d){let q;for(const v of this.args){const H=v.evaluate(a,
d);q=e.getType(H);if(e.matchType(q,this.type))return H}throw Error(`Expected ${e.typeToString(this.type)} but got ${e.typeToString(q)}`);};return l}(),da=function(){function l(a,d){this.type=a;this.args=d}l.parse=function(a,d){var q=a[0];const v=l.types[q];if(v===e.BooleanType||v===e.StringType){if(2!==a.length)throw Error(`${q} expects one argument`);}else if(2>a.length)throw Error(`${q} expects at least one argument`);q=[];for(let H=1;H<a.length;H++){const Q=c(a[H],d);q.push(Q)}return new l(v,q)};
l.prototype.evaluate=function(a,d){if(this.type===e.BooleanType)return!!this.args[0].evaluate(a,d);if(this.type===e.StringType)return e.valueToString(this.args[0].evaluate(a,d));if(this.type===e.NumberType){for(const v of this.args){var q=Number(v.evaluate(a,d));if(!isNaN(q))return q}return null}if(this.type===e.ColorType){for(q of this.args)try{const v=l.toColor(q.evaluate(a,d));if(v instanceof p)return v}catch{}return null}};l.toBoolean=function(a){return!!a};l.toString=function(a){return e.valueToString(a)};
l.toNumber=function(a){const d=Number(a);if(isNaN(d))throw Error(`"${a}" is not a number`);return d};l.toColor=function(a){if(a instanceof p)return a;if("string"===typeof a){const d=p.fromString(a);if(d)return d;throw Error(`"${a}" is not a color`);}if(Array.isArray(a))return p.fromArray(a);throw Error(`"${a}" is not a color`);};return l}();da.types={"to-boolean":e.BooleanType,"to-color":e.ColorType,"to-number":e.NumberType,"to-string":e.StringType};let ua=function(){function l(a){this.val=a;this.type=
e.getType(a)}l.parse=function(a){if(2!==a.length)throw Error('"literal" expects 1 argument');return new l(a[1])};l.prototype.evaluate=function(a,d){return this.val};return l}(),va=function(){function l(a){this.arg=a;this.type=e.StringType}l.parse=function(a,d){if(2!==a.length)throw Error('"typeof" expects 1 argument');return new l(c(a[1],d))};l.prototype.evaluate=function(a,d){return e.typeToString(e.getType(this.arg.evaluate(a,d)))};return l}();const ka={array:ia,boolean:ia,collator:null,format:null,
image:null,literal:ua,number:ia,"number-format":null,object:ia,string:ia,"to-boolean":da,"to-color":da,"to-number":da,"to-string":da,typeof:va,accumulated:null,"feature-state":null,"geometry-type":m,id:f,"line-progress":null,properties:t,at:Z,get:X,has:V,in:aa,"index-of":T,length:K,slice:O,"!":A,"!\x3d":B,"\x3c":N,"\x3c\x3d":F,"\x3d\x3d":E,"\x3e":L,"\x3e\x3d":D,all:r,any:w,case:z,coalesce:y,match:I,within:null,interpolate:J,"interpolate-hcl":J,"interpolate-lab":J,step:M,let:P,var:R,concat:qa,downcase:ja,
"is-supported-script":null,"resolved-locale":null,upcase:ja,rgb:ra,rgba:sa,"to-rgba":ta,"-":fa,"*":ha,"/":ma,"%":na,"^":oa,"+":pa,abs:ba,acos:ba,asin:ba,atan:ba,ceil:ba,cos:ba,e:ba,floor:ba,ln:ba,ln2:ba,log10:ba,log2:ba,max:ba,min:ba,pi:ba,round:ba,sin:ba,sqrt:ba,tan:ba,zoom:G,"heatmap-density":null,"has-id":U,none:x};k.ALL=r;k.ANY=w;k.Add=pa;k.Assert=ia;k.At=Z;k.Calculate=ba;k.Case=z;k.Coalesce=y;k.Coerce=da;k.Concat=qa;k.Div=ma;k.EQ=E;k.GE=D;k.GT=L;k.GeomType=m;k.Get=X;k.Has=V;k.HasID=U;k.ID=f;
k.In=aa;k.IndexOf=T;k.Interpolate=J;k.LE=F;k.LT=N;k.Length=K;k.Let=P;k.Literal=ua;k.Match=I;k.Mod=na;k.Mul=ha;k.NE=B;k.NONE=x;k.NOT=A;k.Pow=oa;k.Properties=t;k.Rgb=ra;k.Rgba=sa;k.Slice=O;k.Step=M;k.String=ja;k.Sub=fa;k.ToRgba=ta;k.TypeOf=va;k.Var=R;k.Zoom=G;k.createExpression=c;k.ops=ka;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(k){function u(f,m){const t=[];let G,C;if(f[0].length!==m.length)throw"dimensions do not match";const E=
f.length,B=f[0].length;let N=0;for(G=0;G<E;G++){for(C=N=0;C<B;C++)N+=f[G][C]*m[C];t.push(N)}return t}function p(f){f=[f.r/255,f.g/255,f.b/255].map(m=>.04045>=m?m/12.92:((m+.055)/1.055)**2.4);f=u(c,f);return{x:100*f[0],y:100*f[1],z:100*f[2]}}function b(f){f=u(n,[f.x/100,f.y/100,f.z/100]).map(m=>Math.min(1,Math.max(.0031308>=m?12.92*m:1.055*m**(1/2.4)-.055,0)));return{r:Math.round(255*f[0]),g:Math.round(255*f[1]),b:Math.round(255*f[2])}}function g(f){f=[f.x/95.047,f.y/100,f.z/108.883].map(m=>m>(6/29)**
3?m**(1/3):1/3*(29/6)**2*m+4/29);return{l:116*f[1]-16,a:500*(f[0]-f[1]),b:200*(f[1]-f[2])}}function h(f){const m=f.l;f=[(m+16)/116+f.a/500,(m+16)/116,(m+16)/116-f.b/200].map(t=>t>6/29?t**3:3*(6/29)**2*(t-4/29));return{x:95.047*f[0],y:100*f[1],z:108.883*f[2]}}function e(f){if("r"in f&&"g"in f&&"b"in f)return f;if("l"in f&&"c"in f&&"h"in f){var m=f.c;var t=f.h;m={l:f.l,a:m*Math.cos(t),b:m*Math.sin(t)};return b(h(m))}if("l"in f&&"a"in f&&"b"in f)return b(h(f));if("x"in f&&"y"in f&&"z"in f)return b(f);
if("h"in f&&"s"in f&&"v"in f){{t=(f.h+360)%360/60;m=f.v/100*255;f=f.s/100*m;const G=f*(1-Math.abs(t%2-1));switch(Math.floor(t)){case 0:t={r:f,g:G,b:0};break;case 1:t={r:G,g:f,b:0};break;case 2:t={r:0,g:f,b:G};break;case 3:t={r:0,g:G,b:f};break;case 4:t={r:G,g:0,b:f};break;case 5:case 6:t={r:f,g:0,b:G};break;default:t={r:0,g:0,b:0}}t.r=Math.round(t.r+m-f);t.g=Math.round(t.g+m-f);t.b=Math.round(t.b+m-f);m=t}return m}return f}const c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],n=[[3.2406,
-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];k.darken=function(f,m){f=g(p(f));f.l*=1-m;return b(h(f))};k.toHSV=function(f){if("h"in f&&"s"in f&&"v"in f)return f;var m=e(f);{f=m.r;const t=m.g,G=m.b;m=Math.max(f,t,G);const C=m-Math.min(f,t,G);f=0===C?0:m===f?(t-G)/C%6:m===t?(G-f)/C+2:(f-t)/C+4;0>f&&(f+=6);f={h:60*f,s:100*(0===C?0:C/m),v:100/255*m}}return f};k.toLAB=function(f){return"l"in f&&"a"in f&&"b"in f?f:g(p(e(f)))};k.toLCH=function(f){if(!("l"in f&&"c"in f&&"h"in f)){{var m=g(p(e(f)));
f=m.l;var t=m.a;const G=m.b;m=Math.sqrt(t*t+G*G);t=Math.atan2(G,t);t=0<t?t:t+2*Math.PI;f={l:f,c:m,h:t}}}return f};k.toRGB=e;k.toXYZ=function(f){return"x"in f&&"y"in f&&"z"in f?f:p(e(f))};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(k){function u(g,h,e,c){function n(B,N){var F;let L,D;L=B;for(F=0;8>F;F++){D=((t*L+m)*L+f)*L-B;if(Math.abs(D)<N)return L;var A=(3*t*L+2*m)*L+f;if(1E-6>Math.abs(A))break;L-=D/A}A=0;F=1;L=B;if(L<A)return A;
if(L>F)return F;for(;A<F;){D=((t*L+m)*L+f)*L;if(Math.abs(D-B)<N)break;B>D?A=L:F=L;L=.5*(F-A)+A}return L}const f=3*g,m=3*(e-g)-f,t=1-f-m,G=3*h,C=3*(c-h)-G,E=1-G-C;return function(B,N=1E-6){B=n(B,N);return((E*B+C)*B+G)*B}}const p=/^cubic-bezier\((.*)\)/,b={};b.ease=u(.25,.1,.25,1);b.linear=u(0,0,1,1);b.easeIn=b["ease-in"]=u(.42,0,1,1);b.easeOut=b["ease-out"]=u(0,0,.58,1);b.easeInOut=b["ease-in-out"]=u(.42,0,.58,1);k.easingFunctions=b;k.parse=function(g){let h=b[g]||null;!h&&(g=p.exec(g))&&(g=g[1].split(",").map(e=>
parseFloat(e.trim())),4!==g.length||g.some(e=>isNaN(e))||(h=u.apply(u,g)));return h};k.unitBezier=u;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(k){function u(c,n){c%=n;return 0<=c?c:c+n}const p=Number.POSITIVE_INFINITY,b=Math.PI,g=128/b,h=256/360,e=1/Math.LN2;k.C_256_TO_RAD=b/128;k.C_2PI=2*b;k.C_DEG_TO_256=h;k.C_DEG_TO_RAD=b/180;k.C_INFINITY=p;k.C_PI=b;k.C_PI_BY_2=b/2;k.C_RAD_TO_256=g;k.C_SQRT2=1.414213562;
k.C_SQRT2_INV=1/1.414213562;k.between=function(c,n,f){return c>=n&&c<=f||c>=f&&c<=n};k.degToByte=function(c){return u(c*h,256)};k.interpolate=function(c,n,f){return c*(1-f)+n*f};k.log2=function(c){return Math.log(c)*e};k.positiveMod=u;k.radToByte=function(c){return u(c*g,256)};k.sqr=function(c){return c*c};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(k,u){function p(E,B){return{kind:"array",
itemType:E,n:B}}function b(E){if("array"===E.kind){const B=b(E.itemType);return"number"===typeof E.n?`array<${B}, ${E.n}>`:"value"===E.itemType.kind?"array":`array<${B}>`}return E.kind}function g(E){if(null===E)return e;if("string"===typeof E)return n;if("boolean"===typeof E)return f;if("number"===typeof E)return c;if(E instanceof u)return m;if(Array.isArray(E)){let B;for(const N of E){const F=g(N);if(!B)B=F;else if(B!==F){B=G;break}}return p(B||G,E.length)}return"object"===typeof E?t:G}function h(E,
B){if("array"===B.kind)return"array"===E.kind&&(0===E.n&&"value"===E.itemType.kind||h(E.itemType,B.itemType))&&("number"!==typeof B.n||B.n===E.n);if("value"===B.kind)for(const N of C)if(h(E,N))return!0;return B.kind===E.kind}const e={kind:"null"},c={kind:"number"},n={kind:"string"},f={kind:"boolean"},m={kind:"color"},t={kind:"object"},G={kind:"value"},C=[e,c,n,f,m,t,p(G)];k.BooleanType=f;k.ColorType=m;k.NullType=e;k.NumberType=c;k.ObjectType=t;k.StringType=n;k.ValueType=G;k.arrayType=p;k.getType=
g;k.matchType=h;k.typeToString=b;k.valueToString=function(E){if(null===E)return"";const B=typeof E;return"string"===B?E:"number"===B||"boolean"===B?String(E):E instanceof u?E.toString():JSON.stringify(E)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports"],function(k){let u=function(){};u.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}};u.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],default:0}};u.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"line-cap":{type:"enum",values:["butt","round","square"],default:0},"line-join":{type:"enum",values:["bevel","round","miter"],default:2},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};u.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",
values:["point","line","line-center"],default:0},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:0},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:0},"text-field":{type:"string"},"text-font":{type:"array",
value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:2},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,
default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:0},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[0]}};u.circleLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],default:0}};u.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};u.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",
value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};u.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",
value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"line-width":{type:"number",minimum:0,default:1}};u.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,
default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};u.rasterPaintDefinition=
{"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};u.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,
default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};
k.StyleDefinition=u;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(k,u,p,b){return function(){function g(e,c){this.isDataDriven=!1;this.interpolator=null;switch(e.type){case "number":var n=!0;break;case "color":n=!0;break;case "array":n="number"===e.value;break;default:n=!1}null==c&&(c=e.default);if(Array.isArray(c)&&0<
c.length&&p.ops[c[0]]){n={number:b.NumberType,color:b.ColorType,string:b.StringType,boolean:b.BooleanType,enum:b.StringType};try{var f="array"===e.type?b.arrayType(n[e.value]||b.ValueType,e.length):n[e.type];const m=p.createExpression(c,null,f);this.getValue=this._buildExpression(m,e);this.isDataDriven=!0;m instanceof p.Interpolate&&m.input instanceof p.Zoom&&(this.interpolator=m)}catch(m){console.log(m.message),this.getValue=this._buildSimple(e.default)}}else{n&&"interval"===c.type&&(n=!1);if(f=
c&&c.stops&&0<c.stops.length)for(const m of c.stops)m[1]=this._validate(m[1],e);if(this.isDataDriven=c?!!c.property:!1)if(void 0!==c.default&&(c.default=this._validate(c.default,e)),f)switch(c.type){case "identity":this.getValue=this._buildIdentity(c,e);break;case "categorical":this.getValue=this._buildCategorical(c,e);break;default:this.getValue=n?this._buildInterpolate(c,e):this._buildInterval(c,e)}else this.getValue=this._buildIdentity(c,e);else f?this.getValue=n?this._buildZoomInterpolate(c):
this._buildZoomInterval(c):(c=this._validate(c,e),this.getValue=this._buildSimple(c))}}var h=g.prototype;h._validate=function(e,c){if("number"===c.type){if(e<c.minimum)return c.minimum;if(e>c.maximum)return c.maximum}else"color"===c.type?e=g._parseColor(e):"enum"===c.type?"string"===typeof e&&(e=c.values.indexOf(e)):"array"===c.type&&"enum"===c.value?e=e.map(n=>"string"===typeof n?c.values.indexOf(n):n):"string"===c.type&&(e=b.valueToString(e));return e};h._buildSimple=function(e){return()=>e};h._buildExpression=
function(e,c){return(n,f)=>{try{const m=e.evaluate(f,n);return void 0===m?c.default:this._validate(m,c)}catch(m){return console.log(m.message),c.default}}};h._buildIdentity=function(e,c){return(n,f)=>{let m;f&&(m=f.values[e.property]);void 0!==m&&(m=this._validate(m,c));return null!=m?m:void 0!==e.default?e.default:c.default}};h._buildCategorical=function(e,c){return(n,f)=>{let m;f&&(m=f.values[e.property]);m=this._categorical(m,e.stops);return void 0!==m?m:void 0!==e.default?e.default:c.default}};
h._buildInterval=function(e,c){return(n,f)=>{let m;f&&(m=f.values[e.property]);return"number"===typeof m?this._interval(m,e.stops):void 0!==e.default?e.default:c.default}};h._buildInterpolate=function(e,c){return(n,f)=>{let m;f&&(m=f.values[e.property]);return"number"===typeof m?this._interpolate(m,e.stops,e.base||1):void 0!==e.default?e.default:c.default}};h._buildZoomInterpolate=function(e){return c=>this._interpolate(c,e.stops,e.base||1)};h._buildZoomInterval=function(e){return c=>this._interval(c,
e.stops)};h._categorical=function(e,c){const n=c.length;for(let f=0;f<n;f++)if(c[f][0]===e)return c[f][1]};h._interval=function(e,c){const n=c.length;let f=0;for(let m=0;m<n;m++)if(c[m][0]<=e)f=m;else break;return c[f][1]};h._interpolate=function(e,c,n){const f=c.length;for(let G=0;G<f;G++){const C=c[G];if(C[0]<=e)var m=C;else{var t=C;break}}if(m&&t){c=t[0]-m[0];e-=m[0];n=1===n?e/c:(n**e-1)/(n**c-1);if(Array.isArray(m[1])){m=m[1];t=t[1];e=[];for(c=0;c<m.length;c++)e.push(u.interpolate(m[c],t[c],n));
return e}return u.interpolate(m[1],t[1],n)}if(m)return m[1];if(t)return t[1]};g._isEmpty=function(e){for(const c in e)if(e.hasOwnProperty(c))return!1;return!0};g._parseColor=function(e){if(Array.isArray(e))return e;"string"===typeof e&&(e=new k(e));if(e instanceof k&&!this._isEmpty(e))return k.toUnitRGBA(e)};return g}()})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(k){k.ANGLE_FACTOR_256=256/360;k.ATTRIBUTE_DATA_ANIMATION=1;k.ATTRIBUTE_DATA_DD0=3;k.ATTRIBUTE_DATA_DD1=
3;k.ATTRIBUTE_DATA_FILTER_FLAGS=0;k.ATTRIBUTE_DATA_VV=2;k.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;k.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};k.BITSET_GENERIC_LOCK_COLOR=2;k.BITSET_LINE_SCALE_DASH=4;k.BITSET_MARKER_ALIGNMENT_MAP=1;k.BITSET_MARKER_ALIGNMENT_SCREEN=0;k.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=4;k.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=8;k.BITSET_TYPE_FILL_OUTLINE=1;k.BUFFER_DATA_MINIMUM_SIZE=128;k.BUFFER_DATA_POOL_SIZE=4;k.COLLISION_BOX_PADDING=
16;k.COLLISION_BUCKET_SIZE=128;k.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;k.COLLISION_MAX_ZOOM_DELTA=1;k.COLLISION_PLACEMENT_PADDING=8;k.COLLISION_TILE_BOX_SIZE=4;k.DEBUG_LABELS=!1;k.DISPLAY_RECORD_INT_PER_ELEMENT=8;k.DOT_DENSITY_MAX_FIELDS=8;k.EFFECT_FLAG_0=4;k.ENABLE_EARLY_LABEL_DISCARD=!1;k.EXTRUDE_SCALE=64;k.FILTER_FLAG_0=2;k.GLYPH_SIZE=24;k.HEURISTIC_GLYPHS_PER_FEATURE=10;k.HEURISTIC_GLYPHS_PER_LINE=50;k.HIGHLIGHT_FLAG=1;k.HITTEST_SEARCH_SIZE=6;k.MAGIC_LABEL_LINE_HEIGHT=29;k.MAX_FILTERS=2;k.MAX_GPU_UPLOADS_PER_FRAME=
2;k.MIN_MAX_ZOOM_PRECISION_FACTOR=10;k.NAN_MAGIC_NUMBER=1E-30;k.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;k.PICTURE_FILL_COLOR=4294967295;k.RASTER_TILE_SIZE=256;k.SPRITE_PADDING=2;k.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;k.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;k.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;k.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;k.TEXTURE_BINDING_BITMAP=0;k.TEXTURE_BINDING_GLYPH_ATLAS=0;k.TEXTURE_BINDING_HIGHLIGHT_0=5;k.TEXTURE_BINDING_HIGHLIGHT_1=6;k.TEXTURE_BINDING_RENDERER_0=5;k.TEXTURE_BINDING_RENDERER_1=
6;k.TEXTURE_BINDING_SPRITE_ATLAS=0;k.TEXT_PLACEMENT_PADDING=8;k.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;k.TILE_SIZE=512;k.VTL_HIGH_RES_CUTOFF=1.15;k.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;k.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;k.WEBGL_MAX_INNER_STOPS=6;k.WEBGL_MAX_STOPS=8;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["../../core/maybe","./context-util"],function(k,u){function p(){const g={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,
supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var h=document.createElement("canvas");if(!h)return g;var e=u.createContext(h,1,{failIfMajorPerformanceCaveat:!0});k.isNone(e)&&(e=u.createContext(h,1),k.isSome(e)&&(g.majorPerformanceCaveat=!0));if(k.isNone(e))return g;h=e.getParameter(e.VERSION);if(!h)return g;if(h=h.match(/^WebGL\s+([\d.]*)/)){h=
parseFloat(h[1]);g.available=.94<=h;if(h=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT))g.supportsHighPrecisionFragment=0<h.precision;g.supportsVertexShaderSamplers=0<e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);g.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint");g.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives");g.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays");g.supportsTextureFloat=null!==e.getExtension("OES_texture_float");
g.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float")&&null!==e.getExtension("EXT_float_blend")}g.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE);(e=document.createElement("canvas"))?(e=u.createContext(e,2),e=k.isSome(e)?!0:!1):e=!1;g.version=e?2:1;return g}let b;return function(){b||(b=p());return b}})},"esri/views/webgl/context-util":function(){define(["exports","../../core/maybe"],function(k,u){function p(g,h,e={}){h=1===h?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:
["webgl2"];let c=null;for(const n of h){try{c=g.getContext(n,e)}catch(f){}if(c)break}return c}function b(g,h){(g=g.parentNode)&&(g.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+h+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}k.createContext=p;k.createContextOrErrorHTML=function(g,h,e={}){if(!window.WebGLRenderingContext)return b(g,
'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;h=p(g,h,e);u.isNone(h)&&b(g,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return h};Object.defineProperty(k,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/lang ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(k,
u,p,b,g,h,e,c,n,f,m,t,G,C,E,B,N,F,L,D,A,r,w,x,z,y,I,J,M,P,R,Z,X){h=function(V){function aa(...K){K=V.call(this,...K)||this;K._spriteSourceMap=new Map;K.currentStyleInfo=null;K.style=null;K.isReference=null;K.operationalLayerType="VectorTileLayer";K.type="vector-tile";K.url=null;K.symbolCollisionBoxesVisible=!1;K.path=null;return K}k._inheritsLoose(aa,V);var T=aa.prototype;T.normalizeCtorArgs=function(K,O){return"string"===typeof K?{url:K,...O}:K};T.destroy=function(){this._spriteSourceMap.clear()};
T.prefetchResources=function(){var K=k._asyncToGenerator(function*(O){yield this.loadSpriteSource(globalThis.devicePixelRatio||1,O)});return function(O){return K.apply(this,arguments)}}();T.load=function(K){var O=this;const U=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},K).catch(e.throwIfAbortError).then(k._asyncToGenerator(function*(){if(O.portalItem&&O.portalItem.id){var W=`${O.portalItem.itemUrl}/resources/styles/root.json`;(yield p(W,{...K,query:{f:"json",...O.customParameters,
token:O.apiKey}})).data&&O.read({url:W},M.createForItem(O.portalItem))}})).catch(e.throwIfAbortError).then(()=>this._loadStyle(K));this.addResolvingPromise(U);return Promise.resolve(this)};T.writeStyleUrl=function(K,O){K&&c.isProtocolRelative(K)&&(K=`https:${K}`);O.styleUrl=K};T.readVersion=function(K,O){return O.version?parseFloat(O.version):parseFloat(O.currentVersion)};T.loadSpriteSource=function(){var K=k._asyncToGenerator(function*(O=1,U){if(!this._spriteSourceMap.has(O)){var W;const fa=X(),
ha=null!=(W=this.currentStyleInfo)&&W.spriteUrl?c.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;W=new y(ha,O,fa.maxTextureSize,this.currentStyleInfo.spriteFormat);yield W.load(U);this._spriteSourceMap.set(O,W)}return Promise.resolve(this._spriteSourceMap.get(O))});return function(){return K.apply(this,arguments)}}();T.loadStyle=function(){var K=k._asyncToGenerator(function*(O,U){var W;const fa=O||this.style||this.url;if(this._loadingTask&&"string"===
typeof fa&&this.url===fa)return this._loadingTask.promise;null==(W=this._loadingTask)?void 0:W.abort();this._loadingTask=e.createTask(ha=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(fa,{signal:ha})},U);return this._loadingTask.promise});return function(O,U){return K.apply(this,arguments)}}();T.getStyleLayerId=function(K){return this.styleRepository.getStyleLayerId(K)};T.getStyleLayerIndex=function(K){return this.styleRepository.getStyleLayerIndex(K)};T.getPaintProperties=function(K){return g.clone(this.styleRepository.getPaintProperties(K))};
T.setPaintProperties=function(K,O){const U=this.styleRepository.isPainterDataDriven(K);this.styleRepository.setPaintProperties(K,O);const W=this.styleRepository.isPainterDataDriven(K);this.emit("paint-change",{layer:K,paint:O,isDataDriven:U||W})};T.getStyleLayer=function(K){return g.clone(this.styleRepository.getStyleLayer(K))};T.setStyleLayer=function(K,O){this.styleRepository.setStyleLayer(K,O);this.emit("style-layer-change",{layer:K,index:O})};T.deleteStyleLayer=function(K){this.styleRepository.deleteStyleLayer(K);
this.emit("delete-style-layer",{layer:K})};T.getLayoutProperties=function(K){return g.clone(this.styleRepository.getLayoutProperties(K))};T.setLayoutProperties=function(K,O){this.styleRepository.setLayoutProperties(K,O);this.emit("layout-change",{layer:K,layout:O})};T.setStyleLayerVisibility=function(K,O){this.styleRepository.setStyleLayerVisibility(K,O);this.emit("style-layer-visibility-change",{layer:K,visibility:O})};T.getStyleLayerVisibility=function(K){return this.styleRepository.getStyleLayerVisibility(K)};
T.write=function(K,O){return O&&O.origin&&!this.styleUrl?(O.messages&&O.messages.push(new b("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):V.prototype.write.call(this,K,O)};T.getTileUrl=function(K,O,U){return null};T._getSourceAndStyle=function(){var K=k._asyncToGenerator(function*(O,U){if(!O)throw Error("invalid style!");U=yield J.loadMetadata(O,{...U,query:{...this.customParameters,token:this.apiKey}});
"webp"!==U.spriteFormat||(yield z.checkWebPSupport("lossy"))||(U.spriteFormat="png");this._set("currentStyleInfo",{...U});"string"===typeof O?(this.url=O,this.style=null):(this.url=null,this.style=O);this._set("sourceNameToSource",U.sourceNameToSource);this._set("primarySource",U.sourceNameToSource[U.primarySourceName]);this._set("styleRepository",new Z(U.style));this.read(U.layerDefinition,{origin:"service"});this.emit("load-style")});return function(O,U){return K.apply(this,arguments)}}();T._getDefaultAttribution=
function(K){var O=K.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);K="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");if(O){var U=O[2]&&O[2].toLowerCase();if(U){O=O[1]||"";for(const W of K)if(W.toLowerCase().includes(U))return c.normalize(`//static.arcgis.com/attribution/Vector${O}/${W}`)}}};
T._loadStyle=function(){var K=k._asyncToGenerator(function*(O){var U,W;return null!=(U=null==(W=this._loadingTask)?void 0:W.promise)?U:this.loadStyle(null,O)});return function(O){return K.apply(this,arguments)}}();k._createClass(aa,[{key:"attributionDataUrl",get:function(){var K=this.currentStyleInfo;K=K&&K.serviceUrl&&c.urlToObject(K.serviceUrl);return K?(K=this._getDefaultAttribution(K.path))?c.addQueryParameters(K,{...this.customParameters,token:this.apiKey}):null:null}},{key:"capabilities",get:function(){const K=
this.primarySource;return K?K.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var K;return(null==(K=this.primarySource)?void 0:K.fullExtent)||null}},{key:"parsedUrl",get:function(){return this.serviceUrl?c.urlToObject(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||
null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"tileInfo",get:function(){var K;const O=[];for(var U in this.sourceNameToSource)O.push(this.sourceNameToSource[U]);U=(null==(K=this.primarySource)?void 0:K.tileInfo)||new I;if(1<O.length)for(K=0;K<O.length;K++)R.areSchemasOverlapping(U,O[K].tileInfo)&&(U=R.unionTileInfos(U,O[K].tileInfo));return U}},{key:"compatibleTileInfo256",get:function(){return P.create256x256CompatibleTileInfo(this.tileInfo)}},
{key:"compatibleTileInfo512",get:function(){return P.create512x512CompatibleTileInfo(this.tileInfo)}}]);return aa}(D.BlendLayer(x.ScaleRangeLayer(F.ArcGISCachedService(L.ArcGISService(r.OperationalLayer(w.PortalLayer(A.CustomParametersMixin(N.APIKeyMixin(h.MultiOriginJSONMixin(B))))))))));u.__decorate([n.property({readOnly:!0})],h.prototype,"attributionDataUrl",null);u.__decorate([n.property({type:["show","hide"]})],h.prototype,"listMode",void 0);u.__decorate([n.property({readOnly:!0,json:{read:!1}})],
h.prototype,"capabilities",null);u.__decorate([n.property({readOnly:!0})],h.prototype,"currentStyleInfo",void 0);u.__decorate([n.property({json:{read:!1},readOnly:!0,type:C})],h.prototype,"fullExtent",null);u.__decorate([n.property()],h.prototype,"style",void 0);u.__decorate([n.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],h.prototype,"isReference",void 0);u.__decorate([n.property({type:["VectorTileLayer"]})],h.prototype,"operationalLayerType",void 0);
u.__decorate([n.property({readOnly:!0})],h.prototype,"parsedUrl",null);u.__decorate([n.property({readOnly:!0})],h.prototype,"serviceUrl",null);u.__decorate([n.property({type:E,readOnly:!0})],h.prototype,"spatialReference",null);u.__decorate([n.property({readOnly:!0})],h.prototype,"styleRepository",void 0);u.__decorate([n.property({readOnly:!0})],h.prototype,"sourceNameToSource",void 0);u.__decorate([n.property({readOnly:!0})],h.prototype,"primarySource",void 0);u.__decorate([n.property({type:String,
readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],h.prototype,"styleUrl",null);u.__decorate([G.writer(["portal-item","web-document"],"styleUrl")],h.prototype,"writeStyleUrl",null);u.__decorate([n.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:I})],h.prototype,"tileInfo",null);u.__decorate([n.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],h.prototype,"type",void 0);u.__decorate([n.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},
"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],h.prototype,"url",void 0);u.__decorate([n.property({readOnly:!0})],h.prototype,"version",void 0);u.__decorate([m.reader("version",["version","currentVersion"])],h.prototype,"readVersion",null);u.__decorate([n.property({readOnly:!0})],h.prototype,"compatibleTileInfo256",null);u.__decorate([n.property({readOnly:!0})],h.prototype,"compatibleTileInfo512",null);u.__decorate([n.property({type:Boolean})],h.prototype,"symbolCollisionBoxesVisible",
void 0);u.__decorate([n.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],h.prototype,"path",void 0);return h=u.__decorate([t.subclass("esri.layers.VectorTileLayer")],h)});